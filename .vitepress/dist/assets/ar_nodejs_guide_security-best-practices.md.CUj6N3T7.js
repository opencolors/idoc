import{__plugin_vue_export_helper_default as e,createElementBlock as t,createStaticVNode as n,openBlock as r}from"./chunks/plugin-vue_export-helper.Bts1mPc7.js";const i=JSON.parse(`{"title":"أفضل ممارسات الأمان لتطبيقات Node.js","description":"دليل شامل لتأمين تطبيقات Node.js، يغطي نمذجة التهديدات، وأفضل الممارسات، وطرق التخفيف من الثغرات الشائعة مثل هجمات الحرمان من الخدمة، وإعادة ربط DNS، وكشف المعلومات الحساسة.","frontmatter":{"title":"أفضل ممارسات الأمان لتطبيقات Node.js","description":"دليل شامل لتأمين تطبيقات Node.js، يغطي نمذجة التهديدات، وأفضل الممارسات، وطرق التخفيف من الثغرات الشائعة مثل هجمات الحرمان من الخدمة، وإعادة ربط DNS، وكشف المعلومات الحساسة.","head":[["meta",{"name":"og:title","content":"أفضل ممارسات الأمان لتطبيقات Node.js | Node.js - iDoc.dev"}],["meta",{"name":"og:description","content":"دليل شامل لتأمين تطبيقات Node.js، يغطي نمذجة التهديدات، وأفضل الممارسات، وطرق التخفيف من الثغرات الشائعة مثل هجمات الحرمان من الخدمة، وإعادة ربط DNS، وكشف المعلومات الحساسة."}],["meta",{"name":"twitter:title","content":"أفضل ممارسات الأمان لتطبيقات Node.js | Node.js - iDoc.dev"}],["meta",{"name":"twitter:description","content":"دليل شامل لتأمين تطبيقات Node.js، يغطي نمذجة التهديدات، وأفضل الممارسات، وطرق التخفيف من الثغرات الشائعة مثل هجمات الحرمان من الخدمة، وإعادة ربط DNS، وكشف المعلومات الحساسة."}],["link",{"rel":"canonical","href":"https://idoc.dev/ar/nodejs/guide/security-best-practices"}],["meta",{"property":"og:url","content":"https://idoc.dev/ar/nodejs/guide/security-best-practices"}]]},"headers":[],"relativePath":"ar/nodejs/guide/security-best-practices.md","filePath":"ar/nodejs/guide/security-best-practices.md","lastUpdated":null}`),a={name:`ar/nodejs/guide/security-best-practices.md`};function o(e,i,a,o,s,c){return r(),t(`div`,null,i[0]||=[n(`<h1 id="أفضل-الممارسات-الأمنية" tabindex="-1">أفضل الممارسات الأمنية <a class="header-anchor" href="#أفضل-الممارسات-الأمنية" aria-label="Permalink to “أفضل الممارسات الأمنية”">​</a></h1><h3 id="الهدف" tabindex="-1">الهدف <a class="header-anchor" href="#الهدف" aria-label="Permalink to “الهدف”">​</a></h3><p>تهدف هذه الوثيقة إلى توسيع <a href="/ar/nodejs/guide/security-best-practices#threat-model">نموذج التهديد</a> الحالي وتوفير إرشادات شاملة حول كيفية تأمين تطبيق Node.js.</p><h2 id="محتوى-الوثيقة" tabindex="-1">محتوى الوثيقة <a class="header-anchor" href="#محتوى-الوثيقة" aria-label="Permalink to “محتوى الوثيقة”">​</a></h2><ul><li>أفضل الممارسات: طريقة مبسطة ومكثفة لرؤية أفضل الممارسات. يمكننا استخدام <a href="https://github.com/nodejs/security-wg/issues/488" target="_blank" rel="noreferrer">هذه المشكلة</a> أو <a href="https://github.com/goldbergyoni/nodebestpractices" target="_blank" rel="noreferrer">هذا الدليل</a> كنقطة انطلاق. من المهم ملاحظة أن هذه الوثيقة خاصة بـ Node.js، إذا كنت تبحث عن شيء واسع النطاق، ففكر في <a href="https://github.com/ossf/wg-best-practices-os-developers" target="_blank" rel="noreferrer">أفضل ممارسات OSSF</a>.</li><li>شرح الهجمات: توضيح وتوثيق باللغة الإنجليزية البسيطة مع بعض الأمثلة البرمجية (إذا أمكن) للهجمات التي نذكرها في نموذج التهديد.</li><li>مكتبات الطرف الثالث: تحديد التهديدات (هجمات التصيد بالأخطاء المطبعية، والحزم الضارة...) وأفضل الممارسات فيما يتعلق بتبعيات وحدات Node، وما إلى ذلك...</li></ul><h2 id="قائمة-التهديدات" tabindex="-1">قائمة التهديدات <a class="header-anchor" href="#قائمة-التهديدات" aria-label="Permalink to “قائمة التهديدات”">​</a></h2><h3 id="رفض-خدمة-خادم-http-cwe-400" tabindex="-1">رفض خدمة خادم HTTP (CWE-400) <a class="header-anchor" href="#رفض-خدمة-خادم-http-cwe-400" aria-label="Permalink to “رفض خدمة خادم HTTP (CWE-400)”">​</a></h3><p>هذا هجوم يصبح فيه التطبيق غير متاح للغرض الذي صُمم من أجله بسبب الطريقة التي يعالج بها طلبات HTTP الواردة. لا يلزم أن تكون هذه الطلبات مصممة عمدًا من قبل جهة خبيثة: يمكن لعميل تم تكوينه بشكل خاطئ أو به أخطاء أيضًا إرسال نمط من الطلبات إلى الخادم يؤدي إلى رفض الخدمة.</p><p>يتم استقبال طلبات HTTP بواسطة خادم Node.js HTTP وتسليمها إلى كود التطبيق عبر معالج الطلبات المسجل. لا يقوم الخادم بتحليل محتوى نص الطلب. لذلك، فإن أي DoS ناتج عن محتويات النص بعد تسليمها إلى معالج الطلبات ليس ثغرة أمنية في Node.js نفسه، حيث أن مسؤولية معالجتها بشكل صحيح تقع على عاتق كود التطبيق.</p><p>تأكد من أن WebServer يعالج أخطاء المقبس بشكل صحيح، على سبيل المثال، عندما يتم إنشاء خادم بدون معالج أخطاء، فسيكون عرضة لـ DoS.</p><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> net </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;node:net&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> server</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> net.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">createServer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">socket</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // socket.on(&#39;error&#39;, console.error)</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> // هذا يمنع الخادم من التعطل</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  socket.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">write</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;Echo server</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\r\\n</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  socket.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pipe</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(socket)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">server.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">listen</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">5000</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;0.0.0.0&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p><em>إذا تم إجراء طلب سيئ، فقد يتعطل الخادم.</em></p><p>مثال على هجوم DoS غير ناتج عن محتويات الطلب هو Slowloris. في هذا الهجوم، يتم إرسال طلبات HTTP ببطء ومجزأة، جزء واحد في كل مرة. حتى يتم تسليم الطلب بالكامل، سيحتفظ الخادم بالموارد المخصصة للطلب الجاري. إذا تم إرسال عدد كافٍ من هذه الطلبات في نفس الوقت، فسيصل مقدار الاتصالات المتزامنة قريبًا إلى الحد الأقصى مما يؤدي إلى رفض الخدمة. هذه هي الطريقة التي يعتمد بها الهجوم ليس على محتويات الطلب ولكن على توقيت ونمط الطلبات المرسلة إلى الخادم.</p><h4 id="تدابير-التخفيف" tabindex="-1">تدابير التخفيف <a class="header-anchor" href="#تدابير-التخفيف" aria-label="Permalink to “تدابير التخفيف”">​</a></h4><ul><li>استخدم وكيلًا عكسيًا لتلقي الطلبات وإعادة توجيهها إلى تطبيق Node.js. يمكن للوكلاء العكسيين توفير التخزين المؤقت، وموازنة التحميل، والقوائم السوداء لعناوين IP، وما إلى ذلك، مما يقلل من احتمالية فعالية هجوم DoS.</li><li>قم بتكوين مهلات الخادم بشكل صحيح، بحيث يمكن إسقاط الاتصالات الخاملة أو التي تصل فيها الطلبات ببطء شديد. راجع المهلات المختلفة في <code>http.Server</code>، وخاصة <code>headersTimeout</code> و <code>requestTimeout</code> و <code>timeout</code> و <code>keepAliveTimeout</code>.</li><li>قم بتقييد عدد المقابس المفتوحة لكل مضيف وإجمالاً. راجع <a href="/ar/nodejs/api/http">وثائق http</a>، وخاصة <code>agent.maxSockets</code> و <code>agent.maxTotalSockets</code> و <code>agent.maxFreeSockets</code> و <code>server.maxRequestsPerSocket</code>.</li></ul><h3 id="إعادة-ربط-dns-cwe-346" tabindex="-1">إعادة ربط DNS (CWE-346) <a class="header-anchor" href="#إعادة-ربط-dns-cwe-346" aria-label="Permalink to “إعادة ربط DNS (CWE-346)”">​</a></h3><p>هذا هجوم يمكن أن يستهدف تطبيقات Node.js التي يتم تشغيلها مع تمكين مصحح الأخطاء باستخدام <a href="/ar/nodejs/guide/debugging-nodejs">--inspect switch</a>.</p><p>نظرًا لأن مواقع الويب التي يتم فتحها في متصفح الويب يمكنها إجراء طلبات WebSocket و HTTP، فيمكنها استهداف مصحح الأخطاء قيد التشغيل محليًا. يتم منع هذا عادةً بواسطة <a href="/ar/nodejs/guide/debugging-nodejs">سياسة نفس المصدر</a> التي تنفذها المتصفحات الحديثة، والتي تمنع البرامج النصية من الوصول إلى الموارد من مصادر مختلفة (بمعنى أن موقعًا ضارًا لا يمكنه قراءة البيانات المطلوبة من عنوان IP محلي).</p><p>ومع ذلك، من خلال إعادة ربط DNS، يمكن للمهاجم التحكم مؤقتًا في أصل طلباتهم بحيث تبدو وكأنها تنشأ من عنوان IP محلي. يتم ذلك عن طريق التحكم في كل من موقع الويب وخادم DNS المستخدم لحل عنوان IP الخاص به. راجع <a href="https://en.wikipedia.org/wiki/DNS_rebinding" target="_blank" rel="noreferrer">ويكي إعادة ربط DNS</a> لمزيد من التفاصيل.</p><h4 id="تدابير-التخفيف-1" tabindex="-1">تدابير التخفيف <a class="header-anchor" href="#تدابير-التخفيف-1" aria-label="Permalink to “تدابير التخفيف”">​</a></h4><ul><li>قم بتعطيل المفتش على إشارة SIGUSR1 عن طريق إرفاق مستمع <code>process.on(&#39;SIGUSR1&#39;, ...)</code> به.</li><li>لا تقم بتشغيل بروتوكول المفتش في الإنتاج.</li></ul><h3 id="الكشف-عن-معلومات-حساسة-لجهة-غير-مصرح-لها-cwe-552" tabindex="-1">الكشف عن معلومات حساسة لجهة غير مصرح لها (CWE-552) <a class="header-anchor" href="#الكشف-عن-معلومات-حساسة-لجهة-غير-مصرح-لها-cwe-552" aria-label="Permalink to “الكشف عن معلومات حساسة لجهة غير مصرح لها (CWE-552)”">​</a></h3><p>يتم دفع جميع الملفات والمجلدات المضمنة في الدليل الحالي إلى سجل npm أثناء نشر الحزمة.</p><p>هناك بعض الآليات للتحكم في هذا السلوك عن طريق تحديد قائمة حظر باستخدام <code>.npmignore</code> و <code>.gitignore</code> أو عن طريق تحديد قائمة السماح في <code>package.json</code></p><h4 id="تدابير-التخفيف-2" tabindex="-1">تدابير التخفيف <a class="header-anchor" href="#تدابير-التخفيف-2" aria-label="Permalink to “تدابير التخفيف”">​</a></h4><ul><li>استخدام <code>npm publish --dry-run</code> لسرد جميع الملفات المراد نشرها. تأكد من مراجعة المحتوى قبل نشر الحزمة.</li><li>من المهم أيضًا إنشاء ملفات تجاهل مثل <code>.gitignore</code> و <code>.npmignore</code> والحفاظ عليها. يمكنك عبر هذه الملفات تحديد الملفات/المجلدات التي لا ينبغي نشرها. تسمح <a href="https://docs.npmjs.com/cli/v8/configuring-npm/package-json#files" target="_blank" rel="noreferrer">خاصية الملفات</a> في <code>package.json</code> بالعملية العكسية - قائمة &quot;مسموح&quot;.</li><li>في حالة التعرض، تأكد من <a href="https://docs.npmjs.com/unpublishing-packages-from-the-registry" target="_blank" rel="noreferrer">إلغاء نشر الحزمة</a>.</li></ul><h3 id="تهريب-طلبات-http-‏-cwe-444" tabindex="-1">تهريب طلبات HTTP ‏(CWE-444) <a class="header-anchor" href="#تهريب-طلبات-http-‏-cwe-444" aria-label="Permalink to “تهريب طلبات HTTP ‏(CWE-444)”">​</a></h3><p>هذا هجوم يتضمن خادمي HTTP (عادةً وكيل وتطبيق Node.js). يرسل العميل طلب HTTP يمر أولاً عبر خادم الواجهة الأمامية (الوكيل) ثم يتم إعادة توجيهه إلى خادم الواجهة الخلفية (التطبيق). عندما يفسر كل من الواجهة الأمامية والخلفية طلبات HTTP الغامضة بشكل مختلف، هناك احتمال لأن يرسل المهاجم رسالة ضارة لن تراها الواجهة الأمامية ولكن سترى الواجهة الخلفية، مما يؤدي فعليًا إلى &quot;تهريبها&quot; عبر الخادم الوكيل.</p><p>راجع <a href="https://cwe.mitre.org/data/definitions/444.html" target="_blank" rel="noreferrer">CWE-444</a> للحصول على وصف وأمثلة أكثر تفصيلاً.</p><p>نظرًا لأن هذا الهجوم يعتمد على تفسير Node.js لطلبات HTTP بشكل مختلف عن خادم HTTP (اعتباطي)، فقد يكون الهجوم الناجح ناتجًا عن ثغرة أمنية في Node.js أو خادم الواجهة الأمامية أو كليهما. إذا كانت الطريقة التي يفسر بها Node.js الطلب متوافقة مع مواصفات HTTP (راجع <a href="https://datatracker.ietf.org/doc/html/rfc7230#section-3" target="_blank" rel="noreferrer">RFC7230</a>)، فلن تعتبر ثغرة أمنية في Node.js.</p><h4 id="تدابير-التخفيف-3" tabindex="-1">تدابير التخفيف <a class="header-anchor" href="#تدابير-التخفيف-3" aria-label="Permalink to “تدابير التخفيف”">​</a></h4><ul><li>لا تستخدم الخيار <code>insecureHTTPParser</code> عند إنشاء خادم HTTP.</li><li>قم بتكوين خادم الواجهة الأمامية لتطبيع الطلبات الغامضة.</li><li>راقب باستمرار بحثًا عن نقاط ضعف جديدة في تهريب طلبات HTTP في كل من Node.js وخادم الواجهة الأمامية الذي تختاره.</li><li>استخدم HTTP/2 من النهاية إلى النهاية وقم بتعطيل خفض مستوى HTTP إذا أمكن.</li></ul><h3 id="التعرض-للمعلومات-من-خلال-هجمات-التوقيت-cwe-208" tabindex="-1">التعرض للمعلومات من خلال هجمات التوقيت (CWE-208) <a class="header-anchor" href="#التعرض-للمعلومات-من-خلال-هجمات-التوقيت-cwe-208" aria-label="Permalink to “التعرض للمعلومات من خلال هجمات التوقيت (CWE-208)”">​</a></h3><p>هذا هجوم يسمح للمهاجم بتعلم معلومات حساسة محتملة عن طريق، على سبيل المثال، قياس المدة التي يستغرقها التطبيق للاستجابة لطلب ما. هذا الهجوم ليس خاصًا بـ Node.js ويمكن أن يستهدف جميع أوقات التشغيل تقريبًا.</p><p>الهجوم ممكن كلما استخدم التطبيق سرًا في عملية حساسة للتوقيت (مثل، التفرع). ضع في اعتبارك التعامل مع المصادقة في تطبيق نموذجي. هنا، تتضمن طريقة المصادقة الأساسية البريد الإلكتروني وكلمة المرور كبيانات اعتماد. يتم استرداد معلومات المستخدم من الإدخال الذي قدمه المستخدم من DBMS مثاليًا. عند استرداد معلومات المستخدم، تتم مقارنة كلمة المرور بمعلومات المستخدم المستردة من قاعدة البيانات. يستغرق استخدام مقارنة السلسلة المضمنة وقتًا أطول للقيم ذات الطول نفسه. هذه المقارنة، عند تشغيلها لمقدار مقبول، تزيد عن غير قصد من وقت استجابة الطلب. من خلال مقارنة أوقات استجابة الطلب، يمكن للمهاجم تخمين طول وقيمة كلمة المرور في كمية كبيرة من الطلبات.</p><h4 id="التخفيفات" tabindex="-1">التخفيفات <a class="header-anchor" href="#التخفيفات" aria-label="Permalink to “التخفيفات”">​</a></h4><ul><li>تعرض واجهة برمجة تطبيقات التشفير وظيفة <code>timingSafeEqual</code> لمقارنة القيم الحساسة الفعلية والمتوقعة باستخدام خوارزمية ذات وقت ثابت.</li><li>لمقارنة كلمات المرور، يمكنك استخدام <code>scrypt</code> [/api/crypto] المتاح أيضًا في وحدة التشفير الأصلية.</li><li>بشكل عام، تجنب استخدام الأسرار في العمليات ذات الوقت المتغير. يتضمن ذلك التفرع على الأسرار، وعندما يمكن للمهاجم أن يكون موجودًا في نفس البنية التحتية (على سبيل المثال، نفس الجهاز السحابي)، باستخدام سر كفهرس في الذاكرة. كتابة التعليمات البرمجية ذات الوقت الثابت في JavaScript أمر صعب (ويرجع ذلك جزئيًا إلى JIT). لتطبيقات التشفير، استخدم واجهات برمجة تطبيقات التشفير المضمنة أو WebAssembly (للخوارزميات غير المنفذة أصلاً).</li></ul><h3 id="وحدات-الطرف-الثالث-الضارة-cwe-1357" tabindex="-1">وحدات الطرف الثالث الضارة (CWE-1357) <a class="header-anchor" href="#وحدات-الطرف-الثالث-الضارة-cwe-1357" aria-label="Permalink to “وحدات الطرف الثالث الضارة (CWE-1357)”">​</a></h3><p>حاليًا، في Node.js، يمكن لأي حزمة الوصول إلى موارد قوية مثل الوصول إلى الشبكة. علاوة على ذلك، نظرًا لأن لديهم أيضًا حق الوصول إلى نظام الملفات، فيمكنهم إرسال أي بيانات إلى أي مكان.</p><p>تتمتع جميع التعليمات البرمجية التي تعمل في عملية عقدة القدرة على تحميل وتشغيل تعليمات برمجية عشوائية إضافية باستخدام <code>eval()</code> (أو ما يعادلها). يمكن لجميع التعليمات البرمجية التي لديها حق الوصول للكتابة إلى نظام الملفات تحقيق نفس الشيء عن طريق الكتابة إلى ملفات جديدة أو موجودة يتم تحميلها.</p><p>لدى Node.js <a href="/ar/nodejs/api/permissions">آلية سياسة</a> تجريبية¹ للإعلان عن المورد الذي تم تحميله على أنه غير موثوق به أو موثوق به. ومع ذلك، هذه السياسة غير مفعلة بشكل افتراضي. تأكد من تثبيت إصدارات التبعية وتشغيل عمليات فحص تلقائية بحثًا عن الثغرات الأمنية باستخدام مهام سير عمل شائعة أو نصوص npm. قبل تثبيت حزمة، تأكد من أن هذه الحزمة تتم صيانتها وتتضمن كل المحتوى الذي توقعته. كن حذرًا، رمز مصدر GitHub ليس دائمًا هو نفسه الرمز المنشور، وتحقق منه في <code>node_modules</code>.</p><h4 id="هجمات-سلسلة-التوريد" tabindex="-1">هجمات سلسلة التوريد <a class="header-anchor" href="#هجمات-سلسلة-التوريد" aria-label="Permalink to “هجمات سلسلة التوريد”">​</a></h4><p>تحدث هجمة سلسلة التوريد على تطبيق Node.js عندما يتم اختراق أحد تبعياته (سواء كانت مباشرة أو متعدية). يمكن أن يحدث هذا إما بسبب تساهل التطبيق المفرط في تحديد التبعيات (مما يسمح بتحديثات غير مرغوب فيها) و/أو الأخطاء الإملائية الشائعة في التحديد (معرضة لـ <a href="https://en.wikipedia.org/wiki/Typosquatting" target="_blank" rel="noreferrer">التصيد المطبعي</a>).</p><p>يمكن للمهاجم الذي يسيطر على حزمة المنبع نشر إصدار جديد يحتوي على تعليمات برمجية ضارة. إذا كان تطبيق Node.js يعتمد على هذه الحزمة دون أن يكون صارمًا بشأن الإصدار الآمن للاستخدام، فيمكن تحديث الحزمة تلقائيًا إلى أحدث إصدار ضار، مما يعرض التطبيق للخطر.</p><p>يمكن أن تحتوي التبعيات المحددة في ملف <code>package.json</code> على رقم إصدار دقيق أو نطاق. ومع ذلك، عند تثبيت تبعية على إصدار دقيق، لا يتم تثبيت تبعياتها المتعدية نفسها. هذا لا يزال يترك التطبيق عرضة للتحديثات غير المرغوب فيها/غير المتوقعة.</p><p>نواقل الهجوم المحتملة:</p><ul><li>هجمات التصيد المطبعي</li><li>تسميم ملف القفل</li><li>صيانة مُخترقة</li><li>حزم ضارة</li><li>ارتباكات التبعية</li></ul><h5 id="التخفيفات-1" tabindex="-1">التخفيفات <a class="header-anchor" href="#التخفيفات-1" aria-label="Permalink to “التخفيفات”">​</a></h5><ul><li>منع npm من تنفيذ برامج نصية عشوائية باستخدام <code>--ignore-scripts</code><ul><li>بالإضافة إلى ذلك، يمكنك تعطيله عالميًا باستخدام <code>npm config set ignore-scripts true</code></li></ul></li><li>قم بتثبيت إصدارات التبعية على إصدار ثابت محدد، وليس إصدارًا يمثل نطاقًا أو من مصدر قابل للتغيير.</li><li>استخدم ملفات القفل، التي تثبت كل تبعية (مباشرة ومتعدية). <ul><li>استخدم <a href="https://blog.ulisesgascon.com/lockfile-posioned" target="_blank" rel="noreferrer">تخفيفات لتسميم ملف القفل</a>.</li></ul></li><li>أتمتة عمليات التحقق من الثغرات الأمنية الجديدة باستخدام CI، باستخدام أدوات مثل <a href="https://www.npmjs.com/package/npm-audit" target="_blank" rel="noreferrer">npm-audit</a>. <ul><li>يمكن استخدام أدوات مثل <code>Socket</code> لتحليل الحزم باستخدام التحليل الثابت للعثور على سلوكيات محفوفة بالمخاطر مثل الوصول إلى الشبكة أو نظام الملفات.</li></ul></li><li>استخدم <code>npm ci</code> بدلاً من <code>npm install</code>. هذا يفرض ملف القفل بحيث أن التناقضات بينه وبين ملف <code>package.json</code> تتسبب في حدوث خطأ (بدلاً من تجاهل ملف القفل بصمت لصالح <code>package.json</code>).</li><li>تحقق بعناية من ملف <code>package.json</code> بحثًا عن أخطاء/أخطاء إملائية في أسماء التبعيات.</li></ul><h3 id="خرق-الوصول-إلى-الذاكرة-cwe-284" tabindex="-1">خرق الوصول إلى الذاكرة (CWE-284) <a class="header-anchor" href="#خرق-الوصول-إلى-الذاكرة-cwe-284" aria-label="Permalink to “خرق الوصول إلى الذاكرة (CWE-284)”">​</a></h3><p>تعتمد الهجمات القائمة على الذاكرة أو القائمة على الكومة على مزيج من أخطاء إدارة الذاكرة ومخصص ذاكرة قابل للاستغلال. مثل جميع وقت التشغيل، فإن Node.js عرضة لهذه الهجمات إذا كانت مشاريعك تعمل على جهاز مشترك. يعد استخدام كومة آمنة مفيدًا لمنع تسرب المعلومات الحساسة بسبب تجاوزات المؤشر والتقصيرات.</p><p>لسوء الحظ، لا تتوفر كومة آمنة على نظام التشغيل Windows. يمكن العثور على مزيد من المعلومات في وثائق <a href="/ar/nodejs/api/cli">الكومة الآمنة</a> الخاصة بـ Node.js.</p><h4 id="التخفيفات-2" tabindex="-1">التخفيفات <a class="header-anchor" href="#التخفيفات-2" aria-label="Permalink to “التخفيفات”">​</a></h4><ul><li>استخدم <code>--secure-heap=n</code> اعتمادًا على تطبيقك حيث n هو الحد الأقصى لحجم البايت المخصص.</li><li>لا تقم بتشغيل تطبيق الإنتاج الخاص بك على جهاز مشترك.</li></ul><h3 id="تعديل-الرقعة-النشطة-cwe-349" tabindex="-1">تعديل الرقعة النشطة (CWE-349) <a class="header-anchor" href="#تعديل-الرقعة-النشطة-cwe-349" aria-label="Permalink to “تعديل الرقعة النشطة (CWE-349)”">​</a></h3><p>يشير تعديل الرقعة النشطة إلى تعديل الخصائص في وقت التشغيل بهدف تغيير السلوك الحالي. مثال:</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// eslint-disable-next-line no-extend-native</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Array</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">prototype</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">push</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">item</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // تجاوز [].push العالمي</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h4 id="التخفيفات-3" tabindex="-1">التخفيفات <a class="header-anchor" href="#التخفيفات-3" aria-label="Permalink to “التخفيفات”">​</a></h4><p>تعمل علامة <code>--frozen-intrinsics</code> على تمكين العناصر الداخلية المجمدة التجريبية¹، مما يعني تجميد جميع كائنات ووظائف JavaScript المضمنة بشكل متكرر. لذلك، لن يتجاوز المقتطف التالي السلوك الافتراضي لـ <code>Array.prototype.push</code></p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// eslint-disable-next-line no-extend-native</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Array</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">prototype</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">push</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">item</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // تجاوز [].push العالمي</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// غير معلوم:</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// TypeError &lt;Object &lt;Object &lt;[Object: null prototype] {}&gt;&gt;&gt;:</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// لا يمكن التعيين إلى خاصية &#39;push&#39; للقراءة فقط للكائن &#39;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>ومع ذلك، من المهم ذكر أنه لا يزال بإمكانك تحديد متغيرات عمومية جديدة واستبدال المتغيرات العمومية الحالية باستخدام <code>globalThis</code></p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">globalThis.foo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">foo</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">//</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> لا</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> يزال</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> بإمكانك</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> تحديد</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> متغيرات</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> عمومية</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> جديدة</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 3</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">globalThis.Array</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 4</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Array</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">//</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ومع</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ذلك،</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> يمكنك</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> أيضًا</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> استبدال</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> المتغيرات</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> العمومية</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> الحالية</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 4</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>لذلك، يمكن استخدام <code>Object.freeze(globalThis)</code> لضمان عدم استبدال أي متغيرات عمومية.</p><h3 id="هجمات-تلوث-النموذج-الأولي-cwe-1321" tabindex="-1">هجمات تلوث النموذج الأولي (CWE-1321) <a class="header-anchor" href="#هجمات-تلوث-النموذج-الأولي-cwe-1321" aria-label="Permalink to “هجمات تلوث النموذج الأولي (CWE-1321)”">​</a></h3><p>يشير تلوث النموذج الأولي إلى إمكانية تعديل أو حقن الخصائص في عناصر لغة Javascript عن طريق إساءة استخدام _<em>proto</em> و _constructor والنموذج الأولي والخصائص الأخرى الموروثة من النماذج الأولية المضمنة.</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> a</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { a: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, b: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> data</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> JSON</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">parse</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;{&quot;__proto__&quot;: { &quot;polluted&quot;: true}}&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> c</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Object.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">assign</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({}, a, data)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(c.polluted) </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// true</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// DoS المحتملة</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> data2</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> JSON</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">parse</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;{&quot;__proto__&quot;: null}&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> d</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Object.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">assign</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(a, data2)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">d.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">hasOwnProperty</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;b&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// TypeError غير معلوم: d.hasOwnProperty ليست دالة</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>هذه ثغرة أمنية محتملة موروثة من لغة JavaScript.</p><h4 id="أمثلة" tabindex="-1">أمثلة <a class="header-anchor" href="#أمثلة" aria-label="Permalink to “أمثلة”">​</a></h4><ul><li><a href="https://www.cvedetails.com/cve/CVE-2022-21824/" target="_blank" rel="noreferrer">CVE-2022-21824</a> (Node.js)</li><li><a href="https://www.cvedetails.com/cve/CVE-2018-3721/" target="_blank" rel="noreferrer">CVE-2018-3721</a> (مكتبة طرف ثالث: Lodash)</li></ul><h4 id="إجراءات-التخفيف" tabindex="-1">إجراءات التخفيف <a class="header-anchor" href="#إجراءات-التخفيف" aria-label="Permalink to “إجراءات التخفيف”">​</a></h4><ul><li>تجنب <a href="https://gist.github.com/DaniAkash/b3d7159fddcff0a9ee035bd10e34b277#file-unsafe-merge-js" target="_blank" rel="noreferrer">عمليات الدمج المتكررة غير الآمنة</a>، انظر <a href="https://www.cve.org/CVERecord?id=CVE-2018-16487" target="_blank" rel="noreferrer">CVE-2018-16487</a>.</li><li>قم بتطبيق عمليات التحقق من صحة JSON Schema للطلبات الخارجية/غير الموثوق بها.</li><li>إنشاء كائنات بدون نموذج أولي باستخدام <code>Object.create(null)</code>.</li><li>تجميد النموذج الأولي: <code>Object.freeze(MyObject.prototype)</code>.</li><li>تعطيل خاصية <code>Object.prototype.__proto__</code> باستخدام علامة <code>--disable-proto</code>.</li><li>تحقق من وجود الخاصية مباشرة على الكائن، وليس من النموذج الأولي باستخدام <code>Object.hasOwn(obj, keyFromObj)</code>.</li><li>تجنب استخدام طرق من <code>Object.prototype</code>.</li></ul><h3 id="عنصر-مسار-البحث-غير-المتحكم-فيه-cwe-427" tabindex="-1">عنصر مسار البحث غير المتحكم فيه (CWE-427) <a class="header-anchor" href="#عنصر-مسار-البحث-غير-المتحكم-فيه-cwe-427" aria-label="Permalink to “عنصر مسار البحث غير المتحكم فيه (CWE-427)”">​</a></h3><p>يقوم Node.js بتحميل الوحدات النمطية باتباع <a href="/ar/nodejs/api/modules">خوارزمية حل الوحدة النمطية</a>. لذلك، يفترض أن الدليل الذي يتم فيه طلب الوحدة النمطية (تتطلب) موثوق به.</p><p>وبذلك، هذا يعني سلوك التطبيق المتوقع التالي. بافتراض هيكل الدليل التالي:</p><ul><li>app/ <ul><li>server.js</li><li>auth.js</li><li>auth</li></ul></li></ul><p>إذا كان server.js يستخدم <code>require(&#39;./auth&#39;)</code> فسيتبع خوارزمية حل الوحدة النمطية ويقوم بتحميل auth بدلاً من <code>auth.js</code>.</p><h4 id="إجراءات-التخفيف-1" tabindex="-1">إجراءات التخفيف <a class="header-anchor" href="#إجراءات-التخفيف-1" aria-label="Permalink to “إجراءات التخفيف”">​</a></h4><p>يمكن أن يؤدي استخدام <a href="/ar/nodejs/api/permissions">آلية السياسة مع التحقق من السلامة</a> التجريبية¹ إلى تجنب التهديد المذكور أعلاه. بالنسبة للدليل الموضح أعلاه، يمكن للمرء استخدام <code>policy.json</code> التالية</p><div class="language-json line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;resources&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;./app/auth.js&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;integrity&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;sha256-iuGZ6SFVFpMuHUcJciQTIKpIyaQVigMZlvg9Lx66HV8=&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    },</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;./app/server.js&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;dependencies&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        &quot;./auth&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;./app/auth.js&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      },</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;integrity&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;sha256-NPtLCQ0ntPPWgfVEgX46ryTNpdvTWdQPoZO3kHo0bKI=&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>لذلك، عند طلب وحدة auth، سيتحقق النظام من السلامة ويطرح خطأ إذا لم يتطابق مع الخطأ المتوقع.</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">»</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> node</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --experimental-policy=policy.json</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> app/server.js</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">node:internal/policy/sri:65</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">      throw</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> new</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ERR_SRI_PARSE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">str,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> str[prevIndex],</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> prevIndex</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">      ^</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">SyntaxError</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [ERR_SRI_PARSE]: Subresource Integrity string </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;sha256-iuGZ6SFVFpMuHUcJciQTIKpIyaQVigMZlvg9Lx66HV8=%&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> had an unexpected </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;%&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> at position 51</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    at</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> new</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> NodeError</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (node:internal/errors:393:5)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    at</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Object.parse</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (node:internal/policy/sri:65:13)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    at</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> processEntry</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (node:internal/policy/manifest:581:38)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    at</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Manifest.assertIntegrity</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (node:internal/policy/manifest:588:32)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    at</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Module._compile</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (node:internal/modules/cjs/loader:1119:21)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    at</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Module._extensions..js</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (node:internal/modules/cjs/loader:1213:10)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    at</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Module.load</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (node:internal/modules/cjs/loader:1037:32)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    at</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Module._load</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (node:internal/modules/cjs/loader:878:12)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    at</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Module.require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (node:internal/modules/cjs/loader:1061:19)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    at</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (node:internal/modules/cjs/helpers:99:18) {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  code:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;ERR_SRI_PARSE&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p>لاحظ، يوصى دائمًا باستخدام <code>--policy-integrity</code> لتجنب تغييرات السياسة.</p><h2 id="ميزات-تجريبية-في-الإنتاج" tabindex="-1">ميزات تجريبية في الإنتاج <a class="header-anchor" href="#ميزات-تجريبية-في-الإنتاج" aria-label="Permalink to “ميزات تجريبية في الإنتاج”">​</a></h2><p>لا يُنصح باستخدام الميزات التجريبية في الإنتاج. قد تعاني الميزات التجريبية من تغييرات جذرية إذا لزم الأمر، ووظائفها ليست مستقرة بشكل آمن. على الرغم من ذلك، فإننا نقدر ملاحظاتك بشكل كبير.</p><h2 id="أدوات-openssf" tabindex="-1">أدوات OpenSSF <a class="header-anchor" href="#أدوات-openssf" aria-label="Permalink to “أدوات OpenSSF”">​</a></h2><p>تقود <a href="https://www.openssf.org" target="_blank" rel="noreferrer">OpenSSF</a> العديد من المبادرات التي يمكن أن تكون مفيدة للغاية، خاصة إذا كنت تخطط لنشر حزمة npm. تتضمن هذه المبادرات:</p><ul><li><a href="https://securityscorecards.dev/" target="_blank" rel="noreferrer">بطاقة أداء OpenSSF</a> تقوم بطاقة الأداء بتقييم مشاريع مفتوحة المصدر باستخدام سلسلة من عمليات التحقق الآلية من المخاطر الأمنية. يمكنك استخدامه لتقييم نقاط الضعف والتبعيات في قاعدة التعليمات البرمجية الخاصة بك بشكل استباقي واتخاذ قرارات مستنيرة بشأن قبول نقاط الضعف.</li><li><a href="https://bestpractices.coreinfrastructure.org/en" target="_blank" rel="noreferrer">برنامج شارة أفضل الممارسات OpenSSF</a> يمكن للمشاريع أن تشهد ذاتيًا طوعًا من خلال وصف كيفية امتثالها لكل أفضل ممارسة. سيؤدي هذا إلى إنشاء شارة يمكن إضافتها إلى المشروع.</li></ul>`,87)])}var s=e(a,[[`render`,o]]);export{i as __pageData,s as default};