import{__plugin_vue_export_helper_default as e,createElementBlock as t,createStaticVNode as n,openBlock as r}from"./chunks/plugin-vue_export-helper.Bts1mPc7.js";const i=JSON.parse(`{"title":"Debug di Node.js","description":"Opzioni di debug di Node.js, comprese --inspect, --inspect-brk e --debug, nonché scenari di debug remoto e informazioni sul debugger legacy.","frontmatter":{"title":"Debug di Node.js","description":"Opzioni di debug di Node.js, comprese --inspect, --inspect-brk e --debug, nonché scenari di debug remoto e informazioni sul debugger legacy.","head":[["meta",{"name":"og:title","content":"Debug di Node.js | Node.js - iDoc.dev"}],["meta",{"name":"og:description","content":"Opzioni di debug di Node.js, comprese --inspect, --inspect-brk e --debug, nonché scenari di debug remoto e informazioni sul debugger legacy."}],["meta",{"name":"twitter:title","content":"Debug di Node.js | Node.js - iDoc.dev"}],["meta",{"name":"twitter:description","content":"Opzioni di debug di Node.js, comprese --inspect, --inspect-brk e --debug, nonché scenari di debug remoto e informazioni sul debugger legacy."}],["link",{"rel":"canonical","href":"https://idoc.dev/it/nodejs/guide/debugging-nodejs"}],["meta",{"property":"og:url","content":"https://idoc.dev/it/nodejs/guide/debugging-nodejs"}]]},"headers":[],"relativePath":"it/nodejs/guide/debugging-nodejs.md","filePath":"it/nodejs/guide/debugging-nodejs.md","lastUpdated":null}`),a={name:`it/nodejs/guide/debugging-nodejs.md`};function o(e,i,a,o,s,c){return r(),t(`div`,null,i[0]||=[n(`<h1 id="debugging-di-node-js" tabindex="-1">Debugging di Node.js <a class="header-anchor" href="#debugging-di-node-js" aria-label="Permalink to “Debugging di Node.js”">​</a></h1><p>Questa guida ti aiuterà ad iniziare il debugging delle tue app e script Node.js.</p><h2 id="abilitare-l-inspector" tabindex="-1">Abilitare l&#39;Inspector <a class="header-anchor" href="#abilitare-l-inspector" aria-label="Permalink to “Abilitare l&#39;Inspector”">​</a></h2><p>Quando viene avviato con l&#39;opzione <code>--inspect</code>, un processo Node.js rimane in ascolto di un client di debugging. Di default, ascolterà sull&#39;host e sulla porta <code>127.0.0.1:9229</code>. A ogni processo viene anche assegnato un UUID univoco.</p><p>I client Inspector devono conoscere e specificare l&#39;indirizzo host, la porta e l&#39;UUID per connettersi. Un URL completo avrà un aspetto simile a <code>ws://127.0.0.1:9229/0f2c936f-b1cd-4ac9-aab3-f63b0f33d55e</code>.</p><p>Node.js inizierà anche ad ascoltare i messaggi di debug se riceve un segnale <code>SIGUSR1</code>. ( <code>SIGUSR1</code> non è disponibile su Windows.) In Node.js 7 e versioni precedenti, questo attiva la legacy Debugger API. In Node.js 8 e versioni successive, attiverà l&#39;Inspector API.</p><h2 id="implicazioni-sulla-sicurezza" tabindex="-1">Implicazioni sulla sicurezza <a class="header-anchor" href="#implicazioni-sulla-sicurezza" aria-label="Permalink to “Implicazioni sulla sicurezza”">​</a></h2><p>Poiché il debugger ha pieno accesso all&#39;ambiente di esecuzione Node.js, un malintenzionato in grado di connettersi a questa porta potrebbe essere in grado di eseguire codice arbitrario per conto del processo Node.js. È importante comprendere le implicazioni sulla sicurezza dell&#39;esposizione della porta del debugger su reti pubbliche e private.</p><h3 id="esporre-pubblicamente-la-porta-di-debug-e-pericoloso" tabindex="-1">Esporre pubblicamente la porta di debug è pericoloso <a class="header-anchor" href="#esporre-pubblicamente-la-porta-di-debug-e-pericoloso" aria-label="Permalink to “Esporre pubblicamente la porta di debug è pericoloso”">​</a></h3><p>Se il debugger è associato a un indirizzo IP pubblico o a 0.0.0.0, tutti i client che possono raggiungere il tuo indirizzo IP saranno in grado di connettersi al debugger senza alcuna restrizione e saranno in grado di eseguire codice arbitrario.</p><p>Di default <code>node --inspect</code> si collega a 127.0.0.1. Devi fornire esplicitamente un indirizzo IP pubblico o 0.0.0.0, ecc., se intendi consentire connessioni esterne al debugger. Ciò potrebbe esporti a una potenziale minaccia alla sicurezza significativa. Ti suggeriamo di assicurarti che siano in atto firewall e controlli di accesso adeguati per prevenire un&#39;esposizione alla sicurezza.</p><p>Consulta la sezione su &#39;<a href="/it/nodejs/guide/debugging-nodejs#enabling-remote-debugging-scenarios">Abilitazione di scenari di debug remoto</a>&#39; per alcuni suggerimenti su come consentire in modo sicuro ai client di debug remoti di connettersi.</p><h3 id="le-applicazioni-locali-hanno-pieno-accesso-all-inspector" tabindex="-1">Le applicazioni locali hanno pieno accesso all&#39;inspector <a class="header-anchor" href="#le-applicazioni-locali-hanno-pieno-accesso-all-inspector" aria-label="Permalink to “Le applicazioni locali hanno pieno accesso all&#39;inspector”">​</a></h3><p>Anche se associ la porta dell&#39;inspector a 127.0.0.1 (l&#39;impostazione predefinita), tutte le applicazioni in esecuzione localmente sulla tua macchina avranno accesso illimitato. Questo è intenzionale per consentire ai debugger locali di potersi collegare comodamente.</p><h3 id="browser-websocket-e-politica-della-stessa-origine" tabindex="-1">Browser, WebSocket e politica della stessa origine <a class="header-anchor" href="#browser-websocket-e-politica-della-stessa-origine" aria-label="Permalink to “Browser, WebSocket e politica della stessa origine”">​</a></h3><p>I siti web aperti in un browser web possono effettuare richieste WebSocket e HTTP secondo il modello di sicurezza del browser. È necessaria una connessione HTTP iniziale per ottenere un ID di sessione debugger univoco. La politica della stessa origine impedisce ai siti web di effettuare questa connessione HTTP. Per una maggiore sicurezza contro gli <a href="https://en.wikipedia.org/wiki/DNS_rebinding" target="_blank" rel="noreferrer">attacchi di DNS rebinding</a>, Node.js verifica che gli header &#39;Host&#39; per la connessione specifichino un indirizzo IP o precisamente <code>localhost</code>.</p><p>Queste politiche di sicurezza impediscono la connessione a un server di debug remoto specificando il nome host. È possibile aggirare questa restrizione specificando l&#39;indirizzo IP oppure utilizzando tunnel ssh come descritto di seguito.</p><h2 id="client-inspector" tabindex="-1">Client Inspector <a class="header-anchor" href="#client-inspector" aria-label="Permalink to “Client Inspector”">​</a></h2><p>Un debugger CLI minimale è disponibile con node inspect myscript.js. Diversi strumenti commerciali e open source possono anche connettersi all&#39;Inspector di Node.js.</p><h3 id="chrome-devtools-55-microsoft-edge" tabindex="-1">Chrome DevTools 55+, Microsoft Edge <a class="header-anchor" href="#chrome-devtools-55-microsoft-edge" aria-label="Permalink to “Chrome DevTools 55+, Microsoft Edge”">​</a></h3><ul><li><strong>Opzione 1</strong>: Apri <code>chrome://inspect</code> in un browser basato su Chromium oppure <code>edge://inspect</code> in Edge. Fai clic sul pulsante Configura e assicurati che l&#39;host e la porta di destinazione siano elencati.</li><li><strong>Opzione 2</strong>: Copia l&#39;URL <code>devtoolsFrontendUrl</code> dall&#39;output di <code>/json/list</code> (vedi sopra) o il testo di suggerimento <code>--inspect</code> e incollalo in Chrome.</li></ul><p>Vedi <a href="https://github.com/ChromeDevTools/devtools-frontend" target="_blank" rel="noreferrer">https://github.com/ChromeDevTools/devtools-frontend</a>, <a href="https://www.microsoftedgeinsider.com" target="_blank" rel="noreferrer">https://www.microsoftedgeinsider.com</a> per maggiori informazioni.</p><h3 id="visual-studio-code-1-10" tabindex="-1">Visual Studio Code 1.10+ <a class="header-anchor" href="#visual-studio-code-1-10" aria-label="Permalink to “Visual Studio Code 1.10+”">​</a></h3><ul><li>Nel pannello Debug, fai clic sull&#39;icona delle impostazioni per aprire <code>.vscode/launch.json</code>. Seleziona &quot;Node.js&quot; per la configurazione iniziale.</li></ul><p>Vedi <a href="https://github.com/microsoft/vscode" target="_blank" rel="noreferrer">https://github.com/microsoft/vscode</a> per maggiori informazioni.</p><h3 id="jetbrains-webstorm-e-altri-ide-jetbrains" tabindex="-1">JetBrains WebStorm e altri IDE JetBrains <a class="header-anchor" href="#jetbrains-webstorm-e-altri-ide-jetbrains" aria-label="Permalink to “JetBrains WebStorm e altri IDE JetBrains”">​</a></h3><ul><li>Crea una nuova configurazione di debug Node.js e premi Debug. <code>--inspect</code> verrà utilizzato per impostazione predefinita per Node.js 7+. Per disabilitare, deseleziona <code>js.debugger.node.use.inspect</code> nel Registro IDE. Per saperne di più sull&#39;esecuzione e il debug di Node.js in WebStorm e altri IDE JetBrains, consulta la <a href="https://www.jetbrains.com/help/webstorm/running-and-debugging-node-js.html" target="_blank" rel="noreferrer">guida online di WebStorm</a>.</li></ul><h3 id="chrome-remote-interface" tabindex="-1">chrome-remote-interface <a class="header-anchor" href="#chrome-remote-interface" aria-label="Permalink to “chrome-remote-interface”">​</a></h3><ul><li>Libreria per semplificare le connessioni agli endpoint dell&#39;<a href="https://chromedevtools.github.io/debugger-protocol-viewer/v8/" target="_blank" rel="noreferrer">Inspector Protocol</a>. Vedi <a href="https://github.com/cyrus-and/chrome-remote-interface" target="_blank" rel="noreferrer">https://github.com/cyrus-and/chrome-remote-interface</a> per maggiori informazioni.</li></ul><h3 id="gitpod" tabindex="-1">Gitpod <a class="header-anchor" href="#gitpod" aria-label="Permalink to “Gitpod”">​</a></h3><ul><li>Avvia una configurazione di debug Node.js dalla vista <code>Debug</code> o premi <code>F5</code>. Istruzioni dettagliate</li></ul><p>Vedi <a href="https://www.gitpod.io" target="_blank" rel="noreferrer">https://www.gitpod.io</a> per maggiori informazioni.</p><h3 id="eclipse-ide-con-l-estensione-eclipse-wild-web-developer" tabindex="-1">Eclipse IDE con l&#39;estensione Eclipse Wild Web Developer <a class="header-anchor" href="#eclipse-ide-con-l-estensione-eclipse-wild-web-developer" aria-label="Permalink to “Eclipse IDE con l&#39;estensione Eclipse Wild Web Developer”">​</a></h3><ul><li>Da un file <code>.js</code>, scegli <code>Debug As... &gt; Node program</code>, oppure Crea una configurazione di debug per collegare il debugger all&#39;applicazione Node.js in esecuzione (già avviata con <code>--inspect</code>).</li></ul><p>Vedi <a href="https://eclipse.org/eclipseide" target="_blank" rel="noreferrer">https://eclipse.org/eclipseide</a> per maggiori informazioni.</p><h2 id="opzioni-della-riga-di-comando" tabindex="-1">Opzioni della riga di comando <a class="header-anchor" href="#opzioni-della-riga-di-comando" aria-label="Permalink to “Opzioni della riga di comando”">​</a></h2><p>La seguente tabella elenca l&#39;impatto di vari flag di runtime sul debug:</p><table tabindex="0"><thead><tr><th>Flag</th><th>Significato</th></tr></thead><tbody><tr><td><code>--inspect</code></td><td>Abilita il debug con Node.js Inspector. Ascolta sull&#39;indirizzo e la porta predefiniti (127.0.0.1:9229)</td></tr><tr><td><code>--inspect-brk</code></td><td>Abilita il debug con Node.js Inspector. Ascolta sull&#39;indirizzo e la porta predefiniti (127.0.0.1:9229); Interrompi prima che inizi il codice utente</td></tr><tr><td><code>--inspect=[host:port]</code></td><td>Abilita l&#39;agente inspector; Associa all&#39;indirizzo o al nome host (predefinito: 127.0.0.1); Ascolta sulla porta (predefinita: 9229)</td></tr><tr><td><code>--inspect-brk=[host:port]</code></td><td>Abilita l&#39;agente inspector; Associa all&#39;indirizzo o al nome host (predefinito: 127.0.0.1); Ascolta sulla porta (predefinita: 9229); Interrompi prima che inizi il codice utente</td></tr><tr><td><code>--inspect-wait</code></td><td>Abilita l&#39;agente inspector; Ascolta sull&#39;indirizzo e la porta predefiniti (127.0.0.1:9229); Attendi che venga collegato un debugger.</td></tr><tr><td><code>--inspect-wait=[host:port]</code></td><td>Abilita l&#39;agente inspector; Associa all&#39;indirizzo o al nome host (predefinito: 127.0.0.1); Ascolta sulla porta (predefinita: 9229); Attendi che venga collegato un debugger.</td></tr><tr><td><code>node inspect script.js</code></td><td>Genera un processo figlio per eseguire lo script dell&#39;utente con il flag --inspect; e utilizza il processo principale per eseguire il debugger CLI.</td></tr><tr><td><code>node inspect --port=xxxx script.js</code></td><td>Genera un processo figlio per eseguire lo script dell&#39;utente con il flag --inspect; e utilizza il processo principale per eseguire il debugger CLI. Ascolta sulla porta (predefinita: 9229)</td></tr></tbody></table><h2 id="abilitazione-di-scenari-di-debug-remoto" tabindex="-1">Abilitazione di scenari di debug remoto <a class="header-anchor" href="#abilitazione-di-scenari-di-debug-remoto" aria-label="Permalink to “Abilitazione di scenari di debug remoto”">​</a></h2><p>Raccomandiamo di non fare mai in modo che il debugger ascolti su un indirizzo IP pubblico. Se è necessario consentire connessioni di debug remoto, raccomandiamo invece l&#39;uso di tunnel ssh. Forniamo il seguente esempio solo a scopo illustrativo. Si prega di comprendere il rischio per la sicurezza di consentire l&#39;accesso remoto a un servizio privilegiato prima di procedere.</p><p>Supponiamo che tu stia eseguendo Node.js su una macchina remota, remote.example.com, che desideri poter eseguire il debug. Su quella macchina, dovresti avviare il processo node con l&#39;inspector che ascolta solo su localhost (l&#39;impostazione predefinita).</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">node</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --inspect</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> app.js</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>Ora, sulla tua macchina locale da cui desideri avviare una connessione client di debug, puoi impostare un tunnel ssh:</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ssh</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -L</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 9225:localhost:9229</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> remote.example.com</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>Questo avvia una sessione di tunnel ssh in cui una connessione alla porta 9221 sulla tua macchina locale verrà inoltrata alla porta 9229 su remote.example.com. Ora puoi collegare un debugger come Chrome DevTools o Visual Studio Code a localhost:9221, che dovrebbe essere in grado di eseguire il debug come se l&#39;applicazione Node.js fosse in esecuzione localmente.</p><h2 id="debugger-legacy" tabindex="-1">Debugger Legacy <a class="header-anchor" href="#debugger-legacy" aria-label="Permalink to “Debugger Legacy”">​</a></h2><p><strong>Il debugger legacy è stato deprecato a partire da Node.js 7.7.0. Si prega di utilizzare --inspect e Inspector invece.</strong></p><p>Quando avviato con gli switch <code>--debug</code> o <code>--debug-brk</code> nella versione 7 e precedenti, Node.js è in ascolto di comandi di debug definiti dal protocollo di debug V8 obsoleto su una porta TCP, per impostazione predefinita <code>5858</code>. Qualsiasi client debugger che parla questo protocollo può connettersi e eseguire il debug del processo in esecuzione; un paio di quelli popolari sono elencati di seguito.</p><p>Il protocollo di debug V8 non è più mantenuto o documentato.</p><h3 id="debugger-integrato" tabindex="-1">Debugger Integrato <a class="header-anchor" href="#debugger-integrato" aria-label="Permalink to “Debugger Integrato”">​</a></h3><p>Avvia <code>node debug script_name.js</code> per avviare il tuo script sotto il debugger a riga di comando integrato. Il tuo script viene avviato in un altro processo Node.js avviato con l&#39;opzione <code>--debug-brk</code>, e il processo Node.js iniziale esegue lo script <code>_debugger.js</code> e si connette al tuo target. Consulta <a href="/it/nodejs/api/debugger">docs</a> per maggiori informazioni.</p><h3 id="node-inspector" tabindex="-1">node-inspector <a class="header-anchor" href="#node-inspector" aria-label="Permalink to “node-inspector”">​</a></h3><p>Debugga la tua app Node.js con Chrome DevTools utilizzando un processo intermedio che traduce il <a href="https://chromedevtools.github.io/debugger-protocol-viewer/v8/" target="_blank" rel="noreferrer">Protocollo dell&#39;ispettore</a> utilizzato in Chromium nel protocollo V8 Debugger utilizzato in Node.js. Vedi <a href="https://github.com/node-inspector/node-inspector" target="_blank" rel="noreferrer">https://github.com/node-inspector/node-inspector</a> per maggiori informazioni.</p>`,53)])}var s=e(a,[[`render`,o]]);export{i as __pageData,s as default};