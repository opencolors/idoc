import{__plugin_vue_export_helper_default as e,createElementBlock as t,createStaticVNode as n,openBlock as r}from"./chunks/plugin-vue_export-helper.Bts1mPc7.js";const i=JSON.parse(`{"title":"Depuración de Node.js","description":"Opciones de depuración de Node.js, incluyendo --inspect, --inspect-brk y --debug, así como escenarios de depuración remota e información sobre el depurador heredado.","frontmatter":{"title":"Depuración de Node.js","description":"Opciones de depuración de Node.js, incluyendo --inspect, --inspect-brk y --debug, así como escenarios de depuración remota e información sobre el depurador heredado.","head":[["meta",{"name":"og:title","content":"Depuración de Node.js | Node.js - iDoc.dev"}],["meta",{"name":"og:description","content":"Opciones de depuración de Node.js, incluyendo --inspect, --inspect-brk y --debug, así como escenarios de depuración remota e información sobre el depurador heredado."}],["meta",{"name":"twitter:title","content":"Depuración de Node.js | Node.js - iDoc.dev"}],["meta",{"name":"twitter:description","content":"Opciones de depuración de Node.js, incluyendo --inspect, --inspect-brk y --debug, así como escenarios de depuración remota e información sobre el depurador heredado."}],["link",{"rel":"canonical","href":"https://idoc.dev/es/nodejs/guide/debugging-nodejs"}],["meta",{"property":"og:url","content":"https://idoc.dev/es/nodejs/guide/debugging-nodejs"}]]},"headers":[],"relativePath":"es/nodejs/guide/debugging-nodejs.md","filePath":"es/nodejs/guide/debugging-nodejs.md","lastUpdated":1749464498000}`),a={name:`es/nodejs/guide/debugging-nodejs.md`};function o(e,i,a,o,s,c){return r(),t(`div`,null,i[0]||=[n(`<h1 id="depuracion-de-node-js" tabindex="-1">Depuración de Node.js <a class="header-anchor" href="#depuracion-de-node-js" aria-label="Permalink to “Depuración de Node.js”">​</a></h1><p>Esta guía te ayudará a empezar a depurar tus aplicaciones y scripts de Node.js.</p><h2 id="habilitar-el-inspector" tabindex="-1">Habilitar el Inspector <a class="header-anchor" href="#habilitar-el-inspector" aria-label="Permalink to “Habilitar el Inspector”">​</a></h2><p>Cuando se inicia con el modificador <code>--inspect</code>, un proceso de Node.js escucha a un cliente de depuración. Por defecto, escuchará en el host y puerto <code>127.0.0.1:9229</code>. A cada proceso también se le asigna un UUID único.</p><p>Los clientes del Inspector deben conocer y especificar la dirección del host, el puerto y el UUID para conectarse. Una URL completa se verá algo así: <code>ws://127.0.0.1:9229/0f2c936f-b1cd-4ac9-aab3-f63b0f33d55e</code>.</p><p>Node.js también empezará a escuchar mensajes de depuración si recibe una señal <code>SIGUSR1</code>. (La señal <code>SIGUSR1</code> no está disponible en Windows). En Node.js 7 y versiones anteriores, esto activa la API del Depurador heredado. En Node.js 8 y versiones posteriores, activará la API del Inspector.</p><h2 id="implicaciones-de-seguridad" tabindex="-1">Implicaciones de seguridad <a class="header-anchor" href="#implicaciones-de-seguridad" aria-label="Permalink to “Implicaciones de seguridad”">​</a></h2><p>Dado que el depurador tiene acceso completo al entorno de ejecución de Node.js, un actor malicioso capaz de conectarse a este puerto podría ejecutar código arbitrario en nombre del proceso de Node.js. Es importante comprender las implicaciones de seguridad de exponer el puerto del depurador en redes públicas y privadas.</p><h3 id="exponer-publicamente-el-puerto-de-depuracion-no-es-seguro" tabindex="-1">Exponer públicamente el puerto de depuración no es seguro <a class="header-anchor" href="#exponer-publicamente-el-puerto-de-depuracion-no-es-seguro" aria-label="Permalink to “Exponer públicamente el puerto de depuración no es seguro”">​</a></h3><p>Si el depurador está enlazado a una dirección IP pública, o a 0.0.0.0, cualquier cliente que pueda alcanzar tu dirección IP podrá conectarse al depurador sin ninguna restricción y podrá ejecutar código arbitrario.</p><p>Por defecto, <code>node --inspect</code> se enlaza a 127.0.0.1. Necesitas proporcionar explícitamente una dirección IP pública o 0.0.0.0, etc., si pretendes permitir conexiones externas al depurador. Hacerlo puede exponerte a una amenaza de seguridad potencialmente significativa. Te sugerimos que te asegures de que existen cortafuegos y controles de acceso adecuados para evitar una exposición a la seguridad.</p><p>Consulta la sección sobre &#39;<a href="/es/nodejs/guide/debugging-nodejs#enabling-remote-debugging-scenarios">Habilitación de escenarios de depuración remota</a>&#39; para obtener algunos consejos sobre cómo permitir de forma segura que los clientes de depuración remota se conecten.</p><h3 id="las-aplicaciones-locales-tienen-acceso-completo-al-inspector" tabindex="-1">Las aplicaciones locales tienen acceso completo al inspector <a class="header-anchor" href="#las-aplicaciones-locales-tienen-acceso-completo-al-inspector" aria-label="Permalink to “Las aplicaciones locales tienen acceso completo al inspector”">​</a></h3><p>Incluso si enlazas el puerto del inspector a 127.0.0.1 (el valor por defecto), cualquier aplicación que se ejecute localmente en tu máquina tendrá acceso sin restricciones. Esto es por diseño para permitir que los depuradores locales puedan adjuntarse convenientemente.</p><h3 id="navegadores-websockets-y-politica-del-mismo-origen" tabindex="-1">Navegadores, WebSockets y política del mismo origen <a class="header-anchor" href="#navegadores-websockets-y-politica-del-mismo-origen" aria-label="Permalink to “Navegadores, WebSockets y política del mismo origen”">​</a></h3><p>Los sitios web que se abren en un navegador web pueden realizar solicitudes WebSocket y HTTP bajo el modelo de seguridad del navegador. Se necesita una conexión HTTP inicial para obtener un ID de sesión de depuración único. La política del mismo origen impide que los sitios web puedan realizar esta conexión HTTP. Para mayor seguridad contra <a href="https://en.wikipedia.org/wiki/DNS_rebinding" target="_blank" rel="noreferrer">ataques de revinculación de DNS</a>, Node.js verifica que los encabezados &#39;Host&#39; para la conexión especifiquen una dirección IP o <code>localhost</code> precisamente.</p><p>Estas políticas de seguridad impiden la conexión a un servidor de depuración remoto especificando el nombre de host. Puede solucionar esta restricción especificando la dirección IP o utilizando túneles ssh como se describe a continuación.</p><h2 id="clientes-del-inspector" tabindex="-1">Clientes del Inspector <a class="header-anchor" href="#clientes-del-inspector" aria-label="Permalink to “Clientes del Inspector”">​</a></h2><p>Un depurador CLI mínimo está disponible con node inspect myscript.js. Varias herramientas comerciales y de código abierto también pueden conectarse al Inspector de Node.js.</p><h3 id="chrome-devtools-55-microsoft-edge" tabindex="-1">Chrome DevTools 55+, Microsoft Edge <a class="header-anchor" href="#chrome-devtools-55-microsoft-edge" aria-label="Permalink to “Chrome DevTools 55+, Microsoft Edge”">​</a></h3><ul><li><strong>Opción 1</strong>: Abra <code>chrome://inspect</code> en un navegador basado en Chromium o <code>edge://inspect</code> en Edge. Haga clic en el botón Configurar y asegúrese de que su host y puerto de destino estén en la lista.</li><li><strong>Opción 2</strong>: Copie el <code>devtoolsFrontendUrl</code> de la salida de <code>/json/list</code> (ver arriba) o el texto de sugerencia <code>--inspect</code> y péguelo en Chrome.</li></ul><p>Consulte <a href="https://github.com/ChromeDevTools/devtools-frontend" target="_blank" rel="noreferrer">https://github.com/ChromeDevTools/devtools-frontend</a>, <a href="https://www.microsoftedgeinsider.com" target="_blank" rel="noreferrer">https://www.microsoftedgeinsider.com</a> para obtener más información.</p><h3 id="visual-studio-code-1-10" tabindex="-1">Visual Studio Code 1.10+ <a class="header-anchor" href="#visual-studio-code-1-10" aria-label="Permalink to “Visual Studio Code 1.10+”">​</a></h3><ul><li>En el panel Depurar, haga clic en el icono de configuración para abrir <code>.vscode/launch.json</code>. Seleccione &quot;Node.js&quot; para la configuración inicial.</li></ul><p>Consulte <a href="https://github.com/microsoft/vscode" target="_blank" rel="noreferrer">https://github.com/microsoft/vscode</a> para obtener más información.</p><h3 id="jetbrains-webstorm-y-otros-ide-de-jetbrains" tabindex="-1">JetBrains WebStorm y otros IDE de JetBrains <a class="header-anchor" href="#jetbrains-webstorm-y-otros-ide-de-jetbrains" aria-label="Permalink to “JetBrains WebStorm y otros IDE de JetBrains”">​</a></h3><ul><li>Cree una nueva configuración de depuración de Node.js y pulse Depurar. <code>--inspect</code> se utilizará de forma predeterminada para Node.js 7+. Para deshabilitar, desmarque <code>js.debugger.node.use.inspect</code> en el Registro del IDE. Para obtener más información sobre cómo ejecutar y depurar Node.js en WebStorm y otros IDE de JetBrains, consulte <a href="https://www.jetbrains.com/help/webstorm/running-and-debugging-node-js.html" target="_blank" rel="noreferrer">ayuda en línea de WebStorm</a>.</li></ul><h3 id="chrome-remote-interface" tabindex="-1">chrome-remote-interface <a class="header-anchor" href="#chrome-remote-interface" aria-label="Permalink to “chrome-remote-interface”">​</a></h3><ul><li>Librería para facilitar las conexiones a los endpoints del <a href="https://chromedevtools.github.io/debugger-protocol-viewer/v8/" target="_blank" rel="noreferrer">Protocolo Inspector</a>. Ver <a href="https://github.com/cyrus-and/chrome-remote-interface" target="_blank" rel="noreferrer">https://github.com/cyrus-and/chrome-remote-interface</a> para más información.</li></ul><h3 id="gitpod" tabindex="-1">Gitpod <a class="header-anchor" href="#gitpod" aria-label="Permalink to “Gitpod”">​</a></h3><ul><li>Inicie una configuración de depuración de Node.js desde la vista <code>Debug</code> o presione <code>F5</code>. Instrucciones detalladas</li></ul><p>Ver <a href="https://www.gitpod.io" target="_blank" rel="noreferrer">https://www.gitpod.io</a> para más información.</p><h3 id="eclipse-ide-con-la-extension-eclipse-wild-web-developer" tabindex="-1">Eclipse IDE con la extensión Eclipse Wild Web Developer <a class="header-anchor" href="#eclipse-ide-con-la-extension-eclipse-wild-web-developer" aria-label="Permalink to “Eclipse IDE con la extensión Eclipse Wild Web Developer”">​</a></h3><ul><li>Desde un archivo <code>.js</code>, elija <code>Debug As... &gt; Node program</code>, o cree una configuración de depuración para adjuntar el depurador a la aplicación Node.js en ejecución (ya iniciada con <code>--inspect</code>).</li></ul><p>Ver <a href="https://eclipse.org/eclipseide" target="_blank" rel="noreferrer">https://eclipse.org/eclipseide</a> para más información.</p><h2 id="opciones-de-linea-de-comandos" tabindex="-1">Opciones de línea de comandos <a class="header-anchor" href="#opciones-de-linea-de-comandos" aria-label="Permalink to “Opciones de línea de comandos”">​</a></h2><p>La siguiente tabla enumera el impacto de varias flags de tiempo de ejecución en la depuración:</p><table tabindex="0"><thead><tr><th>Flag</th><th>Significado</th></tr></thead><tbody><tr><td><code>--inspect</code></td><td>Habilita la depuración con el Inspector de Node.js. Escucha en la dirección y el puerto predeterminados (127.0.0.1:9229)</td></tr><tr><td><code>--inspect-brk</code></td><td>Habilita la depuración con el Inspector de Node.js. Escucha en la dirección y el puerto predeterminados (127.0.0.1:9229); Interrumpe antes de que comience el código del usuario</td></tr><tr><td><code>--inspect=[host:port]</code></td><td>Habilita el agente inspector; Se une a la dirección o al nombre de host (predeterminado: 127.0.0.1); Escucha en el puerto (predeterminado: 9229)</td></tr><tr><td><code>--inspect-brk=[host:port]</code></td><td>Habilita el agente inspector; Se une a la dirección o al nombre de host (predeterminado: 127.0.0.1); Escucha en el puerto (predeterminado: 9229); Interrumpe antes de que comience el código del usuario</td></tr><tr><td><code>--inspect-wait</code></td><td>Habilita el agente inspector; Escucha en la dirección y el puerto predeterminados (127.0.0.1:9229); Espera a que se adjunte el depurador.</td></tr><tr><td><code>--inspect-wait=[host:port]</code></td><td>Habilita el agente inspector; Se une a la dirección o al nombre de host (predeterminado: 127.0.0.1); Escucha en el puerto (predeterminado: 9229); Espera a que se adjunte el depurador.</td></tr><tr><td><code>node inspect script.js</code></td><td>Engendra un proceso hijo para ejecutar el script del usuario bajo la flag --inspect; y usa el proceso principal para ejecutar el depurador CLI.</td></tr><tr><td><code>node inspect --port=xxxx script.js</code></td><td>Engendra un proceso hijo para ejecutar el script del usuario bajo la flag --inspect; y usa el proceso principal para ejecutar el depurador CLI. Escucha en el puerto (predeterminado: 9229)</td></tr></tbody></table><h2 id="habilitacion-de-escenarios-de-depuracion-remota" tabindex="-1">Habilitación de escenarios de depuración remota <a class="header-anchor" href="#habilitacion-de-escenarios-de-depuracion-remota" aria-label="Permalink to “Habilitación de escenarios de depuración remota”">​</a></h2><p>Recomendamos que nunca haga que el depurador escuche en una dirección IP pública. Si necesita permitir conexiones de depuración remota, recomendamos el uso de túneles ssh en su lugar. Proporcionamos el siguiente ejemplo solo con fines ilustrativos. Por favor, comprenda el riesgo de seguridad de permitir el acceso remoto a un servicio privilegiado antes de continuar.</p><p>Digamos que está ejecutando Node.js en una máquina remota, remote.example.com, que desea poder depurar. En esa máquina, debe iniciar el proceso de nodo con el inspector escuchando solo a localhost (el valor predeterminado).</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">node</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --inspect</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> app.js</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>Ahora, en su máquina local desde donde desea iniciar una conexión de cliente de depuración, puede configurar un túnel ssh:</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ssh</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -L</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 9225:localhost:9229</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> remote.example.com</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>Esto inicia una sesión de túnel ssh donde una conexión al puerto 9221 en su máquina local se reenviará al puerto 9229 en remote.example.com. Ahora puede adjuntar un depurador como Chrome DevTools o Visual Studio Code a localhost:9221, que debería poder depurar como si la aplicación Node.js se estuviera ejecutando localmente.</p><h2 id="depurador-legacy" tabindex="-1">Depurador Legacy <a class="header-anchor" href="#depurador-legacy" aria-label="Permalink to “Depurador Legacy”">​</a></h2><p><strong>El depurador legacy ha sido desaprobado a partir de Node.js 7.7.0. Por favor, use --inspect e Inspector en su lugar.</strong></p><p>Cuando se inicia con los modificadores <code>--debug</code> o <code>--debug-brk</code> en la versión 7 y anteriores, Node.js escucha los comandos de depuración definidos por el Protocolo de Depuración V8 descontinuado en un puerto TCP, por defecto <code>5858</code>. Cualquier cliente de depuración que hable este protocolo puede conectarse y depurar el proceso en ejecución; a continuación se enumeran algunos populares.</p><p>El Protocolo de Depuración V8 ya no se mantiene ni se documenta.</p><h3 id="depurador-integrado" tabindex="-1">Depurador integrado <a class="header-anchor" href="#depurador-integrado" aria-label="Permalink to “Depurador integrado”">​</a></h3><p>Inicie <code>node debug script_name.js</code> para iniciar su script bajo el depurador de línea de comandos integrado. Su script se inicia en otro proceso de Node.js iniciado con la opción <code>--debug-brk</code>, y el proceso inicial de Node.js ejecuta el script <code>_debugger.js</code> y se conecta a su objetivo. Consulte <a href="/es/nodejs/api/debugger">docs</a> para obtener más información.</p><h3 id="node-inspector" tabindex="-1">node-inspector <a class="header-anchor" href="#node-inspector" aria-label="Permalink to “node-inspector”">​</a></h3><p>Depura tu aplicación Node.js con las Chrome DevTools mediante un proceso intermediario que traduce el <a href="https://chromedevtools.github.io/debugger-protocol-viewer/v8/" target="_blank" rel="noreferrer">Protocolo del Inspector</a> utilizado en Chromium al protocolo V8 Debugger utilizado en Node.js. Consulta <a href="https://github.com/node-inspector/node-inspector" target="_blank" rel="noreferrer">https://github.com/node-inspector/node-inspector</a> para obtener más información.</p>`,53)])}var s=e(a,[[`render`,o]]);export{i as __pageData,s as default};