import{__plugin_vue_export_helper_default as e,createElementBlock as t,createStaticVNode as n,openBlock as r}from"./chunks/plugin-vue_export-helper.Bts1mPc7.js";const i=JSON.parse(`{"title":"Документация API файловой системы Node.js","description":"Подробное руководство по модулю файловой системы Node.js, описывающее методы для операций с файлами, такие как чтение, запись, открытие, закрытие, а также управление разрешениями и статистикой файлов.","frontmatter":{"title":"Документация API файловой системы Node.js","description":"Подробное руководство по модулю файловой системы Node.js, описывающее методы для операций с файлами, такие как чтение, запись, открытие, закрытие, а также управление разрешениями и статистикой файлов.","head":[["meta",{"name":"og:title","content":"Документация API файловой системы Node.js | Node.js - iDoc.dev"}],["meta",{"name":"og:description","content":"Подробное руководство по модулю файловой системы Node.js, описывающее методы для операций с файлами, такие как чтение, запись, открытие, закрытие, а также управление разрешениями и статистикой файлов."}],["meta",{"name":"twitter:title","content":"Документация API файловой системы Node.js | Node.js - iDoc.dev"}],["meta",{"name":"twitter:description","content":"Подробное руководство по модулю файловой системы Node.js, описывающее методы для операций с файлами, такие как чтение, запись, открытие, закрытие, а также управление разрешениями и статистикой файлов."}],["link",{"rel":"canonical","href":"https://idoc.dev/ru/nodejs/api/fs"}],["meta",{"property":"og:url","content":"https://idoc.dev/ru/nodejs/api/fs"}]]},"headers":[],"relativePath":"ru/nodejs/api/fs.md","filePath":"ru/nodejs/api/fs.md","lastUpdated":null}`),a={name:`ru/nodejs/api/fs.md`};function o(e,i,a,o,s,c){return r(),t(`div`,null,i[0]||=[n(`<h1 id="file-system" tabindex="-1">Файловая система <a class="header-anchor" href="#file-system" aria-label="Permalink to “Файловая система”">​</a></h1><div class="tip custom-block"><p class="custom-block-title">[Стабильно: 2 - Стабильно]</p><p><a href="/ru/nodejs/api/documentation#stability-index">Стабильно: 2</a> <a href="/ru/nodejs/api/documentation#stability-index">Стабильность: 2</a> - Стабильно</p></div><p><strong>Исходный код:</strong> <a href="https://github.com/nodejs/node/blob/v23.5.0/lib/fs.js" target="_blank" rel="noreferrer">lib/fs.js</a></p><p>Модуль <code>node:fs</code> обеспечивает взаимодействие с файловой системой способом, смоделированным на основе стандартных функций POSIX.</p><p>Для использования API на основе промисов:</p><div class="vp-code-group"><div class="tabs"><input type="radio" name="group-17" id="tab-18" checked><label data-title="ESM" for="tab-18">ESM</label><input type="radio" name="group-17" id="tab-19"><label data-title="CJS" for="tab-19">CJS</label></div><div class="blocks"><div class="language-js active line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> *</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> as</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> fs </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;node:fs/promises&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> fs</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;node:fs/promises&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div></div></div><p>Для использования API на основе колбэков и синхронных API:</p><div class="vp-code-group"><div class="tabs"><input type="radio" name="group-24" id="tab-25" checked><label data-title="ESM" for="tab-25">ESM</label><input type="radio" name="group-24" id="tab-26"><label data-title="CJS" for="tab-26">CJS</label></div><div class="blocks"><div class="language-js active line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> *</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> as</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> fs </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;node:fs&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> fs</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;node:fs&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div></div></div><p>Все операции с файловой системой имеют синхронные формы, формы на основе колбэков и на основе промисов и доступны с использованием как синтаксиса CommonJS, так и модулей ES6 (ESM).</p><h2 id="promise-example" tabindex="-1">Пример использования Promise <a class="header-anchor" href="#promise-example" aria-label="Permalink to “Пример использования Promise”">​</a></h2><p>Операции, основанные на промисах, возвращают промис, который выполняется при завершении асинхронной операции.</p><div class="vp-code-group"><div class="tabs"><input type="radio" name="group-37" id="tab-38" checked><label data-title="ESM" for="tab-38">ESM</label><input type="radio" name="group-37" id="tab-39"><label data-title="CJS" for="tab-39">CJS</label></div><div class="blocks"><div class="language-js active line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { unlink } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;node:fs/promises&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">try</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> unlink</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;/tmp/hello&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;successfully deleted /tmp/hello&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">} </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">catch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (error) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;there was an error:&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, error.message);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">unlink</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;node:fs/promises&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">async</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">path</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  try</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> unlink</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(path);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">\`successfully deleted \${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">path</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}\`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">catch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (error) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;there was an error:&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, error.message);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;/tmp/hello&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div></div></div><h2 id="callback-example" tabindex="-1">Пример использования Callback <a class="header-anchor" href="#callback-example" aria-label="Permalink to “Пример использования Callback”">​</a></h2><p>Форма колбэка принимает функцию обратного вызова завершения в качестве своего последнего аргумента и вызывает операцию асинхронно. Аргументы, передаваемые в обратный вызов завершения, зависят от метода, но первый аргумент всегда зарезервирован для исключения. Если операция завершена успешно, то первый аргумент равен <code>null</code> или <code>undefined</code>.</p><div class="vp-code-group"><div class="tabs"><input type="radio" name="group-47" id="tab-48" checked><label data-title="ESM" for="tab-48">ESM</label><input type="radio" name="group-47" id="tab-49"><label data-title="CJS" for="tab-49">CJS</label></div><div class="blocks"><div class="language-js active line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { unlink } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;node:fs&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">unlink</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;/tmp/hello&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">err</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (err) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">throw</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> err;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;successfully deleted /tmp/hello&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">unlink</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;node:fs&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">unlink</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;/tmp/hello&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">err</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (err) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">throw</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> err;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;successfully deleted /tmp/hello&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div></div></div><p>Версии API модуля <code>node:fs</code>, основанные на обратных вызовах, предпочтительнее использования API промисов, когда требуется максимальная производительность (как с точки зрения времени выполнения, так и с точки зрения выделения памяти).</p><h2 id="synchronous-example" tabindex="-1">Синхронный пример <a class="header-anchor" href="#synchronous-example" aria-label="Permalink to “Синхронный пример”">​</a></h2><p>Синхронные API блокируют цикл событий Node.js и дальнейшее выполнение JavaScript до завершения операции. Исключения выбрасываются немедленно и могут быть обработаны с помощью <code>try…catch</code>, или могут быть позволены всплывать.</p><div class="vp-code-group"><div class="tabs"><input type="radio" name="group-60" id="tab-61" checked><label data-title="ESM" for="tab-61">ESM</label><input type="radio" name="group-60" id="tab-62"><label data-title="CJS" for="tab-62">CJS</label></div><div class="blocks"><div class="language-js active line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { unlinkSync } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;node:fs&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">try</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  unlinkSync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;/tmp/hello&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;successfully deleted /tmp/hello&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">} </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">catch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (err) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // handle the error</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">unlinkSync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;node:fs&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">try</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  unlinkSync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;/tmp/hello&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;successfully deleted /tmp/hello&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">} </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">catch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (err) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // handle the error</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div></div></div><h2 id="promises-api" tabindex="-1">Promises API <a class="header-anchor" href="#promises-api" aria-label="Permalink to “Promises API”">​</a></h2><div class="info custom-block"><p class="custom-block-title">[История]</p><table tabindex="0"><thead><tr><th>Версия</th><th>Изменения</th></tr></thead><tbody><tr><td>v14.0.0</td><td>Предоставлен как <code>require(&#39;fs/promises&#39;)</code>.</td></tr><tr><td>v11.14.0, v10.17.0</td><td>Этот API больше не является экспериментальным.</td></tr><tr><td>v10.1.0</td><td>API доступен только через <code>require(&#39;fs&#39;).promises</code>.</td></tr><tr><td>v10.0.0</td><td>Добавлено в: v10.0.0</td></tr></tbody></table></div><p>API <code>fs/promises</code> предоставляет асинхронные методы файловой системы, которые возвращают промисы.</p><p>API промисов использует базовый пул потоков Node.js для выполнения операций файловой системы вне потока цикла событий. Эти операции не синхронизированы и не потокобезопасны. Следует проявлять осторожность при выполнении нескольких одновременных изменений одного и того же файла, иначе может произойти повреждение данных.</p><h3 id="class-filehandle" tabindex="-1">Класс: <code>FileHandle</code> <a class="header-anchor" href="#class-filehandle" aria-label="Permalink to “Класс: FileHandle”">​</a></h3><p><strong>Добавлено в: v10.0.0</strong></p><p>Объект <a href="/ru/nodejs/api/fs#class-filehandle">&lt;FileHandle&gt;</a> является объектной оберткой для числового файлового дескриптора.</p><p>Экземпляры объекта <a href="/ru/nodejs/api/fs#class-filehandle">&lt;FileHandle&gt;</a> создаются методом <code>fsPromises.open()</code>.</p><p>Все объекты <a href="/ru/nodejs/api/fs#class-filehandle">&lt;FileHandle&gt;</a> являются <a href="/ru/nodejs/api/events#class-eventemitter">&lt;EventEmitter&gt;</a>s.</p><p>Если <a href="/ru/nodejs/api/fs#class-filehandle">&lt;FileHandle&gt;</a> не закрыт с помощью метода <code>filehandle.close()</code>, он попытается автоматически закрыть файловый дескриптор и сгенерировать предупреждение процесса, помогая предотвратить утечки памяти. Пожалуйста, не полагайтесь на это поведение, потому что оно может быть ненадежным, и файл может быть не закрыт. Вместо этого всегда явно закрывайте <a href="/ru/nodejs/api/fs#class-filehandle">&lt;FileHandle&gt;</a>s. Node.js может изменить это поведение в будущем.</p><h4 id="event-close" tabindex="-1">Событие: <code>&#39;close&#39;</code> <a class="header-anchor" href="#event-close" aria-label="Permalink to “Событие: &#39;close&#39;”">​</a></h4><p><strong>Добавлено в версии: v15.4.0</strong></p><p>Событие <code>&#39;close&#39;</code> генерируется, когда <a href="/ru/nodejs/api/fs#class-filehandle">&lt;FileHandle&gt;</a> был закрыт и больше не может быть использован.</p><h4 id="filehandleappendfiledata-options" tabindex="-1"><code>filehandle.appendFile(data[, options])</code> <a class="header-anchor" href="#filehandleappendfiledata-options" aria-label="Permalink to “filehandle.appendFile(data[, options])”">​</a></h4><div class="info custom-block"><p class="custom-block-title">[История]</p><table tabindex="0"><thead><tr><th>Версия</th><th>Изменения</th></tr></thead><tbody><tr><td>v21.1.0, v20.10.0</td><td>Теперь поддерживается опция <code>flush</code>.</td></tr><tr><td>v15.14.0, v14.18.0</td><td>Аргумент <code>data</code> поддерживает <code>AsyncIterable</code>, <code>Iterable</code> и <code>Stream</code>.</td></tr><tr><td>v14.0.0</td><td>Параметр <code>data</code> больше не будет приводить неподдерживаемый ввод к строкам.</td></tr><tr><td>v10.0.0</td><td>Добавлено в версии: v10.0.0</td></tr></tbody></table></div><ul><li><p><code>data</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="/ru/nodejs/api/buffer#class-buffer">&lt;Buffer&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/TypedArray" target="_blank" rel="noreferrer">&lt;TypedArray&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/DataView" target="_blank" rel="noreferrer">&lt;DataView&gt;</a> | <a href="https://tc39.github.io/ecma262/#sec-asynciterable-interface" target="_blank" rel="noreferrer">&lt;AsyncIterable&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Iteration_protocols#The_iterable_protocol" target="_blank" rel="noreferrer">&lt;Iterable&gt;</a> | <a href="/ru/nodejs/api/stream#stream">&lt;Stream&gt;</a></p></li><li><p><code>options</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noreferrer">&lt;Object&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a></p><ul><li><code>encoding</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Null_type" target="_blank" rel="noreferrer">&lt;null&gt;</a> <strong>По умолчанию:</strong> <code>&#39;utf8&#39;</code></li><li><code>flush</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" target="_blank" rel="noreferrer">&lt;boolean&gt;</a> Если <code>true</code>, то базовый файловый дескриптор сбрасывается перед его закрытием. <strong>По умолчанию:</strong> <code>false</code>.</li></ul></li><li><p>Возвращает: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" target="_blank" rel="noreferrer">&lt;Promise&gt;</a> Разрешается с <code>undefined</code> при успехе.</p></li></ul><p>Псевдоним <a href="/ru/nodejs/api/fs#filehandlewritefiledata-options"><code>filehandle.writeFile()</code></a>.</p><p>При работе с файловыми дескрипторами режим не может быть изменен по сравнению с тем, который был установлен с помощью <a href="/ru/nodejs/api/fs#fspromisesopenpath-flags-mode"><code>fsPromises.open()</code></a>. Поэтому это эквивалентно <a href="/ru/nodejs/api/fs#filehandlewritefiledata-options"><code>filehandle.writeFile()</code></a>.</p><h4 id="filehandlechmodmode" tabindex="-1"><code>filehandle.chmod(mode)</code> <a class="header-anchor" href="#filehandlechmodmode" aria-label="Permalink to “filehandle.chmod(mode)”">​</a></h4><p><strong>Добавлено в: v10.0.0</strong></p><ul><li><code>mode</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;integer&gt;</a> битовая маска режима файла.</li><li>Возвращает: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" target="_blank" rel="noreferrer">&lt;Promise&gt;</a> Разрешается с <code>undefined</code> при успехе.</li></ul><p>Изменяет права доступа к файлу. См. <a href="http://man7.org/linux/man-pages/man2/chmod.2" target="_blank" rel="noreferrer"><code>chmod(2)</code></a>.</p><h4 id="filehandlechownuid-gid" tabindex="-1"><code>filehandle.chown(uid, gid)</code> <a class="header-anchor" href="#filehandlechownuid-gid" aria-label="Permalink to “filehandle.chown(uid, gid)”">​</a></h4><p><strong>Добавлено в: v10.0.0</strong></p><ul><li><code>uid</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;integer&gt;</a> Идентификатор пользователя нового владельца файла.</li><li><code>gid</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;integer&gt;</a> Идентификатор группы новой группы файла.</li><li>Возвращает: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" target="_blank" rel="noreferrer">&lt;Promise&gt;</a> Разрешается с <code>undefined</code> при успехе.</li></ul><p>Изменяет владельца файла. Обертка для <a href="http://man7.org/linux/man-pages/man2/chown.2" target="_blank" rel="noreferrer"><code>chown(2)</code></a>.</p><h4 id="filehandleclose" tabindex="-1"><code>filehandle.close()</code> <a class="header-anchor" href="#filehandleclose" aria-label="Permalink to “filehandle.close()”">​</a></h4><p><strong>Добавлено в: v10.0.0</strong></p><ul><li>Возвращает: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" target="_blank" rel="noreferrer">&lt;Promise&gt;</a> Разрешается с <code>undefined</code> при успехе.</li></ul><p>Закрывает дескриптор файла после ожидания завершения любых ожидающих операций с дескриптором.</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { open } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;node:fs/promises&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> filehandle;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">try</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  filehandle </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> open</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;thefile.txt&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;r&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">} </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">finally</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> filehandle?.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">close</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h4 id="filehandlecreatereadstreamoptions" tabindex="-1"><code>filehandle.createReadStream([options])</code> <a class="header-anchor" href="#filehandlecreatereadstreamoptions" aria-label="Permalink to “filehandle.createReadStream([options])”">​</a></h4><p><strong>Добавлено в: v16.11.0</strong></p><ul><li><p><code>options</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noreferrer">&lt;Object&gt;</a></p><ul><li><code>encoding</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> <strong>По умолчанию:</strong> <code>null</code></li><li><code>autoClose</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" target="_blank" rel="noreferrer">&lt;boolean&gt;</a> <strong>По умолчанию:</strong> <code>true</code></li><li><code>emitClose</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" target="_blank" rel="noreferrer">&lt;boolean&gt;</a> <strong>По умолчанию:</strong> <code>true</code></li><li><code>start</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;integer&gt;</a></li><li><code>end</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;integer&gt;</a> <strong>По умолчанию:</strong> <code>Infinity</code></li><li><code>highWaterMark</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;integer&gt;</a> <strong>По умолчанию:</strong> <code>64 * 1024</code></li><li><code>signal</code> <a href="/ru/nodejs/api/globals#class-abortsignal">&lt;AbortSignal&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Undefined_type" target="_blank" rel="noreferrer">&lt;undefined&gt;</a> <strong>По умолчанию:</strong> <code>undefined</code></li></ul></li><li><p>Возвращает: <a href="/ru/nodejs/api/fs#class-fsreadstream">&lt;fs.ReadStream&gt;</a></p></li></ul><p><code>options</code> может включать значения <code>start</code> и <code>end</code> для чтения диапазона байтов из файла вместо всего файла. И <code>start</code>, и <code>end</code> являются включительными и начинают отсчет с 0, допустимые значения находятся в диапазоне [0, <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number/MAX_SAFE_INTEGER" target="_blank" rel="noreferrer"><code>Number.MAX_SAFE_INTEGER</code></a>]. Если <code>start</code> опущен или <code>undefined</code>, <code>filehandle.createReadStream()</code> считывает последовательно с текущей позиции в файле. <code>encoding</code> может быть любым из тех, которые принимаются <a href="/ru/nodejs/api/buffer#class-buffer">&lt;Buffer&gt;</a>.</p><p>Если <code>FileHandle</code> указывает на символьное устройство, которое поддерживает только блокирующие чтения (например, клавиатура или звуковая карта), операции чтения не завершаются до тех пор, пока данные не станут доступны. Это может помешать процессу завершиться и потоку закрыться естественным образом.</p><p>По умолчанию поток будет генерировать событие <code>&#39;close&#39;</code> после его уничтожения. Установите для параметра <code>emitClose</code> значение <code>false</code>, чтобы изменить это поведение.</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { open } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;node:fs/promises&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> fd</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> open</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;/dev/input/event0&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Создайте поток из некоторого символьного устройства.</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> stream</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> fd.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">createReadStream</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setTimeout</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  stream.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">close</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Это может не закрыть поток.</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // Искусственное обозначение конца потока, как если бы базовый ресурс</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // самостоятельно указал на конец файла, позволяет закрыть поток.</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // Это не отменяет ожидающие операции чтения, и если такая операция</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // есть, процесс все равно может не завершиться успешно,</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // пока она не завершится.</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  stream.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">push</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  stream.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">read</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">100</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>Если <code>autoClose</code> имеет значение false, то файловый дескриптор не будет закрыт, даже если есть ошибка. Ответственность за его закрытие и обеспечение отсутствия утечки файловых дескрипторов лежит на приложении. Если для <code>autoClose</code> установлено значение true (поведение по умолчанию), то при <code>&#39;error&#39;</code> или <code>&#39;end&#39;</code> файловый дескриптор будет закрыт автоматически.</p><p>Пример чтения последних 10 байтов файла длиной 100 байтов:</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { open } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;node:fs/promises&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> fd</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> open</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;sample.txt&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">fd.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">createReadStream</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({ start: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">90</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, end: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">99</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> });</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h4 id="filehandlecreatewritestreamoptions" tabindex="-1"><code>filehandle.createWriteStream([options])</code> <a class="header-anchor" href="#filehandlecreatewritestreamoptions" aria-label="Permalink to “filehandle.createWriteStream([options])”">​</a></h4><div class="info custom-block"><p class="custom-block-title">[История]</p><table tabindex="0"><thead><tr><th>Версия</th><th>Изменения</th></tr></thead><tbody><tr><td>v21.0.0, v20.10.0</td><td>Теперь поддерживается опция <code>flush</code>.</td></tr><tr><td>v16.11.0</td><td>Добавлено в: v16.11.0</td></tr></tbody></table></div><ul><li><p><code>options</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noreferrer">&lt;Object&gt;</a></p><ul><li><code>encoding</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> <strong>По умолчанию:</strong> <code>&#39;utf8&#39;</code></li><li><code>autoClose</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" target="_blank" rel="noreferrer">&lt;boolean&gt;</a> <strong>По умолчанию:</strong> <code>true</code></li><li><code>emitClose</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" target="_blank" rel="noreferrer">&lt;boolean&gt;</a> <strong>По умолчанию:</strong> <code>true</code></li><li><code>start</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;integer&gt;</a></li><li><code>highWaterMark</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;number&gt;</a> <strong>По умолчанию:</strong> <code>16384</code></li><li><code>flush</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" target="_blank" rel="noreferrer">&lt;boolean&gt;</a> Если <code>true</code>, то перед закрытием дескриптор базового файла сбрасывается. <strong>По умолчанию:</strong> <code>false</code>.</li></ul></li><li><p>Возвращает: <a href="/ru/nodejs/api/fs#class-fswritestream">&lt;fs.WriteStream&gt;</a></p></li></ul><p><code>options</code> может также включать опцию <code>start</code>, чтобы разрешить запись данных в определенной позиции после начала файла, допустимые значения находятся в диапазоне [0, <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number/MAX_SAFE_INTEGER" target="_blank" rel="noreferrer"><code>Number.MAX_SAFE_INTEGER</code></a>]. Изменение файла, а не его замена, может потребовать, чтобы опция <code>flags</code> <code>open</code> была установлена в <code>r+</code>, а не в значение по умолчанию <code>r</code>. <code>encoding</code> может быть любым из тех, которые принимаются <a href="/ru/nodejs/api/buffer#class-buffer">&lt;Buffer&gt;</a>.</p><p>Если для <code>autoClose</code> установлено значение true (поведение по умолчанию), при возникновении <code>&#39;error&#39;</code> или <code>&#39;finish&#39;</code> файловый дескриптор будет автоматически закрыт. Если <code>autoClose</code> имеет значение false, файловый дескриптор не будет закрыт, даже если произошла ошибка. Ответственность за его закрытие и обеспечение отсутствия утечки файловых дескрипторов лежит на приложении.</p><p>По умолчанию поток будет генерировать событие <code>&#39;close&#39;</code> после уничтожения. Установите для параметра <code>emitClose</code> значение <code>false</code>, чтобы изменить это поведение.</p><h4 id="filehandledatasync" tabindex="-1"><code>filehandle.datasync()</code> <a class="header-anchor" href="#filehandledatasync" aria-label="Permalink to “filehandle.datasync()”">​</a></h4><p><strong>Добавлено в версии: v10.0.0</strong></p><ul><li>Возвращает: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" target="_blank" rel="noreferrer">&lt;Promise&gt;</a> Разрешается с <code>undefined</code> при успехе.</li></ul><p>Принудительно переводит все текущие операции ввода-вывода, связанные с файлом, в синхронизированное состояние завершения ввода-вывода операционной системы. Подробности см. в документации POSIX <a href="http://man7.org/linux/man-pages/man2/fdatasync.2" target="_blank" rel="noreferrer"><code>fdatasync(2)</code></a>.</p><p>В отличие от <code>filehandle.sync</code>, этот метод не сбрасывает измененные метаданные.</p><h4 id="filehandlefd" tabindex="-1"><code>filehandle.fd</code> <a class="header-anchor" href="#filehandlefd" aria-label="Permalink to “filehandle.fd”">​</a></h4><p><strong>Добавлено в версии: v10.0.0</strong></p><ul><li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;number&gt;</a> Числовой файловый дескриптор, управляемый объектом <a href="/ru/nodejs/api/fs#class-filehandle">&lt;FileHandle&gt;</a>.</li></ul><h4 id="filehandlereadbuffer-offset-length-position" tabindex="-1"><code>filehandle.read(buffer, offset, length, position)</code> <a class="header-anchor" href="#filehandlereadbuffer-offset-length-position" aria-label="Permalink to “filehandle.read(buffer, offset, length, position)”">​</a></h4><div class="info custom-block"><p class="custom-block-title">[История]</p><table tabindex="0"><thead><tr><th>Версия</th><th>Изменения</th></tr></thead><tbody><tr><td>v21.0.0</td><td>Принимает значения bigint в качестве <code>position</code>.</td></tr><tr><td>v10.0.0</td><td>Добавлено в версии: v10.0.0</td></tr></tbody></table></div><ul><li><code>buffer</code> <a href="/ru/nodejs/api/buffer#class-buffer">&lt;Buffer&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/TypedArray" target="_blank" rel="noreferrer">&lt;TypedArray&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/DataView" target="_blank" rel="noreferrer">&lt;DataView&gt;</a> Буфер, который будет заполнен считанными данными из файла.</li><li><code>offset</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;integer&gt;</a> Место в буфере, с которого следует начать заполнение. <strong>По умолчанию:</strong> <code>0</code></li><li><code>length</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;integer&gt;</a> Количество байтов для чтения. <strong>По умолчанию:</strong> <code>buffer.byteLength - offset</code></li><li><code>position</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;integer&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/BigInt" target="_blank" rel="noreferrer">&lt;bigint&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Null_type" target="_blank" rel="noreferrer">&lt;null&gt;</a> Место, с которого следует начать чтение данных из файла. Если <code>null</code> или <code>-1</code>, данные будут считываться с текущей позиции файла, и позиция будет обновлена. Если <code>position</code> является неотрицательным целым числом, текущая позиция файла останется неизменной. <strong>По умолчанию:</strong> <code>null</code></li><li>Возвращает: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" target="_blank" rel="noreferrer">&lt;Promise&gt;</a> Разрешается при успехе с объектом с двумя свойствами: <ul><li><code>bytesRead</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;integer&gt;</a> Количество прочитанных байтов</li><li><code>buffer</code> <a href="/ru/nodejs/api/buffer#class-buffer">&lt;Buffer&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/TypedArray" target="_blank" rel="noreferrer">&lt;TypedArray&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/DataView" target="_blank" rel="noreferrer">&lt;DataView&gt;</a> Ссылка на переданный аргумент <code>buffer</code>.</li></ul></li></ul><p>Считывает данные из файла и сохраняет их в указанном буфере.</p><p>Если файл не изменяется одновременно, конец файла достигается, когда количество прочитанных байтов равно нулю.</p><h4 id="filehandlereadoptions" tabindex="-1"><code>filehandle.read([options])</code> <a class="header-anchor" href="#filehandlereadoptions" aria-label="Permalink to “filehandle.read([options])”">​</a></h4><div class="info custom-block"><p class="custom-block-title">[История]</p><table tabindex="0"><thead><tr><th>Версия</th><th>Изменения</th></tr></thead><tbody><tr><td>v21.0.0</td><td>Принимает значения bigint в качестве <code>position</code>.</td></tr><tr><td>v13.11.0, v12.17.0</td><td>Добавлено в: v13.11.0, v12.17.0</td></tr></tbody></table></div><ul><li><p><code>options</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noreferrer">&lt;Object&gt;</a></p><ul><li><code>buffer</code> <a href="/ru/nodejs/api/buffer#class-buffer">&lt;Buffer&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/TypedArray" target="_blank" rel="noreferrer">&lt;TypedArray&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/DataView" target="_blank" rel="noreferrer">&lt;DataView&gt;</a> Буфер, который будет заполнен прочитанными данными файла. <strong>По умолчанию:</strong> <code>Buffer.alloc(16384)</code></li><li><code>offset</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;integer&gt;</a> Местоположение в буфере, с которого начинается заполнение. <strong>По умолчанию:</strong> <code>0</code></li><li><code>length</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;integer&gt;</a> Количество байтов для чтения. <strong>По умолчанию:</strong> <code>buffer.byteLength - offset</code></li><li><code>position</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;integer&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/BigInt" target="_blank" rel="noreferrer">&lt;bigint&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Null_type" target="_blank" rel="noreferrer">&lt;null&gt;</a> Местоположение, с которого начинается чтение данных из файла. Если <code>null</code> или <code>-1</code>, данные будут считываться с текущей позиции файла, и позиция будет обновлена. Если <code>position</code> является неотрицательным целым числом, текущая позиция файла останется неизменной. <strong>По умолчанию</strong>: <code>null</code></li></ul></li><li><p>Возвращает: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" target="_blank" rel="noreferrer">&lt;Promise&gt;</a> Исполняется при успехе с объектом с двумя свойствами:</p><ul><li><code>bytesRead</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;integer&gt;</a> Количество прочитанных байтов</li><li><code>buffer</code> <a href="/ru/nodejs/api/buffer#class-buffer">&lt;Buffer&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/TypedArray" target="_blank" rel="noreferrer">&lt;TypedArray&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/DataView" target="_blank" rel="noreferrer">&lt;DataView&gt;</a> Ссылка на переданный аргумент <code>buffer</code>.</li></ul></li></ul><p>Читает данные из файла и сохраняет их в заданном буфере.</p><p>Если файл не изменяется одновременно, конец файла достигается, когда количество прочитанных байтов равно нулю.</p><h4 id="filehandlereadbuffer-options" tabindex="-1"><code>filehandle.read(buffer[, options])</code> <a class="header-anchor" href="#filehandlereadbuffer-options" aria-label="Permalink to “filehandle.read(buffer[, options])”">​</a></h4><div class="info custom-block"><p class="custom-block-title">[История]</p><table tabindex="0"><thead><tr><th>Версия</th><th>Изменения</th></tr></thead><tbody><tr><td>v21.0.0</td><td>Принимает значения bigint в качестве <code>position</code>.</td></tr><tr><td>v18.2.0, v16.17.0</td><td>Добавлено в: v18.2.0, v16.17.0</td></tr></tbody></table></div><ul><li><p><code>buffer</code> <a href="/ru/nodejs/api/buffer#class-buffer">&lt;Buffer&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/TypedArray" target="_blank" rel="noreferrer">&lt;TypedArray&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/DataView" target="_blank" rel="noreferrer">&lt;DataView&gt;</a> Буфер, который будет заполнен прочитанными данными из файла.</p></li><li><p><code>options</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noreferrer">&lt;Object&gt;</a></p><ul><li><code>offset</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;integer&gt;</a> Местоположение в буфере, с которого начинается заполнение. <strong>По умолчанию:</strong> <code>0</code></li><li><code>length</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;integer&gt;</a> Количество байтов для чтения. <strong>По умолчанию:</strong> <code>buffer.byteLength - offset</code></li><li><code>position</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;integer&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/BigInt" target="_blank" rel="noreferrer">&lt;bigint&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Null_type" target="_blank" rel="noreferrer">&lt;null&gt;</a> Место, с которого начинается чтение данных из файла. Если <code>null</code> или <code>-1</code>, данные будут прочитаны с текущей позиции файла, и позиция будет обновлена. Если <code>position</code> является неотрицательным целым числом, текущая позиция файла останется неизменной. <strong>По умолчанию</strong>: <code>null</code></li></ul></li><li><p>Возвращает: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" target="_blank" rel="noreferrer">&lt;Promise&gt;</a> Выполняется при успехе с объектом, имеющим два свойства:</p><ul><li><code>bytesRead</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;integer&gt;</a> Количество прочитанных байтов</li><li><code>buffer</code> <a href="/ru/nodejs/api/buffer#class-buffer">&lt;Buffer&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/TypedArray" target="_blank" rel="noreferrer">&lt;TypedArray&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/DataView" target="_blank" rel="noreferrer">&lt;DataView&gt;</a> Ссылка на переданный аргумент <code>buffer</code>.</li></ul></li></ul><p>Читает данные из файла и сохраняет их в заданном буфере.</p><p>Если файл не изменяется одновременно, конец файла достигается, когда количество прочитанных байтов равно нулю.</p><h4 id="filehandlereadablewebstreamoptions" tabindex="-1"><code>filehandle.readableWebStream([options])</code> <a class="header-anchor" href="#filehandlereadablewebstreamoptions" aria-label="Permalink to “filehandle.readableWebStream([options])”">​</a></h4><div class="info custom-block"><p class="custom-block-title">[История]</p><table tabindex="0"><thead><tr><th>Версия</th><th>Изменения</th></tr></thead><tbody><tr><td>v20.0.0, v18.17.0</td><td>Добавлена опция для создания потока &#39;bytes&#39;.</td></tr><tr><td>v17.0.0</td><td>Добавлено в: v17.0.0</td></tr></tbody></table></div><div class="warning custom-block"><p class="custom-block-title">[Стабильно: 1 - Экспериментально]</p><p><a href="/ru/nodejs/api/documentation#stability-index">Стабильно: 1</a> <a href="/ru/nodejs/api/documentation#stability-index">Стабильность: 1</a> - Экспериментально</p></div><ul><li><p><code>options</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noreferrer">&lt;Object&gt;</a></p><ul><li><code>type</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Undefined_type" target="_blank" rel="noreferrer">&lt;undefined&gt;</a> Указывает, открыть ли обычный или <code>&#39;bytes&#39;</code> поток. <strong>По умолчанию:</strong> <code>undefined</code></li></ul></li><li><p>Возвращает: <a href="/ru/nodejs/api/webstreams#class-readablestream">&lt;ReadableStream&gt;</a></p></li></ul><p>Возвращает <code>ReadableStream</code>, который можно использовать для чтения данных файлов.</p><p>Будет выброшена ошибка, если этот метод будет вызван более одного раза или будет вызван после того, как <code>FileHandle</code> будет закрыт или закрывается.</p><div class="vp-code-group"><div class="tabs"><input type="radio" name="group-809" id="tab-810" checked><label data-title="ESM" for="tab-810">ESM</label><input type="radio" name="group-809" id="tab-811"><label data-title="CJS" for="tab-811">CJS</label></div><div class="blocks"><div class="language-js active line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  open,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">} </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;node:fs/promises&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> file</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> open</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;./some/file/to/read&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">for</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> chunk</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> of</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> file.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">readableWebStream</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">())</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(chunk);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> file.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">close</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  open</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">} </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;node:fs/promises&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">async</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> file</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> open</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;./some/file/to/read&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  for</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> chunk</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> of</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> file.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">readableWebStream</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">())</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(chunk);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> file.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">close</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})();</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div></div></div><p>Хотя <code>ReadableStream</code> прочитает файл до конца, он не закроет <code>FileHandle</code> автоматически. Пользовательский код все равно должен вызвать метод <code>fileHandle.close()</code>.</p><h4 id="filehandlereadfileoptions" tabindex="-1"><code>filehandle.readFile(options)</code> <a class="header-anchor" href="#filehandlereadfileoptions" aria-label="Permalink to “filehandle.readFile(options)”">​</a></h4><p><strong>Добавлено в: v10.0.0</strong></p><ul><li><p><code>options</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noreferrer">&lt;Object&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a></p><ul><li><code>encoding</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Null_type" target="_blank" rel="noreferrer">&lt;null&gt;</a> <strong>По умолчанию:</strong> <code>null</code></li><li><code>signal</code> <a href="/ru/nodejs/api/globals#class-abortsignal">&lt;AbortSignal&gt;</a> позволяет прервать выполняющееся readFile</li></ul></li><li><p>Возвращает: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" target="_blank" rel="noreferrer">&lt;Promise&gt;</a> Исполняется после успешного чтения с содержимым файла. Если кодировка не указана (с помощью <code>options.encoding</code>), данные возвращаются как объект <a href="/ru/nodejs/api/buffer#class-buffer">&lt;Buffer&gt;</a>. В противном случае данные будут строкой.</p></li></ul><p>Асинхронно считывает все содержимое файла.</p><p>Если <code>options</code> является строкой, то она указывает <code>encoding</code>.</p><p><a href="/ru/nodejs/api/fs#class-filehandle">&lt;FileHandle&gt;</a> должен поддерживать чтение.</p><p>Если сделано одно или несколько вызовов <code>filehandle.read()</code> для дескриптора файла, а затем сделан вызов <code>filehandle.readFile()</code>, данные будут считываться с текущей позиции до конца файла. Он не всегда считывается с начала файла.</p><h4 id="filehandlereadlinesoptions" tabindex="-1"><code>filehandle.readLines([options])</code> <a class="header-anchor" href="#filehandlereadlinesoptions" aria-label="Permalink to “filehandle.readLines([options])”">​</a></h4><p><strong>Добавлено в: v18.11.0</strong></p><ul><li><p><code>options</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noreferrer">&lt;Object&gt;</a></p><ul><li><code>encoding</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> <strong>По умолчанию:</strong> <code>null</code></li><li><code>autoClose</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" target="_blank" rel="noreferrer">&lt;boolean&gt;</a> <strong>По умолчанию:</strong> <code>true</code></li><li><code>emitClose</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" target="_blank" rel="noreferrer">&lt;boolean&gt;</a> <strong>По умолчанию:</strong> <code>true</code></li><li><code>start</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;integer&gt;</a></li><li><code>end</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;integer&gt;</a> <strong>По умолчанию:</strong> <code>Infinity</code></li><li><code>highWaterMark</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;integer&gt;</a> <strong>По умолчанию:</strong> <code>64 * 1024</code></li></ul></li><li><p>Возвращает: <a href="/ru/nodejs/api/readline#class-interfaceconstructor">&lt;readline.InterfaceConstructor&gt;</a></p></li></ul><p>Удобный метод для создания интерфейса <code>readline</code> и потоковой передачи по файлу. См. <a href="/ru/nodejs/api/fs#filehandlecreatereadstreamoptions"><code>filehandle.createReadStream()</code></a> для параметров.</p><div class="vp-code-group"><div class="tabs"><input type="radio" name="group-911" id="tab-912" checked><label data-title="ESM" for="tab-912">ESM</label><input type="radio" name="group-911" id="tab-913"><label data-title="CJS" for="tab-913">CJS</label></div><div class="blocks"><div class="language-js active line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { open } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;node:fs/promises&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> file</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> open</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;./some/file/to/read&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">for</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> line</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> of</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> file.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">readLines</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(line);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">open</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;node:fs/promises&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">async</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> file</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> open</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;./some/file/to/read&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  for</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> line</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> of</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> file.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">readLines</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(line);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})();</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div></div></div><h4 id="filehandlereadvbuffers-position" tabindex="-1"><code>filehandle.readv(buffers[, position])</code> <a class="header-anchor" href="#filehandlereadvbuffers-position" aria-label="Permalink to “filehandle.readv(buffers[, position])”">​</a></h4><p><strong>Добавлено в: v13.13.0, v12.17.0</strong></p><ul><li><code>buffers</code> <a href="/ru/nodejs/api/buffer#class-buffer">&lt;Buffer[]&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/TypedArray" target="_blank" rel="noreferrer">&lt;TypedArray[]&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/DataView" target="_blank" rel="noreferrer">&lt;DataView[]&gt;</a></li><li><code>position</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;integer&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Null_type" target="_blank" rel="noreferrer">&lt;null&gt;</a> Смещение от начала файла, откуда должны быть прочитаны данные. Если <code>position</code> не является <code>number</code>, данные будут прочитаны с текущей позиции. <strong>По умолчанию:</strong> <code>null</code></li><li>Возвращает: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" target="_blank" rel="noreferrer">&lt;Promise&gt;</a> Выполняется при успехе, возвращая объект, содержащий два свойства: <ul><li><code>bytesRead</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;integer&gt;</a> количество прочитанных байтов</li><li><code>buffers</code> <a href="/ru/nodejs/api/buffer#class-buffer">&lt;Buffer[]&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/TypedArray" target="_blank" rel="noreferrer">&lt;TypedArray[]&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/DataView" target="_blank" rel="noreferrer">&lt;DataView[]&gt;</a> свойство, содержащее ссылку на входные <code>buffers</code>.</li></ul></li></ul><p>Чтение из файла и запись в массив <a href="https://developer.mozilla.org/en-US/docs/Web/API/ArrayBufferView" target="_blank" rel="noreferrer">&lt;ArrayBufferView&gt;</a>s</p><h4 id="filehandlestatoptions" tabindex="-1"><code>filehandle.stat([options])</code> <a class="header-anchor" href="#filehandlestatoptions" aria-label="Permalink to “filehandle.stat([options])”">​</a></h4><div class="info custom-block"><p class="custom-block-title">[История]</p><table tabindex="0"><thead><tr><th>Версия</th><th>Изменения</th></tr></thead><tbody><tr><td>v10.5.0</td><td>Принимает дополнительный объект <code>options</code> для указания, следует ли возвращать числовые значения как bigint.</td></tr><tr><td>v10.0.0</td><td>Добавлено в версии: v10.0.0</td></tr></tbody></table></div><ul><li><p><code>options</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noreferrer">&lt;Object&gt;</a></p><ul><li><code>bigint</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" target="_blank" rel="noreferrer">&lt;boolean&gt;</a> Указывает, должны ли числовые значения в возвращаемом объекте <a href="/ru/nodejs/api/fs#class-fsstats">&lt;fs.Stats&gt;</a> быть <code>bigint</code>. <strong>По умолчанию:</strong> <code>false</code>.</li></ul></li><li><p>Возвращает: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" target="_blank" rel="noreferrer">&lt;Promise&gt;</a> Исполняется с <a href="/ru/nodejs/api/fs#class-fsstats">&lt;fs.Stats&gt;</a> для файла.</p></li></ul><h4 id="filehandlesync" tabindex="-1"><code>filehandle.sync()</code> <a class="header-anchor" href="#filehandlesync" aria-label="Permalink to “filehandle.sync()”">​</a></h4><p><strong>Добавлено в версии: v10.0.0</strong></p><ul><li>Возвращает: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" target="_blank" rel="noreferrer">&lt;Promise&gt;</a> Исполняется с <code>undefined</code> в случае успеха.</li></ul><p>Запрашивает, чтобы все данные для открытого файлового дескриптора были сброшены на устройство хранения. Конкретная реализация зависит от операционной системы и устройства. Обратитесь к документации POSIX <a href="http://man7.org/linux/man-pages/man2/fsync.2" target="_blank" rel="noreferrer"><code>fsync(2)</code></a> для получения более подробной информации.</p><h4 id="filehandletruncatelen" tabindex="-1"><code>filehandle.truncate(len)</code> <a class="header-anchor" href="#filehandletruncatelen" aria-label="Permalink to “filehandle.truncate(len)”">​</a></h4><p><strong>Добавлено в версии: v10.0.0</strong></p><ul><li><code>len</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;integer&gt;</a> <strong>По умолчанию:</strong> <code>0</code></li><li>Возвращает: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" target="_blank" rel="noreferrer">&lt;Promise&gt;</a> Исполняется с <code>undefined</code> в случае успеха.</li></ul><p>Усекает файл.</p><p>Если файл был больше, чем <code>len</code> байт, в файле будут сохранены только первые <code>len</code> байт.</p><p>Следующий пример сохраняет только первые четыре байта файла:</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { open } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;node:fs/promises&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> filehandle </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">try</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  filehandle </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> open</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;temp.txt&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;r+&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> filehandle.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">truncate</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">4</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">} </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">finally</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> filehandle?.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">close</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>Если файл ранее был короче, чем <code>len</code> байт, он будет расширен, а расширенная часть будет заполнена нулевыми байтами (<code>&#39;\\0&#39;</code>):</p><p>Если <code>len</code> отрицательное число, то будет использовано <code>0</code>.</p><h4 id="filehandleutimesatime-mtime" tabindex="-1"><code>filehandle.utimes(atime, mtime)</code> <a class="header-anchor" href="#filehandleutimesatime-mtime" aria-label="Permalink to “filehandle.utimes(atime, mtime)”">​</a></h4><p><strong>Добавлено в: v10.0.0</strong></p><ul><li><code>atime</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;number&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date" target="_blank" rel="noreferrer">&lt;Date&gt;</a></li><li><code>mtime</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;number&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date" target="_blank" rel="noreferrer">&lt;Date&gt;</a></li><li>Возвращает: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" target="_blank" rel="noreferrer">&lt;Promise&gt;</a></li></ul><p>Изменяет временные метки файловой системы объекта, на который ссылается <a href="/ru/nodejs/api/fs#class-filehandle">&lt;FileHandle&gt;</a>, затем выполняет промис без аргументов при успехе.</p><h4 id="filehandlewritebuffer-offset-length-position" tabindex="-1"><code>filehandle.write(buffer, offset[, length[, position]])</code> <a class="header-anchor" href="#filehandlewritebuffer-offset-length-position" aria-label="Permalink to “filehandle.write(buffer, offset[, length[, position]])”">​</a></h4><div class="info custom-block"><p class="custom-block-title">[История]</p><table tabindex="0"><thead><tr><th>Версия</th><th>Изменения</th></tr></thead><tbody><tr><td>v14.0.0</td><td>Параметр <code>buffer</code> больше не будет приводить неподдерживаемый ввод к буферам.</td></tr><tr><td>v10.0.0</td><td>Добавлено в: v10.0.0</td></tr></tbody></table></div><ul><li><code>buffer</code> <a href="/ru/nodejs/api/buffer#class-buffer">&lt;Buffer&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/TypedArray" target="_blank" rel="noreferrer">&lt;TypedArray&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/DataView" target="_blank" rel="noreferrer">&lt;DataView&gt;</a></li><li><code>offset</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;integer&gt;</a> Начальная позиция внутри <code>buffer</code>, с которой начинается запись данных.</li><li><code>length</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;integer&gt;</a> Количество байтов из <code>buffer</code> для записи. <strong>По умолчанию:</strong> <code>buffer.byteLength - offset</code></li><li><code>position</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;integer&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Null_type" target="_blank" rel="noreferrer">&lt;null&gt;</a> Смещение от начала файла, куда должны быть записаны данные из <code>buffer</code>. Если <code>position</code> не является <code>number</code>, данные будут записаны в текущей позиции. Дополнительную информацию см. в документации POSIX <a href="http://man7.org/linux/man-pages/man2/pwrite.2" target="_blank" rel="noreferrer"><code>pwrite(2)</code></a>. <strong>По умолчанию:</strong> <code>null</code></li><li>Возвращает: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" target="_blank" rel="noreferrer">&lt;Promise&gt;</a></li></ul><p>Записывает <code>buffer</code> в файл.</p><p>Промис выполняется с объектом, содержащим два свойства:</p><ul><li><code>bytesWritten</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;integer&gt;</a> количество записанных байтов</li><li><code>buffer</code> <a href="/ru/nodejs/api/buffer#class-buffer">&lt;Buffer&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/TypedArray" target="_blank" rel="noreferrer">&lt;TypedArray&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/DataView" target="_blank" rel="noreferrer">&lt;DataView&gt;</a> ссылка на записанный <code>buffer</code>.</li></ul><p>Небезопасно использовать <code>filehandle.write()</code> несколько раз в одном и том же файле, не дожидаясь выполнения (или отклонения) промиса. Для этого сценария используйте <a href="/ru/nodejs/api/fs#filehandlecreatewritestreamoptions"><code>filehandle.createWriteStream()</code></a>.</p><p>В Linux позиционные записи не работают, когда файл открыт в режиме добавления. Ядро игнорирует аргумент позиции и всегда добавляет данные в конец файла.</p><h4 id="filehandlewritebuffer-options" tabindex="-1"><code>filehandle.write(buffer[, options])</code> <a class="header-anchor" href="#filehandlewritebuffer-options" aria-label="Permalink to “filehandle.write(buffer[, options])”">​</a></h4><p><strong>Добавлено в: v18.3.0, v16.17.0</strong></p><ul><li><p><code>buffer</code> <a href="/ru/nodejs/api/buffer#class-buffer">&lt;Buffer&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/TypedArray" target="_blank" rel="noreferrer">&lt;TypedArray&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/DataView" target="_blank" rel="noreferrer">&lt;DataView&gt;</a></p></li><li><p><code>options</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noreferrer">&lt;Object&gt;</a></p><ul><li><code>offset</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;integer&gt;</a> <strong>По умолчанию:</strong> <code>0</code></li><li><code>length</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;integer&gt;</a> <strong>По умолчанию:</strong> <code>buffer.byteLength - offset</code></li><li><code>position</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;integer&gt;</a> <strong>По умолчанию:</strong> <code>null</code></li></ul></li><li><p>Возвращает: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" target="_blank" rel="noreferrer">&lt;Promise&gt;</a></p></li></ul><p>Записывает <code>buffer</code> в файл.</p><p>Аналогично вышеуказанной функции <code>filehandle.write</code>, эта версия принимает необязательный объект <code>options</code>. Если объект <code>options</code> не указан, будут использоваться значения по умолчанию, указанные выше.</p><h4 id="filehandlewritestring-position-encoding" tabindex="-1"><code>filehandle.write(string[, position[, encoding]])</code> <a class="header-anchor" href="#filehandlewritestring-position-encoding" aria-label="Permalink to “filehandle.write(string[, position[, encoding]])”">​</a></h4><div class="info custom-block"><p class="custom-block-title">[История]</p><table tabindex="0"><thead><tr><th>Версия</th><th>Изменения</th></tr></thead><tbody><tr><td>v14.0.0</td><td>Параметр <code>string</code> больше не будет приводить неподдерживаемый ввод к строкам.</td></tr><tr><td>v10.0.0</td><td>Добавлено в: v10.0.0</td></tr></tbody></table></div><ul><li><code>string</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a></li><li><code>position</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;integer&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Null_type" target="_blank" rel="noreferrer">&lt;null&gt;</a> Смещение от начала файла, куда должны быть записаны данные из <code>string</code>. Если <code>position</code> не является <code>number</code>, данные будут записаны в текущую позицию. См. документацию POSIX <a href="http://man7.org/linux/man-pages/man2/pwrite.2" target="_blank" rel="noreferrer"><code>pwrite(2)</code></a> для получения более подробной информации. <strong>По умолчанию:</strong> <code>null</code></li><li><code>encoding</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> Ожидаемая кодировка строки. <strong>По умолчанию:</strong> <code>&#39;utf8&#39;</code></li><li>Возвращает: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" target="_blank" rel="noreferrer">&lt;Promise&gt;</a></li></ul><p>Записывает <code>string</code> в файл. Если <code>string</code> не является строкой, промис отклоняется с ошибкой.</p><p>Промис выполняется с объектом, содержащим два свойства:</p><ul><li><code>bytesWritten</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;integer&gt;</a> количество записанных байтов</li><li><code>buffer</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> ссылка на записанную <code>string</code>.</li></ul><p>Опасно использовать <code>filehandle.write()</code> несколько раз для одного и того же файла, не дожидаясь выполнения (или отклонения) промиса. В этом случае используйте <a href="/ru/nodejs/api/fs#filehandlecreatewritestreamoptions"><code>filehandle.createWriteStream()</code></a>.</p><p>В Linux позиционная запись не работает, если файл открыт в режиме добавления. Ядро игнорирует аргумент position и всегда добавляет данные в конец файла.</p><h4 id="filehandlewritefiledata-options" tabindex="-1"><code>filehandle.writeFile(data, options)</code> <a class="header-anchor" href="#filehandlewritefiledata-options" aria-label="Permalink to “filehandle.writeFile(data, options)”">​</a></h4><div class="info custom-block"><p class="custom-block-title">[История]</p><table tabindex="0"><thead><tr><th>Версия</th><th>Изменения</th></tr></thead><tbody><tr><td>v15.14.0, v14.18.0</td><td>Аргумент <code>data</code> поддерживает <code>AsyncIterable</code>, <code>Iterable</code> и <code>Stream</code>.</td></tr><tr><td>v14.0.0</td><td>Параметр <code>data</code> больше не будет приводить неподдерживаемый ввод к строкам.</td></tr><tr><td>v10.0.0</td><td>Добавлено в: v10.0.0</td></tr></tbody></table></div><ul><li><p><code>data</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="/ru/nodejs/api/buffer#class-buffer">&lt;Buffer&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/TypedArray" target="_blank" rel="noreferrer">&lt;TypedArray&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/DataView" target="_blank" rel="noreferrer">&lt;DataView&gt;</a> | <a href="https://tc39.github.io/ecma262/#sec-asynciterable-interface" target="_blank" rel="noreferrer">&lt;AsyncIterable&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Iteration_protocols#The_iterable_protocol" target="_blank" rel="noreferrer">&lt;Iterable&gt;</a> | <a href="/ru/nodejs/api/stream#stream">&lt;Stream&gt;</a></p></li><li><p><code>options</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noreferrer">&lt;Object&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a></p><ul><li><code>encoding</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Null_type" target="_blank" rel="noreferrer">&lt;null&gt;</a> Ожидаемая кодировка символов, когда <code>data</code> является строкой. <strong>По умолчанию:</strong> <code>&#39;utf8&#39;</code></li></ul></li><li><p>Возвращает: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" target="_blank" rel="noreferrer">&lt;Promise&gt;</a></p></li></ul><p>Асинхронно записывает данные в файл, заменяя файл, если он уже существует. <code>data</code> может быть строкой, буфером, <a href="https://tc39.github.io/ecma262/#sec-asynciterable-interface" target="_blank" rel="noreferrer">&lt;AsyncIterable&gt;</a> или объектом <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Iteration_protocols#The_iterable_protocol" target="_blank" rel="noreferrer">&lt;Iterable&gt;</a>. Промис выполняется без аргументов в случае успеха.</p><p>Если <code>options</code> является строкой, то она определяет <code>encoding</code>.</p><p><a href="/ru/nodejs/api/fs#class-filehandle">&lt;FileHandle&gt;</a> должен поддерживать запись.</p><p>Небезопасно использовать <code>filehandle.writeFile()</code> несколько раз для одного и того же файла, не дожидаясь выполнения (или отклонения) промиса.</p><p>Если сделан один или несколько вызовов <code>filehandle.write()</code> для дескриптора файла, а затем сделан вызов <code>filehandle.writeFile()</code>, данные будут записаны с текущей позиции до конца файла. Не всегда записывается с начала файла.</p><h4 id="filehandlewritevbuffers-position" tabindex="-1"><code>filehandle.writev(buffers[, position])</code> <a class="header-anchor" href="#filehandlewritevbuffers-position" aria-label="Permalink to “filehandle.writev(buffers[, position])”">​</a></h4><p><strong>Добавлено в: v12.9.0</strong></p><ul><li><code>buffers</code> <a href="/ru/nodejs/api/buffer#class-buffer">&lt;Buffer[]&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/TypedArray" target="_blank" rel="noreferrer">&lt;TypedArray[]&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/DataView" target="_blank" rel="noreferrer">&lt;DataView[]&gt;</a></li><li><code>position</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;integer&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Null_type" target="_blank" rel="noreferrer">&lt;null&gt;</a> Смещение от начала файла, куда следует записать данные из <code>buffers</code>. Если <code>position</code> не является <code>number</code>, данные будут записаны в текущей позиции. <strong>По умолчанию:</strong> <code>null</code></li><li>Возвращает: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" target="_blank" rel="noreferrer">&lt;Promise&gt;</a></li></ul><p>Записывает массив <a href="https://developer.mozilla.org/en-US/docs/Web/API/ArrayBufferView" target="_blank" rel="noreferrer">&lt;ArrayBufferView&gt;</a> в файл.</p><p>Промис выполняется с объектом, содержащим два свойства:</p><ul><li><code>bytesWritten</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;integer&gt;</a> количество записанных байтов</li><li><code>buffers</code> <a href="/ru/nodejs/api/buffer#class-buffer">&lt;Buffer[]&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/TypedArray" target="_blank" rel="noreferrer">&lt;TypedArray[]&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/DataView" target="_blank" rel="noreferrer">&lt;DataView[]&gt;</a> ссылка на входные <code>buffers</code>.</li></ul><p>Небезопасно вызывать <code>writev()</code> несколько раз для одного и того же файла, не дожидаясь выполнения (или отклонения) промиса.</p><p>В Linux позиционные записи не работают, если файл открыт в режиме добавления. Ядро игнорирует аргумент position и всегда добавляет данные в конец файла.</p><h4 id="filehandlesymbolasyncdispose" tabindex="-1"><code>filehandle[Symbol.asyncDispose]()</code> <a class="header-anchor" href="#filehandlesymbolasyncdispose" aria-label="Permalink to “filehandle[Symbol.asyncDispose]()”">​</a></h4><p><strong>Добавлено в: v20.4.0, v18.18.0</strong></p><div class="warning custom-block"><p class="custom-block-title">[Stable: 1 - Experimental]</p><p><a href="/ru/nodejs/api/documentation#stability-index">Stable: 1</a> <a href="/ru/nodejs/api/documentation#stability-index">Stability: 1</a> - Экспериментально</p></div><p>Псевдоним для <code>filehandle.close()</code>.</p><h3 id="fspromisesaccesspath-mode" tabindex="-1"><code>fsPromises.access(path[, mode])</code> <a class="header-anchor" href="#fspromisesaccesspath-mode" aria-label="Permalink to “fsPromises.access(path[, mode])”">​</a></h3><p><strong>Добавлено в: v10.0.0</strong></p><ul><li><code>path</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="/ru/nodejs/api/buffer#class-buffer">&lt;Buffer&gt;</a> | <a href="/ru/nodejs/api/url#the-whatwg-url-api">&lt;URL&gt;</a></li><li><code>mode</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;integer&gt;</a> <strong>По умолчанию:</strong> <code>fs.constants.F_OK</code></li><li>Возвращает: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" target="_blank" rel="noreferrer">&lt;Promise&gt;</a> Исполняется с <code>undefined</code> при успехе.</li></ul><p>Проверяет права пользователя на файл или каталог, указанный в <code>path</code>. Аргумент <code>mode</code> является необязательным целым числом, которое определяет проверки доступности, которые должны быть выполнены. <code>mode</code> должен быть либо значением <code>fs.constants.F_OK</code>, либо маской, состоящей из побитового ИЛИ любого из <code>fs.constants.R_OK</code>, <code>fs.constants.W_OK</code> и <code>fs.constants.X_OK</code> (например, <code>fs.constants.W_OK | fs.constants.R_OK</code>). См. <a href="/ru/nodejs/api/fs#file-access-constants">Константы доступа к файлам</a> для возможных значений <code>mode</code>.</p><p>Если проверка доступности прошла успешно, обещание выполняется без значения. Если какая-либо из проверок доступности не удалась, обещание отклоняется с объектом <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error" target="_blank" rel="noreferrer">&lt;Error&gt;</a>. Следующий пример проверяет, может ли текущий процесс читать и записывать файл <code>/etc/passwd</code>.</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { access, constants } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;node:fs/promises&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">try</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> access</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;/etc/passwd&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, constants.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">R_OK</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> constants.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">W_OK</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;can access&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">} </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">catch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;cannot access&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>Использовать <code>fsPromises.access()</code> для проверки доступности файла перед вызовом <code>fsPromises.open()</code> не рекомендуется. Это создает состояние гонки, поскольку другие процессы могут изменить состояние файла между двумя вызовами. Вместо этого пользовательский код должен открывать/читать/записывать файл напрямую и обрабатывать ошибку, возникающую, если файл недоступен.</p><h3 id="fspromisesappendfilepath-data-options" tabindex="-1"><code>fsPromises.appendFile(path, data[, options])</code> <a class="header-anchor" href="#fspromisesappendfilepath-data-options" aria-label="Permalink to “fsPromises.appendFile(path, data[, options])”">​</a></h3><div class="info custom-block"><p class="custom-block-title">[История]</p><table tabindex="0"><thead><tr><th>Версия</th><th>Изменения</th></tr></thead><tbody><tr><td>v21.1.0, v20.10.0</td><td>Теперь поддерживается опция <code>flush</code>.</td></tr><tr><td>v10.0.0</td><td>Добавлено в: v10.0.0</td></tr></tbody></table></div><ul><li><p><code>path</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="/ru/nodejs/api/buffer#class-buffer">&lt;Buffer&gt;</a> | <a href="/ru/nodejs/api/url#the-whatwg-url-api">&lt;URL&gt;</a> | <a href="/ru/nodejs/api/fs#class-filehandle">&lt;FileHandle&gt;</a> имя файла или <a href="/ru/nodejs/api/fs#class-filehandle">&lt;FileHandle&gt;</a></p></li><li><p><code>data</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="/ru/nodejs/api/buffer#class-buffer">&lt;Buffer&gt;</a></p></li><li><p><code>options</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noreferrer">&lt;Object&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a></p><ul><li><code>encoding</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Null_type" target="_blank" rel="noreferrer">&lt;null&gt;</a> <strong>По умолчанию:</strong> <code>&#39;utf8&#39;</code></li><li><code>mode</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;integer&gt;</a> <strong>По умолчанию:</strong> <code>0o666</code></li><li><code>flag</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> См. <a href="/ru/nodejs/api/fs#file-system-flags">поддержка флагов файловой системы</a>. <strong>По умолчанию:</strong> <code>&#39;a&#39;</code>.</li><li><code>flush</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" target="_blank" rel="noreferrer">&lt;boolean&gt;</a> Если <code>true</code>, базовый файловый дескриптор сбрасывается перед закрытием. <strong>По умолчанию:</strong> <code>false</code>.</li></ul></li><li><p>Возвращает: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" target="_blank" rel="noreferrer">&lt;Promise&gt;</a> Исполняется с <code>undefined</code> при успехе.</p></li></ul><p>Асинхронно добавляет данные в файл, создавая файл, если он еще не существует. <code>data</code> может быть строкой или <a href="/ru/nodejs/api/buffer#class-buffer">&lt;Buffer&gt;</a>.</p><p>Если <code>options</code> является строкой, то она определяет <code>encoding</code>.</p><p>Опция <code>mode</code> влияет только на вновь созданный файл. См. <a href="/ru/nodejs/api/fs#fsopenpath-flags-mode-callback"><code>fs.open()</code></a> для получения более подробной информации.</p><p><code>path</code> может быть указан как <a href="/ru/nodejs/api/fs#class-filehandle">&lt;FileHandle&gt;</a>, который был открыт для добавления (с использованием <code>fsPromises.open()</code>).</p><h3 id="fspromiseschmodpath-mode" tabindex="-1"><code>fsPromises.chmod(path, mode)</code> <a class="header-anchor" href="#fspromiseschmodpath-mode" aria-label="Permalink to “fsPromises.chmod(path, mode)”">​</a></h3><p><strong>Добавлено в версии: v10.0.0</strong></p><ul><li><code>path</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="/ru/nodejs/api/buffer#class-buffer">&lt;Buffer&gt;</a> | <a href="/ru/nodejs/api/url#the-whatwg-url-api">&lt;URL&gt;</a></li><li><code>mode</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;integer&gt;</a></li><li>Возвращает: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" target="_blank" rel="noreferrer">&lt;Promise&gt;</a> Разрешается с <code>undefined</code> при успехе.</li></ul><p>Изменяет права доступа к файлу.</p><h3 id="fspromiseschownpath-uid-gid" tabindex="-1"><code>fsPromises.chown(path, uid, gid)</code> <a class="header-anchor" href="#fspromiseschownpath-uid-gid" aria-label="Permalink to “fsPromises.chown(path, uid, gid)”">​</a></h3><p><strong>Добавлено в версии: v10.0.0</strong></p><ul><li><code>path</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="/ru/nodejs/api/buffer#class-buffer">&lt;Buffer&gt;</a> | <a href="/ru/nodejs/api/url#the-whatwg-url-api">&lt;URL&gt;</a></li><li><code>uid</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;integer&gt;</a></li><li><code>gid</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;integer&gt;</a></li><li>Возвращает: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" target="_blank" rel="noreferrer">&lt;Promise&gt;</a> Разрешается с <code>undefined</code> при успехе.</li></ul><p>Изменяет владельца файла.</p><h3 id="fspromisescopyfilesrc-dest-mode" tabindex="-1"><code>fsPromises.copyFile(src, dest[, mode])</code> <a class="header-anchor" href="#fspromisescopyfilesrc-dest-mode" aria-label="Permalink to “fsPromises.copyFile(src, dest[, mode])”">​</a></h3><div class="info custom-block"><p class="custom-block-title">[История]</p><table tabindex="0"><thead><tr><th>Версия</th><th>Изменения</th></tr></thead><tbody><tr><td>v14.0.0</td><td>Аргумент <code>flags</code> изменен на <code>mode</code> и введена более строгая проверка типов.</td></tr><tr><td>v10.0.0</td><td>Добавлено в версии: v10.0.0</td></tr></tbody></table></div><ul><li><p><code>src</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="/ru/nodejs/api/buffer#class-buffer">&lt;Buffer&gt;</a> | <a href="/ru/nodejs/api/url#the-whatwg-url-api">&lt;URL&gt;</a> Имя исходного файла для копирования</p></li><li><p><code>dest</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="/ru/nodejs/api/buffer#class-buffer">&lt;Buffer&gt;</a> | <a href="/ru/nodejs/api/url#the-whatwg-url-api">&lt;URL&gt;</a> Имя файла назначения для операции копирования</p></li><li><p><code>mode</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;integer&gt;</a> Необязательные модификаторы, определяющие поведение операции копирования. Можно создать маску, состоящую из побитового ИЛИ двух или более значений (например, <code>fs.constants.COPYFILE_EXCL | fs.constants.COPYFILE_FICLONE</code>). <strong>По умолчанию:</strong> <code>0</code>.</p><ul><li><code>fs.constants.COPYFILE_EXCL</code>: Операция копирования завершится неудачей, если <code>dest</code> уже существует.</li><li><code>fs.constants.COPYFILE_FICLONE</code>: Операция копирования попытается создать reflink с копированием при записи. Если платформа не поддерживает копирование при записи, используется резервный механизм копирования.</li><li><code>fs.constants.COPYFILE_FICLONE_FORCE</code>: Операция копирования попытается создать reflink с копированием при записи. Если платформа не поддерживает копирование при записи, операция завершится неудачей.</li></ul></li><li><p>Возвращает: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" target="_blank" rel="noreferrer">&lt;Promise&gt;</a> Разрешается с <code>undefined</code> при успехе.</p></li></ul><p>Асинхронно копирует <code>src</code> в <code>dest</code>. По умолчанию, <code>dest</code> перезаписывается, если он уже существует.</p><p>Не дается никаких гарантий об атомарности операции копирования. Если возникает ошибка после открытия целевого файла для записи, предпринимается попытка удалить целевой файл.</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { copyFile, constants } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;node:fs/promises&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">try</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> copyFile</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;source.txt&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;destination.txt&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;source.txt был скопирован в destination.txt&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">} </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">catch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;Файл не удалось скопировать&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Используя COPYFILE_EXCL, операция завершится неудачей, если destination.txt существует.</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">try</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> copyFile</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;source.txt&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;destination.txt&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, constants.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">COPYFILE_EXCL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;source.txt был скопирован в destination.txt&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">} </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">catch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;Файл не удалось скопировать&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h3 id="fspromisescpsrc-dest-options" tabindex="-1"><code>fsPromises.cp(src, dest[, options])</code> <a class="header-anchor" href="#fspromisescpsrc-dest-options" aria-label="Permalink to “fsPromises.cp(src, dest[, options])”">​</a></h3><div class="info custom-block"><p class="custom-block-title">[История]</p><table tabindex="0"><thead><tr><th>Версия</th><th>Изменения</th></tr></thead><tbody><tr><td>v22.3.0</td><td>Этот API больше не является экспериментальным.</td></tr><tr><td>v20.1.0, v18.17.0</td><td>Принимает дополнительную опцию <code>mode</code> для указания поведения копирования в качестве аргумента <code>mode</code> для <code>fs.copyFile()</code>.</td></tr><tr><td>v17.6.0, v16.15.0</td><td>Принимает дополнительную опцию <code>verbatimSymlinks</code> для указания, следует ли выполнять разрешение пути для символических ссылок.</td></tr><tr><td>v16.7.0</td><td>Добавлено в версии: v16.7.0</td></tr></tbody></table></div><ul><li><p><code>src</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="/ru/nodejs/api/url#the-whatwg-url-api">&lt;URL&gt;</a> исходный путь для копирования.</p></li><li><p><code>dest</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="/ru/nodejs/api/url#the-whatwg-url-api">&lt;URL&gt;</a> путь назначения для копирования.</p></li><li><p><code>options</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noreferrer">&lt;Object&gt;</a></p><ul><li><p><code>dereference</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" target="_blank" rel="noreferrer">&lt;boolean&gt;</a> разрешить символические ссылки. <strong>По умолчанию:</strong> <code>false</code>.</p></li><li><p><code>errorOnExist</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" target="_blank" rel="noreferrer">&lt;boolean&gt;</a> когда <code>force</code> равно <code>false</code>, и место назначения существует, выдавать ошибку. <strong>По умолчанию:</strong> <code>false</code>.</p></li><li><p><code>filter</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function" target="_blank" rel="noreferrer">&lt;Function&gt;</a> Функция для фильтрации копируемых файлов/каталогов. Верните <code>true</code>, чтобы скопировать элемент, <code>false</code>, чтобы проигнорировать его. При игнорировании каталога все его содержимое также будет пропущено. Также может вернуть <code>Promise</code>, который разрешается в <code>true</code> или <code>false</code> <strong>По умолчанию:</strong> <code>undefined</code>.</p></li><li><p><code>src</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> исходный путь для копирования.</p></li><li><p><code>dest</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> путь назначения для копирования.</p></li><li><p>Возвращает: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" target="_blank" rel="noreferrer">&lt;boolean&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" target="_blank" rel="noreferrer">&lt;Promise&gt;</a> Значение, которое можно привести к <code>boolean</code>, или <code>Promise</code>, который выполняется с таким значением.</p></li><li><p><code>force</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" target="_blank" rel="noreferrer">&lt;boolean&gt;</a> перезаписать существующий файл или каталог. Операция копирования будет игнорировать ошибки, если вы установите для этого значения false, и место назначения существует. Используйте опцию <code>errorOnExist</code>, чтобы изменить это поведение. <strong>По умолчанию:</strong> <code>true</code>.</p></li><li><p><code>mode</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;integer&gt;</a> модификаторы для операции копирования. <strong>По умолчанию:</strong> <code>0</code>. См. флаг <code>mode</code> для <a href="/ru/nodejs/api/fs#fspromisescopyfilesrc-dest-mode"><code>fsPromises.copyFile()</code></a>.</p></li><li><p><code>preserveTimestamps</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" target="_blank" rel="noreferrer">&lt;boolean&gt;</a> Если <code>true</code>, то метки времени из <code>src</code> будут сохранены. <strong>По умолчанию:</strong> <code>false</code>.</p></li><li><p><code>recursive</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" target="_blank" rel="noreferrer">&lt;boolean&gt;</a> копировать каталоги рекурсивно <strong>По умолчанию:</strong> <code>false</code></p></li><li><p><code>verbatimSymlinks</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" target="_blank" rel="noreferrer">&lt;boolean&gt;</a> Если <code>true</code>, то разрешение пути для символических ссылок будет пропущено. <strong>По умолчанию:</strong> <code>false</code></p></li></ul></li><li><p>Возвращает: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" target="_blank" rel="noreferrer">&lt;Promise&gt;</a> При успешном завершении выполняется с <code>undefined</code>.</p></li></ul><p>Асинхронно копирует всю структуру каталогов из <code>src</code> в <code>dest</code>, включая подкаталоги и файлы.</p><p>При копировании каталога в другой каталог глобы не поддерживаются, и поведение аналогично <code>cp dir1/ dir2/</code>.</p><h3 id="fspromisesglobpattern-options" tabindex="-1"><code>fsPromises.glob(pattern[, options])</code> <a class="header-anchor" href="#fspromisesglobpattern-options" aria-label="Permalink to “fsPromises.glob(pattern[, options])”">​</a></h3><div class="info custom-block"><p class="custom-block-title">[История]</p><table tabindex="0"><thead><tr><th>Версия</th><th>Изменения</th></tr></thead><tbody><tr><td>v22.2.0</td><td>Добавлена поддержка <code>withFileTypes</code> в качестве опции.</td></tr><tr><td>v22.0.0</td><td>Добавлено в: v22.0.0</td></tr></tbody></table></div><div class="warning custom-block"><p class="custom-block-title">[Стабильность: 1 - Экспериментальная]</p><p><a href="/ru/nodejs/api/documentation#stability-index">Стабильность: 1</a> <a href="/ru/nodejs/api/documentation#stability-index">Стабильность: 1</a> - Экспериментальная</p></div><ul><li><p><code>pattern</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string[]&gt;</a></p></li><li><p><code>options</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noreferrer">&lt;Object&gt;</a></p><ul><li><code>cwd</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> текущий рабочий каталог. <strong>По умолчанию:</strong> <code>process.cwd()</code></li><li><code>exclude</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function" target="_blank" rel="noreferrer">&lt;Function&gt;</a> Функция для фильтрации файлов/директорий. Возвращает <code>true</code>, чтобы исключить элемент, <code>false</code>, чтобы включить его. <strong>По умолчанию:</strong> <code>undefined</code>.</li><li><code>withFileTypes</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" target="_blank" rel="noreferrer">&lt;boolean&gt;</a> <code>true</code>, если glob должен возвращать пути как Dirent, <code>false</code> в противном случае. <strong>По умолчанию:</strong> <code>false</code>.</li></ul></li><li><p>Возвращает: <a href="https://tc39.github.io/ecma262/#sec-asynciterator-interface" target="_blank" rel="noreferrer">&lt;AsyncIterator&gt;</a> AsyncIterator, который возвращает пути файлов, соответствующих шаблону.</p></li></ul><div class="vp-code-group"><div class="tabs"><input type="radio" name="group-1911" id="tab-1912" checked><label data-title="ESM" for="tab-1912">ESM</label><input type="radio" name="group-1911" id="tab-1913"><label data-title="CJS" for="tab-1913">CJS</label></div><div class="blocks"><div class="language-js active line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { glob } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;node:fs/promises&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">for</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> entry</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> of</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> glob</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;**/*.js&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">))</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(entry);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">glob</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;node:fs/promises&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">async</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  for</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> entry</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> of</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> glob</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;**/*.js&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">))</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(entry);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})();</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div></div></div><h3 id="fspromiseslchmodpath-mode" tabindex="-1"><code>fsPromises.lchmod(path, mode)</code> <a class="header-anchor" href="#fspromiseslchmodpath-mode" aria-label="Permalink to “fsPromises.lchmod(path, mode)”">​</a></h3><p><strong>Устарело, начиная с версии: v10.0.0</strong></p><ul><li><code>path</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="/ru/nodejs/api/buffer#class-buffer">&lt;Buffer&gt;</a> | <a href="/ru/nodejs/api/url#the-whatwg-url-api">&lt;URL&gt;</a></li><li><code>mode</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;integer&gt;</a></li><li>Возвращает: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" target="_blank" rel="noreferrer">&lt;Promise&gt;</a> Разрешается с <code>undefined</code> при успехе.</li></ul><p>Изменяет права доступа для символической ссылки.</p><p>Этот метод реализован только в macOS.</p><h3 id="fspromiseslchownpath-uid-gid" tabindex="-1"><code>fsPromises.lchown(path, uid, gid)</code> <a class="header-anchor" href="#fspromiseslchownpath-uid-gid" aria-label="Permalink to “fsPromises.lchown(path, uid, gid)”">​</a></h3><div class="info custom-block"><p class="custom-block-title">[История]</p><table tabindex="0"><thead><tr><th style="text-align:left;">Версия</th><th style="text-align:left;">Изменения</th></tr></thead><tbody><tr><td style="text-align:left;">v10.6.0</td><td style="text-align:left;">Этот API больше не является устаревшим.</td></tr><tr><td style="text-align:left;">v10.0.0</td><td style="text-align:left;">Добавлено в: v10.0.0</td></tr></tbody></table></div><ul><li><code>path</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="/ru/nodejs/api/buffer#class-buffer">&lt;Buffer&gt;</a> | <a href="/ru/nodejs/api/url#the-whatwg-url-api">&lt;URL&gt;</a></li><li><code>uid</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;integer&gt;</a></li><li><code>gid</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;integer&gt;</a></li><li>Возвращает: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" target="_blank" rel="noreferrer">&lt;Promise&gt;</a> Разрешается с <code>undefined</code> при успехе.</li></ul><p>Изменяет владельца символической ссылки.</p><h3 id="fspromiseslutimespath-atime-mtime" tabindex="-1"><code>fsPromises.lutimes(path, atime, mtime)</code> <a class="header-anchor" href="#fspromiseslutimespath-atime-mtime" aria-label="Permalink to “fsPromises.lutimes(path, atime, mtime)”">​</a></h3><p><strong>Добавлено в: v14.5.0, v12.19.0</strong></p><ul><li><code>path</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="/ru/nodejs/api/buffer#class-buffer">&lt;Buffer&gt;</a> | <a href="/ru/nodejs/api/url#the-whatwg-url-api">&lt;URL&gt;</a></li><li><code>atime</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;number&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date" target="_blank" rel="noreferrer">&lt;Date&gt;</a></li><li><code>mtime</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;number&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date" target="_blank" rel="noreferrer">&lt;Date&gt;</a></li><li>Возвращает: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" target="_blank" rel="noreferrer">&lt;Promise&gt;</a> Разрешается с <code>undefined</code> при успехе.</li></ul><p>Изменяет время доступа и изменения файла так же, как <a href="/ru/nodejs/api/fs#fspromisesutimespath-atime-mtime"><code>fsPromises.utimes()</code></a>, с тем отличием, что если путь указывает на символическую ссылку, то ссылка не разыменовывается: вместо этого изменяются временные метки самой символической ссылки.</p><h3 id="fspromiseslinkexistingpath-newpath" tabindex="-1"><code>fsPromises.link(existingPath, newPath)</code> <a class="header-anchor" href="#fspromiseslinkexistingpath-newpath" aria-label="Permalink to “fsPromises.link(existingPath, newPath)”">​</a></h3><p><strong>Добавлено в: v10.0.0</strong></p><ul><li><code>existingPath</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="/ru/nodejs/api/buffer#class-buffer">&lt;Buffer&gt;</a> | <a href="/ru/nodejs/api/url#the-whatwg-url-api">&lt;URL&gt;</a></li><li><code>newPath</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="/ru/nodejs/api/buffer#class-buffer">&lt;Buffer&gt;</a> | <a href="/ru/nodejs/api/url#the-whatwg-url-api">&lt;URL&gt;</a></li><li>Возвращает: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" target="_blank" rel="noreferrer">&lt;Promise&gt;</a> Исполняется с <code>undefined</code> при успехе.</li></ul><p>Создаёт новую ссылку от <code>existingPath</code> к <code>newPath</code>. Смотрите документацию POSIX <a href="http://man7.org/linux/man-pages/man2/link.2" target="_blank" rel="noreferrer"><code>link(2)</code></a> для получения более подробной информации.</p><h3 id="fspromiseslstatpath-options" tabindex="-1"><code>fsPromises.lstat(path[, options])</code> <a class="header-anchor" href="#fspromiseslstatpath-options" aria-label="Permalink to “fsPromises.lstat(path[, options])”">​</a></h3><div class="info custom-block"><p class="custom-block-title">[История]</p><table tabindex="0"><thead><tr><th>Версия</th><th>Изменения</th></tr></thead><tbody><tr><td>v10.5.0</td><td>Принимает дополнительный объект <code>options</code> для указания, должны ли возвращаемые числовые значения быть bigint.</td></tr><tr><td>v10.0.0</td><td>Добавлено в: v10.0.0</td></tr></tbody></table></div><ul><li><p><code>path</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="/ru/nodejs/api/buffer#class-buffer">&lt;Buffer&gt;</a> | <a href="/ru/nodejs/api/url#the-whatwg-url-api">&lt;URL&gt;</a></p></li><li><p><code>options</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noreferrer">&lt;Object&gt;</a></p><ul><li><code>bigint</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" target="_blank" rel="noreferrer">&lt;boolean&gt;</a> Указывает, должны ли числовые значения в возвращаемом объекте <a href="/ru/nodejs/api/fs#class-fsstats">&lt;fs.Stats&gt;</a> быть <code>bigint</code>. <strong>По умолчанию:</strong> <code>false</code>.</li></ul></li><li><p>Возвращает: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" target="_blank" rel="noreferrer">&lt;Promise&gt;</a> Исполняется с объектом <a href="/ru/nodejs/api/fs#class-fsstats">&lt;fs.Stats&gt;</a> для указанного символической ссылки <code>path</code>.</p></li></ul><p>Эквивалентно <a href="/ru/nodejs/api/fs#fspromisesstatpath-options"><code>fsPromises.stat()</code></a>, если <code>path</code> не является символической ссылкой, в этом случае возвращается информация о самой ссылке, а не о файле, на который она указывает. Обратитесь к документации POSIX <a href="http://man7.org/linux/man-pages/man2/lstat.2" target="_blank" rel="noreferrer"><code>lstat(2)</code></a> для получения более подробной информации.</p><h3 id="fspromisesmkdirpath-options" tabindex="-1"><code>fsPromises.mkdir(path[, options])</code> <a class="header-anchor" href="#fspromisesmkdirpath-options" aria-label="Permalink to “fsPromises.mkdir(path[, options])”">​</a></h3><p><strong>Добавлено в версии: v10.0.0</strong></p><ul><li><p><code>path</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="/ru/nodejs/api/buffer#class-buffer">&lt;Buffer&gt;</a> | <a href="/ru/nodejs/api/url#the-whatwg-url-api">&lt;URL&gt;</a></p></li><li><p><code>options</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noreferrer">&lt;Object&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;integer&gt;</a></p><ul><li><code>recursive</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" target="_blank" rel="noreferrer">&lt;boolean&gt;</a> <strong>По умолчанию:</strong> <code>false</code></li><li><code>mode</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;integer&gt;</a> Не поддерживается в Windows. <strong>По умолчанию:</strong> <code>0o777</code>.</li></ul></li><li><p>Возвращает: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" target="_blank" rel="noreferrer">&lt;Promise&gt;</a> В случае успеха разрешается значением <code>undefined</code>, если <code>recursive</code> имеет значение <code>false</code>, или путем первого созданного пути к каталогу, если <code>recursive</code> имеет значение <code>true</code>.</p></li></ul><p>Асинхронно создает каталог.</p><p>Необязательный аргумент <code>options</code> может быть целым числом, определяющим <code>mode</code> (биты разрешений и sticky-биты), или объектом со свойством <code>mode</code> и свойством <code>recursive</code>, указывающим, следует ли создавать родительские каталоги. Вызов <code>fsPromises.mkdir()</code>, когда <code>path</code> является существующим каталогом, приводит к отклонению только тогда, когда <code>recursive</code> имеет значение false.</p><div class="vp-code-group"><div class="tabs"><input type="radio" name="group-2164" id="tab-2165" checked><label data-title="ESM" for="tab-2165">ESM</label><input type="radio" name="group-2164" id="tab-2166"><label data-title="CJS" for="tab-2166">CJS</label></div><div class="blocks"><div class="language-js active line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { mkdir } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;node:fs/promises&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">try</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> projectFolder</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> URL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;./test/project/&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">meta</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.url);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> createDir</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> mkdir</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(projectFolder, { recursive: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> });</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">\`created \${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">createDir</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}\`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">} </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">catch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (err) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(err.message);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">mkdir</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;node:fs/promises&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">join</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;node:path&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">async</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> makeDirectory</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> projectFolder</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> join</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(__dirname, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;test&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;project&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> dirCreation</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> mkdir</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(projectFolder, { recursive: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> });</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(dirCreation);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> dirCreation;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">makeDirectory</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">catch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(console.error);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div></div></div><h3 id="fspromisesmkdtempprefix-options" tabindex="-1"><code>fsPromises.mkdtemp(prefix[, options])</code> <a class="header-anchor" href="#fspromisesmkdtempprefix-options" aria-label="Permalink to “fsPromises.mkdtemp(prefix[, options])”">​</a></h3><div class="info custom-block"><p class="custom-block-title">[История]</p><table tabindex="0"><thead><tr><th>Версия</th><th>Изменения</th></tr></thead><tbody><tr><td>v20.6.0, v18.19.0</td><td>Параметр <code>prefix</code> теперь принимает буферы и URL.</td></tr><tr><td>v16.5.0, v14.18.0</td><td>Параметр <code>prefix</code> теперь принимает пустую строку.</td></tr><tr><td>v10.0.0</td><td>Добавлено в: v10.0.0</td></tr></tbody></table></div><ul><li><p><code>prefix</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="/ru/nodejs/api/buffer#class-buffer">&lt;Buffer&gt;</a> | <a href="/ru/nodejs/api/url#the-whatwg-url-api">&lt;URL&gt;</a></p></li><li><p><code>options</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noreferrer">&lt;Object&gt;</a></p><ul><li><code>encoding</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> <strong>По умолчанию:</strong> <code>&#39;utf8&#39;</code></li></ul></li><li><p>Возвращает: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" target="_blank" rel="noreferrer">&lt;Promise&gt;</a> Исполняется строкой, содержащей путь к файловой системе только что созданного временного каталога.</p></li></ul><p>Создает уникальный временный каталог. Уникальное имя каталога генерируется путем добавления шести случайных символов в конец предоставленного <code>prefix</code>. Из-за несогласованности платформ избегайте завершающих символов <code>X</code> в <code>prefix</code>. Некоторые платформы, особенно BSD, могут возвращать более шести случайных символов и заменять завершающие символы <code>X</code> в <code>prefix</code> случайными символами.</p><p>Необязательный аргумент <code>options</code> может быть строкой, указывающей кодировку, или объектом со свойством <code>encoding</code>, указывающим кодировку символов для использования.</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { mkdtemp } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;node:fs/promises&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { join } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;node:path&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { tmpdir } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;node:os&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">try</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> mkdtemp</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">join</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">tmpdir</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(), </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;foo-&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">));</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">} </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">catch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (err) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(err);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>Метод <code>fsPromises.mkdtemp()</code> добавит шесть случайно выбранных символов непосредственно к строке <code>prefix</code>. Например, если задан каталог <code>/tmp</code>, и намерение состоит в том, чтобы создать временный каталог <em>внутри</em> <code>/tmp</code>, <code>prefix</code> должен заканчиваться разделителем пути, специфичным для платформы (<code>require(&#39;node:path&#39;).sep</code>).</p><h3 id="fspromisesopenpath-flags-mode" tabindex="-1"><code>fsPromises.open(path, flags[, mode])</code> <a class="header-anchor" href="#fspromisesopenpath-flags-mode" aria-label="Permalink to “fsPromises.open(path, flags[, mode])”">​</a></h3><div class="info custom-block"><p class="custom-block-title">[История]</p><table tabindex="0"><thead><tr><th>Версия</th><th>Изменения</th></tr></thead><tbody><tr><td>v11.1.0</td><td>Аргумент <code>flags</code> теперь является необязательным и по умолчанию имеет значение <code>&#39;r&#39;</code>.</td></tr><tr><td>v10.0.0</td><td>Добавлено в версии: v10.0.0</td></tr></tbody></table></div><ul><li><code>path</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="/ru/nodejs/api/buffer#class-buffer">&lt;Buffer&gt;</a> | <a href="/ru/nodejs/api/url#the-whatwg-url-api">&lt;URL&gt;</a></li><li><code>flags</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;number&gt;</a> См. <a href="/ru/nodejs/api/fs#file-system-flags">поддержку флагов файловой системы</a>. <strong>По умолчанию:</strong> <code>&#39;r&#39;</code>.</li><li><code>mode</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;integer&gt;</a> Устанавливает режим файла (права доступа и sticky bits), если файл создается. <strong>По умолчанию:</strong> <code>0o666</code> (чтение и запись)</li><li>Возвращает: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" target="_blank" rel="noreferrer">&lt;Promise&gt;</a> Разрешается с объектом <a href="/ru/nodejs/api/fs#class-filehandle">&lt;FileHandle&gt;</a>.</li></ul><p>Открывает <a href="/ru/nodejs/api/fs#class-filehandle">&lt;FileHandle&gt;</a>.</p><p>Для получения более подробной информации обратитесь к документации POSIX <a href="http://man7.org/linux/man-pages/man2/open.2" target="_blank" rel="noreferrer"><code>open(2)</code></a>.</p><p>Некоторые символы (<code>\\&lt; \\&gt; : &quot; / \\ | ? *</code>) зарезервированы в Windows, как описано в <a href="https://docs.microsoft.com/en-us/windows/desktop/FileIO/naming-a-file" target="_blank" rel="noreferrer">Naming Files, Paths, and Namespaces</a>. В NTFS, если имя файла содержит двоеточие, Node.js откроет поток файловой системы, как описано на <a href="https://docs.microsoft.com/en-us/windows/desktop/FileIO/using-streams" target="_blank" rel="noreferrer">этой странице MSDN</a>.</p><h3 id="fspromisesopendirpath-options" tabindex="-1"><code>fsPromises.opendir(path[, options])</code> <a class="header-anchor" href="#fspromisesopendirpath-options" aria-label="Permalink to “fsPromises.opendir(path[, options])”">​</a></h3><div class="info custom-block"><p class="custom-block-title">[История]</p><table tabindex="0"><thead><tr><th>Версия</th><th>Изменения</th></tr></thead><tbody><tr><td>v20.1.0, v18.17.0</td><td>Добавлена опция <code>recursive</code>.</td></tr><tr><td>v13.1.0, v12.16.0</td><td>Введена опция <code>bufferSize</code>.</td></tr><tr><td>v12.12.0</td><td>Добавлено в версии: v12.12.0</td></tr></tbody></table></div><ul><li><p><code>path</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="/ru/nodejs/api/buffer#class-buffer">&lt;Buffer&gt;</a> | <a href="/ru/nodejs/api/url#the-whatwg-url-api">&lt;URL&gt;</a></p></li><li><p><code>options</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noreferrer">&lt;Object&gt;</a></p><ul><li><code>encoding</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Null_type" target="_blank" rel="noreferrer">&lt;null&gt;</a> <strong>По умолчанию:</strong> <code>&#39;utf8&#39;</code></li><li><code>bufferSize</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;number&gt;</a> Количество записей каталога, которые буферизуются внутри при чтении из каталога. Более высокие значения приводят к лучшей производительности, но к большему использованию памяти. <strong>По умолчанию:</strong> <code>32</code></li><li><code>recursive</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" target="_blank" rel="noreferrer">&lt;boolean&gt;</a> Разрешенный <code>Dir</code> будет <a href="https://tc39.github.io/ecma262/#sec-asynciterable-interface" target="_blank" rel="noreferrer">&lt;AsyncIterable&gt;</a>, содержащим все подфайлы и каталоги. <strong>По умолчанию:</strong> <code>false</code></li></ul></li><li><p>Возвращает: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" target="_blank" rel="noreferrer">&lt;Promise&gt;</a> Разрешается с <a href="/ru/nodejs/api/fs#class-fsdir">&lt;fs.Dir&gt;</a>.</p></li></ul><p>Асинхронно открывает каталог для итеративного сканирования. Для получения более подробной информации обратитесь к документации POSIX <a href="http://man7.org/linux/man-pages/man3/opendir.3" target="_blank" rel="noreferrer"><code>opendir(3)</code></a>.</p><p>Создает <a href="/ru/nodejs/api/fs#class-fsdir">&lt;fs.Dir&gt;</a>, который содержит все дальнейшие функции для чтения и очистки каталога.</p><p>Опция <code>encoding</code> устанавливает кодировку для <code>path</code> при открытии каталога и последующих операциях чтения.</p><p>Пример использования асинхронной итерации:</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { opendir } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;node:fs/promises&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">try</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> dir</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> opendir</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;./&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  for</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> dirent</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> of</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> dir)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(dirent.name);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">} </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">catch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (err) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(err);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>При использовании асинхронного итератора объект <a href="/ru/nodejs/api/fs#class-fsdir">&lt;fs.Dir&gt;</a> будет автоматически закрыт после выхода итератора.</p><h3 id="fspromisesreaddirpath-options" tabindex="-1"><code>fsPromises.readdir(path[, options])</code> <a class="header-anchor" href="#fspromisesreaddirpath-options" aria-label="Permalink to “fsPromises.readdir(path[, options])”">​</a></h3><div class="info custom-block"><p class="custom-block-title">[История]</p><table tabindex="0"><thead><tr><th>Версия</th><th>Изменения</th></tr></thead><tbody><tr><td>v20.1.0, v18.17.0</td><td>Добавлена опция <code>recursive</code>.</td></tr><tr><td>v10.11.0</td><td>Добавлена новая опция <code>withFileTypes</code>.</td></tr><tr><td>v10.0.0</td><td>Добавлено в: v10.0.0</td></tr></tbody></table></div><ul><li><p><code>path</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="/ru/nodejs/api/buffer#class-buffer">&lt;Buffer&gt;</a> | <a href="/ru/nodejs/api/url#the-whatwg-url-api">&lt;URL&gt;</a></p></li><li><p><code>options</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noreferrer">&lt;Object&gt;</a></p><ul><li><code>encoding</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> <strong>По умолчанию:</strong> <code>&#39;utf8&#39;</code></li><li><code>withFileTypes</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" target="_blank" rel="noreferrer">&lt;boolean&gt;</a> <strong>По умолчанию:</strong> <code>false</code></li><li><code>recursive</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" target="_blank" rel="noreferrer">&lt;boolean&gt;</a> Если <code>true</code>, читает содержимое каталога рекурсивно. В рекурсивном режиме будут перечислены все файлы, подфайлы и каталоги. <strong>По умолчанию:</strong> <code>false</code>.</li></ul></li><li><p>Возвращает: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" target="_blank" rel="noreferrer">&lt;Promise&gt;</a> Исполняется с массивом имен файлов в каталоге, исключая <code>&#39;.&#39;</code> и <code>&#39;..&#39;</code>.</p></li></ul><p>Читает содержимое каталога.</p><p>Необязательный аргумент <code>options</code> может быть строкой, указывающей кодировку, или объектом со свойством <code>encoding</code>, указывающим кодировку символов, используемую для имен файлов. Если для <code>encoding</code> установлено значение <code>&#39;buffer&#39;</code>, возвращаемые имена файлов будут переданы как объекты <a href="/ru/nodejs/api/buffer#class-buffer">&lt;Buffer&gt;</a>.</p><p>Если для <code>options.withFileTypes</code> установлено значение <code>true</code>, возвращаемый массив будет содержать объекты <a href="/ru/nodejs/api/fs#class-fsdirent">&lt;fs.Dirent&gt;</a>.</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { readdir } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;node:fs/promises&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">try</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> files</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> readdir</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(path);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> file</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> of</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> files)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(file);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">} </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">catch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (err) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(err);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="fspromisesreadfilepath-options" tabindex="-1"><code>fsPromises.readFile(path[, options])</code> <a class="header-anchor" href="#fspromisesreadfilepath-options" aria-label="Permalink to “fsPromises.readFile(path[, options])”">​</a></h3><div class="info custom-block"><p class="custom-block-title">[История]</p><table tabindex="0"><thead><tr><th>Версия</th><th>Изменения</th></tr></thead><tbody><tr><td>v15.2.0, v14.17.0</td><td>Аргумент options может включать AbortSignal для прерывания текущего запроса readFile.</td></tr><tr><td>v10.0.0</td><td>Добавлено в: v10.0.0</td></tr></tbody></table></div><ul><li><p><code>path</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="/ru/nodejs/api/buffer#class-buffer">&lt;Buffer&gt;</a> | <a href="/ru/nodejs/api/url#the-whatwg-url-api">&lt;URL&gt;</a> | <a href="/ru/nodejs/api/fs#class-filehandle">&lt;FileHandle&gt;</a> имя файла или <code>FileHandle</code></p></li><li><p><code>options</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noreferrer">&lt;Object&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a></p><ul><li><code>encoding</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Null_type" target="_blank" rel="noreferrer">&lt;null&gt;</a> <strong>По умолчанию:</strong> <code>null</code></li><li><code>flag</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> См. <a href="/ru/nodejs/api/fs#file-system-flags">поддержка флагов файловой системы</a>. <strong>По умолчанию:</strong> <code>&#39;r&#39;</code>.</li><li><code>signal</code> <a href="/ru/nodejs/api/globals#class-abortsignal">&lt;AbortSignal&gt;</a> позволяет прервать выполняющийся readFile</li></ul></li><li><p>Возвращает: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" target="_blank" rel="noreferrer">&lt;Promise&gt;</a> Завершается с содержимым файла.</p></li></ul><p>Асинхронно считывает все содержимое файла.</p><p>Если кодировка не указана (с использованием <code>options.encoding</code>), данные возвращаются в виде объекта <a href="/ru/nodejs/api/buffer#class-buffer">&lt;Buffer&gt;</a>. В противном случае данные будут строкой.</p><p>Если <code>options</code> является строкой, то она указывает кодировку.</p><p>Когда <code>path</code> является каталогом, поведение <code>fsPromises.readFile()</code> зависит от платформы. В macOS, Linux и Windows промис будет отклонен с ошибкой. В FreeBSD будет возвращено представление содержимого каталога.</p><p>Пример чтения файла <code>package.json</code>, расположенного в том же каталоге, что и выполняемый код:</p><div class="vp-code-group"><div class="tabs"><input type="radio" name="group-2575" id="tab-2576" checked><label data-title="ESM" for="tab-2576">ESM</label><input type="radio" name="group-2575" id="tab-2577"><label data-title="CJS" for="tab-2577">CJS</label></div><div class="blocks"><div class="language-js active line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { readFile } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;node:fs/promises&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">try</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> filePath</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> URL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;./package.json&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">meta</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.url);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> contents</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> readFile</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(filePath, { encoding: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;utf8&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(contents);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">} </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">catch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (err) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(err.message);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">readFile</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;node:fs/promises&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">resolve</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;node:path&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">async</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> logFile</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  try</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> filePath</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> resolve</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;./package.json&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> contents</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> readFile</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(filePath, { encoding: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;utf8&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(contents);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">catch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (err) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(err.message);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">logFile</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div></div></div><p>Можно прервать текущий <code>readFile</code> с помощью <a href="/ru/nodejs/api/globals#class-abortsignal">&lt;AbortSignal&gt;</a>. Если запрос прерван, возвращенный промис отклоняется с <code>AbortError</code>:</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { readFile } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;node:fs/promises&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">try</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> controller</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> AbortController</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">signal</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> controller;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> promise</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> readFile</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(fileName, { signal });</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // Прерываем запрос до того, как промис завершится.</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  controller.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">abort</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> promise;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">} </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">catch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (err) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // Когда запрос прерван - err является AbortError</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(err);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>Прерывание текущего запроса не прерывает отдельные запросы операционной системы, а скорее внутреннюю буферизацию, выполняемую <code>fs.readFile</code>.</p><p>Любой указанный <a href="/ru/nodejs/api/fs#class-filehandle">&lt;FileHandle&gt;</a> должен поддерживать чтение.</p><h3 id="fspromisesreadlinkpath-options" tabindex="-1"><code>fsPromises.readlink(path[, options])</code> <a class="header-anchor" href="#fspromisesreadlinkpath-options" aria-label="Permalink to “fsPromises.readlink(path[, options])”">​</a></h3><p><strong>Добавлено в: v10.0.0</strong></p><ul><li><p><code>path</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="/ru/nodejs/api/buffer#class-buffer">&lt;Buffer&gt;</a> | <a href="/ru/nodejs/api/url#the-whatwg-url-api">&lt;URL&gt;</a></p></li><li><p><code>options</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noreferrer">&lt;Object&gt;</a></p><ul><li><code>encoding</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> <strong>По умолчанию:</strong> <code>&#39;utf8&#39;</code></li></ul></li><li><p>Возвращает: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" target="_blank" rel="noreferrer">&lt;Promise&gt;</a> Исполняется с <code>linkString</code> при успехе.</p></li></ul><p>Читает содержимое символической ссылки, на которую указывает <code>path</code>. Подробности см. в документации POSIX <a href="http://man7.org/linux/man-pages/man2/readlink.2" target="_blank" rel="noreferrer"><code>readlink(2)</code></a>. Promise исполняется с <code>linkString</code> при успехе.</p><p>Необязательный аргумент <code>options</code> может быть строкой, указывающей кодировку, или объектом со свойством <code>encoding</code>, указывающим кодировку символов, используемую для возвращаемого пути ссылки. Если для <code>encoding</code> установлено значение <code>&#39;buffer&#39;</code>, возвращаемый путь ссылки будет передан как объект <a href="/ru/nodejs/api/buffer#class-buffer">&lt;Buffer&gt;</a>.</p><h3 id="fspromisesrealpathpath-options" tabindex="-1"><code>fsPromises.realpath(path[, options])</code> <a class="header-anchor" href="#fspromisesrealpathpath-options" aria-label="Permalink to “fsPromises.realpath(path[, options])”">​</a></h3><p><strong>Добавлено в: v10.0.0</strong></p><ul><li><p><code>path</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="/ru/nodejs/api/buffer#class-buffer">&lt;Buffer&gt;</a> | <a href="/ru/nodejs/api/url#the-whatwg-url-api">&lt;URL&gt;</a></p></li><li><p><code>options</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noreferrer">&lt;Object&gt;</a></p><ul><li><code>encoding</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> <strong>По умолчанию:</strong> <code>&#39;utf8&#39;</code></li></ul></li><li><p>Возвращает: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" target="_blank" rel="noreferrer">&lt;Promise&gt;</a> Исполняется с разрешенным путем при успехе.</p></li></ul><p>Определяет фактическое местоположение <code>path</code>, используя ту же семантику, что и функция <code>fs.realpath.native()</code>.</p><p>Поддерживаются только пути, которые можно преобразовать в строки UTF8.</p><p>Необязательный аргумент <code>options</code> может быть строкой, указывающей кодировку, или объектом со свойством <code>encoding</code>, указывающим кодировку символов, используемую для пути. Если для <code>encoding</code> установлено значение <code>&#39;buffer&#39;</code>, возвращаемый путь будет передан как объект <a href="/ru/nodejs/api/buffer#class-buffer">&lt;Buffer&gt;</a>.</p><p>В Linux, когда Node.js связан с musl libc, файловая система procfs должна быть смонтирована в <code>/proc</code>, чтобы эта функция работала. Glibc не имеет этого ограничения.</p><h3 id="fspromisesrenameoldpath-newpath" tabindex="-1"><code>fsPromises.rename(oldPath, newPath)</code> <a class="header-anchor" href="#fspromisesrenameoldpath-newpath" aria-label="Permalink to “fsPromises.rename(oldPath, newPath)”">​</a></h3><p><strong>Добавлено в версии: v10.0.0</strong></p><ul><li><code>oldPath</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="/ru/nodejs/api/buffer#class-buffer">&lt;Buffer&gt;</a> | <a href="/ru/nodejs/api/url#the-whatwg-url-api">&lt;URL&gt;</a></li><li><code>newPath</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="/ru/nodejs/api/buffer#class-buffer">&lt;Buffer&gt;</a> | <a href="/ru/nodejs/api/url#the-whatwg-url-api">&lt;URL&gt;</a></li><li>Возвращает: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" target="_blank" rel="noreferrer">&lt;Promise&gt;</a> Разрешается с <code>undefined</code> при успехе.</li></ul><p>Переименовывает <code>oldPath</code> в <code>newPath</code>.</p><h3 id="fspromisesrmdirpath-options" tabindex="-1"><code>fsPromises.rmdir(path[, options])</code> <a class="header-anchor" href="#fspromisesrmdirpath-options" aria-label="Permalink to “fsPromises.rmdir(path[, options])”">​</a></h3><div class="info custom-block"><p class="custom-block-title">[История]</p><table tabindex="0"><thead><tr><th>Версия</th><th>Изменения</th></tr></thead><tbody><tr><td>v16.0.0</td><td>Использование <code>fsPromises.rmdir(path, { recursive: true })</code> на <code>path</code>, который является файлом, больше не разрешено и приводит к ошибке <code>ENOENT</code> в Windows и ошибке <code>ENOTDIR</code> в POSIX.</td></tr><tr><td>v16.0.0</td><td>Использование <code>fsPromises.rmdir(path, { recursive: true })</code> на <code>path</code>, который не существует, больше не разрешено и приводит к ошибке <code>ENOENT</code>.</td></tr><tr><td>v16.0.0</td><td>Опция <code>recursive</code> устарела, ее использование вызывает предупреждение об устаревании.</td></tr><tr><td>v14.14.0</td><td>Опция <code>recursive</code> устарела, используйте вместо нее <code>fsPromises.rm</code>.</td></tr><tr><td>v13.3.0, v12.16.0</td><td>Опция <code>maxBusyTries</code> переименована в <code>maxRetries</code>, и ее значение по умолчанию равно 0. Опция <code>emfileWait</code> была удалена, и ошибки <code>EMFILE</code> используют ту же логику повторных попыток, что и другие ошибки. Теперь поддерживается опция <code>retryDelay</code>. Теперь повторяются ошибки <code>ENFILE</code>.</td></tr><tr><td>v12.10.0</td><td>Теперь поддерживаются опции <code>recursive</code>, <code>maxBusyTries</code> и <code>emfileWait</code>.</td></tr><tr><td>v10.0.0</td><td>Добавлено в версии: v10.0.0</td></tr></tbody></table></div><ul><li><p><code>path</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="/ru/nodejs/api/buffer#class-buffer">&lt;Buffer&gt;</a> | <a href="/ru/nodejs/api/url#the-whatwg-url-api">&lt;URL&gt;</a></p></li><li><p><code>options</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noreferrer">&lt;Object&gt;</a></p><ul><li><code>maxRetries</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;integer&gt;</a> Если встречается ошибка <code>EBUSY</code>, <code>EMFILE</code>, <code>ENFILE</code>, <code>ENOTEMPTY</code> или <code>EPERM</code>, Node.js повторяет операцию с линейной экспоненциальной задержкой, увеличивающейся на <code>retryDelay</code> миллисекунд при каждой попытке. Эта опция представляет количество повторных попыток. Эта опция игнорируется, если опция <code>recursive</code> не равна <code>true</code>. <strong>По умолчанию:</strong> <code>0</code>.</li><li><code>recursive</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" target="_blank" rel="noreferrer">&lt;boolean&gt;</a> Если <code>true</code>, выполнить рекурсивное удаление каталога. В рекурсивном режиме операции повторяются при сбое. <strong>По умолчанию:</strong> <code>false</code>. <strong>Устарело.</strong></li><li><code>retryDelay</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;integer&gt;</a> Количество времени в миллисекундах для ожидания между повторными попытками. Эта опция игнорируется, если опция <code>recursive</code> не равна <code>true</code>. <strong>По умолчанию:</strong> <code>100</code>.</li></ul></li><li><p>Возвращает: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" target="_blank" rel="noreferrer">&lt;Promise&gt;</a> Разрешается с <code>undefined</code> при успехе.</p></li></ul><p>Удаляет каталог, идентифицированный по <code>path</code>.</p><p>Использование <code>fsPromises.rmdir()</code> для файла (а не каталога) приводит к отклонению promise с ошибкой <code>ENOENT</code> в Windows и ошибкой <code>ENOTDIR</code> в POSIX.</p><p>Чтобы получить поведение, аналогичное команде Unix <code>rm -rf</code>, используйте <a href="/ru/nodejs/api/fs#fspromisesrmpath-options"><code>fsPromises.rm()</code></a> с опциями <code>{ recursive: true, force: true }</code>.</p><h3 id="fspromisesrmpath-options" tabindex="-1"><code>fsPromises.rm(path[, options])</code> <a class="header-anchor" href="#fspromisesrmpath-options" aria-label="Permalink to “fsPromises.rm(path[, options])”">​</a></h3><p><strong>Добавлено в: v14.14.0</strong></p><ul><li><p><code>path</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="/ru/nodejs/api/buffer#class-buffer">&lt;Buffer&gt;</a> | <a href="/ru/nodejs/api/url#the-whatwg-url-api">&lt;URL&gt;</a></p></li><li><p><code>options</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noreferrer">&lt;Object&gt;</a></p><ul><li><code>force</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" target="_blank" rel="noreferrer">&lt;boolean&gt;</a> Если <code>true</code>, исключения будут игнорироваться, если <code>path</code> не существует. <strong>По умолчанию:</strong> <code>false</code>.</li><li><code>maxRetries</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;integer&gt;</a> Если возникает ошибка <code>EBUSY</code>, <code>EMFILE</code>, <code>ENFILE</code>, <code>ENOTEMPTY</code> или <code>EPERM</code>, Node.js будет повторять операцию с линейной задержкой, увеличивающейся на <code>retryDelay</code> миллисекунд при каждой попытке. Эта опция представляет количество повторных попыток. Эта опция игнорируется, если опция <code>recursive</code> не равна <code>true</code>. <strong>По умолчанию:</strong> <code>0</code>.</li><li><code>recursive</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" target="_blank" rel="noreferrer">&lt;boolean&gt;</a> Если <code>true</code>, выполнить рекурсивное удаление каталога. В рекурсивном режиме операции повторяются при сбое. <strong>По умолчанию:</strong> <code>false</code>.</li><li><code>retryDelay</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;integer&gt;</a> Количество времени в миллисекундах для ожидания между повторными попытками. Эта опция игнорируется, если опция <code>recursive</code> не равна <code>true</code>. <strong>По умолчанию:</strong> <code>100</code>.</li></ul></li><li><p>Возвращает: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" target="_blank" rel="noreferrer">&lt;Promise&gt;</a> Разрешается с <code>undefined</code> при успехе.</p></li></ul><p>Удаляет файлы и каталоги (по образцу стандартной утилиты POSIX <code>rm</code>).</p><h3 id="fspromisesstatpath-options" tabindex="-1"><code>fsPromises.stat(path[, options])</code> <a class="header-anchor" href="#fspromisesstatpath-options" aria-label="Permalink to “fsPromises.stat(path[, options])”">​</a></h3><div class="info custom-block"><p class="custom-block-title">[История]</p><table tabindex="0"><thead><tr><th>Версия</th><th>Изменения</th></tr></thead><tbody><tr><td>v10.5.0</td><td>Принимает дополнительный объект <code>options</code>, чтобы указать, следует ли возвращаемые числовые значения интерпретировать как bigint.</td></tr><tr><td>v10.0.0</td><td>Добавлено в: v10.0.0</td></tr></tbody></table></div><ul><li><p><code>path</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="/ru/nodejs/api/buffer#class-buffer">&lt;Buffer&gt;</a> | <a href="/ru/nodejs/api/url#the-whatwg-url-api">&lt;URL&gt;</a></p></li><li><p><code>options</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noreferrer">&lt;Object&gt;</a></p><ul><li><code>bigint</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" target="_blank" rel="noreferrer">&lt;boolean&gt;</a> Указывает, должны ли числовые значения в возвращаемом объекте <a href="/ru/nodejs/api/fs#class-fsstats">&lt;fs.Stats&gt;</a> быть <code>bigint</code>. <strong>По умолчанию:</strong> <code>false</code>.</li></ul></li><li><p>Возвращает: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" target="_blank" rel="noreferrer">&lt;Promise&gt;</a> Разрешается с объектом <a href="/ru/nodejs/api/fs#class-fsstats">&lt;fs.Stats&gt;</a> для данного <code>path</code>.</p></li></ul><h3 id="fspromisesstatfspath-options" tabindex="-1"><code>fsPromises.statfs(path[, options])</code> <a class="header-anchor" href="#fspromisesstatfspath-options" aria-label="Permalink to “fsPromises.statfs(path[, options])”">​</a></h3><p><strong>Добавлено в версии: v19.6.0, v18.15.0</strong></p><ul><li><p><code>path</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="/ru/nodejs/api/buffer#class-buffer">&lt;Buffer&gt;</a> | <a href="/ru/nodejs/api/url#the-whatwg-url-api">&lt;URL&gt;</a></p></li><li><p><code>options</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noreferrer">&lt;Object&gt;</a></p><ul><li><code>bigint</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" target="_blank" rel="noreferrer">&lt;boolean&gt;</a> Определяет, должны ли числовые значения в возвращаемом объекте <a href="/ru/nodejs/api/fs#class-fsstatfs">&lt;fs.StatFs&gt;</a> быть <code>bigint</code>. <strong>По умолчанию:</strong> <code>false</code>.</li></ul></li><li><p>Возвращает: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" target="_blank" rel="noreferrer">&lt;Promise&gt;</a> Исполняется с объектом <a href="/ru/nodejs/api/fs#class-fsstatfs">&lt;fs.StatFs&gt;</a> для заданного <code>path</code>.</p></li></ul><h3 id="fspromisessymlinktarget-path-type" tabindex="-1"><code>fsPromises.symlink(target, path[, type])</code> <a class="header-anchor" href="#fspromisessymlinktarget-path-type" aria-label="Permalink to “fsPromises.symlink(target, path[, type])”">​</a></h3><div class="info custom-block"><p class="custom-block-title">[История]</p><table tabindex="0"><thead><tr><th>Версия</th><th>Изменения</th></tr></thead><tbody><tr><td>v19.0.0</td><td>Если аргумент <code>type</code> равен <code>null</code> или опущен, Node.js автоматически определит тип <code>target</code> и автоматически выберет <code>dir</code> или <code>file</code>.</td></tr><tr><td>v10.0.0</td><td>Добавлено в версии: v10.0.0</td></tr></tbody></table></div><ul><li><code>target</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="/ru/nodejs/api/buffer#class-buffer">&lt;Buffer&gt;</a> | <a href="/ru/nodejs/api/url#the-whatwg-url-api">&lt;URL&gt;</a></li><li><code>path</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="/ru/nodejs/api/buffer#class-buffer">&lt;Buffer&gt;</a> | <a href="/ru/nodejs/api/url#the-whatwg-url-api">&lt;URL&gt;</a></li><li><code>type</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Null_type" target="_blank" rel="noreferrer">&lt;null&gt;</a> <strong>По умолчанию:</strong> <code>null</code></li><li>Возвращает: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" target="_blank" rel="noreferrer">&lt;Promise&gt;</a> Исполняется с <code>undefined</code> в случае успеха.</li></ul><p>Создает символическую ссылку.</p><p>Аргумент <code>type</code> используется только на платформах Windows и может быть одним из <code>&#39;dir&#39;</code>, <code>&#39;file&#39;</code> или <code>&#39;junction&#39;</code>. Если аргумент <code>type</code> равен <code>null</code>, Node.js автоматически определит тип <code>target</code> и использует <code>&#39;file&#39;</code> или <code>&#39;dir&#39;</code>. Если <code>target</code> не существует, будет использоваться <code>&#39;file&#39;</code>. Точки соединения Windows требуют, чтобы путь назначения был абсолютным. При использовании <code>&#39;junction&#39;</code> аргумент <code>target</code> будет автоматически нормализован до абсолютного пути. Точки соединения на томах NTFS могут указывать только на каталоги.</p><h3 id="fspromisestruncatepath-len" tabindex="-1"><code>fsPromises.truncate(path[, len])</code> <a class="header-anchor" href="#fspromisestruncatepath-len" aria-label="Permalink to “fsPromises.truncate(path[, len])”">​</a></h3><p><strong>Добавлено в: v10.0.0</strong></p><ul><li><code>path</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="/ru/nodejs/api/buffer#class-buffer">&lt;Buffer&gt;</a> | <a href="/ru/nodejs/api/url#the-whatwg-url-api">&lt;URL&gt;</a></li><li><code>len</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;integer&gt;</a> <strong>По умолчанию:</strong> <code>0</code></li><li>Возвращает: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" target="_blank" rel="noreferrer">&lt;Promise&gt;</a> Разрешается с <code>undefined</code> при успехе.</li></ul><p>Усекает (сокращает или увеличивает длину) содержимого по <code>path</code> до <code>len</code> байт.</p><h3 id="fspromisesunlinkpath" tabindex="-1"><code>fsPromises.unlink(path)</code> <a class="header-anchor" href="#fspromisesunlinkpath" aria-label="Permalink to “fsPromises.unlink(path)”">​</a></h3><p><strong>Добавлено в: v10.0.0</strong></p><ul><li><code>path</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="/ru/nodejs/api/buffer#class-buffer">&lt;Buffer&gt;</a> | <a href="/ru/nodejs/api/url#the-whatwg-url-api">&lt;URL&gt;</a></li><li>Возвращает: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" target="_blank" rel="noreferrer">&lt;Promise&gt;</a> Разрешается с <code>undefined</code> при успехе.</li></ul><p>Если <code>path</code> относится к символической ссылке, то ссылка удаляется, не затрагивая файл или каталог, на который эта ссылка указывает. Если <code>path</code> относится к файловому пути, который не является символической ссылкой, файл удаляется. Подробности см. в документации POSIX <a href="http://man7.org/linux/man-pages/man2/unlink.2" target="_blank" rel="noreferrer"><code>unlink(2)</code></a>.</p><h3 id="fspromisesutimespath-atime-mtime" tabindex="-1"><code>fsPromises.utimes(path, atime, mtime)</code> <a class="header-anchor" href="#fspromisesutimespath-atime-mtime" aria-label="Permalink to “fsPromises.utimes(path, atime, mtime)”">​</a></h3><p><strong>Добавлено в: v10.0.0</strong></p><ul><li><code>path</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="/ru/nodejs/api/buffer#class-buffer">&lt;Buffer&gt;</a> | <a href="/ru/nodejs/api/url#the-whatwg-url-api">&lt;URL&gt;</a></li><li><code>atime</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;number&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date" target="_blank" rel="noreferrer">&lt;Date&gt;</a></li><li><code>mtime</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;number&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date" target="_blank" rel="noreferrer">&lt;Date&gt;</a></li><li>Возвращает: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" target="_blank" rel="noreferrer">&lt;Promise&gt;</a> Разрешается с <code>undefined</code> при успехе.</li></ul><p>Изменяет временные метки файловой системы объекта, на который ссылается <code>path</code>.</p><p>Аргументы <code>atime</code> и <code>mtime</code> подчиняются следующим правилам:</p><ul><li>Значения могут быть либо числами, представляющими время Unix epoch, либо <code>Date</code>, либо числовой строкой, например <code>&#39;123456789.0&#39;</code>.</li><li>Если значение не может быть преобразовано в число или является <code>NaN</code>, <code>Infinity</code> или <code>-Infinity</code>, будет выброшена <code>Error</code>.</li></ul><h3 id="fspromiseswatchfilename-options" tabindex="-1"><code>fsPromises.watch(filename[, options])</code> <a class="header-anchor" href="#fspromiseswatchfilename-options" aria-label="Permalink to “fsPromises.watch(filename[, options])”">​</a></h3><p><strong>Добавлено в: v15.9.0, v14.18.0</strong></p><ul><li><p><code>filename</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="/ru/nodejs/api/buffer#class-buffer">&lt;Buffer&gt;</a> | <a href="/ru/nodejs/api/url#the-whatwg-url-api">&lt;URL&gt;</a></p></li><li><p><code>options</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noreferrer">&lt;Object&gt;</a></p><ul><li><code>persistent</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" target="_blank" rel="noreferrer">&lt;boolean&gt;</a> Указывает, должен ли процесс продолжать выполняться до тех пор, пока отслеживаются файлы. <strong>По умолчанию:</strong> <code>true</code>.</li><li><code>recursive</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" target="_blank" rel="noreferrer">&lt;boolean&gt;</a> Указывает, следует ли отслеживать все подкаталоги или только текущий каталог. Применяется, когда указан каталог, и только на поддерживаемых платформах (см. <a href="/ru/nodejs/api/fs#caveats">предостережения</a>). <strong>По умолчанию:</strong> <code>false</code>.</li><li><code>encoding</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> Указывает кодировку символов, используемую для имени файла, переданного слушателю. <strong>По умолчанию:</strong> <code>&#39;utf8&#39;</code>.</li><li><code>signal</code> <a href="/ru/nodejs/api/globals#class-abortsignal">&lt;AbortSignal&gt;</a> <a href="/ru/nodejs/api/globals#class-abortsignal">&lt;AbortSignal&gt;</a>, используемый для сигнализации о том, когда следует остановить наблюдатель.</li></ul></li><li><p>Возвращает: <a href="https://tc39.github.io/ecma262/#sec-asynciterator-interface" target="_blank" rel="noreferrer">&lt;AsyncIterator&gt;</a> объектов со свойствами:</p><ul><li><code>eventType</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> Тип изменения</li><li><code>filename</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="/ru/nodejs/api/buffer#class-buffer">&lt;Buffer&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Null_type" target="_blank" rel="noreferrer">&lt;null&gt;</a> Имя измененного файла.</li></ul></li></ul><p>Возвращает асинхронный итератор, который отслеживает изменения в <code>filename</code>, где <code>filename</code> — это либо файл, либо каталог.</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">watch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;node:fs/promises&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> ac</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> AbortController</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">signal</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ac;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setTimeout</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ac.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">abort</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(), </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">10000</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">async</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  try</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> watcher</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> watch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(__filename, { signal });</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    for</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> event</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> of</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> watcher)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(event);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">catch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (err) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (err.name </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">===</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;AbortError&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    throw</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> err;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})();</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p>На большинстве платформ <code>&#39;rename&#39;</code> выдается всякий раз, когда имя файла появляется или исчезает в каталоге.</p><p>Все <a href="/ru/nodejs/api/fs#caveats">предостережения</a> для <code>fs.watch()</code> также применимы к <code>fsPromises.watch()</code>.</p><h3 id="fspromiseswritefilefile-data-options" tabindex="-1"><code>fsPromises.writeFile(file, data[, options])</code> <a class="header-anchor" href="#fspromiseswritefilefile-data-options" aria-label="Permalink to “fsPromises.writeFile(file, data[, options])”">​</a></h3><div class="info custom-block"><p class="custom-block-title">[История]</p><table tabindex="0"><thead><tr><th>Версия</th><th>Изменения</th></tr></thead><tbody><tr><td>v21.0.0, v20.10.0</td><td>Теперь поддерживается опция <code>flush</code>.</td></tr><tr><td>v15.14.0, v14.18.0</td><td>Аргумент <code>data</code> поддерживает <code>AsyncIterable</code>, <code>Iterable</code> и <code>Stream</code>.</td></tr><tr><td>v15.2.0, v14.17.0</td><td>Аргумент options может включать AbortSignal для прерывания текущего запроса writeFile.</td></tr><tr><td>v14.0.0</td><td>Параметр <code>data</code> больше не будет приводить неподдерживаемые входные данные к строкам.</td></tr><tr><td>v10.0.0</td><td>Добавлено в версии: v10.0.0</td></tr></tbody></table></div><ul><li><p><code>file</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="/ru/nodejs/api/buffer#class-buffer">&lt;Buffer&gt;</a> | <a href="/ru/nodejs/api/url#the-whatwg-url-api">&lt;URL&gt;</a> | <a href="/ru/nodejs/api/fs#class-filehandle">&lt;FileHandle&gt;</a> имя файла или <code>FileHandle</code></p></li><li><p><code>data</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="/ru/nodejs/api/buffer#class-buffer">&lt;Buffer&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/TypedArray" target="_blank" rel="noreferrer">&lt;TypedArray&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/DataView" target="_blank" rel="noreferrer">&lt;DataView&gt;</a> | <a href="https://tc39.github.io/ecma262/#sec-asynciterable-interface" target="_blank" rel="noreferrer">&lt;AsyncIterable&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Iteration_protocols#The_iterable_protocol" target="_blank" rel="noreferrer">&lt;Iterable&gt;</a> | <a href="/ru/nodejs/api/stream#stream">&lt;Stream&gt;</a></p></li><li><p><code>options</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noreferrer">&lt;Object&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a></p><ul><li><code>encoding</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Null_type" target="_blank" rel="noreferrer">&lt;null&gt;</a> <strong>По умолчанию:</strong> <code>&#39;utf8&#39;</code></li><li><code>mode</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;integer&gt;</a> <strong>По умолчанию:</strong> <code>0o666</code></li><li><code>flag</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> См. <a href="/ru/nodejs/api/fs#file-system-flags">поддержку флагов файловой системы</a>. <strong>По умолчанию:</strong> <code>&#39;w&#39;</code>.</li><li><code>flush</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" target="_blank" rel="noreferrer">&lt;boolean&gt;</a> Если все данные успешно записаны в файл и <code>flush</code> имеет значение <code>true</code>, то для сброса данных используется <code>filehandle.sync()</code>. <strong>По умолчанию:</strong> <code>false</code>.</li><li><code>signal</code> <a href="/ru/nodejs/api/globals#class-abortsignal">&lt;AbortSignal&gt;</a> позволяет прервать выполняющуюся операцию writeFile</li></ul></li><li><p>Возвращает: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" target="_blank" rel="noreferrer">&lt;Promise&gt;</a> Исполняется с <code>undefined</code> при успехе.</p></li></ul><p>Асинхронно записывает данные в файл, заменяя файл, если он уже существует. <code>data</code> может быть строкой, буфером, объектом <a href="https://tc39.github.io/ecma262/#sec-asynciterable-interface" target="_blank" rel="noreferrer">&lt;AsyncIterable&gt;</a> или <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Iteration_protocols#The_iterable_protocol" target="_blank" rel="noreferrer">&lt;Iterable&gt;</a>.</p><p>Опция <code>encoding</code> игнорируется, если <code>data</code> является буфером.</p><p>Если <code>options</code> является строкой, то она задает кодировку.</p><p>Опция <code>mode</code> влияет только на вновь созданный файл. Подробнее см. <a href="/ru/nodejs/api/fs#fsopenpath-flags-mode-callback"><code>fs.open()</code></a>.</p><p>Любой указанный <a href="/ru/nodejs/api/fs#class-filehandle">&lt;FileHandle&gt;</a> должен поддерживать запись.</p><p>Опасно использовать <code>fsPromises.writeFile()</code> несколько раз для одного и того же файла, не дожидаясь завершения promise.</p><p>Аналогично <code>fsPromises.readFile</code> - <code>fsPromises.writeFile</code> - это удобный метод, который выполняет несколько вызовов <code>write</code> внутри для записи переданного ему буфера. Для кода, критичного к производительности, рассмотрите возможность использования <a href="/ru/nodejs/api/fs#fscreatewritestreampath-options"><code>fs.createWriteStream()</code></a> или <a href="/ru/nodejs/api/fs#filehandlecreatewritestreamoptions"><code>filehandle.createWriteStream()</code></a>.</p><p>Можно использовать <a href="/ru/nodejs/api/globals#class-abortsignal">&lt;AbortSignal&gt;</a> для отмены <code>fsPromises.writeFile()</code>. Отмена выполняется &quot;насколько это возможно&quot;, и некоторое количество данных, вероятно, все равно будет записано.</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { writeFile } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;node:fs/promises&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { Buffer } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;node:buffer&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">try</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> controller</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> AbortController</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">signal</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> controller;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> data</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Uint8Array</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Buffer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;Hello Node.js&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">));</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> promise</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> writeFile</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;message.txt&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, data, { signal });</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // Прервать запрос до завершения promise.</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  controller.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">abort</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> promise;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">} </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">catch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (err) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // Когда запрос прерывается - err - это AbortError</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(err);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p>Прерывание текущего запроса не прерывает отдельные запросы операционной системы, а скорее внутреннюю буферизацию, которую выполняет <code>fs.writeFile</code>.</p><h3 id="fspromisesconstants" tabindex="-1"><code>fsPromises.constants</code> <a class="header-anchor" href="#fspromisesconstants" aria-label="Permalink to “fsPromises.constants”">​</a></h3><p><strong>Добавлено в версии: v18.4.0, v16.17.0</strong></p><ul><li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noreferrer">&lt;Object&gt;</a></li></ul><p>Возвращает объект, содержащий часто используемые константы для операций с файловой системой. Объект такой же, как и <code>fs.constants</code>. Смотрите <a href="/ru/nodejs/api/fs#fs-constants">Константы FS</a> для получения более подробной информации.</p><h2 id="callback-api" tabindex="-1">Callback API <a class="header-anchor" href="#callback-api" aria-label="Permalink to “Callback API”">​</a></h2><p>API на основе обратных вызовов выполняют все операции асинхронно, не блокируя цикл событий, а затем вызывают функцию обратного вызова по завершении или при возникновении ошибки.</p><p>API на основе обратных вызовов используют базовый пул потоков Node.js для выполнения операций с файловой системой вне потока цикла событий. Эти операции не синхронизированы и не являются потокобезопасными. Необходимо соблюдать осторожность при выполнении нескольких одновременных изменений одного и того же файла, иначе может произойти повреждение данных.</p><h3 id="fsaccesspath-mode-callback" tabindex="-1"><code>fs.access(path[, mode], callback)</code> <a class="header-anchor" href="#fsaccesspath-mode-callback" aria-label="Permalink to “fs.access(path[, mode], callback)”">​</a></h3><div class="info custom-block"><p class="custom-block-title">[История]</p><table tabindex="0"><thead><tr><th>Версия</th><th>Изменения</th></tr></thead><tbody><tr><td>v20.8.0</td><td>Константы <code>fs.F_OK</code>, <code>fs.R_OK</code>, <code>fs.W_OK</code> и <code>fs.X_OK</code>, которые присутствовали непосредственно в <code>fs</code>, устарели.</td></tr><tr><td>v18.0.0</td><td>Передача недействительного обратного вызова в аргумент <code>callback</code> теперь вызывает <code>ERR_INVALID_ARG_TYPE</code> вместо <code>ERR_INVALID_CALLBACK</code>.</td></tr><tr><td>v7.6.0</td><td>Параметр <code>path</code> может быть объектом WHATWG <code>URL</code> с использованием протокола <code>file:</code>.</td></tr><tr><td>v6.3.0</td><td>Константы, такие как <code>fs.R_OK</code> и т. д., которые присутствовали непосредственно в <code>fs</code>, были перемещены в <code>fs.constants</code> в качестве мягкого устаревания. Таким образом, для Node.js <code>\\&lt; v6.3.0</code> используйте <code>fs</code> для доступа к этим константам или сделайте что-то вроде \`(fs.constants</td></tr><tr><td>v0.11.15</td><td>Добавлено в версии: v0.11.15</td></tr></tbody></table></div><ul><li><code>path</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="/ru/nodejs/api/buffer#class-buffer">&lt;Buffer&gt;</a> | <a href="/ru/nodejs/api/url#the-whatwg-url-api">&lt;URL&gt;</a></li><li><code>mode</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;integer&gt;</a> <strong>По умолчанию:</strong> <code>fs.constants.F_OK</code></li><li><code>callback</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function" target="_blank" rel="noreferrer">&lt;Function&gt;</a><ul><li><code>err</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error" target="_blank" rel="noreferrer">&lt;Error&gt;</a></li></ul></li></ul><p>Проверяет разрешения пользователя для файла или каталога, указанного в <code>path</code>. Аргумент <code>mode</code> является необязательным целым числом, которое определяет проверки доступности, которые должны быть выполнены. <code>mode</code> должен быть либо значением <code>fs.constants.F_OK</code>, либо маской, состоящей из побитового ИЛИ любого из <code>fs.constants.R_OK</code>, <code>fs.constants.W_OK</code> и <code>fs.constants.X_OK</code> (например, <code>fs.constants.W_OK | fs.constants.R_OK</code>). См. <a href="/ru/nodejs/api/fs#file-access-constants">Константы доступа к файлам</a> для возможных значений <code>mode</code>.</p><p>Последний аргумент, <code>callback</code>, — это функция обратного вызова, которая вызывается с возможным аргументом ошибки. Если какая-либо из проверок доступности не удалась, аргументом ошибки будет объект <code>Error</code>. Следующие примеры проверяют, существует ли <code>package.json</code>, и можно ли его читать или записывать.</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { access, constants } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;node:fs&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> file</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;package.json&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Проверка существования файла в текущем каталоге.</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">access</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(file, constants.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">F_OK</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">err</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">\`\${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">file</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">} \${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">err</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> ?</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;не существует&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> :</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;существует&#39;}\`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Проверка возможности чтения файла.</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">access</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(file, constants.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">R_OK</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">err</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">\`\${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">file</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">} \${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">err</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> ?</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;не может быть прочитан&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> :</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;может быть прочитан&#39;}\`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Проверка возможности записи файла.</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">access</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(file, constants.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">W_OK</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">err</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">\`\${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">file</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">} \${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">err</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> ?</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;не доступен для записи&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> :</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;доступен для записи&#39;}\`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Проверка возможности чтения и записи файла.</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">access</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(file, constants.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">R_OK</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> constants.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">W_OK</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">err</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">\`\${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">file</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">} \${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">err</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> ?</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;не является&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> :</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;является&#39;} читаемым и доступным для записи\`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><p>Не используйте <code>fs.access()</code> для проверки доступности файла перед вызовом <code>fs.open()</code>, <code>fs.readFile()</code> или <code>fs.writeFile()</code>. Это создаст состояние гонки, поскольку другие процессы могут изменить состояние файла между двумя вызовами. Вместо этого пользовательский код должен открывать/читать/записывать файл напрямую и обрабатывать ошибку, возникающую, если файл недоступен.</p><p><strong>запись (НЕ РЕКОМЕНДУЕТСЯ)</strong></p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { access, open, close } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;node:fs&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">access</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;myfile&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">err</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">err) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;myfile уже существует&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  open</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;myfile&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;wx&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">err</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">fd</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (err) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">throw</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> err;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    try</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">      writeMyData</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(fd);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">finally</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">      close</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(fd, (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">err</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (err) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">throw</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> err;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><p><strong>запись (РЕКОМЕНДУЕТСЯ)</strong></p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { open, close } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;node:fs&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">open</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;myfile&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;wx&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">err</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">fd</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (err) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (err.code </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">===</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;EEXIST&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;myfile уже существует&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    throw</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> err;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  try</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    writeMyData</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(fd);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">finally</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    close</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(fd, (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">err</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (err) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">throw</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> err;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><p><strong>чтение (НЕ РЕКОМЕНДУЕТСЯ)</strong></p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { access, open, close } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;node:fs&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">access</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;myfile&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">err</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (err) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (err.code </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">===</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;ENOENT&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;myfile не существует&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    throw</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> err;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  open</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;myfile&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;r&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">err</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">fd</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (err) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">throw</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> err;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    try</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">      readMyData</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(fd);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">finally</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">      close</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(fd, (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">err</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (err) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">throw</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> err;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><p><strong>чтение (РЕКОМЕНДУЕТСЯ)</strong></p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { open, close } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;node:fs&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">open</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;myfile&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;r&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">err</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">fd</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (err) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (err.code </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">===</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;ENOENT&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;myfile не существует&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    throw</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> err;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  try</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    readMyData</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(fd);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">finally</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    close</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(fd, (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">err</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (err) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">throw</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> err;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><p>Примеры &quot;не рекомендуется&quot; выше проверяют доступность, а затем используют файл; примеры &quot;рекомендуется&quot; лучше, потому что они используют файл напрямую и обрабатывают ошибку, если она есть.</p><p>В общем, проверяйте доступность файла только в том случае, если файл не будет использоваться напрямую, например, когда его доступность является сигналом от другого процесса.</p><p>В Windows политики контроля доступа (ACL) в каталоге могут ограничивать доступ к файлу или каталогу. Однако функция <code>fs.access()</code> не проверяет ACL и поэтому может сообщить, что путь доступен, даже если ACL запрещает пользователю чтение или запись в него.</p><h3 id="fsappendfilepath-data-options-callback" tabindex="-1"><code>fs.appendFile(path, data[, options], callback)</code> <a class="header-anchor" href="#fsappendfilepath-data-options-callback" aria-label="Permalink to “fs.appendFile(path, data[, options], callback)”">​</a></h3><div class="info custom-block"><p class="custom-block-title">[История]</p><table tabindex="0"><thead><tr><th>Версия</th><th>Изменения</th></tr></thead><tbody><tr><td>v21.1.0, v20.10.0</td><td>Теперь поддерживается опция <code>flush</code>.</td></tr><tr><td>v18.0.0</td><td>Передача недействительного обратного вызова аргументу <code>callback</code> теперь вызывает <code>ERR_INVALID_ARG_TYPE</code> вместо <code>ERR_INVALID_CALLBACK</code>.</td></tr><tr><td>v10.0.0</td><td>Параметр <code>callback</code> больше не является необязательным. Если его не передать, во время выполнения будет выброшена ошибка <code>TypeError</code>.</td></tr><tr><td>v7.0.0</td><td>Параметр <code>callback</code> больше не является необязательным. Если его не передать, будет выдано предупреждение об устаревании с идентификатором DEP0013.</td></tr><tr><td>v7.0.0</td><td>Переданный объект <code>options</code> никогда не будет изменен.</td></tr><tr><td>v5.0.0</td><td>Параметр <code>file</code> теперь может быть файловым дескриптором.</td></tr><tr><td>v0.6.7</td><td>Добавлено в версии: v0.6.7</td></tr></tbody></table></div><ul><li><p><code>path</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="/ru/nodejs/api/buffer#class-buffer">&lt;Buffer&gt;</a> | <a href="/ru/nodejs/api/url#the-whatwg-url-api">&lt;URL&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;number&gt;</a> имя файла или файловый дескриптор</p></li><li><p><code>data</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="/ru/nodejs/api/buffer#class-buffer">&lt;Buffer&gt;</a></p></li><li><p><code>options</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noreferrer">&lt;Object&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a></p><ul><li><code>encoding</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Null_type" target="_blank" rel="noreferrer">&lt;null&gt;</a> <strong>По умолчанию:</strong> <code>&#39;utf8&#39;</code></li><li><code>mode</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;integer&gt;</a> <strong>По умолчанию:</strong> <code>0o666</code></li><li><code>flag</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> См. <a href="/ru/nodejs/api/fs#file-system-flags">поддержку флагов файловой системы</a>. <strong>По умолчанию:</strong> <code>&#39;a&#39;</code>.</li><li><code>flush</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" target="_blank" rel="noreferrer">&lt;boolean&gt;</a> Если <code>true</code>, базовый файловый дескриптор сбрасывается перед его закрытием. <strong>По умолчанию:</strong> <code>false</code>.</li></ul></li><li><p><code>callback</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function" target="_blank" rel="noreferrer">&lt;Function&gt;</a></p><ul><li><code>err</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error" target="_blank" rel="noreferrer">&lt;Error&gt;</a></li></ul></li></ul><p>Асинхронно добавляет данные в файл, создавая файл, если он еще не существует. <code>data</code> может быть строкой или <a href="/ru/nodejs/api/buffer#class-buffer">&lt;Buffer&gt;</a>.</p><p>Параметр <code>mode</code> влияет только на вновь созданный файл. Подробнее см. в <a href="/ru/nodejs/api/fs#fsopenpath-flags-mode-callback"><code>fs.open()</code></a>.</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { appendFile } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;node:fs&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">appendFile</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;message.txt&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;data to append&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">err</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (err) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">throw</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> err;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;The &quot;data to append&quot; was appended to file!&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>Если <code>options</code> является строкой, то она определяет кодировку:</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { appendFile } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;node:fs&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">appendFile</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;message.txt&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;data to append&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;utf8&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, callback);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><code>path</code> может быть указан как числовой файловый дескриптор, который был открыт для добавления (с использованием <code>fs.open()</code> или <code>fs.openSync()</code>). Файловый дескриптор не будет закрыт автоматически.</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { open, close, appendFile } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;node:fs&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> closeFd</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">fd</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  close</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(fd, (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">err</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (err) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">throw</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> err;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">open</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;message.txt&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;a&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">err</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">fd</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (err) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">throw</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> err;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  try</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    appendFile</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(fd, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;data to append&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;utf8&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">err</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">      closeFd</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(fd);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (err) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">throw</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> err;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">catch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (err) {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    closeFd</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(fd);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    throw</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> err;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><h3 id="fschmodpath-mode-callback" tabindex="-1"><code>fs.chmod(path, mode, callback)</code> <a class="header-anchor" href="#fschmodpath-mode-callback" aria-label="Permalink to “fs.chmod(path, mode, callback)”">​</a></h3><div class="info custom-block"><p class="custom-block-title">[История изменений]</p><table tabindex="0"><thead><tr><th>Версия</th><th>Изменения</th></tr></thead><tbody><tr><td>v18.0.0</td><td>Передача недействительного обратного вызова аргументу <code>callback</code> теперь вызывает <code>ERR_INVALID_ARG_TYPE</code> вместо <code>ERR_INVALID_CALLBACK</code>.</td></tr><tr><td>v10.0.0</td><td>Параметр <code>callback</code> больше не является необязательным. Его отсутствие вызовет ошибку <code>TypeError</code> во время выполнения.</td></tr><tr><td>v7.6.0</td><td>Параметр <code>path</code> может быть объектом WHATWG <code>URL</code>, использующим протокол <code>file:</code>.</td></tr><tr><td>v7.0.0</td><td>Параметр <code>callback</code> больше не является необязательным. Его отсутствие вызовет предупреждение об устаревании с идентификатором DEP0013.</td></tr><tr><td>v0.1.30</td><td>Добавлено в: v0.1.30</td></tr></tbody></table></div><ul><li><code>path</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="/ru/nodejs/api/buffer#class-buffer">&lt;Buffer&gt;</a> | <a href="/ru/nodejs/api/url#the-whatwg-url-api">&lt;URL&gt;</a></li><li><code>mode</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;integer&gt;</a></li><li><code>callback</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function" target="_blank" rel="noreferrer">&lt;Function&gt;</a><ul><li><code>err</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error" target="_blank" rel="noreferrer">&lt;Error&gt;</a></li></ul></li></ul><p>Асинхронно изменяет разрешения файла. В функцию обратного вызова завершения не передаются никакие аргументы, кроме возможного исключения.</p><p>Дополнительные сведения см. в документации POSIX <a href="http://man7.org/linux/man-pages/man2/chmod.2" target="_blank" rel="noreferrer"><code>chmod(2)</code></a>.</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { chmod } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;node:fs&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">chmod</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;my_file.txt&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0o775</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">err</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (err) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">throw</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> err;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;Разрешения для файла &quot;my_file.txt&quot; были изменены!&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h4 id="file-modes" tabindex="-1">Режимы файла <a class="header-anchor" href="#file-modes" aria-label="Permalink to “Режимы файла”">​</a></h4><p>Аргумент <code>mode</code>, используемый как в методах <code>fs.chmod()</code>, так и в <code>fs.chmodSync()</code>, представляет собой числовую битовую маску, созданную с использованием логического ИЛИ следующих констант:</p><table tabindex="0"><thead><tr><th>Константа</th><th>Восьмеричное значение</th><th>Описание</th></tr></thead><tbody><tr><td><code>fs.constants.S_IRUSR</code></td><td><code>0o400</code></td><td>чтение владельцем</td></tr><tr><td><code>fs.constants.S_IWUSR</code></td><td><code>0o200</code></td><td>запись владельцем</td></tr><tr><td><code>fs.constants.S_IXUSR</code></td><td><code>0o100</code></td><td>выполнение/поиск владельцем</td></tr><tr><td><code>fs.constants.S_IRGRP</code></td><td><code>0o40</code></td><td>чтение группой</td></tr><tr><td><code>fs.constants.S_IWGRP</code></td><td><code>0o20</code></td><td>запись группой</td></tr><tr><td><code>fs.constants.S_IXGRP</code></td><td><code>0o10</code></td><td>выполнение/поиск группой</td></tr><tr><td><code>fs.constants.S_IROTH</code></td><td><code>0o4</code></td><td>чтение другими</td></tr><tr><td><code>fs.constants.S_IWOTH</code></td><td><code>0o2</code></td><td>запись другими</td></tr><tr><td><code>fs.constants.S_IXOTH</code></td><td><code>0o1</code></td><td>выполнение/поиск другими</td></tr></tbody></table><p>Более простой способ построения <code>mode</code> - использовать последовательность из трех восьмеричных цифр (например, <code>765</code>). Самая левая цифра (<code>7</code> в примере) указывает разрешения для владельца файла. Средняя цифра (<code>6</code> в примере) указывает разрешения для группы. Самая правая цифра (<code>5</code> в примере) указывает разрешения для других.</p><table tabindex="0"><thead><tr><th>Число</th><th>Описание</th></tr></thead><tbody><tr><td><code>7</code></td><td>чтение, запись и выполнение</td></tr><tr><td><code>6</code></td><td>чтение и запись</td></tr><tr><td><code>5</code></td><td>чтение и выполнение</td></tr><tr><td><code>4</code></td><td>только чтение</td></tr><tr><td><code>3</code></td><td>запись и выполнение</td></tr><tr><td><code>2</code></td><td>только запись</td></tr><tr><td><code>1</code></td><td>только выполнение</td></tr><tr><td><code>0</code></td><td>нет разрешений</td></tr></tbody></table><p>Например, восьмеричное значение <code>0o765</code> означает:</p><ul><li>Владелец может читать, записывать и выполнять файл.</li><li>Группа может читать и записывать файл.</li><li>Другие могут читать и выполнять файл.</li></ul><p>При использовании необработанных чисел там, где ожидаются режимы файлов, любое значение, превышающее <code>0o777</code>, может привести к зависящему от платформы поведению, которое не поддерживается для последовательной работы. Поэтому такие константы, как <code>S_ISVTX</code>, <code>S_ISGID</code> или <code>S_ISUID</code>, не представлены в <code>fs.constants</code>.</p><p>Предостережения: в Windows можно изменить только разрешение на запись, и различие между разрешениями группы, владельца или других не реализовано.</p><h3 id="fschownpath-uid-gid-callback" tabindex="-1"><code>fs.chown(path, uid, gid, callback)</code> <a class="header-anchor" href="#fschownpath-uid-gid-callback" aria-label="Permalink to “fs.chown(path, uid, gid, callback)”">​</a></h3><div class="info custom-block"><p class="custom-block-title">[История]</p><table tabindex="0"><thead><tr><th>Версия</th><th>Изменения</th></tr></thead><tbody><tr><td>v18.0.0</td><td>Передача неверного обратного вызова в аргумент <code>callback</code> теперь вызывает <code>ERR_INVALID_ARG_TYPE</code> вместо <code>ERR_INVALID_CALLBACK</code>.</td></tr><tr><td>v10.0.0</td><td>Параметр <code>callback</code> больше не является необязательным. Его отсутствие приведет к возникновению <code>TypeError</code> во время выполнения.</td></tr><tr><td>v7.6.0</td><td>Параметр <code>path</code> может быть объектом WHATWG <code>URL</code>, использующим протокол <code>file:</code>.</td></tr><tr><td>v7.0.0</td><td>Параметр <code>callback</code> больше не является необязательным. Его отсутствие приведет к появлению предупреждения об устаревании с идентификатором DEP0013.</td></tr><tr><td>v0.1.97</td><td>Добавлено в: v0.1.97</td></tr></tbody></table></div><ul><li><code>path</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="/ru/nodejs/api/buffer#class-buffer">&lt;Buffer&gt;</a> | <a href="/ru/nodejs/api/url#the-whatwg-url-api">&lt;URL&gt;</a></li><li><code>uid</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;integer&gt;</a></li><li><code>gid</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;integer&gt;</a></li><li><code>callback</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function" target="_blank" rel="noreferrer">&lt;Function&gt;</a><ul><li><code>err</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error" target="_blank" rel="noreferrer">&lt;Error&gt;</a></li></ul></li></ul><p>Асинхронно изменяет владельца и группу файла. В качестве обратного вызова завершения не передаются никакие аргументы, кроме возможного исключения.</p><p>Для получения более подробной информации см. документацию POSIX <a href="http://man7.org/linux/man-pages/man2/chown.2" target="_blank" rel="noreferrer"><code>chown(2)</code></a>.</p><h3 id="fsclosefd-callback" tabindex="-1"><code>fs.close(fd[, callback])</code> <a class="header-anchor" href="#fsclosefd-callback" aria-label="Permalink to “fs.close(fd[, callback])”">​</a></h3><div class="info custom-block"><p class="custom-block-title">[История]</p><table tabindex="0"><thead><tr><th>Версия</th><th>Изменения</th></tr></thead><tbody><tr><td>v18.0.0</td><td>Передача неверного обратного вызова в аргумент <code>callback</code> теперь вызывает <code>ERR_INVALID_ARG_TYPE</code> вместо <code>ERR_INVALID_CALLBACK</code>.</td></tr><tr><td>v15.9.0, v14.17.0</td><td>Теперь используется обратный вызов по умолчанию, если он не предоставлен.</td></tr><tr><td>v10.0.0</td><td>Параметр <code>callback</code> больше не является необязательным. Его отсутствие приведет к возникновению <code>TypeError</code> во время выполнения.</td></tr><tr><td>v7.0.0</td><td>Параметр <code>callback</code> больше не является необязательным. Его отсутствие приведет к появлению предупреждения об устаревании с идентификатором DEP0013.</td></tr><tr><td>v0.0.2</td><td>Добавлено в: v0.0.2</td></tr></tbody></table></div><ul><li><code>fd</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;integer&gt;</a></li><li><code>callback</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function" target="_blank" rel="noreferrer">&lt;Function&gt;</a><ul><li><code>err</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error" target="_blank" rel="noreferrer">&lt;Error&gt;</a></li></ul></li></ul><p>Закрывает файловый дескриптор. В качестве обратного вызова завершения не передаются никакие аргументы, кроме возможного исключения.</p><p>Вызов <code>fs.close()</code> для любого файлового дескриптора (<code>fd</code>), который в настоящее время используется через любую другую операцию <code>fs</code>, может привести к неопределенному поведению.</p><p>Для получения более подробной информации см. документацию POSIX <a href="http://man7.org/linux/man-pages/man2/close.2" target="_blank" rel="noreferrer"><code>close(2)</code></a>.</p><h3 id="fscopyfilesrc-dest-mode-callback" tabindex="-1"><code>fs.copyFile(src, dest[, mode], callback)</code> <a class="header-anchor" href="#fscopyfilesrc-dest-mode-callback" aria-label="Permalink to “fs.copyFile(src, dest[, mode], callback)”">​</a></h3><div class="info custom-block"><p class="custom-block-title">[История]</p><table tabindex="0"><thead><tr><th>Версия</th><th>Изменения</th></tr></thead><tbody><tr><td>v18.0.0</td><td>Передача недопустимого обратного вызова в аргумент <code>callback</code> теперь вызывает <code>ERR_INVALID_ARG_TYPE</code> вместо <code>ERR_INVALID_CALLBACK</code>.</td></tr><tr><td>v14.0.0</td><td>Аргумент <code>flags</code> изменен на <code>mode</code> и введены более строгие проверки типов.</td></tr><tr><td>v8.5.0</td><td>Добавлено в: v8.5.0</td></tr></tbody></table></div><ul><li><code>src</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="/ru/nodejs/api/buffer#class-buffer">&lt;Buffer&gt;</a> | <a href="/ru/nodejs/api/url#the-whatwg-url-api">&lt;URL&gt;</a> исходный файл для копирования</li><li><code>dest</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="/ru/nodejs/api/buffer#class-buffer">&lt;Buffer&gt;</a> | <a href="/ru/nodejs/api/url#the-whatwg-url-api">&lt;URL&gt;</a> целевой файл для операции копирования</li><li><code>mode</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;integer&gt;</a> модификаторы для операции копирования. <strong>По умолчанию:</strong> <code>0</code>.</li><li><code>callback</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function" target="_blank" rel="noreferrer">&lt;Function&gt;</a><ul><li><code>err</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error" target="_blank" rel="noreferrer">&lt;Error&gt;</a></li></ul></li></ul><p>Асинхронно копирует <code>src</code> в <code>dest</code>. По умолчанию, <code>dest</code> перезаписывается, если он уже существует. Функция обратного вызова не получает никаких аргументов, кроме возможного исключения. Node.js не дает никаких гарантий относительно атомарности операции копирования. Если после открытия целевого файла для записи произошла ошибка, Node.js попытается удалить целевой файл.</p><p><code>mode</code> — это необязательное целое число, которое определяет поведение операции копирования. Можно создать маску, состоящую из побитового ИЛИ двух или более значений (например, <code>fs.constants.COPYFILE_EXCL | fs.constants.COPYFILE_FICLONE</code>).</p><ul><li><code>fs.constants.COPYFILE_EXCL</code>: Операция копирования завершится неудачей, если <code>dest</code> уже существует.</li><li><code>fs.constants.COPYFILE_FICLONE</code>: Операция копирования попытается создать reflink copy-on-write. Если платформа не поддерживает copy-on-write, то используется резервный механизм копирования.</li><li><code>fs.constants.COPYFILE_FICLONE_FORCE</code>: Операция копирования попытается создать reflink copy-on-write. Если платформа не поддерживает copy-on-write, то операция завершится неудачей.</li></ul><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { copyFile, constants } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;node:fs&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> callback</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">err</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (err) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">throw</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> err;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;source.txt was copied to destination.txt&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// destination.txt будет создан или перезаписан по умолчанию.</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">copyFile</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;source.txt&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;destination.txt&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, callback);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// При использовании COPYFILE_EXCL операция завершится неудачей, если destination.txt существует.</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">copyFile</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;source.txt&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;destination.txt&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, constants.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">COPYFILE_EXCL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, callback);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h3 id="fscpsrc-dest-options-callback" tabindex="-1"><code>fs.cp(src, dest[, options], callback)</code> <a class="header-anchor" href="#fscpsrc-dest-options-callback" aria-label="Permalink to “fs.cp(src, dest[, options], callback)”">​</a></h3><div class="info custom-block"><p class="custom-block-title">[История]</p><table tabindex="0"><thead><tr><th>Версия</th><th>Изменения</th></tr></thead><tbody><tr><td>v22.3.0</td><td>Этот API больше не является экспериментальным.</td></tr><tr><td>v20.1.0, v18.17.0</td><td>Принимает дополнительную опцию <code>mode</code> для указания поведения копирования, как аргумент <code>mode</code> в <code>fs.copyFile()</code>.</td></tr><tr><td>v18.0.0</td><td>Передача недействительного обратного вызова в аргумент <code>callback</code> теперь вызывает <code>ERR_INVALID_ARG_TYPE</code> вместо <code>ERR_INVALID_CALLBACK</code>.</td></tr><tr><td>v17.6.0, v16.15.0</td><td>Принимает дополнительную опцию <code>verbatimSymlinks</code> для указания, следует ли выполнять разрешение пути для символических ссылок.</td></tr><tr><td>v16.7.0</td><td>Добавлено в: v16.7.0</td></tr></tbody></table></div><ul><li><p><code>src</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="/ru/nodejs/api/url#the-whatwg-url-api">&lt;URL&gt;</a> исходный путь для копирования.</p></li><li><p><code>dest</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="/ru/nodejs/api/url#the-whatwg-url-api">&lt;URL&gt;</a> путь назначения для копирования.</p></li><li><p><code>options</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noreferrer">&lt;Object&gt;</a></p><ul><li><p><code>dereference</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" target="_blank" rel="noreferrer">&lt;boolean&gt;</a> разыменовывать символические ссылки. <strong>По умолчанию:</strong> <code>false</code>.</p></li><li><p><code>errorOnExist</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" target="_blank" rel="noreferrer">&lt;boolean&gt;</a> когда <code>force</code> имеет значение <code>false</code>, и место назначения существует, выдавать ошибку. <strong>По умолчанию:</strong> <code>false</code>.</p></li><li><p><code>filter</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function" target="_blank" rel="noreferrer">&lt;Function&gt;</a> Функция для фильтрации копируемых файлов/директорий. Верните <code>true</code>, чтобы скопировать элемент, <code>false</code>, чтобы проигнорировать его. При игнорировании каталога все его содержимое также будет пропущено. Также может вернуть <code>Promise</code>, который разрешается в <code>true</code> или <code>false</code>. <strong>По умолчанию:</strong> <code>undefined</code>.</p></li><li><p><code>src</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> исходный путь для копирования.</p></li><li><p><code>dest</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> путь назначения для копирования.</p></li><li><p>Возвращает: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" target="_blank" rel="noreferrer">&lt;boolean&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" target="_blank" rel="noreferrer">&lt;Promise&gt;</a> Значение, которое может быть приведено к <code>boolean</code>, или <code>Promise</code>, который разрешается с таким значением.</p></li><li><p><code>force</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" target="_blank" rel="noreferrer">&lt;boolean&gt;</a> перезаписывать существующий файл или каталог. Операция копирования будет игнорировать ошибки, если вы установите для этого значения false, а место назначения существует. Используйте опцию <code>errorOnExist</code>, чтобы изменить это поведение. <strong>По умолчанию:</strong> <code>true</code>.</p></li><li><p><code>mode</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;integer&gt;</a> модификаторы для операции копирования. <strong>По умолчанию:</strong> <code>0</code>. См. флаг <code>mode</code> в <a href="/ru/nodejs/api/fs#fscopyfilesrc-dest-mode-callback"><code>fs.copyFile()</code></a>.</p></li><li><p><code>preserveTimestamps</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" target="_blank" rel="noreferrer">&lt;boolean&gt;</a> Если <code>true</code>, временные метки из <code>src</code> будут сохранены. <strong>По умолчанию:</strong> <code>false</code>.</p></li><li><p><code>recursive</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" target="_blank" rel="noreferrer">&lt;boolean&gt;</a> рекурсивно копировать каталоги <strong>По умолчанию:</strong> <code>false</code></p></li><li><p><code>verbatimSymlinks</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" target="_blank" rel="noreferrer">&lt;boolean&gt;</a> Если <code>true</code>, разрешение пути для символических ссылок будет пропущено. <strong>По умолчанию:</strong> <code>false</code></p></li></ul></li><li><p><code>callback</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function" target="_blank" rel="noreferrer">&lt;Function&gt;</a></p><ul><li><code>err</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error" target="_blank" rel="noreferrer">&lt;Error&gt;</a></li></ul></li></ul><p>Асинхронно копирует всю структуру каталогов из <code>src</code> в <code>dest</code>, включая подкаталоги и файлы.</p><p>При копировании каталога в другой каталог глобы не поддерживаются, и поведение аналогично <code>cp dir1/ dir2/</code>.</p><h3 id="fscreatereadstreampath-options" tabindex="-1"><code>fs.createReadStream(path[, options])</code> <a class="header-anchor" href="#fscreatereadstreampath-options" aria-label="Permalink to “fs.createReadStream(path[, options])”">​</a></h3><div class="info custom-block"><p class="custom-block-title">[История]</p><table tabindex="0"><thead><tr><th>Версия</th><th>Изменения</th></tr></thead><tbody><tr><td>v16.10.0</td><td>Опция <code>fs</code> не требует метода <code>open</code>, если был предоставлен <code>fd</code>.</td></tr><tr><td>v16.10.0</td><td>Опция <code>fs</code> не требует метода <code>close</code>, если <code>autoClose</code> имеет значение <code>false</code>.</td></tr><tr><td>v15.5.0</td><td>Добавлена поддержка <code>AbortSignal</code>.</td></tr><tr><td>v15.4.0</td><td>Опция <code>fd</code> принимает аргументы FileHandle.</td></tr><tr><td>v14.0.0</td><td>Изменено значение <code>emitClose</code> по умолчанию на <code>true</code>.</td></tr><tr><td>v13.6.0, v12.17.0</td><td>Опции <code>fs</code> позволяют переопределять используемую реализацию <code>fs</code>.</td></tr><tr><td>v12.10.0</td><td>Включена опция <code>emitClose</code>.</td></tr><tr><td>v11.0.0</td><td>Введены новые ограничения на <code>start</code> и <code>end</code>, вызывающие более подходящие ошибки в случаях, когда мы не можем разумно обработать входные значения.</td></tr><tr><td>v7.6.0</td><td>Параметр <code>path</code> может быть объектом WHATWG <code>URL</code>, использующим протокол <code>file:</code>.</td></tr><tr><td>v7.0.0</td><td>Переданный объект <code>options</code> никогда не будет изменен.</td></tr><tr><td>v2.3.0</td><td>Переданный объект <code>options</code> теперь может быть строкой.</td></tr><tr><td>v0.1.31</td><td>Добавлено в: v0.1.31</td></tr></tbody></table></div><ul><li><p><code>path</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="/ru/nodejs/api/buffer#class-buffer">&lt;Buffer&gt;</a> | <a href="/ru/nodejs/api/url#the-whatwg-url-api">&lt;URL&gt;</a></p></li><li><p><code>options</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noreferrer">&lt;Object&gt;</a></p><ul><li><code>flags</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> См. <a href="/ru/nodejs/api/fs#file-system-flags">поддержку флагов файловой системы</a>. <strong>По умолчанию:</strong> <code>&#39;r&#39;</code>.</li><li><code>encoding</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> <strong>По умолчанию:</strong> <code>null</code></li><li><code>fd</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;integer&gt;</a> | <a href="/ru/nodejs/api/fs#class-filehandle">&lt;FileHandle&gt;</a> <strong>По умолчанию:</strong> <code>null</code></li><li><code>mode</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;integer&gt;</a> <strong>По умолчанию:</strong> <code>0o666</code></li><li><code>autoClose</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" target="_blank" rel="noreferrer">&lt;boolean&gt;</a> <strong>По умолчанию:</strong> <code>true</code></li><li><code>emitClose</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" target="_blank" rel="noreferrer">&lt;boolean&gt;</a> <strong>По умолчанию:</strong> <code>true</code></li><li><code>start</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;integer&gt;</a></li><li><code>end</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;integer&gt;</a> <strong>По умолчанию:</strong> <code>Infinity</code></li><li><code>highWaterMark</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;integer&gt;</a> <strong>По умолчанию:</strong> <code>64 * 1024</code></li><li><code>fs</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noreferrer">&lt;Object&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Null_type" target="_blank" rel="noreferrer">&lt;null&gt;</a> <strong>По умолчанию:</strong> <code>null</code></li><li><code>signal</code> <a href="/ru/nodejs/api/globals#class-abortsignal">&lt;AbortSignal&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Null_type" target="_blank" rel="noreferrer">&lt;null&gt;</a> <strong>По умолчанию:</strong> <code>null</code></li></ul></li><li><p>Возвращает: <a href="/ru/nodejs/api/fs#class-fsreadstream">&lt;fs.ReadStream&gt;</a></p></li></ul><p><code>options</code> может включать значения <code>start</code> и <code>end</code> для чтения диапазона байтов из файла вместо всего файла. И <code>start</code>, и <code>end</code> включены и начинают отсчет с 0, допустимые значения находятся в диапазоне [0, <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number/MAX_SAFE_INTEGER" target="_blank" rel="noreferrer"><code>Number.MAX_SAFE_INTEGER</code></a>]. Если указан <code>fd</code>, а <code>start</code> опущен или имеет значение <code>undefined</code>, <code>fs.createReadStream()</code> читает последовательно с текущей позиции файла. <code>encoding</code> может быть любым из тех, которые принимаются <a href="/ru/nodejs/api/buffer#class-buffer">&lt;Buffer&gt;</a>.</p><p>Если указан <code>fd</code>, <code>ReadStream</code> будет игнорировать аргумент <code>path</code> и использовать указанный файловый дескриптор. Это означает, что событие <code>&#39;open&#39;</code> не будет сгенерировано. <code>fd</code> должен быть блокирующим; неблокирующие <code>fd</code> следует передавать в <a href="/ru/nodejs/api/net#class-netsocket">&lt;net.Socket&gt;</a>.</p><p>Если <code>fd</code> указывает на символьное устройство, которое поддерживает только блокирующие операции чтения (например, клавиатура или звуковая карта), операции чтения не завершаются до тех пор, пока не появятся данные. Это может помешать процессу завершиться и потоку закрыться естественным образом.</p><p>По умолчанию поток будет генерировать событие <code>&#39;close&#39;</code> после того, как он будет уничтожен. Установите для опции <code>emitClose</code> значение <code>false</code>, чтобы изменить это поведение.</p><p>Предоставляя опцию <code>fs</code>, можно переопределить соответствующие реализации <code>fs</code> для <code>open</code>, <code>read</code> и <code>close</code>. При предоставлении опции <code>fs</code> требуется переопределение для <code>read</code>. Если <code>fd</code> не указан, также требуется переопределение для <code>open</code>. Если <code>autoClose</code> имеет значение <code>true</code>, также требуется переопределение для <code>close</code>.</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { createReadStream } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;node:fs&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Создаем поток из некоторого символьного устройства.</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> stream</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> createReadStream</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;/dev/input/event0&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setTimeout</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  stream.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">close</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Это может не закрыть поток.</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // Искусственное указание конца потока, как если бы базовый ресурс</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // сам указал конец файла, позволяет потоку закрыться.</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // Это не отменяет ожидающие операции чтения, и если такая операция</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // есть, процесс все равно может не выйти успешно</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // до тех пор, пока она не завершится.</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  stream.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">push</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  stream.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">read</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">100</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>Если <code>autoClose</code> имеет значение false, то файловый дескриптор не будет закрыт, даже если произойдет ошибка. Ответственность за его закрытие и обеспечение отсутствия утечки файловых дескрипторов лежит на приложении. Если <code>autoClose</code> установлено в true (поведение по умолчанию), при <code>&#39;error&#39;</code> или <code>&#39;end&#39;</code> файловый дескриптор будет закрыт автоматически.</p><p><code>mode</code> устанавливает режим файла (права доступа и sticky bits), но только если файл был создан.</p><p>Пример чтения последних 10 байтов файла длиной 100 байтов:</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { createReadStream } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;node:fs&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">createReadStream</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;sample.txt&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, { start: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">90</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, end: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">99</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> });</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>Если <code>options</code> является строкой, то она указывает кодировку.</p><h3 id="fscreatewritestreampath-options" tabindex="-1"><code>fs.createWriteStream(path[, options])</code> <a class="header-anchor" href="#fscreatewritestreampath-options" aria-label="Permalink to “fs.createWriteStream(path[, options])”">​</a></h3><div class="info custom-block"><p class="custom-block-title">[История]</p><table tabindex="0"><thead><tr><th>Версия</th><th>Изменения</th></tr></thead><tbody><tr><td>v21.0.0, v20.10.0</td><td>Теперь поддерживается опция <code>flush</code>.</td></tr><tr><td>v16.10.0</td><td>Опции <code>fs</code> не требуется метод <code>open</code>, если был предоставлен <code>fd</code>.</td></tr><tr><td>v16.10.0</td><td>Опции <code>fs</code> не требуется метод <code>close</code>, если <code>autoClose</code> имеет значение <code>false</code>.</td></tr><tr><td>v15.5.0</td><td>Добавлена поддержка <code>AbortSignal</code>.</td></tr><tr><td>v15.4.0</td><td>Опция <code>fd</code> принимает аргументы FileHandle.</td></tr><tr><td>v14.0.0</td><td>Изменено значение по умолчанию для <code>emitClose</code> на <code>true</code>.</td></tr><tr><td>v13.6.0, v12.17.0</td><td>Параметры <code>fs</code> позволяют переопределять используемую реализацию <code>fs</code>.</td></tr><tr><td>v12.10.0</td><td>Включена опция <code>emitClose</code>.</td></tr><tr><td>v7.6.0</td><td>Параметр <code>path</code> может быть объектом WHATWG <code>URL</code>, использующим протокол <code>file:</code>.</td></tr><tr><td>v7.0.0</td><td>Переданный объект <code>options</code> никогда не будет изменен.</td></tr><tr><td>v5.5.0</td><td>Теперь поддерживается опция <code>autoClose</code>.</td></tr><tr><td>v2.3.0</td><td>Переданный объект <code>options</code> теперь может быть строкой.</td></tr><tr><td>v0.1.31</td><td>Добавлено в версии: v0.1.31</td></tr></tbody></table></div><ul><li><p><code>path</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="/ru/nodejs/api/buffer#class-buffer">&lt;Buffer&gt;</a> | <a href="/ru/nodejs/api/url#the-whatwg-url-api">&lt;URL&gt;</a></p></li><li><p><code>options</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noreferrer">&lt;Object&gt;</a></p><ul><li><code>flags</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> См. <a href="/ru/nodejs/api/fs#file-system-flags">поддержку <code>flags</code> файловой системы</a>. <strong>По умолчанию:</strong> <code>&#39;w&#39;</code>.</li><li><code>encoding</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> <strong>По умолчанию:</strong> <code>&#39;utf8&#39;</code></li><li><code>fd</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;integer&gt;</a> | <a href="/ru/nodejs/api/fs#class-filehandle">&lt;FileHandle&gt;</a> <strong>По умолчанию:</strong> <code>null</code></li><li><code>mode</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;integer&gt;</a> <strong>По умолчанию:</strong> <code>0o666</code></li><li><code>autoClose</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" target="_blank" rel="noreferrer">&lt;boolean&gt;</a> <strong>По умолчанию:</strong> <code>true</code></li><li><code>emitClose</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" target="_blank" rel="noreferrer">&lt;boolean&gt;</a> <strong>По умолчанию:</strong> <code>true</code></li><li><code>start</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;integer&gt;</a></li><li><code>fs</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noreferrer">&lt;Object&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Null_type" target="_blank" rel="noreferrer">&lt;null&gt;</a> <strong>По умолчанию:</strong> <code>null</code></li><li><code>signal</code> <a href="/ru/nodejs/api/globals#class-abortsignal">&lt;AbortSignal&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Null_type" target="_blank" rel="noreferrer">&lt;null&gt;</a> <strong>По умолчанию:</strong> <code>null</code></li><li><code>highWaterMark</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;number&gt;</a> <strong>По умолчанию:</strong> <code>16384</code></li><li><code>flush</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" target="_blank" rel="noreferrer">&lt;boolean&gt;</a> Если <code>true</code>, дескриптор базового файла сбрасывается перед его закрытием. <strong>По умолчанию:</strong> <code>false</code>.</li></ul></li><li><p>Возвращает: <a href="/ru/nodejs/api/fs#class-fswritestream">&lt;fs.WriteStream&gt;</a></p></li></ul><p><code>options</code> также может включать опцию <code>start</code>, позволяющую записывать данные в некоторой позиции после начала файла, допустимые значения находятся в диапазоне [0, <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number/MAX_SAFE_INTEGER" target="_blank" rel="noreferrer"><code>Number.MAX_SAFE_INTEGER</code></a>]. Для изменения файла, а не его замены, может потребоваться установить для параметра <code>flags</code> значение <code>r+</code>, а не значение по умолчанию <code>w</code>. <code>encoding</code> может быть любым из тех, которые принимает <a href="/ru/nodejs/api/buffer#class-buffer">&lt;Buffer&gt;</a>.</p><p>Если для <code>autoClose</code> установлено значение true (поведение по умолчанию), то при возникновении <code>&#39;error&#39;</code> или <code>&#39;finish&#39;</code> файловый дескриптор будет автоматически закрыт. Если <code>autoClose</code> имеет значение false, то файловый дескриптор не будет закрыт, даже если произошла ошибка. Ответственность за его закрытие и отсутствие утечки файлового дескриптора лежит на приложении.</p><p>По умолчанию поток будет генерировать событие <code>&#39;close&#39;</code> после его уничтожения. Установите для параметра <code>emitClose</code> значение <code>false</code>, чтобы изменить это поведение.</p><p>Предоставляя опцию <code>fs</code>, можно переопределить соответствующие реализации <code>fs</code> для <code>open</code>, <code>write</code>, <code>writev</code> и <code>close</code>. Переопределение <code>write()</code> без <code>writev()</code> может снизить производительность, поскольку некоторые оптимизации (<code>_writev()</code>) будут отключены. При предоставлении опции <code>fs</code> требуются переопределения как минимум для одного из <code>write</code> и <code>writev</code>. Если не предоставлена опция <code>fd</code>, также требуется переопределение для <code>open</code>. Если <code>autoClose</code> имеет значение <code>true</code>, также требуется переопределение для <code>close</code>.</p><p>Подобно <a href="/ru/nodejs/api/fs#class-fsreadstream">&lt;fs.ReadStream&gt;</a>, если указан <code>fd</code>, то <a href="/ru/nodejs/api/fs#class-fswritestream">&lt;fs.WriteStream&gt;</a> будет игнорировать аргумент <code>path</code> и будет использовать указанный файловый дескриптор. Это означает, что событие <code>&#39;open&#39;</code> не будет сгенерировано. <code>fd</code> должен быть блокирующим; неблокирующие <code>fd</code> должны быть переданы в <a href="/ru/nodejs/api/net#class-netsocket">&lt;net.Socket&gt;</a>.</p><p>Если <code>options</code> является строкой, то она определяет кодировку.</p><h3 id="fsexistspath-callback" tabindex="-1"><code>fs.exists(path, callback)</code> <a class="header-anchor" href="#fsexistspath-callback" aria-label="Permalink to “fs.exists(path, callback)”">​</a></h3><div class="info custom-block"><p class="custom-block-title">[История]</p><table tabindex="0"><thead><tr><th>Версия</th><th>Изменения</th></tr></thead><tbody><tr><td>v18.0.0</td><td>Передача недействительного обратного вызова в аргумент <code>callback</code> теперь вызывает <code>ERR_INVALID_ARG_TYPE</code> вместо <code>ERR_INVALID_CALLBACK</code>.</td></tr><tr><td>v7.6.0</td><td>Параметр <code>path</code> может быть объектом WHATWG <code>URL</code> с использованием протокола <code>file:</code>.</td></tr><tr><td>v1.0.0</td><td>Устарело с версии: v1.0.0</td></tr><tr><td>v0.0.2</td><td>Добавлено в версии: v0.0.2</td></tr></tbody></table></div><div class="danger custom-block"><p class="custom-block-title">[Стабильность: 0 - Устаревший]</p><p><a href="/ru/nodejs/api/documentation#stability-index">Стабильность: 0</a> <a href="/ru/nodejs/api/documentation#stability-index">Стабильность: 0</a> - Устаревший: Используйте <a href="/ru/nodejs/api/fs#fsstatpath-options-callback"><code>fs.stat()</code></a> или <a href="/ru/nodejs/api/fs#fsaccesspath-mode-callback"><code>fs.access()</code></a> вместо этого.</p></div><ul><li><code>path</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="/ru/nodejs/api/buffer#class-buffer">&lt;Buffer&gt;</a> | <a href="/ru/nodejs/api/url#the-whatwg-url-api">&lt;URL&gt;</a></li><li><code>callback</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function" target="_blank" rel="noreferrer">&lt;Function&gt;</a><ul><li><code>exists</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" target="_blank" rel="noreferrer">&lt;boolean&gt;</a></li></ul></li></ul><p>Проверьте, существует ли элемент по заданному <code>path</code>, проверив файловую систему. Затем вызовите аргумент <code>callback</code> с true или false:</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { exists } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;node:fs&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">exists</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;/etc/passwd&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">e</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(e </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;он существует&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> :</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;нет passwd!&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><strong>Параметры для этого обратного вызова не согласуются с другими обратными вызовами Node.js.</strong> Обычно первым параметром для обратного вызова Node.js является параметр <code>err</code>, за которым, необязательно, следуют другие параметры. Обратный вызов <code>fs.exists()</code> имеет только один логический параметр. Это одна из причин, по которой <code>fs.access()</code> рекомендуется вместо <code>fs.exists()</code>.</p><p>Если <code>path</code> является символической ссылкой, он переходит по ней. Таким образом, если <code>path</code> существует, но указывает на несуществующий элемент, обратный вызов получит значение <code>false</code>.</p><p>Не рекомендуется использовать <code>fs.exists()</code> для проверки существования файла перед вызовом <code>fs.open()</code>, <code>fs.readFile()</code> или <code>fs.writeFile()</code>. Это приводит к возникновению состояния гонки, поскольку другие процессы могут изменить состояние файла между двумя вызовами. Вместо этого пользовательский код должен открывать/читать/записывать файл напрямую и обрабатывать ошибку, возникающую, если файл не существует.</p><p><strong>запись (НЕ РЕКОМЕНДУЕТСЯ)</strong></p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { exists, open, close } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;node:fs&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">exists</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;myfile&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">e</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (e) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;myfile уже существует&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">else</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    open</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;myfile&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;wx&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">err</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">fd</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (err) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">throw</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> err;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      try</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        writeMyData</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(fd);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">finally</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        close</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(fd, (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">err</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">          if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (err) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">throw</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> err;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><p><strong>запись (РЕКОМЕНДУЕТСЯ)</strong></p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { open, close } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;node:fs&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">open</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;myfile&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;wx&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">err</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">fd</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (err) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (err.code </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">===</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;EEXIST&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;myfile уже существует&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    throw</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> err;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  try</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    writeMyData</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(fd);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">finally</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    close</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(fd, (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">err</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (err) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">throw</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> err;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><p><strong>чтение (НЕ РЕКОМЕНДУЕТСЯ)</strong></p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { open, close, exists } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;node:fs&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">exists</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;myfile&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">e</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (e) {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    open</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;myfile&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;r&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">err</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">fd</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (err) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">throw</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> err;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      try</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        readMyData</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(fd);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">finally</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        close</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(fd, (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">err</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">          if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (err) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">throw</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> err;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">else</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;myfile не существует&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><p><strong>чтение (РЕКОМЕНДУЕТСЯ)</strong></p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { open, close } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;node:fs&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">open</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;myfile&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;r&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">err</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">fd</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (err) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (err.code </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">===</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;ENOENT&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;myfile не существует&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    throw</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> err;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  try</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    readMyData</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(fd);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">finally</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    close</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(fd, (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">err</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (err) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">throw</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> err;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><p>Примеры &quot;не рекомендуется&quot; выше проверяют существование, а затем используют файл; примеры &quot;рекомендуется&quot; лучше, потому что они используют файл напрямую и обрабатывают ошибку, если она есть.</p><p>В общем, проверяйте существование файла только в том случае, если файл не будет использоваться напрямую, например, когда его существование является сигналом от другого процесса.</p><h3 id="fsfchmodfd-mode-callback" tabindex="-1"><code>fs.fchmod(fd, mode, callback)</code> <a class="header-anchor" href="#fsfchmodfd-mode-callback" aria-label="Permalink to “fs.fchmod(fd, mode, callback)”">​</a></h3><div class="info custom-block"><p class="custom-block-title">[История]</p><table tabindex="0"><thead><tr><th>Версия</th><th>Изменения</th></tr></thead><tbody><tr><td>v18.0.0</td><td>Передача недопустимой функции обратного вызова в аргумент <code>callback</code> теперь вызывает <code>ERR_INVALID_ARG_TYPE</code> вместо <code>ERR_INVALID_CALLBACK</code>.</td></tr><tr><td>v10.0.0</td><td>Параметр <code>callback</code> больше не является необязательным. Если он не передан, во время выполнения будет выброшена ошибка <code>TypeError</code>.</td></tr><tr><td>v7.0.0</td><td>Параметр <code>callback</code> больше не является необязательным. Если он не передан, будет выдано предупреждение об устаревании с идентификатором DEP0013.</td></tr><tr><td>v0.4.7</td><td>Добавлено в версии: v0.4.7</td></tr></tbody></table></div><ul><li><code>fd</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;integer&gt;</a></li><li><code>mode</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;integer&gt;</a></li><li><code>callback</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function" target="_blank" rel="noreferrer">&lt;Function&gt;</a><ul><li><code>err</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error" target="_blank" rel="noreferrer">&lt;Error&gt;</a></li></ul></li></ul><p>Устанавливает права доступа к файлу. В функцию обратного вызова завершения не передаются никакие аргументы, кроме возможного исключения.</p><p>Подробности см. в документации POSIX <a href="http://man7.org/linux/man-pages/man2/fchmod.2" target="_blank" rel="noreferrer"><code>fchmod(2)</code></a>.</p><h3 id="fsfchownfd-uid-gid-callback" tabindex="-1"><code>fs.fchown(fd, uid, gid, callback)</code> <a class="header-anchor" href="#fsfchownfd-uid-gid-callback" aria-label="Permalink to “fs.fchown(fd, uid, gid, callback)”">​</a></h3><div class="info custom-block"><p class="custom-block-title">[История]</p><table tabindex="0"><thead><tr><th>Версия</th><th>Изменения</th></tr></thead><tbody><tr><td>v18.0.0</td><td>Передача недопустимой функции обратного вызова в аргумент <code>callback</code> теперь вызывает <code>ERR_INVALID_ARG_TYPE</code> вместо <code>ERR_INVALID_CALLBACK</code>.</td></tr><tr><td>v10.0.0</td><td>Параметр <code>callback</code> больше не является необязательным. Если он не передан, во время выполнения будет выброшена ошибка <code>TypeError</code>.</td></tr><tr><td>v7.0.0</td><td>Параметр <code>callback</code> больше не является необязательным. Если он не передан, будет выдано предупреждение об устаревании с идентификатором DEP0013.</td></tr><tr><td>v0.4.7</td><td>Добавлено в версии: v0.4.7</td></tr></tbody></table></div><ul><li><code>fd</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;integer&gt;</a></li><li><code>uid</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;integer&gt;</a></li><li><code>gid</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;integer&gt;</a></li><li><code>callback</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function" target="_blank" rel="noreferrer">&lt;Function&gt;</a><ul><li><code>err</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error" target="_blank" rel="noreferrer">&lt;Error&gt;</a></li></ul></li></ul><p>Устанавливает владельца файла. В функцию обратного вызова завершения не передаются никакие аргументы, кроме возможного исключения.</p><p>Подробности см. в документации POSIX <a href="http://man7.org/linux/man-pages/man2/fchown.2" target="_blank" rel="noreferrer"><code>fchown(2)</code></a>.</p><h3 id="fsfdatasyncfd-callback" tabindex="-1"><code>fs.fdatasync(fd, callback)</code> <a class="header-anchor" href="#fsfdatasyncfd-callback" aria-label="Permalink to “fs.fdatasync(fd, callback)”">​</a></h3><div class="info custom-block"><p class="custom-block-title">[История]</p><table tabindex="0"><thead><tr><th>Версия</th><th>Изменения</th></tr></thead><tbody><tr><td>v18.0.0</td><td>Передача неверной обратной функции в аргументе <code>callback</code> теперь вызывает <code>ERR_INVALID_ARG_TYPE</code> вместо <code>ERR_INVALID_CALLBACK</code>.</td></tr><tr><td>v10.0.0</td><td>Параметр <code>callback</code> больше не является необязательным. Его отсутствие вызовет <code>TypeError</code> во время выполнения.</td></tr><tr><td>v7.0.0</td><td>Параметр <code>callback</code> больше не является необязательным. Его отсутствие вызовет предупреждение об устаревании с идентификатором DEP0013.</td></tr><tr><td>v0.1.96</td><td>Добавлено в: v0.1.96</td></tr></tbody></table></div><ul><li><code>fd</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;integer&gt;</a></li><li><code>callback</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function" target="_blank" rel="noreferrer">&lt;Function&gt;</a><ul><li><code>err</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error" target="_blank" rel="noreferrer">&lt;Error&gt;</a></li></ul></li></ul><p>Принудительно переводит все текущие операции ввода-вывода, связанные с файлом, в синхронизированное состояние завершения ввода-вывода операционной системы. Подробности см. в документации POSIX <a href="http://man7.org/linux/man-pages/man2/fdatasync.2" target="_blank" rel="noreferrer"><code>fdatasync(2)</code></a>. Обратной функции завершения не передаются аргументы, кроме возможного исключения.</p><h3 id="fsfstatfd-options-callback" tabindex="-1"><code>fs.fstat(fd[, options], callback)</code> <a class="header-anchor" href="#fsfstatfd-options-callback" aria-label="Permalink to “fs.fstat(fd[, options], callback)”">​</a></h3><div class="info custom-block"><p class="custom-block-title">[История]</p><table tabindex="0"><thead><tr><th>Версия</th><th>Изменения</th></tr></thead><tbody><tr><td>v18.0.0</td><td>Передача неверной обратной функции в аргументе <code>callback</code> теперь вызывает <code>ERR_INVALID_ARG_TYPE</code> вместо <code>ERR_INVALID_CALLBACK</code>.</td></tr><tr><td>v10.5.0</td><td>Принимает дополнительный объект <code>options</code>, чтобы указать, должны ли возвращаемые числовые значения быть bigint.</td></tr><tr><td>v10.0.0</td><td>Параметр <code>callback</code> больше не является необязательным. Его отсутствие вызовет <code>TypeError</code> во время выполнения.</td></tr><tr><td>v7.0.0</td><td>Параметр <code>callback</code> больше не является необязательным. Его отсутствие вызовет предупреждение об устаревании с идентификатором DEP0013.</td></tr><tr><td>v0.1.95</td><td>Добавлено в: v0.1.95</td></tr></tbody></table></div><ul><li><p><code>fd</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;integer&gt;</a></p></li><li><p><code>options</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noreferrer">&lt;Object&gt;</a></p><ul><li><code>bigint</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" target="_blank" rel="noreferrer">&lt;boolean&gt;</a> Указывает, должны ли числовые значения в возвращаемом объекте <a href="/ru/nodejs/api/fs#class-fsstats">&lt;fs.Stats&gt;</a> быть <code>bigint</code>. <strong>По умолчанию:</strong> <code>false</code>.</li></ul></li><li><p><code>callback</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function" target="_blank" rel="noreferrer">&lt;Function&gt;</a></p><ul><li><code>err</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error" target="_blank" rel="noreferrer">&lt;Error&gt;</a></li><li><code>stats</code> <a href="/ru/nodejs/api/fs#class-fsstats">&lt;fs.Stats&gt;</a></li></ul></li></ul><p>Вызывает обратный вызов с <a href="/ru/nodejs/api/fs#class-fsstats">&lt;fs.Stats&gt;</a> для файлового дескриптора.</p><p>Дополнительные сведения см. в документации POSIX <a href="http://man7.org/linux/man-pages/man2/fstat.2" target="_blank" rel="noreferrer"><code>fstat(2)</code></a>.</p><h3 id="fsfsyncfd-callback" tabindex="-1"><code>fs.fsync(fd, callback)</code> <a class="header-anchor" href="#fsfsyncfd-callback" aria-label="Permalink to “fs.fsync(fd, callback)”">​</a></h3><div class="info custom-block"><p class="custom-block-title">[История]</p><table tabindex="0"><thead><tr><th>Версия</th><th>Изменения</th></tr></thead><tbody><tr><td>v18.0.0</td><td>Передача недействительного обратного вызова в аргумент <code>callback</code> теперь вызывает <code>ERR_INVALID_ARG_TYPE</code> вместо <code>ERR_INVALID_CALLBACK</code>.</td></tr><tr><td>v10.0.0</td><td>Параметр <code>callback</code> больше не является необязательным. Если его не передать, во время выполнения будет выброшена ошибка <code>TypeError</code>.</td></tr><tr><td>v7.0.0</td><td>Параметр <code>callback</code> больше не является необязательным. Если его не передать, будет выдано предупреждение об устаревании с идентификатором DEP0013.</td></tr><tr><td>v0.1.96</td><td>Добавлено в версии: v0.1.96</td></tr></tbody></table></div><ul><li><code>fd</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;integer&gt;</a></li><li><code>callback</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function" target="_blank" rel="noreferrer">&lt;Function&gt;</a><ul><li><code>err</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error" target="_blank" rel="noreferrer">&lt;Error&gt;</a></li></ul></li></ul><p>Запрашивает сброс всех данных для открытого файлового дескриптора на устройство хранения. Конкретная реализация зависит от операционной системы и устройства. Обратитесь к документации POSIX <a href="http://man7.org/linux/man-pages/man2/fsync.2" target="_blank" rel="noreferrer"><code>fsync(2)</code></a> для получения более подробной информации. Обратному вызову завершения не передаются никакие аргументы, кроме возможного исключения.</p><h3 id="fsftruncatefd-len-callback" tabindex="-1"><code>fs.ftruncate(fd[, len], callback)</code> <a class="header-anchor" href="#fsftruncatefd-len-callback" aria-label="Permalink to “fs.ftruncate(fd[, len], callback)”">​</a></h3><div class="info custom-block"><p class="custom-block-title">[История]</p><table tabindex="0"><thead><tr><th>Версия</th><th>Изменения</th></tr></thead><tbody><tr><td>v18.0.0</td><td>Передача недействительного обратного вызова в аргумент <code>callback</code> теперь вызывает <code>ERR_INVALID_ARG_TYPE</code> вместо <code>ERR_INVALID_CALLBACK</code>.</td></tr><tr><td>v10.0.0</td><td>Параметр <code>callback</code> больше не является необязательным. Если его не передать, во время выполнения будет выброшена ошибка <code>TypeError</code>.</td></tr><tr><td>v7.0.0</td><td>Параметр <code>callback</code> больше не является необязательным. Если его не передать, будет выдано предупреждение об устаревании с идентификатором DEP0013.</td></tr><tr><td>v0.8.6</td><td>Добавлено в версии: v0.8.6</td></tr></tbody></table></div><ul><li><code>fd</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;integer&gt;</a></li><li><code>len</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;integer&gt;</a> <strong>По умолчанию:</strong> <code>0</code></li><li><code>callback</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function" target="_blank" rel="noreferrer">&lt;Function&gt;</a><ul><li><code>err</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error" target="_blank" rel="noreferrer">&lt;Error&gt;</a></li></ul></li></ul><p>Усекает файловый дескриптор. Обратному вызову завершения не передаются никакие аргументы, кроме возможного исключения.</p><p>См. документацию POSIX <a href="http://man7.org/linux/man-pages/man2/ftruncate.2" target="_blank" rel="noreferrer"><code>ftruncate(2)</code></a> для получения более подробной информации.</p><p>Если файл, на который ссылается файловый дескриптор, был больше, чем <code>len</code> байт, в файле будут сохранены только первые <code>len</code> байт.</p><p>Например, следующая программа сохраняет только первые четыре байта файла:</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { open, close, ftruncate } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;node:fs&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> closeFd</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">fd</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  close</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(fd, (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">err</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (err) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">throw</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> err;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">open</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;temp.txt&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;r+&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">err</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">fd</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (err) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">throw</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> err;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  try</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    ftruncate</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(fd, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">4</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">err</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">      closeFd</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(fd);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (err) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">throw</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> err;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">catch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (err) {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    closeFd</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(fd);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (err) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">throw</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> err;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><p>Если файл ранее был короче, чем <code>len</code> байт, он расширяется, и расширенная часть заполняется нулевыми байтами (<code>&#39;\\0&#39;</code>):</p><p>Если <code>len</code> отрицательное, то будет использоваться <code>0</code>.</p><h3 id="fsfutimesfd-atime-mtime-callback" tabindex="-1"><code>fs.futimes(fd, atime, mtime, callback)</code> <a class="header-anchor" href="#fsfutimesfd-atime-mtime-callback" aria-label="Permalink to “fs.futimes(fd, atime, mtime, callback)”">​</a></h3><div class="info custom-block"><p class="custom-block-title">[История]</p><table tabindex="0"><thead><tr><th>Версия</th><th>Изменения</th></tr></thead><tbody><tr><td>v18.0.0</td><td>Передача недействительного обратного вызова аргументу <code>callback</code> теперь вызывает ошибку <code>ERR_INVALID_ARG_TYPE</code> вместо <code>ERR_INVALID_CALLBACK</code>.</td></tr><tr><td>v10.0.0</td><td>Параметр <code>callback</code> больше не является необязательным. Если его не передать, во время выполнения будет выдана ошибка <code>TypeError</code>.</td></tr><tr><td>v7.0.0</td><td>Параметр <code>callback</code> больше не является необязательным. Если его не передать, будет выдано предупреждение об устаревании с идентификатором DEP0013.</td></tr><tr><td>v4.1.0</td><td>Числовые строки, <code>NaN</code> и <code>Infinity</code> теперь допустимые спецификаторы времени.</td></tr><tr><td>v0.4.2</td><td>Добавлено в версии: v0.4.2</td></tr></tbody></table></div><ul><li><code>fd</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;integer&gt;</a></li><li><code>atime</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;number&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date" target="_blank" rel="noreferrer">&lt;Date&gt;</a></li><li><code>mtime</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;number&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date" target="_blank" rel="noreferrer">&lt;Date&gt;</a></li><li><code>callback</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function" target="_blank" rel="noreferrer">&lt;Function&gt;</a><ul><li><code>err</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error" target="_blank" rel="noreferrer">&lt;Error&gt;</a></li></ul></li></ul><p>Изменяет временные метки файловой системы объекта, на который ссылается предоставленный файловый дескриптор. См. <a href="/ru/nodejs/api/fs#fsutimespath-atime-mtime-callback"><code>fs.utimes()</code></a>.</p><h3 id="fsglobpattern-options-callback" tabindex="-1"><code>fs.glob(pattern[, options], callback)</code> <a class="header-anchor" href="#fsglobpattern-options-callback" aria-label="Permalink to “fs.glob(pattern[, options], callback)”">​</a></h3><div class="info custom-block"><p class="custom-block-title">[История]</p><table tabindex="0"><thead><tr><th>Версия</th><th>Изменения</th></tr></thead><tbody><tr><td>v22.2.0</td><td>Добавлена поддержка <code>withFileTypes</code> в качестве опции.</td></tr><tr><td>v22.0.0</td><td>Добавлено в версии: v22.0.0</td></tr></tbody></table></div><div class="warning custom-block"><p class="custom-block-title">[Stable: 1 - Experimental]</p><p><a href="/ru/nodejs/api/documentation#stability-index">Stable: 1</a> <a href="/ru/nodejs/api/documentation#stability-index">Стабильность: 1</a> - Экспериментально</p></div><ul><li><p><code>pattern</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string[]&gt;</a></p></li><li><p><code>options</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noreferrer">&lt;Object&gt;</a></p><ul><li><code>cwd</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> текущий рабочий каталог. <strong>По умолчанию:</strong> <code>process.cwd()</code></li><li><code>exclude</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function" target="_blank" rel="noreferrer">&lt;Function&gt;</a> Функция для фильтрации файлов/каталогов. Верните <code>true</code>, чтобы исключить элемент, <code>false</code>, чтобы включить его. <strong>По умолчанию:</strong> <code>undefined</code>.</li><li><code>withFileTypes</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" target="_blank" rel="noreferrer">&lt;boolean&gt;</a> <code>true</code>, если glob должен возвращать пути в виде Dirents, <code>false</code> в противном случае. <strong>По умолчанию:</strong> <code>false</code>.</li></ul></li><li><p><code>callback</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function" target="_blank" rel="noreferrer">&lt;Function&gt;</a></p><ul><li><code>err</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error" target="_blank" rel="noreferrer">&lt;Error&gt;</a></li></ul></li><li><p>Извлекает файлы, соответствующие указанному шаблону.</p></li></ul><div class="vp-code-group"><div class="tabs"><input type="radio" name="group-5566" id="tab-5567" checked><label data-title="ESM" for="tab-5567">ESM</label><input type="radio" name="group-5566" id="tab-5568"><label data-title="CJS" for="tab-5568">CJS</label></div><div class="blocks"><div class="language-js active line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { glob } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;node:fs&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">glob</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;**/*.js&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">err</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">matches</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (err) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">throw</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> err;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(matches);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">glob</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;node:fs&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">glob</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;**/*.js&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">err</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">matches</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (err) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">throw</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> err;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(matches);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div></div></div><h3 id="fslchmodpath-mode-callback" tabindex="-1"><code>fs.lchmod(path, mode, callback)</code> <a class="header-anchor" href="#fslchmodpath-mode-callback" aria-label="Permalink to “fs.lchmod(path, mode, callback)”">​</a></h3><div class="info custom-block"><p class="custom-block-title">[История изменений]</p><table tabindex="0"><thead><tr><th>Версия</th><th>Изменения</th></tr></thead><tbody><tr><td>v18.0.0</td><td>Передача недействительного обратного вызова аргументу <code>callback</code> теперь вызывает <code>ERR_INVALID_ARG_TYPE</code> вместо <code>ERR_INVALID_CALLBACK</code>.</td></tr><tr><td>v16.0.0</td><td>Возвращаемая ошибка может быть <code>AggregateError</code>, если возвращается более одной ошибки.</td></tr><tr><td>v10.0.0</td><td>Параметр <code>callback</code> больше не является необязательным. Его отсутствие вызовет <code>TypeError</code> во время выполнения.</td></tr><tr><td>v7.0.0</td><td>Параметр <code>callback</code> больше не является необязательным. Его отсутствие приведет к появлению предупреждения об устаревании с идентификатором DEP0013.</td></tr><tr><td>v0.4.7</td><td>Устарело с: v0.4.7</td></tr></tbody></table></div><ul><li><code>path</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="/ru/nodejs/api/buffer#class-buffer">&lt;Buffer&gt;</a> | <a href="/ru/nodejs/api/url#the-whatwg-url-api">&lt;URL&gt;</a></li><li><code>mode</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;integer&gt;</a></li><li><code>callback</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function" target="_blank" rel="noreferrer">&lt;Function&gt;</a><ul><li><code>err</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error" target="_blank" rel="noreferrer">&lt;Error&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/AggregateError" target="_blank" rel="noreferrer">&lt;AggregateError&gt;</a></li></ul></li></ul><p>Изменяет права доступа к символической ссылке. В функцию обратного вызова завершения не передаются никакие аргументы, кроме возможного исключения.</p><p>Этот метод реализован только в macOS.</p><p>Подробнее см. в документации POSIX <a href="https://www.freebsd.org/cgi/man.cgi?query=lchmod&amp;sektion=2" target="_blank" rel="noreferrer"><code>lchmod(2)</code></a>.</p><h3 id="fslchownpath-uid-gid-callback" tabindex="-1"><code>fs.lchown(path, uid, gid, callback)</code> <a class="header-anchor" href="#fslchownpath-uid-gid-callback" aria-label="Permalink to “fs.lchown(path, uid, gid, callback)”">​</a></h3><div class="info custom-block"><p class="custom-block-title">[История изменений]</p><table tabindex="0"><thead><tr><th>Версия</th><th>Изменения</th></tr></thead><tbody><tr><td>v18.0.0</td><td>Передача недействительного обратного вызова аргументу <code>callback</code> теперь вызывает <code>ERR_INVALID_ARG_TYPE</code> вместо <code>ERR_INVALID_CALLBACK</code>.</td></tr><tr><td>v10.6.0</td><td>Этот API больше не является устаревшим.</td></tr><tr><td>v10.0.0</td><td>Параметр <code>callback</code> больше не является необязательным. Его отсутствие вызовет <code>TypeError</code> во время выполнения.</td></tr><tr><td>v7.0.0</td><td>Параметр <code>callback</code> больше не является необязательным. Его отсутствие приведет к появлению предупреждения об устаревании с идентификатором DEP0013.</td></tr><tr><td>v0.4.7</td><td>Только документальное устаревание.</td></tr></tbody></table></div><ul><li><code>path</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="/ru/nodejs/api/buffer#class-buffer">&lt;Buffer&gt;</a> | <a href="/ru/nodejs/api/url#the-whatwg-url-api">&lt;URL&gt;</a></li><li><code>uid</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;integer&gt;</a></li><li><code>gid</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;integer&gt;</a></li><li><code>callback</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function" target="_blank" rel="noreferrer">&lt;Function&gt;</a><ul><li><code>err</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error" target="_blank" rel="noreferrer">&lt;Error&gt;</a></li></ul></li></ul><p>Устанавливает владельца символической ссылки. В функцию обратного вызова завершения не передаются никакие аргументы, кроме возможного исключения.</p><p>Подробнее см. в документации POSIX <a href="http://man7.org/linux/man-pages/man2/lchown.2" target="_blank" rel="noreferrer"><code>lchown(2)</code></a>.</p><h3 id="fslutimespath-atime-mtime-callback" tabindex="-1"><code>fs.lutimes(path, atime, mtime, callback)</code> <a class="header-anchor" href="#fslutimespath-atime-mtime-callback" aria-label="Permalink to “fs.lutimes(path, atime, mtime, callback)”">​</a></h3><div class="info custom-block"><p class="custom-block-title">[История]</p><table tabindex="0"><thead><tr><th>Версия</th><th>Изменения</th></tr></thead><tbody><tr><td>v18.0.0</td><td>Передача недействительного колбэка аргументу <code>callback</code> теперь вызывает <code>ERR_INVALID_ARG_TYPE</code> вместо <code>ERR_INVALID_CALLBACK</code>.</td></tr><tr><td>v14.5.0, v12.19.0</td><td>Добавлено в: v14.5.0, v12.19.0</td></tr></tbody></table></div><ul><li><code>path</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="/ru/nodejs/api/buffer#class-buffer">&lt;Buffer&gt;</a> | <a href="/ru/nodejs/api/url#the-whatwg-url-api">&lt;URL&gt;</a></li><li><code>atime</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;number&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date" target="_blank" rel="noreferrer">&lt;Date&gt;</a></li><li><code>mtime</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;number&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date" target="_blank" rel="noreferrer">&lt;Date&gt;</a></li><li><code>callback</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function" target="_blank" rel="noreferrer">&lt;Function&gt;</a><ul><li><code>err</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error" target="_blank" rel="noreferrer">&lt;Error&gt;</a></li></ul></li></ul><p>Изменяет время доступа и модификации файла так же, как и <a href="/ru/nodejs/api/fs#fsutimespath-atime-mtime-callback"><code>fs.utimes()</code></a>, с той разницей, что если путь указывает на символическую ссылку, то ссылка не разыменовывается: вместо этого изменяются временные метки самой символической ссылки.</p><p>Функция обратного вызова завершения не получает никаких аргументов, кроме возможного исключения.</p><h3 id="fslinkexistingpath-newpath-callback" tabindex="-1"><code>fs.link(existingPath, newPath, callback)</code> <a class="header-anchor" href="#fslinkexistingpath-newpath-callback" aria-label="Permalink to “fs.link(existingPath, newPath, callback)”">​</a></h3><div class="info custom-block"><p class="custom-block-title">[История]</p><table tabindex="0"><thead><tr><th>Версия</th><th>Изменения</th></tr></thead><tbody><tr><td>v18.0.0</td><td>Передача недействительного колбэка аргументу <code>callback</code> теперь вызывает <code>ERR_INVALID_ARG_TYPE</code> вместо <code>ERR_INVALID_CALLBACK</code>.</td></tr><tr><td>v10.0.0</td><td>Параметр <code>callback</code> больше не является необязательным. Если он не передан, во время выполнения будет выброшена ошибка <code>TypeError</code>.</td></tr><tr><td>v7.6.0</td><td>Параметры <code>existingPath</code> и <code>newPath</code> могут быть объектами WHATWG <code>URL</code>, использующими протокол <code>file:</code>. Поддержка в настоящее время все еще является <em>экспериментальной</em>.</td></tr><tr><td>v7.0.0</td><td>Параметр <code>callback</code> больше не является необязательным. Если он не передан, будет выдано предупреждение об устаревании с идентификатором DEP0013.</td></tr><tr><td>v0.1.31</td><td>Добавлено в: v0.1.31</td></tr></tbody></table></div><ul><li><code>existingPath</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="/ru/nodejs/api/buffer#class-buffer">&lt;Buffer&gt;</a> | <a href="/ru/nodejs/api/url#the-whatwg-url-api">&lt;URL&gt;</a></li><li><code>newPath</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="/ru/nodejs/api/buffer#class-buffer">&lt;Buffer&gt;</a> | <a href="/ru/nodejs/api/url#the-whatwg-url-api">&lt;URL&gt;</a></li><li><code>callback</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function" target="_blank" rel="noreferrer">&lt;Function&gt;</a><ul><li><code>err</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error" target="_blank" rel="noreferrer">&lt;Error&gt;</a></li></ul></li></ul><p>Создает новую ссылку из <code>existingPath</code> в <code>newPath</code>. Смотрите документацию POSIX <a href="http://man7.org/linux/man-pages/man2/link.2" target="_blank" rel="noreferrer"><code>link(2)</code></a> для получения более подробной информации. Функция обратного вызова завершения не получает никаких аргументов, кроме возможного исключения.</p><h3 id="fslstatpath-options-callback" tabindex="-1"><code>fs.lstat(path[, options], callback)</code> <a class="header-anchor" href="#fslstatpath-options-callback" aria-label="Permalink to “fs.lstat(path[, options], callback)”">​</a></h3><div class="info custom-block"><p class="custom-block-title">[История]</p><table tabindex="0"><thead><tr><th>Версия</th><th>Изменения</th></tr></thead><tbody><tr><td>v18.0.0</td><td>Передача недействительного обратного вызова в аргумент <code>callback</code> теперь вызывает <code>ERR_INVALID_ARG_TYPE</code> вместо <code>ERR_INVALID_CALLBACK</code>.</td></tr><tr><td>v10.5.0</td><td>Принимает дополнительный объект <code>options</code> для указания того, должны ли возвращаемые числовые значения быть типа bigint.</td></tr><tr><td>v10.0.0</td><td>Параметр <code>callback</code> больше не является необязательным. Его отсутствие вызовет ошибку <code>TypeError</code> во время выполнения.</td></tr><tr><td>v7.6.0</td><td>Параметр <code>path</code> может быть объектом WHATWG <code>URL</code> с использованием протокола <code>file:</code>.</td></tr><tr><td>v7.0.0</td><td>Параметр <code>callback</code> больше не является необязательным. Его отсутствие вызовет предупреждение об устаревании с идентификатором DEP0013.</td></tr><tr><td>v0.1.30</td><td>Добавлено в: v0.1.30</td></tr></tbody></table></div><ul><li><p><code>path</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="/ru/nodejs/api/buffer#class-buffer">&lt;Buffer&gt;</a> | <a href="/ru/nodejs/api/url#the-whatwg-url-api">&lt;URL&gt;</a></p></li><li><p><code>options</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noreferrer">&lt;Object&gt;</a></p><ul><li><code>bigint</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" target="_blank" rel="noreferrer">&lt;boolean&gt;</a> Определяет, должны ли числовые значения в возвращаемом объекте <a href="/ru/nodejs/api/fs#class-fsstats">&lt;fs.Stats&gt;</a> быть типа <code>bigint</code>. <strong>По умолчанию:</strong> <code>false</code>.</li></ul></li><li><p><code>callback</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function" target="_blank" rel="noreferrer">&lt;Function&gt;</a></p><ul><li><code>err</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error" target="_blank" rel="noreferrer">&lt;Error&gt;</a></li><li><code>stats</code> <a href="/ru/nodejs/api/fs#class-fsstats">&lt;fs.Stats&gt;</a></li></ul></li></ul><p>Получает <a href="/ru/nodejs/api/fs#class-fsstats">&lt;fs.Stats&gt;</a> для символической ссылки, на которую указывает путь. Обратный вызов получает два аргумента <code>(err, stats)</code>, где <code>stats</code> — это объект <a href="/ru/nodejs/api/fs#class-fsstats">&lt;fs.Stats&gt;</a>. <code>lstat()</code> идентичен <code>stat()</code>, за исключением того, что если <code>path</code> является символической ссылкой, то выполняется stat для самой ссылки, а не для файла, на который она указывает.</p><p>Подробности см. в документации POSIX <a href="http://man7.org/linux/man-pages/man2/lstat.2" target="_blank" rel="noreferrer"><code>lstat(2)</code></a>.</p><h3 id="fsmkdirpath-options-callback" tabindex="-1"><code>fs.mkdir(path[, options], callback)</code> <a class="header-anchor" href="#fsmkdirpath-options-callback" aria-label="Permalink to “fs.mkdir(path[, options], callback)”">​</a></h3><div class="info custom-block"><p class="custom-block-title">[История]</p><table tabindex="0"><thead><tr><th style="text-align:left;">Версия</th><th style="text-align:left;">Изменения</th></tr></thead><tbody><tr><td style="text-align:left;">v18.0.0</td><td style="text-align:left;">Передача недействительного обратного вызова в аргумент <code>callback</code> теперь вызывает <code>ERR_INVALID_ARG_TYPE</code> вместо <code>ERR_INVALID_CALLBACK</code>.</td></tr><tr><td style="text-align:left;">v13.11.0, v12.17.0</td><td style="text-align:left;">В режиме <code>recursive</code> обратный вызов теперь получает первый созданный путь в качестве аргумента.</td></tr><tr><td style="text-align:left;">v10.12.0</td><td style="text-align:left;">Второй аргумент теперь может быть объектом <code>options</code> со свойствами <code>recursive</code> и <code>mode</code>.</td></tr><tr><td style="text-align:left;">v10.0.0</td><td style="text-align:left;">Параметр <code>callback</code> больше не является необязательным. Его отсутствие вызовет <code>TypeError</code> во время выполнения.</td></tr><tr><td style="text-align:left;">v7.6.0</td><td style="text-align:left;">Параметр <code>path</code> может быть объектом WHATWG <code>URL</code>, использующим протокол <code>file:</code>.</td></tr><tr><td style="text-align:left;">v7.0.0</td><td style="text-align:left;">Параметр <code>callback</code> больше не является необязательным. Его отсутствие вызовет предупреждение об устаревании с идентификатором DEP0013.</td></tr><tr><td style="text-align:left;">v0.1.8</td><td style="text-align:left;">Добавлено в: v0.1.8</td></tr></tbody></table></div><ul><li><p><code>path</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="/ru/nodejs/api/buffer#class-buffer">&lt;Buffer&gt;</a> | <a href="/ru/nodejs/api/url#the-whatwg-url-api">&lt;URL&gt;</a></p></li><li><p><code>options</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noreferrer">&lt;Object&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;integer&gt;</a></p><ul><li><code>recursive</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" target="_blank" rel="noreferrer">&lt;boolean&gt;</a> <strong>По умолчанию:</strong> <code>false</code></li><li><code>mode</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;integer&gt;</a> Не поддерживается в Windows. <strong>По умолчанию:</strong> <code>0o777</code>.</li></ul></li><li><p><code>callback</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function" target="_blank" rel="noreferrer">&lt;Function&gt;</a></p><ul><li><code>err</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error" target="_blank" rel="noreferrer">&lt;Error&gt;</a></li><li><code>path</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Undefined_type" target="_blank" rel="noreferrer">&lt;undefined&gt;</a> Присутствует только в том случае, если каталог создан с параметром <code>recursive</code>, установленным в <code>true</code>.</li></ul></li></ul><p>Асинхронно создает каталог.</p><p>Обратному вызову передается возможное исключение и, если <code>recursive</code> имеет значение <code>true</code>, первый созданный путь к каталогу, <code>(err[, path])</code>. <code>path</code> все еще может быть <code>undefined</code>, когда <code>recursive</code> имеет значение <code>true</code>, если каталог не был создан (например, если он был создан ранее).</p><p>Необязательный аргумент <code>options</code> может быть целым числом, задающим <code>mode</code> (биты разрешений и закрепления), или объектом со свойством <code>mode</code> и свойством <code>recursive</code>, указывающим, следует ли создавать родительские каталоги. Вызов <code>fs.mkdir()</code>, когда <code>path</code> является существующим каталогом, приводит к ошибке только тогда, когда <code>recursive</code> имеет значение false. Если <code>recursive</code> имеет значение false и каталог существует, возникает ошибка <code>EEXIST</code>.</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { mkdir } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;node:fs&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Создать ./tmp/a/apple, независимо от того, существуют ли ./tmp и ./tmp/a.</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">mkdir</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;./tmp/a/apple&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, { recursive: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }, (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">err</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (err) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">throw</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> err;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>В Windows использование <code>fs.mkdir()</code> в корневом каталоге даже с рекурсией приведет к ошибке:</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { mkdir } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;node:fs&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">mkdir</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;/&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, { recursive: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }, (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">err</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // =&gt; [Error: EPERM: operation not permitted, mkdir &#39;C:\\&#39;]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>См. документацию POSIX <a href="http://man7.org/linux/man-pages/man2/mkdir.2" target="_blank" rel="noreferrer"><code>mkdir(2)</code></a> для получения более подробной информации.</p><h3 id="fsmkdtempprefix-options-callback" tabindex="-1"><code>fs.mkdtemp(prefix[, options], callback)</code> <a class="header-anchor" href="#fsmkdtempprefix-options-callback" aria-label="Permalink to “fs.mkdtemp(prefix[, options], callback)”">​</a></h3><div class="info custom-block"><p class="custom-block-title">[История]</p><table tabindex="0"><thead><tr><th>Версия</th><th>Изменения</th></tr></thead><tbody><tr><td>v20.6.0, v18.19.0</td><td>Параметр <code>prefix</code> теперь принимает буферы и URL.</td></tr><tr><td>v18.0.0</td><td>Передача недействительного обратного вызова аргументу <code>callback</code> теперь вызывает <code>ERR_INVALID_ARG_TYPE</code> вместо <code>ERR_INVALID_CALLBACK</code>.</td></tr><tr><td>v16.5.0, v14.18.0</td><td>Параметр <code>prefix</code> теперь принимает пустую строку.</td></tr><tr><td>v10.0.0</td><td>Параметр <code>callback</code> больше не является необязательным. Его отсутствие приведет к выбросу <code>TypeError</code> во время выполнения.</td></tr><tr><td>v7.0.0</td><td>Параметр <code>callback</code> больше не является необязательным. Его отсутствие вызовет предупреждение об устаревании с идентификатором DEP0013.</td></tr><tr><td>v6.2.1</td><td>Параметр <code>callback</code> теперь является необязательным.</td></tr><tr><td>v5.10.0</td><td>Добавлено в: v5.10.0</td></tr></tbody></table></div><ul><li><p><code>prefix</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="/ru/nodejs/api/buffer#class-buffer">&lt;Buffer&gt;</a> | <a href="/ru/nodejs/api/url#the-whatwg-url-api">&lt;URL&gt;</a></p></li><li><p><code>options</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noreferrer">&lt;Object&gt;</a></p><ul><li><code>encoding</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> <strong>По умолчанию:</strong> <code>&#39;utf8&#39;</code></li></ul></li><li><p><code>callback</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function" target="_blank" rel="noreferrer">&lt;Function&gt;</a></p><ul><li><code>err</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error" target="_blank" rel="noreferrer">&lt;Error&gt;</a></li><li><code>directory</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a></li></ul></li></ul><p>Создает уникальный временный каталог.</p><p>Генерирует шесть случайных символов, которые добавляются к обязательному <code>prefix</code> для создания уникального временного каталога. Из-за несогласованности платформ избегайте завершающих символов <code>X</code> в <code>prefix</code>. Некоторые платформы, особенно BSD, могут возвращать более шести случайных символов и заменять завершающие символы <code>X</code> в <code>prefix</code> случайными символами.</p><p>Созданный путь к каталогу передается в виде строки во втором параметре обратного вызова.</p><p>Необязательный аргумент <code>options</code> может быть строкой, указывающей кодировку, или объектом со свойством <code>encoding</code>, указывающим используемую кодировку символов.</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { mkdtemp } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;node:fs&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { join } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;node:path&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { tmpdir } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;node:os&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">mkdtemp</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">join</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">tmpdir</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(), </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;foo-&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">), (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">err</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">directory</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (err) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">throw</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> err;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(directory);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // Выводит: /tmp/foo-itXde2 или C:\\Users\\...\\AppData\\Local\\Temp\\foo-itXde2</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>Метод <code>fs.mkdtemp()</code> добавит шесть случайно выбранных символов непосредственно к строке <code>prefix</code>. Например, если задан каталог <code>/tmp</code>, и намерение состоит в том, чтобы создать временный каталог <em>внутри</em> <code>/tmp</code>, <code>prefix</code> должен заканчиваться замыкающим разделителем пути, специфичным для платформы (<code>require(&#39;node:path&#39;).sep</code>).</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { tmpdir } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;node:os&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { mkdtemp } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;node:fs&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Родительский каталог для нового временного каталога</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> tmpDir</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> tmpdir</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Этот метод *НЕПРАВИЛЬНЫЙ*:</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">mkdtemp</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(tmpDir, (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">err</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">directory</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (err) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">throw</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> err;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(directory);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // Выведет что-то вроде \`/tmpabc123\`.</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // Новый временный каталог создается в корне файловой системы,</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // а не *внутри* каталога /tmp.</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Этот метод *ПРАВИЛЬНЫЙ*:</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { sep } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;node:path&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">mkdtemp</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">\`\${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">tmpDir</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}\${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">sep</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}\`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">err</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">directory</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (err) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">throw</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> err;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(directory);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // Выведет что-то вроде \`/tmp/abc123\`.</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // Новый временный каталог создается внутри</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // каталога /tmp.</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><h3 id="fsopenpath-flags-mode-callback" tabindex="-1"><code>fs.open(path[, flags[, mode]], callback)</code> <a class="header-anchor" href="#fsopenpath-flags-mode-callback" aria-label="Permalink to “fs.open(path[, flags[, mode]], callback)”">​</a></h3><div class="info custom-block"><p class="custom-block-title">[История]</p><table tabindex="0"><thead><tr><th>Версия</th><th>Изменения</th></tr></thead><tbody><tr><td>v18.0.0</td><td>Передача недействительного обратного вызова в аргумент <code>callback</code> теперь вызывает <code>ERR_INVALID_ARG_TYPE</code> вместо <code>ERR_INVALID_CALLBACK</code>.</td></tr><tr><td>v11.1.0</td><td>Аргумент <code>flags</code> теперь необязательный и по умолчанию равен <code>&#39;r&#39;</code>.</td></tr><tr><td>v9.9.0</td><td>Теперь поддерживаются флаги <code>as</code> и <code>as+</code>.</td></tr><tr><td>v7.6.0</td><td>Параметр <code>path</code> может быть объектом WHATWG <code>URL</code>, использующим протокол <code>file:</code>.</td></tr><tr><td>v0.0.2</td><td>Добавлено в версии: v0.0.2</td></tr></tbody></table></div><ul><li><code>path</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="/ru/nodejs/api/buffer#class-buffer">&lt;Buffer&gt;</a> | <a href="/ru/nodejs/api/url#the-whatwg-url-api">&lt;URL&gt;</a></li><li><code>flags</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;number&gt;</a> См. <a href="/ru/nodejs/api/fs#file-system-flags">поддержку флагов файловой системы</a>. <strong>По умолчанию:</strong> <code>&#39;r&#39;</code>.</li><li><code>mode</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;integer&gt;</a> <strong>По умолчанию:</strong> <code>0o666</code> (чтение и запись)</li><li><code>callback</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function" target="_blank" rel="noreferrer">&lt;Function&gt;</a><ul><li><code>err</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error" target="_blank" rel="noreferrer">&lt;Error&gt;</a></li><li><code>fd</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;integer&gt;</a></li></ul></li></ul><p>Асинхронное открытие файла. Подробнее см. документацию POSIX <a href="http://man7.org/linux/man-pages/man2/open.2" target="_blank" rel="noreferrer"><code>open(2)</code></a>.</p><p><code>mode</code> устанавливает режим файла (права доступа и sticky bits), но только если файл был создан. В Windows можно манипулировать только разрешением на запись; см. <a href="/ru/nodejs/api/fs#fschmodpath-mode-callback"><code>fs.chmod()</code></a>.</p><p>Обратный вызов получает два аргумента <code>(err, fd)</code>.</p><p>Некоторые символы (<code>\\&lt; \\&gt; : &quot; / \\ | ? *</code>) зарезервированы в Windows, как описано в <a href="https://docs.microsoft.com/en-us/windows/desktop/FileIO/naming-a-file" target="_blank" rel="noreferrer">Именование файлов, путей и пространств имен</a>. В NTFS, если имя файла содержит двоеточие, Node.js откроет поток файловой системы, как описано на <a href="https://docs.microsoft.com/en-us/windows/desktop/FileIO/using-streams" target="_blank" rel="noreferrer">этой странице MSDN</a>.</p><p>Функции, основанные на <code>fs.open()</code>, также демонстрируют это поведение: <code>fs.writeFile()</code>, <code>fs.readFile()</code> и т. д.</p><h3 id="fsopenasblobpath-options" tabindex="-1"><code>fs.openAsBlob(path[, options])</code> <a class="header-anchor" href="#fsopenasblobpath-options" aria-label="Permalink to “fs.openAsBlob(path[, options])”">​</a></h3><p><strong>Добавлено в: v19.8.0</strong></p><div class="warning custom-block"><p class="custom-block-title">[Стабильность: 1 - Экспериментальный]</p><p><a href="/ru/nodejs/api/documentation#stability-index">Стабильность: 1</a> <a href="/ru/nodejs/api/documentation#stability-index">Стабильность: 1</a> - Экспериментальный</p></div><ul><li><p><code>path</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="/ru/nodejs/api/buffer#class-buffer">&lt;Buffer&gt;</a> | <a href="/ru/nodejs/api/url#the-whatwg-url-api">&lt;URL&gt;</a></p></li><li><p><code>options</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noreferrer">&lt;Object&gt;</a></p><ul><li><code>type</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> Необязательный mime-тип для blob.</li></ul></li><li><p>Возвращает: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" target="_blank" rel="noreferrer">&lt;Promise&gt;</a> Разрешается с <a href="/ru/nodejs/api/buffer#class-blob">&lt;Blob&gt;</a> при успехе.</p></li></ul><p>Возвращает <a href="/ru/nodejs/api/buffer#class-blob">&lt;Blob&gt;</a>, чьи данные поддерживаются указанным файлом.</p><p>Файл не должен быть изменен после создания <a href="/ru/nodejs/api/buffer#class-blob">&lt;Blob&gt;</a>. Любые изменения приведут к тому, что чтение данных <a href="/ru/nodejs/api/buffer#class-blob">&lt;Blob&gt;</a> завершится с ошибкой <code>DOMException</code>. Синхронные операции stat с файлом выполняются при создании <code>Blob</code> и перед каждым чтением, чтобы определить, были ли изменены данные файла на диске.</p><div class="vp-code-group"><div class="tabs"><input type="radio" name="group-6431" id="tab-6432" checked><label data-title="ESM" for="tab-6432">ESM</label><input type="radio" name="group-6431" id="tab-6433"><label data-title="CJS" for="tab-6433">CJS</label></div><div class="blocks"><div class="language-js active line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { openAsBlob } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;node:fs&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> blob</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> openAsBlob</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;the.file.txt&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> ab</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> blob.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">arrayBuffer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">blob.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">stream</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">openAsBlob</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;node:fs&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">async</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> blob</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> openAsBlob</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;the.file.txt&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> ab</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> blob.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">arrayBuffer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  blob.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">stream</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})();</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div></div></div><h3 id="fsopendirpath-options-callback" tabindex="-1"><code>fs.opendir(path[, options], callback)</code> <a class="header-anchor" href="#fsopendirpath-options-callback" aria-label="Permalink to “fs.opendir(path[, options], callback)”">​</a></h3><div class="info custom-block"><p class="custom-block-title">[История]</p><table tabindex="0"><thead><tr><th>Версия</th><th>Изменения</th></tr></thead><tbody><tr><td>v20.1.0, v18.17.0</td><td>Добавлена опция <code>recursive</code>.</td></tr><tr><td>v18.0.0</td><td>Передача недействительного обратного вызова в аргумент <code>callback</code> теперь вызывает <code>ERR_INVALID_ARG_TYPE</code> вместо <code>ERR_INVALID_CALLBACK</code>.</td></tr><tr><td>v13.1.0, v12.16.0</td><td>Представлена опция <code>bufferSize</code>.</td></tr><tr><td>v12.12.0</td><td>Добавлено в: v12.12.0</td></tr></tbody></table></div><ul><li><p><code>path</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="/ru/nodejs/api/buffer#class-buffer">&lt;Buffer&gt;</a> | <a href="/ru/nodejs/api/url#the-whatwg-url-api">&lt;URL&gt;</a></p></li><li><p><code>options</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noreferrer">&lt;Object&gt;</a></p><ul><li><code>encoding</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Null_type" target="_blank" rel="noreferrer">&lt;null&gt;</a> <strong>По умолчанию:</strong> <code>&#39;utf8&#39;</code></li><li><code>bufferSize</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;number&gt;</a> Количество записей каталога, которые буферизуются внутри при чтении из каталога. Более высокие значения приводят к лучшей производительности, но к большему потреблению памяти. <strong>По умолчанию:</strong> <code>32</code></li><li><code>recursive</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" target="_blank" rel="noreferrer">&lt;boolean&gt;</a> <strong>По умолчанию:</strong> <code>false</code></li></ul></li><li><p><code>callback</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function" target="_blank" rel="noreferrer">&lt;Function&gt;</a></p><ul><li><code>err</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error" target="_blank" rel="noreferrer">&lt;Error&gt;</a></li><li><code>dir</code> <a href="/ru/nodejs/api/fs#class-fsdir">&lt;fs.Dir&gt;</a></li></ul></li></ul><p>Асинхронное открытие каталога. Подробности см. в документации POSIX <a href="http://man7.org/linux/man-pages/man3/opendir.3" target="_blank" rel="noreferrer"><code>opendir(3)</code></a>.</p><p>Создает <a href="/ru/nodejs/api/fs#class-fsdir">&lt;fs.Dir&gt;</a>, который содержит все дальнейшие функции для чтения и очистки каталога.</p><p>Опция <code>encoding</code> устанавливает кодировку для <code>path</code> при открытии каталога и последующих операциях чтения.</p><h3 id="fsreadfd-buffer-offset-length-position-callback" tabindex="-1"><code>fs.read(fd, buffer, offset, length, position, callback)</code> <a class="header-anchor" href="#fsreadfd-buffer-offset-length-position-callback" aria-label="Permalink to “fs.read(fd, buffer, offset, length, position, callback)”">​</a></h3><div class="info custom-block"><p class="custom-block-title">[История]</p><table tabindex="0"><thead><tr><th style="text-align:left;">Версия</th><th style="text-align:left;">Изменения</th></tr></thead><tbody><tr><td style="text-align:left;">v18.0.0</td><td style="text-align:left;">Передача недействительной обратной функции в аргументе <code>callback</code> теперь вызывает <code>ERR_INVALID_ARG_TYPE</code> вместо <code>ERR_INVALID_CALLBACK</code>.</td></tr><tr><td style="text-align:left;">v10.10.0</td><td style="text-align:left;">Параметр <code>buffer</code> теперь может быть любым <code>TypedArray</code> или <code>DataView</code>.</td></tr><tr><td style="text-align:left;">v7.4.0</td><td style="text-align:left;">Параметр <code>buffer</code> теперь может быть <code>Uint8Array</code>.</td></tr><tr><td style="text-align:left;">v6.0.0</td><td style="text-align:left;">Параметр <code>length</code> теперь может быть <code>0</code>.</td></tr><tr><td style="text-align:left;">v0.0.2</td><td style="text-align:left;">Добавлено в: v0.0.2</td></tr></tbody></table></div><ul><li><code>fd</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;integer&gt;</a></li><li><code>buffer</code> <a href="/ru/nodejs/api/buffer#class-buffer">&lt;Buffer&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/TypedArray" target="_blank" rel="noreferrer">&lt;TypedArray&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/DataView" target="_blank" rel="noreferrer">&lt;DataView&gt;</a> Буфер, в который будут записаны данные.</li><li><code>offset</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;integer&gt;</a> Позиция в <code>buffer</code>, куда будут записаны данные.</li><li><code>length</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;integer&gt;</a> Количество байтов для чтения.</li><li><code>position</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;integer&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/BigInt" target="_blank" rel="noreferrer">&lt;bigint&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Null_type" target="_blank" rel="noreferrer">&lt;null&gt;</a> Указывает, с какого места в файле начинать чтение. Если <code>position</code> равно <code>null</code> или <code>-1</code>, данные будут считываться с текущей позиции файла, и позиция файла будет обновлена. Если <code>position</code> является неотрицательным целым числом, позиция файла останется неизменной.</li><li><code>callback</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function" target="_blank" rel="noreferrer">&lt;Function&gt;</a><ul><li><code>err</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error" target="_blank" rel="noreferrer">&lt;Error&gt;</a></li><li><code>bytesRead</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;integer&gt;</a></li><li><code>buffer</code> <a href="/ru/nodejs/api/buffer#class-buffer">&lt;Buffer&gt;</a></li></ul></li></ul><p>Считывает данные из файла, указанного в <code>fd</code>.</p><p>Обратный вызов получает три аргумента: <code>(err, bytesRead, buffer)</code>.</p><p>Если файл не изменяется одновременно, конец файла достигается, когда количество прочитанных байтов равно нулю.</p><p>Если этот метод вызывается как его <a href="/ru/nodejs/api/util#utilpromisifyoriginal"><code>util.promisify()</code></a> версия, он возвращает промис для <code>Object</code> со свойствами <code>bytesRead</code> и <code>buffer</code>.</p><p>Метод <code>fs.read()</code> считывает данные из файла, указанного файловым дескриптором (<code>fd</code>). Аргумент <code>length</code> указывает максимальное количество байтов, которые Node.js попытается прочитать из ядра. Однако фактическое количество прочитанных байтов (<code>bytesRead</code>) может быть меньше указанной <code>length</code> по разным причинам.</p><p>Например:</p><ul><li>Если файл короче, чем указанная <code>length</code>, <code>bytesRead</code> будет установлено в фактическое количество прочитанных байтов.</li><li>Если файл достигает EOF (конец файла) до того, как буфер может быть заполнен, Node.js прочитает все доступные байты до тех пор, пока не будет достигнут EOF, и параметр <code>bytesRead</code> в обратном вызове укажет фактическое количество прочитанных байтов, которое может быть меньше указанной <code>length</code>.</li><li>Если файл находится в медленной сети <code>filesystem</code> или возникает какая-либо другая проблема во время чтения, <code>bytesRead</code> может быть меньше указанной <code>length</code>.</li></ul><p>Следовательно, при использовании <code>fs.read()</code> важно проверять значение <code>bytesRead</code>, чтобы определить, сколько байтов было фактически прочитано из файла. В зависимости от логики вашего приложения вам может потребоваться обработка случаев, когда <code>bytesRead</code> меньше указанной <code>length</code>, например, путем обертывания вызова чтения в цикл, если вам требуется минимальное количество байтов.</p><p>Это поведение аналогично функции POSIX <code>preadv2</code>.</p><h3 id="fsreadfd-options-callback" tabindex="-1"><code>fs.read(fd[, options], callback)</code> <a class="header-anchor" href="#fsreadfd-options-callback" aria-label="Permalink to “fs.read(fd[, options], callback)”">​</a></h3><div class="info custom-block"><p class="custom-block-title">[История]</p><table tabindex="0"><thead><tr><th>Версия</th><th>Изменения</th></tr></thead><tbody><tr><td>v13.11.0, v12.17.0</td><td>Объект <code>options</code> может быть передан для того, чтобы сделать <code>buffer</code>, <code>offset</code>, <code>length</code> и <code>position</code> необязательными.</td></tr><tr><td>v13.11.0, v12.17.0</td><td>Добавлено в версии: v13.11.0, v12.17.0</td></tr></tbody></table></div><ul><li><p><code>fd</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;integer&gt;</a></p></li><li><p><code>options</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noreferrer">&lt;Object&gt;</a></p><ul><li><code>buffer</code> <a href="/ru/nodejs/api/buffer#class-buffer">&lt;Buffer&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/TypedArray" target="_blank" rel="noreferrer">&lt;TypedArray&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/DataView" target="_blank" rel="noreferrer">&lt;DataView&gt;</a> <strong>По умолчанию:</strong> <code>Buffer.alloc(16384)</code></li><li><code>offset</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;integer&gt;</a> <strong>По умолчанию:</strong> <code>0</code></li><li><code>length</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;integer&gt;</a> <strong>По умолчанию:</strong> <code>buffer.byteLength - offset</code></li><li><code>position</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;integer&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/BigInt" target="_blank" rel="noreferrer">&lt;bigint&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Null_type" target="_blank" rel="noreferrer">&lt;null&gt;</a> <strong>По умолчанию:</strong> <code>null</code></li></ul></li><li><p><code>callback</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function" target="_blank" rel="noreferrer">&lt;Function&gt;</a></p><ul><li><code>err</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error" target="_blank" rel="noreferrer">&lt;Error&gt;</a></li><li><code>bytesRead</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;integer&gt;</a></li><li><code>buffer</code> <a href="/ru/nodejs/api/buffer#class-buffer">&lt;Buffer&gt;</a></li></ul></li></ul><p>Аналогично функции <a href="/ru/nodejs/api/fs#fsreadfd-buffer-offset-length-position-callback"><code>fs.read()</code></a>, эта версия принимает необязательный объект <code>options</code>. Если объект <code>options</code> не указан, используются значения по умолчанию, указанные выше.</p><h3 id="fsreadfd-buffer-options-callback" tabindex="-1"><code>fs.read(fd, buffer[, options], callback)</code> <a class="header-anchor" href="#fsreadfd-buffer-options-callback" aria-label="Permalink to “fs.read(fd, buffer[, options], callback)”">​</a></h3><p><strong>Добавлено в версии: v18.2.0, v16.17.0</strong></p><ul><li><p><code>fd</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;integer&gt;</a></p></li><li><p><code>buffer</code> <a href="/ru/nodejs/api/buffer#class-buffer">&lt;Buffer&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/TypedArray" target="_blank" rel="noreferrer">&lt;TypedArray&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/DataView" target="_blank" rel="noreferrer">&lt;DataView&gt;</a> Буфер, в который будут записаны данные.</p></li><li><p><code>options</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noreferrer">&lt;Object&gt;</a></p><ul><li><code>offset</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;integer&gt;</a> <strong>По умолчанию:</strong> <code>0</code></li><li><code>length</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;integer&gt;</a> <strong>По умолчанию:</strong> <code>buffer.byteLength - offset</code></li><li><code>position</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;integer&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/BigInt" target="_blank" rel="noreferrer">&lt;bigint&gt;</a> <strong>По умолчанию:</strong> <code>null</code></li></ul></li><li><p><code>callback</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function" target="_blank" rel="noreferrer">&lt;Function&gt;</a></p><ul><li><code>err</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error" target="_blank" rel="noreferrer">&lt;Error&gt;</a></li><li><code>bytesRead</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;integer&gt;</a></li><li><code>buffer</code> <a href="/ru/nodejs/api/buffer#class-buffer">&lt;Buffer&gt;</a></li></ul></li></ul><p>Подобно функции <a href="/ru/nodejs/api/fs#fsreadfd-buffer-offset-length-position-callback"><code>fs.read()</code></a>, эта версия принимает необязательный объект <code>options</code>. Если объект <code>options</code> не указан, используются значения по умолчанию, указанные выше.</p><h3 id="fsreaddirpath-options-callback" tabindex="-1"><code>fs.readdir(path[, options], callback)</code> <a class="header-anchor" href="#fsreaddirpath-options-callback" aria-label="Permalink to “fs.readdir(path[, options], callback)”">​</a></h3><div class="info custom-block"><p class="custom-block-title">[История]</p><table tabindex="0"><thead><tr><th>Версия</th><th>Изменения</th></tr></thead><tbody><tr><td>v20.1.0, v18.17.0</td><td>Добавлена опция <code>recursive</code>.</td></tr><tr><td>v18.0.0</td><td>Передача недействительного обратного вызова аргументу <code>callback</code> теперь вызывает <code>ERR_INVALID_ARG_TYPE</code> вместо <code>ERR_INVALID_CALLBACK</code>.</td></tr><tr><td>v10.10.0</td><td>Добавлена новая опция <code>withFileTypes</code>.</td></tr><tr><td>v10.0.0</td><td>Параметр <code>callback</code> больше не является необязательным. Если он не передан, во время выполнения будет выброшена ошибка <code>TypeError</code>.</td></tr><tr><td>v7.6.0</td><td>Параметр <code>path</code> может быть объектом WHATWG <code>URL</code>, использующим протокол <code>file:</code>.</td></tr><tr><td>v7.0.0</td><td>Параметр <code>callback</code> больше не является необязательным. Если он не передан, будет выдано предупреждение об устаревании с идентификатором DEP0013.</td></tr><tr><td>v6.0.0</td><td>Добавлен параметр <code>options</code>.</td></tr><tr><td>v0.1.8</td><td>Добавлено в версии: v0.1.8</td></tr></tbody></table></div><ul><li><p><code>path</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="/ru/nodejs/api/buffer#class-buffer">&lt;Buffer&gt;</a> | <a href="/ru/nodejs/api/url#the-whatwg-url-api">&lt;URL&gt;</a></p></li><li><p><code>options</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noreferrer">&lt;Object&gt;</a></p><ul><li><code>encoding</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> <strong>По умолчанию:</strong> <code>&#39;utf8&#39;</code></li><li><code>withFileTypes</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" target="_blank" rel="noreferrer">&lt;boolean&gt;</a> <strong>По умолчанию:</strong> <code>false</code></li><li><code>recursive</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" target="_blank" rel="noreferrer">&lt;boolean&gt;</a> Если <code>true</code>, считывает содержимое каталога рекурсивно. В рекурсивном режиме будут перечислены все файлы, подфайлы и каталоги. <strong>По умолчанию:</strong> <code>false</code>.</li></ul></li><li><p><code>callback</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function" target="_blank" rel="noreferrer">&lt;Function&gt;</a></p><ul><li><code>err</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error" target="_blank" rel="noreferrer">&lt;Error&gt;</a></li><li><code>files</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string[]&gt;</a> | <a href="/ru/nodejs/api/buffer#class-buffer">&lt;Buffer[]&gt;</a> | <a href="/ru/nodejs/api/fs#class-fsdirent">&lt;fs.Dirent[]&gt;</a></li></ul></li></ul><p>Считывает содержимое каталога. Обратный вызов получает два аргумента <code>(err, files)</code>, где <code>files</code> - это массив имен файлов в каталоге, исключая <code>&#39;.&#39;</code> и <code>&#39;..&#39;</code>.</p><p>См. документацию POSIX <a href="http://man7.org/linux/man-pages/man3/readdir.3" target="_blank" rel="noreferrer"><code>readdir(3)</code></a> для получения более подробной информации.</p><p>Необязательный аргумент <code>options</code> может быть строкой, указывающей кодировку, или объектом со свойством <code>encoding</code>, указывающим кодировку символов, используемую для имен файлов, передаваемых в обратный вызов. Если <code>encoding</code> установлено в <code>&#39;buffer&#39;</code>, возвращаемые имена файлов будут переданы как объекты <a href="/ru/nodejs/api/buffer#class-buffer">&lt;Buffer&gt;</a>.</p><p>Если <code>options.withFileTypes</code> установлено в <code>true</code>, массив <code>files</code> будет содержать объекты <a href="/ru/nodejs/api/fs#class-fsdirent">&lt;fs.Dirent&gt;</a>.</p><h3 id="fsreadfilepath-options-callback" tabindex="-1"><code>fs.readFile(path[, options], callback)</code> <a class="header-anchor" href="#fsreadfilepath-options-callback" aria-label="Permalink to “fs.readFile(path[, options], callback)”">​</a></h3><div class="info custom-block"><p class="custom-block-title">[История]</p><table tabindex="0"><thead><tr><th>Версия</th><th>Изменения</th></tr></thead><tbody><tr><td>v18.0.0</td><td>Передача недействительного обратного вызова в аргумент <code>callback</code> теперь вызывает <code>ERR_INVALID_ARG_TYPE</code> вместо <code>ERR_INVALID_CALLBACK</code>.</td></tr><tr><td>v16.0.0</td><td>Возвращаемая ошибка может быть <code>AggregateError</code>, если возвращается более одной ошибки.</td></tr><tr><td>v15.2.0, v14.17.0</td><td>Аргумент options может включать AbortSignal для прерывания текущего запроса readFile.</td></tr><tr><td>v10.0.0</td><td>Параметр <code>callback</code> больше не является необязательным. Если его не передать, во время выполнения будет выдана ошибка <code>TypeError</code>.</td></tr><tr><td>v7.6.0</td><td>Параметр <code>path</code> может быть объектом WHATWG <code>URL</code> с использованием протокола <code>file:</code>.</td></tr><tr><td>v7.0.0</td><td>Параметр <code>callback</code> больше не является необязательным. Если его не передать, будет выдано предупреждение об устаревании с идентификатором DEP0013.</td></tr><tr><td>v5.1.0</td><td>В случае успеха <code>callback</code> всегда будет вызываться с <code>null</code> в качестве параметра <code>error</code>.</td></tr><tr><td>v5.0.0</td><td>Параметр <code>path</code> теперь может быть файловым дескриптором.</td></tr><tr><td>v0.1.29</td><td>Добавлено в: v0.1.29</td></tr></tbody></table></div><ul><li><p><code>path</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="/ru/nodejs/api/buffer#class-buffer">&lt;Buffer&gt;</a> | <a href="/ru/nodejs/api/url#the-whatwg-url-api">&lt;URL&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;integer&gt;</a> имя файла или файловый дескриптор</p></li><li><p><code>options</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noreferrer">&lt;Object&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a></p><ul><li><code>encoding</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Null_type" target="_blank" rel="noreferrer">&lt;null&gt;</a> <strong>Default:</strong> <code>null</code></li><li><code>flag</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> См. <a href="/ru/nodejs/api/fs#file-system-flags">поддержка <code>flags</code> файловой системы</a>. <strong>Default:</strong> <code>&#39;r&#39;</code>.</li><li><code>signal</code> <a href="/ru/nodejs/api/globals#class-abortsignal">&lt;AbortSignal&gt;</a> позволяет прервать текущий readFile</li></ul></li><li><p><code>callback</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function" target="_blank" rel="noreferrer">&lt;Function&gt;</a></p><ul><li><code>err</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error" target="_blank" rel="noreferrer">&lt;Error&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/AggregateError" target="_blank" rel="noreferrer">&lt;AggregateError&gt;</a></li><li><code>data</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="/ru/nodejs/api/buffer#class-buffer">&lt;Buffer&gt;</a></li></ul></li></ul><p>Асинхронно считывает все содержимое файла.</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { readFile } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;node:fs&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">readFile</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;/etc/passwd&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">err</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">data</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (err) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">throw</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> err;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(data);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>Обратному вызову передаются два аргумента <code>(err, data)</code>, где <code>data</code> — это содержимое файла.</p><p>Если кодировка не указана, возвращается необработанный буфер.</p><p>Если <code>options</code> является строкой, то она определяет кодировку:</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { readFile } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;node:fs&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">readFile</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;/etc/passwd&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;utf8&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, callback);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>Когда путь является каталогом, поведение <code>fs.readFile()</code> и <a href="/ru/nodejs/api/fs#fsreadfilesyncpath-options"><code>fs.readFileSync()</code></a> зависит от платформы. В macOS, Linux и Windows будет возвращена ошибка. В FreeBSD будет возвращено представление содержимого каталога.</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { readFile } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;node:fs&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// macOS, Linux и Windows</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">readFile</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;&lt;directory&gt;&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">err</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">data</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // =&gt; [Error: EISDIR: illegal operation on a directory, read &lt;directory&gt;]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//  FreeBSD</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">readFile</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;&lt;directory&gt;&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">err</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">data</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // =&gt; null, &lt;data&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>Можно прервать текущий запрос с помощью <code>AbortSignal</code>. Если запрос прерван, вызывается обратный вызов с <code>AbortError</code>:</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { readFile } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;node:fs&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> controller</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> AbortController</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> signal</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> controller.signal;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">readFile</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(fileInfo[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">].name, { signal }, (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">err</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">buf</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // ...</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Когда вы хотите прервать запрос</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">controller.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">abort</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>Функция <code>fs.readFile()</code> буферизует весь файл. Чтобы минимизировать затраты памяти, по возможности предпочтите потоковую передачу через <code>fs.createReadStream()</code>.</p><p>Прерывание текущего запроса не прерывает отдельные запросы операционной системы, а скорее внутреннюю буферизацию, которую выполняет <code>fs.readFile</code>.</p><h4 id="file-descriptors" tabindex="-1">Файловые дескрипторы <a class="header-anchor" href="#file-descriptors" aria-label="Permalink to “Файловые дескрипторы”">​</a></h4><h4 id="performance-considerations" tabindex="-1">Вопросы производительности <a class="header-anchor" href="#performance-considerations" aria-label="Permalink to “Вопросы производительности”">​</a></h4><p>Метод <code>fs.readFile()</code> асинхронно читает содержимое файла в память по частям, позволяя циклу событий переключаться между каждой частью. Это позволяет операции чтения оказывать меньшее влияние на другую активность, которая может использовать базовый пул потоков libuv, но означает, что чтение полного файла в память займет больше времени.</p><p>Дополнительные накладные расходы на чтение могут сильно варьироваться в разных системах и зависят от типа читаемого файла. Если тип файла не является обычным файлом (например, каналом) и Node.js не может определить фактический размер файла, каждая операция чтения будет загружать 64 КиБ данных. Для обычных файлов каждое чтение будет обрабатывать 512 КиБ данных.</p><p>Для приложений, которым требуется максимально быстрое чтение содержимого файла, лучше использовать <code>fs.read()</code> напрямую, а код приложения должен самостоятельно управлять чтением всего содержимого файла.</p><p>В проблеме GitHub Node.js <a href="https://github.com/nodejs/node/issues/25741" target="_blank" rel="noreferrer">#25741</a> содержится дополнительная информация и подробный анализ производительности <code>fs.readFile()</code> для файлов разных размеров в разных версиях Node.js.</p><h3 id="fsreadlinkpath-options-callback" tabindex="-1"><code>fs.readlink(path[, options], callback)</code> <a class="header-anchor" href="#fsreadlinkpath-options-callback" aria-label="Permalink to “fs.readlink(path[, options], callback)”">​</a></h3><div class="info custom-block"><p class="custom-block-title">[История]</p><table tabindex="0"><thead><tr><th>Версия</th><th>Изменения</th></tr></thead><tbody><tr><td>v18.0.0</td><td>Передача недействительного обратного вызова аргументу <code>callback</code> теперь вызывает <code>ERR_INVALID_ARG_TYPE</code> вместо <code>ERR_INVALID_CALLBACK</code>.</td></tr><tr><td>v10.0.0</td><td>Параметр <code>callback</code> больше не является необязательным. Если его не передать, во время выполнения будет выдана ошибка <code>TypeError</code>.</td></tr><tr><td>v7.6.0</td><td>Параметр <code>path</code> может быть объектом WHATWG <code>URL</code>, использующим протокол <code>file:</code>.</td></tr><tr><td>v7.0.0</td><td>Параметр <code>callback</code> больше не является необязательным. Если его не передать, будет выдано предупреждение об устаревании с идентификатором DEP0013.</td></tr><tr><td>v0.1.31</td><td>Добавлено в: v0.1.31</td></tr></tbody></table></div><ul><li><p><code>path</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="/ru/nodejs/api/buffer#class-buffer">&lt;Buffer&gt;</a> | <a href="/ru/nodejs/api/url#the-whatwg-url-api">&lt;URL&gt;</a></p></li><li><p><code>options</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noreferrer">&lt;Object&gt;</a></p><ul><li><code>encoding</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> <strong>По умолчанию:</strong> <code>&#39;utf8&#39;</code></li></ul></li><li><p><code>callback</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function" target="_blank" rel="noreferrer">&lt;Function&gt;</a></p><ul><li><code>err</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error" target="_blank" rel="noreferrer">&lt;Error&gt;</a></li><li><code>linkString</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="/ru/nodejs/api/buffer#class-buffer">&lt;Buffer&gt;</a></li></ul></li></ul><p>Читает содержимое символической ссылки, на которую указывает <code>path</code>. Функция обратного вызова получает два аргумента: <code>(err, linkString)</code>.</p><p>Подробности см. в документации POSIX <a href="http://man7.org/linux/man-pages/man2/readlink.2" target="_blank" rel="noreferrer"><code>readlink(2)</code></a>.</p><p>Необязательный аргумент <code>options</code> может быть строкой, указывающей кодировку, или объектом со свойством <code>encoding</code>, указывающим кодировку символов, используемую для пути ссылки, передаваемого в функцию обратного вызова. Если для <code>encoding</code> установлено значение <code>&#39;buffer&#39;</code>, возвращаемый путь ссылки будет передан как объект <a href="/ru/nodejs/api/buffer#class-buffer">&lt;Buffer&gt;</a>.</p><h3 id="fsreadvfd-buffers-position-callback" tabindex="-1"><code>fs.readv(fd, buffers[, position], callback)</code> <a class="header-anchor" href="#fsreadvfd-buffers-position-callback" aria-label="Permalink to “fs.readv(fd, buffers[, position], callback)”">​</a></h3><div class="info custom-block"><p class="custom-block-title">[История]</p><table tabindex="0"><thead><tr><th>Версия</th><th>Изменения</th></tr></thead><tbody><tr><td>v18.0.0</td><td>Передача некорректной функции обратного вызова в аргумент <code>callback</code> теперь вызывает <code>ERR_INVALID_ARG_TYPE</code> вместо <code>ERR_INVALID_CALLBACK</code>.</td></tr><tr><td>v13.13.0, v12.17.0</td><td>Добавлено в: v13.13.0, v12.17.0</td></tr></tbody></table></div><ul><li><code>fd</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;integer&gt;</a></li><li><code>buffers</code> <a href="https://developer.mozilla.org/en-US/docs/Web/API/ArrayBufferView" target="_blank" rel="noreferrer">&lt;ArrayBufferView[]&gt;</a></li><li><code>position</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;integer&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Null_type" target="_blank" rel="noreferrer">&lt;null&gt;</a> <strong>По умолчанию:</strong> <code>null</code></li><li><code>callback</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function" target="_blank" rel="noreferrer">&lt;Function&gt;</a><ul><li><code>err</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error" target="_blank" rel="noreferrer">&lt;Error&gt;</a></li><li><code>bytesRead</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;integer&gt;</a></li><li><code>buffers</code> <a href="https://developer.mozilla.org/en-US/docs/Web/API/ArrayBufferView" target="_blank" rel="noreferrer">&lt;ArrayBufferView[]&gt;</a></li></ul></li></ul><p>Читает данные из файла, указанного <code>fd</code>, и записывает их в массив <code>ArrayBufferView</code> с использованием <code>readv()</code>.</p><p><code>position</code> — это смещение от начала файла, с которого следует читать данные. Если <code>typeof position !== &#39;number&#39;</code>, данные будут считываться с текущей позиции.</p><p>Функции обратного вызова будут переданы три аргумента: <code>err</code>, <code>bytesRead</code> и <code>buffers</code>. <code>bytesRead</code> — это количество байтов, прочитанных из файла.</p><p>Если этот метод вызывается как его <a href="/ru/nodejs/api/util#utilpromisifyoriginal"><code>util.promisify()</code></a>ed версия, он возвращает promise для <code>Object</code> со свойствами <code>bytesRead</code> и <code>buffers</code>.</p><h3 id="fsrealpathpath-options-callback" tabindex="-1"><code>fs.realpath(path[, options], callback)</code> <a class="header-anchor" href="#fsrealpathpath-options-callback" aria-label="Permalink to “fs.realpath(path[, options], callback)”">​</a></h3><div class="info custom-block"><p class="custom-block-title">[История]</p><table tabindex="0"><thead><tr><th>Версия</th><th>Изменения</th></tr></thead><tbody><tr><td>v18.0.0</td><td>Передача некорректной функции обратного вызова в аргумент <code>callback</code> теперь вызывает <code>ERR_INVALID_ARG_TYPE</code> вместо <code>ERR_INVALID_CALLBACK</code>.</td></tr><tr><td>v10.0.0</td><td>Параметр <code>callback</code> больше не является необязательным. Если он не передан, во время выполнения будет выброшена ошибка <code>TypeError</code>.</td></tr><tr><td>v8.0.0</td><td>Добавлена поддержка разрешения Pipe/Socket.</td></tr><tr><td>v7.6.0</td><td>Параметр <code>path</code> может быть объектом WHATWG <code>URL</code> с использованием протокола <code>file:</code>.</td></tr><tr><td>v7.0.0</td><td>Параметр <code>callback</code> больше не является необязательным. Если он не передан, будет выдано предупреждение об устаревании с идентификатором DEP0013.</td></tr><tr><td>v6.4.0</td><td>Вызов <code>realpath</code> теперь снова работает для различных крайних случаев в Windows.</td></tr><tr><td>v6.0.0</td><td>Параметр <code>cache</code> был удален.</td></tr><tr><td>v0.1.31</td><td>Добавлено в: v0.1.31</td></tr></tbody></table></div><ul><li><p><code>path</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="/ru/nodejs/api/buffer#class-buffer">&lt;Buffer&gt;</a> | <a href="/ru/nodejs/api/url#the-whatwg-url-api">&lt;URL&gt;</a></p></li><li><p><code>options</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noreferrer">&lt;Object&gt;</a></p><ul><li><code>encoding</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> <strong>По умолчанию:</strong> <code>&#39;utf8&#39;</code></li></ul></li><li><p><code>callback</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function" target="_blank" rel="noreferrer">&lt;Function&gt;</a></p><ul><li><code>err</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error" target="_blank" rel="noreferrer">&lt;Error&gt;</a></li><li><code>resolvedPath</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="/ru/nodejs/api/buffer#class-buffer">&lt;Buffer&gt;</a></li></ul></li></ul><p>Асинхронно вычисляет каноническое имя пути, разрешая <code>.</code>, <code>..</code> и символические ссылки.</p><p>Каноническое имя пути не обязательно является уникальным. Жесткие ссылки и bind mounts могут предоставлять файловую систему через множество имен путей.</p><p>Эта функция ведет себя как <a href="http://man7.org/linux/man-pages/man3/realpath.3" target="_blank" rel="noreferrer"><code>realpath(3)</code></a> с некоторыми исключениями:</p><p>Функция обратного вызова получает два аргумента <code>(err, resolvedPath)</code>. Может использовать <code>process.cwd</code> для разрешения относительных путей.</p><p>Поддерживаются только пути, которые могут быть преобразованы в строки UTF8.</p><p>Необязательный аргумент <code>options</code> может быть строкой, указывающей кодировку, или объектом со свойством <code>encoding</code>, указывающим кодировку символов, используемую для пути, передаваемого в функцию обратного вызова. Если для <code>encoding</code> установлено значение <code>&#39;buffer&#39;</code>, возвращаемый путь будет передан как объект <a href="/ru/nodejs/api/buffer#class-buffer">&lt;Buffer&gt;</a>.</p><p>Если <code>path</code> разрешается в сокет или канал, функция вернет зависящее от системы имя для этого объекта.</p><p>Путь, который не существует, приводит к ошибке ENOENT. <code>error.path</code> — это абсолютный путь к файлу.</p><h3 id="fsrealpathnativepath-options-callback" tabindex="-1"><code>fs.realpath.native(path[, options], callback)</code> <a class="header-anchor" href="#fsrealpathnativepath-options-callback" aria-label="Permalink to “fs.realpath.native(path[, options], callback)”">​</a></h3><div class="info custom-block"><p class="custom-block-title">[История]</p><table tabindex="0"><thead><tr><th>Версия</th><th>Изменения</th></tr></thead><tbody><tr><td>v18.0.0</td><td>Передача недействительного обратного вызова в аргумент <code>callback</code> теперь вызывает <code>ERR_INVALID_ARG_TYPE</code> вместо <code>ERR_INVALID_CALLBACK</code>.</td></tr><tr><td>v9.2.0</td><td>Добавлено в: v9.2.0</td></tr></tbody></table></div><ul><li><p><code>path</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="/ru/nodejs/api/buffer#class-buffer">&lt;Buffer&gt;</a> | <a href="/ru/nodejs/api/url#the-whatwg-url-api">&lt;URL&gt;</a></p></li><li><p><code>options</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noreferrer">&lt;Object&gt;</a></p><ul><li><code>encoding</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> <strong>По умолчанию:</strong> <code>&#39;utf8&#39;</code></li></ul></li><li><p><code>callback</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function" target="_blank" rel="noreferrer">&lt;Function&gt;</a></p><ul><li><code>err</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error" target="_blank" rel="noreferrer">&lt;Error&gt;</a></li><li><code>resolvedPath</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="/ru/nodejs/api/buffer#class-buffer">&lt;Buffer&gt;</a></li></ul></li></ul><p>Асинхронная версия <a href="http://man7.org/linux/man-pages/man3/realpath.3" target="_blank" rel="noreferrer"><code>realpath(3)</code></a>.</p><p>Функция <code>callback</code> получает два аргумента <code>(err, resolvedPath)</code>.</p><p>Поддерживаются только пути, которые могут быть преобразованы в строки UTF8.</p><p>Необязательный аргумент <code>options</code> может быть строкой, определяющей кодировку, или объектом со свойством <code>encoding</code>, определяющим кодировку символов, используемую для пути, переданного в функцию обратного вызова. Если для <code>encoding</code> установлено значение <code>&#39;buffer&#39;</code>, возвращаемый путь будет передан как объект <a href="/ru/nodejs/api/buffer#class-buffer">&lt;Buffer&gt;</a>.</p><p>В Linux, когда Node.js скомпонован с musl libc, файловая система procfs должна быть смонтирована в <code>/proc</code>, чтобы эта функция работала. Glibc не имеет этого ограничения.</p><h3 id="fsrenameoldpath-newpath-callback" tabindex="-1"><code>fs.rename(oldPath, newPath, callback)</code> <a class="header-anchor" href="#fsrenameoldpath-newpath-callback" aria-label="Permalink to “fs.rename(oldPath, newPath, callback)”">​</a></h3><div class="info custom-block"><p class="custom-block-title">[История]</p><table tabindex="0"><thead><tr><th>Версия</th><th>Изменения</th></tr></thead><tbody><tr><td>v18.0.0</td><td>Передача недействительного обратного вызова в аргумент <code>callback</code> теперь вызывает <code>ERR_INVALID_ARG_TYPE</code> вместо <code>ERR_INVALID_CALLBACK</code>.</td></tr><tr><td>v10.0.0</td><td>Параметр <code>callback</code> больше не является необязательным. Если его не передать, во время выполнения будет выдана ошибка <code>TypeError</code>.</td></tr><tr><td>v7.6.0</td><td>Параметры <code>oldPath</code> и <code>newPath</code> могут быть объектами WHATWG <code>URL</code> с использованием протокола <code>file:</code>. Поддержка в настоящее время все еще <em>экспериментальная</em>.</td></tr><tr><td>v7.0.0</td><td>Параметр <code>callback</code> больше не является необязательным. Если его не передать, будет выдано предупреждение об устаревании с идентификатором DEP0013.</td></tr><tr><td>v0.0.2</td><td>Добавлено в: v0.0.2</td></tr></tbody></table></div><ul><li><code>oldPath</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="/ru/nodejs/api/buffer#class-buffer">&lt;Buffer&gt;</a> | <a href="/ru/nodejs/api/url#the-whatwg-url-api">&lt;URL&gt;</a></li><li><code>newPath</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="/ru/nodejs/api/buffer#class-buffer">&lt;Buffer&gt;</a> | <a href="/ru/nodejs/api/url#the-whatwg-url-api">&lt;URL&gt;</a></li><li><code>callback</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function" target="_blank" rel="noreferrer">&lt;Function&gt;</a><ul><li><code>err</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error" target="_blank" rel="noreferrer">&lt;Error&gt;</a></li></ul></li></ul><p>Асинхронно переименовывает файл по адресу <code>oldPath</code> в путь, указанный как <code>newPath</code>. В случае, если <code>newPath</code> уже существует, он будет перезаписан. Если по адресу <code>newPath</code> находится каталог, будет выдана ошибка. Функция обратного вызова завершения не получает никаких аргументов, кроме возможного исключения.</p><p>См. также: <a href="http://man7.org/linux/man-pages/man2/rename.2" target="_blank" rel="noreferrer"><code>rename(2)</code></a>.</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { rename } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;node:fs&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">rename</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;oldFile.txt&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;newFile.txt&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">err</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (err) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">throw</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> err;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;Переименование завершено!&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="fsrmdirpath-options-callback" tabindex="-1"><code>fs.rmdir(path[, options], callback)</code> <a class="header-anchor" href="#fsrmdirpath-options-callback" aria-label="Permalink to “fs.rmdir(path[, options], callback)”">​</a></h3><div class="info custom-block"><p class="custom-block-title">[История изменений]</p><table tabindex="0"><thead><tr><th>Версия</th><th>Изменения</th></tr></thead><tbody><tr><td>v18.0.0</td><td>Передача недействительного обратного вызова в аргумент <code>callback</code> теперь вызывает <code>ERR_INVALID_ARG_TYPE</code> вместо <code>ERR_INVALID_CALLBACK</code>.</td></tr><tr><td>v16.0.0</td><td>Использование <code>fs.rmdir(path, { recursive: true })</code> для <code>path</code>, который является файлом, больше не разрешено и приводит к ошибке <code>ENOENT</code> в Windows и ошибке <code>ENOTDIR</code> в POSIX.</td></tr><tr><td>v16.0.0</td><td>Использование <code>fs.rmdir(path, { recursive: true })</code> для <code>path</code>, который не существует, больше не разрешено и приводит к ошибке <code>ENOENT</code>.</td></tr><tr><td>v16.0.0</td><td>Параметр <code>recursive</code> устарел, его использование вызывает предупреждение об устаревании.</td></tr><tr><td>v14.14.0</td><td>Параметр <code>recursive</code> устарел, используйте <code>fs.rm</code> вместо него.</td></tr><tr><td>v13.3.0, v12.16.0</td><td>Параметр <code>maxBusyTries</code> переименован в <code>maxRetries</code>, и его значение по умолчанию равно 0. Параметр <code>emfileWait</code> был удален, и ошибки <code>EMFILE</code> используют ту же логику повторных попыток, что и другие ошибки. Теперь поддерживается параметр <code>retryDelay</code>. Теперь выполняются повторные попытки при ошибках <code>ENFILE</code>.</td></tr><tr><td>v12.10.0</td><td>Теперь поддерживаются параметры <code>recursive</code>, <code>maxBusyTries</code> и <code>emfileWait</code>.</td></tr><tr><td>v10.0.0</td><td>Параметр <code>callback</code> больше не является необязательным. Если он не передан, во время выполнения будет выдана ошибка <code>TypeError</code>.</td></tr><tr><td>v7.6.0</td><td>Параметры <code>path</code> могут быть объектом WHATWG <code>URL</code> с использованием протокола <code>file:</code>.</td></tr><tr><td>v7.0.0</td><td>Параметр <code>callback</code> больше не является необязательным. Если он не передан, будет выдано предупреждение об устаревании с идентификатором DEP0013.</td></tr><tr><td>v0.0.2</td><td>Добавлено в версии: v0.0.2</td></tr></tbody></table></div><ul><li><p><code>path</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="/ru/nodejs/api/buffer#class-buffer">&lt;Buffer&gt;</a> | <a href="/ru/nodejs/api/url#the-whatwg-url-api">&lt;URL&gt;</a></p></li><li><p><code>options</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noreferrer">&lt;Object&gt;</a></p><ul><li><code>maxRetries</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;integer&gt;</a> Если возникает ошибка <code>EBUSY</code>, <code>EMFILE</code>, <code>ENFILE</code>, <code>ENOTEMPTY</code> или <code>EPERM</code>, Node.js повторяет операцию с линейной задержкой <code>retryDelay</code> миллисекунд дольше при каждой попытке. Этот параметр представляет количество повторных попыток. Этот параметр игнорируется, если параметр <code>recursive</code> не равен <code>true</code>. <strong>По умолчанию:</strong> <code>0</code>.</li><li><code>recursive</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" target="_blank" rel="noreferrer">&lt;boolean&gt;</a> Если <code>true</code>, выполнить рекурсивное удаление каталога. В рекурсивном режиме операции повторяются в случае сбоя. <strong>По умолчанию:</strong> <code>false</code>. <strong>Устаревший.</strong></li><li><code>retryDelay</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;integer&gt;</a> Время в миллисекундах для ожидания между повторными попытками. Этот параметр игнорируется, если параметр <code>recursive</code> не равен <code>true</code>. <strong>По умолчанию:</strong> <code>100</code>.</li></ul></li><li><p><code>callback</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function" target="_blank" rel="noreferrer">&lt;Function&gt;</a></p><ul><li><code>err</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error" target="_blank" rel="noreferrer">&lt;Error&gt;</a></li></ul></li></ul><p>Асинхронный <a href="http://man7.org/linux/man-pages/man2/rmdir.2" target="_blank" rel="noreferrer"><code>rmdir(2)</code></a>. Обратному вызову завершения не передаются никакие аргументы, кроме возможного исключения.</p><p>Использование <code>fs.rmdir()</code> для файла (не каталога) приводит к ошибке <code>ENOENT</code> в Windows и ошибке <code>ENOTDIR</code> в POSIX.</p><p>Чтобы получить поведение, аналогичное команде Unix <code>rm -rf</code>, используйте <a href="/ru/nodejs/api/fs#fsrmpath-options-callback"><code>fs.rm()</code></a> с параметрами <code>{ recursive: true, force: true }</code>.</p><h3 id="fsrmpath-options-callback" tabindex="-1"><code>fs.rm(path[, options], callback)</code> <a class="header-anchor" href="#fsrmpath-options-callback" aria-label="Permalink to “fs.rm(path[, options], callback)”">​</a></h3><div class="info custom-block"><p class="custom-block-title">[История]</p><table tabindex="0"><thead><tr><th>Версия</th><th>Изменения</th></tr></thead><tbody><tr><td>v17.3.0, v16.14.0</td><td>Параметр <code>path</code> может быть объектом WHATWG <code>URL</code>, использующим протокол <code>file:</code>.</td></tr><tr><td>v14.14.0</td><td>Добавлено в: v14.14.0</td></tr></tbody></table></div><ul><li><p><code>path</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="/ru/nodejs/api/buffer#class-buffer">&lt;Buffer&gt;</a> | <a href="/ru/nodejs/api/url#the-whatwg-url-api">&lt;URL&gt;</a></p></li><li><p><code>options</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noreferrer">&lt;Object&gt;</a></p><ul><li><code>force</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" target="_blank" rel="noreferrer">&lt;boolean&gt;</a> Если <code>true</code>, исключения будут игнорироваться, если <code>path</code> не существует. <strong>По умолчанию:</strong> <code>false</code>.</li><li><code>maxRetries</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;integer&gt;</a> Если встречается ошибка <code>EBUSY</code>, <code>EMFILE</code>, <code>ENFILE</code>, <code>ENOTEMPTY</code> или <code>EPERM</code>, Node.js будет повторять операцию с линейной задержкой <code>retryDelay</code> миллисекунд дольше при каждой попытке. Эта опция представляет количество повторных попыток. Эта опция игнорируется, если опция <code>recursive</code> не <code>true</code>. <strong>По умолчанию:</strong> <code>0</code>.</li><li><code>recursive</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" target="_blank" rel="noreferrer">&lt;boolean&gt;</a> Если <code>true</code>, выполнить рекурсивное удаление. В рекурсивном режиме операции повторяются при сбое. <strong>По умолчанию:</strong> <code>false</code>.</li><li><code>retryDelay</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;integer&gt;</a> Количество времени в миллисекундах для ожидания между повторными попытками. Эта опция игнорируется, если опция <code>recursive</code> не <code>true</code>. <strong>По умолчанию:</strong> <code>100</code>.</li></ul></li><li><p><code>callback</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function" target="_blank" rel="noreferrer">&lt;Function&gt;</a></p><ul><li><code>err</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error" target="_blank" rel="noreferrer">&lt;Error&gt;</a></li></ul></li></ul><p>Асинхронно удаляет файлы и каталоги (по образцу стандартной утилиты POSIX <code>rm</code>). В колбэк завершения не передаются никакие аргументы, кроме возможного исключения.</p><h3 id="fsstatpath-options-callback" tabindex="-1"><code>fs.stat(path[, options], callback)</code> <a class="header-anchor" href="#fsstatpath-options-callback" aria-label="Permalink to “fs.stat(path[, options], callback)”">​</a></h3><div class="info custom-block"><p class="custom-block-title">[История]</p><table tabindex="0"><thead><tr><th>Версия</th><th>Изменения</th></tr></thead><tbody><tr><td>v18.0.0</td><td>Передача недействительной функции обратного вызова аргументу <code>callback</code> теперь вызывает <code>ERR_INVALID_ARG_TYPE</code> вместо <code>ERR_INVALID_CALLBACK</code>.</td></tr><tr><td>v10.5.0</td><td>Принимает дополнительный объект <code>options</code>, чтобы указать, должны ли возвращаемые числовые значения быть bigint.</td></tr><tr><td>v10.0.0</td><td>Параметр <code>callback</code> больше не является необязательным. Если его не передать, во время выполнения будет выдана ошибка <code>TypeError</code>.</td></tr><tr><td>v7.6.0</td><td>Параметр <code>path</code> может быть объектом WHATWG <code>URL</code>, использующим протокол <code>file:</code>.</td></tr><tr><td>v7.0.0</td><td>Параметр <code>callback</code> больше не является необязательным. Если его не передать, будет выдано предупреждение об устаревании с идентификатором DEP0013.</td></tr><tr><td>v0.0.2</td><td>Добавлено в: v0.0.2</td></tr></tbody></table></div><ul><li><p><code>path</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="/ru/nodejs/api/buffer#class-buffer">&lt;Buffer&gt;</a> | <a href="/ru/nodejs/api/url#the-whatwg-url-api">&lt;URL&gt;</a></p></li><li><p><code>options</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noreferrer">&lt;Object&gt;</a></p><ul><li><code>bigint</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" target="_blank" rel="noreferrer">&lt;boolean&gt;</a> Указывает, должны ли числовые значения в возвращаемом объекте <a href="/ru/nodejs/api/fs#class-fsstats">&lt;fs.Stats&gt;</a> быть <code>bigint</code>. <strong>По умолчанию:</strong> <code>false</code>.</li></ul></li><li><p><code>callback</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function" target="_blank" rel="noreferrer">&lt;Function&gt;</a></p><ul><li><code>err</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error" target="_blank" rel="noreferrer">&lt;Error&gt;</a></li><li><code>stats</code> <a href="/ru/nodejs/api/fs#class-fsstats">&lt;fs.Stats&gt;</a></li></ul></li></ul><p>Асинхронная версия <a href="http://man7.org/linux/man-pages/man2/stat.2" target="_blank" rel="noreferrer"><code>stat(2)</code></a>. Функция обратного вызова получает два аргумента <code>(err, stats)</code>, где <code>stats</code> - это объект <a href="/ru/nodejs/api/fs#class-fsstats">&lt;fs.Stats&gt;</a>.</p><p>В случае ошибки, <code>err.code</code> будет одним из <a href="/ru/nodejs/api/errors#common-system-errors">Общих системных ошибок</a>.</p><p><a href="/ru/nodejs/api/fs#fsstatpath-options-callback"><code>fs.stat()</code></a> следует по символическим ссылкам. Используйте <a href="/ru/nodejs/api/fs#fslstatpath-options-callback"><code>fs.lstat()</code></a> для просмотра самих ссылок.</p><p>Не рекомендуется использовать <code>fs.stat()</code> для проверки существования файла перед вызовом <code>fs.open()</code>, <code>fs.readFile()</code> или <code>fs.writeFile()</code>. Вместо этого пользовательский код должен открывать/читать/записывать файл напрямую и обрабатывать ошибку, возникающую, если файл недоступен.</p><p>Чтобы проверить, существует ли файл, не манипулируя им впоследствии, рекомендуется использовать <a href="/ru/nodejs/api/fs#fsaccesspath-mode-callback"><code>fs.access()</code></a>.</p><p>Например, дана следующая структура каталогов:</p><div class="language-text line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">text</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>- txtDir</span></span>
<span class="line"><span>-- file.txt</span></span>
<span class="line"><span>- app.js</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>Следующая программа проверит статистику для заданных путей:</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { stat } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;node:fs&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> pathsToCheck</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;./txtDir&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;./txtDir/file.txt&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">];</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> i </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; i </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> pathsToCheck.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">length</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; i</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">++</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  stat</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(pathsToCheck[i], (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">err</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">stats</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(stats.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">isDirectory</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">());</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(stats);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>Полученный вывод будет выглядеть примерно так:</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Stats</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  dev:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 16777220,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  mode:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 16877,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  nlink:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 3,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  uid:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 501,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  gid:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 20,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  rdev:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 0,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  blksize:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 4096,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  ino:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 14214262,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  size:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 96,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  blocks:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 0,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  atimeMs:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 1561174653071.963,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  mtimeMs:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 1561174614583.3518,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  ctimeMs:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 1561174626623.5366,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  birthtimeMs:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 1561174126937.2893,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  atime:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 2019-06-22T03:37:33.072Z,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  mtime:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 2019-06-22T03:36:54.583Z,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  ctime:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 2019-06-22T03:37:06.624Z,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  birthtime:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 2019-06-22T03:28:46.937Z</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Stats</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  dev:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 16777220,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  mode:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 33188,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  nlink:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 1,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  uid:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 501,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  gid:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 20,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  rdev:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 0,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  blksize:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 4096,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  ino:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 14214074,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  size:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 8,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  blocks:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 8,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  atimeMs:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 1561174616618.8555,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  mtimeMs:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 1561174614584,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  ctimeMs:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 1561174614583.8145,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  birthtimeMs:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 1561174007710.7478,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  atime:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 2019-06-22T03:36:56.619Z,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  mtime:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 2019-06-22T03:36:54.584Z,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  ctime:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 2019-06-22T03:36:54.584Z,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  birthtime:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 2019-06-22T03:26:47.711Z</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br></div></div><h3 id="fsstatfspath-options-callback" tabindex="-1"><code>fs.statfs(path[, options], callback)</code> <a class="header-anchor" href="#fsstatfspath-options-callback" aria-label="Permalink to “fs.statfs(path[, options], callback)”">​</a></h3><p><strong>Добавлено в: v19.6.0, v18.15.0</strong></p><ul><li><p><code>path</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="/ru/nodejs/api/buffer#class-buffer">&lt;Buffer&gt;</a> | <a href="/ru/nodejs/api/url#the-whatwg-url-api">&lt;URL&gt;</a></p></li><li><p><code>options</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noreferrer">&lt;Object&gt;</a></p><ul><li><code>bigint</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" target="_blank" rel="noreferrer">&lt;boolean&gt;</a> Указывает, должны ли числовые значения в возвращаемом объекте <a href="/ru/nodejs/api/fs#class-fsstatfs">&lt;fs.StatFs&gt;</a> быть типа <code>bigint</code>. <strong>По умолчанию:</strong> <code>false</code>.</li></ul></li><li><p><code>callback</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function" target="_blank" rel="noreferrer">&lt;Function&gt;</a></p><ul><li><code>err</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error" target="_blank" rel="noreferrer">&lt;Error&gt;</a></li><li><code>stats</code> <a href="/ru/nodejs/api/fs#class-fsstatfs">&lt;fs.StatFs&gt;</a></li></ul></li></ul><p>Асинхронная версия <a href="http://man7.org/linux/man-pages/man2/statfs.2" target="_blank" rel="noreferrer"><code>statfs(2)</code></a>. Возвращает информацию о смонтированной файловой системе, которая содержит <code>path</code>. Callback получает два аргумента <code>(err, stats)</code>, где <code>stats</code> является объектом <a href="/ru/nodejs/api/fs#class-fsstatfs">&lt;fs.StatFs&gt;</a>.</p><p>В случае ошибки, <code>err.code</code> будет одним из <a href="/ru/nodejs/api/errors#common-system-errors">Общих системных ошибок</a>.</p><h3 id="fssymlinktarget-path-type-callback" tabindex="-1"><code>fs.symlink(target, path[, type], callback)</code> <a class="header-anchor" href="#fssymlinktarget-path-type-callback" aria-label="Permalink to “fs.symlink(target, path[, type], callback)”">​</a></h3><div class="info custom-block"><p class="custom-block-title">[История]</p><table tabindex="0"><thead><tr><th>Версия</th><th>Изменения</th></tr></thead><tbody><tr><td>v18.0.0</td><td>Передача недействительного обратного вызова аргументу <code>callback</code> теперь выдает <code>ERR_INVALID_ARG_TYPE</code> вместо <code>ERR_INVALID_CALLBACK</code>.</td></tr><tr><td>v12.0.0</td><td>Если аргумент <code>type</code> не определен, Node автоматически определит тип <code>target</code> и автоматически выберет <code>dir</code> или <code>file</code>.</td></tr><tr><td>v7.6.0</td><td>Параметры <code>target</code> и <code>path</code> могут быть объектами WHATWG <code>URL</code> с использованием протокола <code>file:</code>. Поддержка в настоящее время все еще <em>экспериментальная</em>.</td></tr><tr><td>v0.1.31</td><td>Добавлено в: v0.1.31</td></tr></tbody></table></div><ul><li><code>target</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="/ru/nodejs/api/buffer#class-buffer">&lt;Buffer&gt;</a> | <a href="/ru/nodejs/api/url#the-whatwg-url-api">&lt;URL&gt;</a></li><li><code>path</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="/ru/nodejs/api/buffer#class-buffer">&lt;Buffer&gt;</a> | <a href="/ru/nodejs/api/url#the-whatwg-url-api">&lt;URL&gt;</a></li><li><code>type</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Null_type" target="_blank" rel="noreferrer">&lt;null&gt;</a> <strong>По умолчанию:</strong> <code>null</code></li><li><code>callback</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function" target="_blank" rel="noreferrer">&lt;Function&gt;</a><ul><li><code>err</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error" target="_blank" rel="noreferrer">&lt;Error&gt;</a></li></ul></li></ul><p>Создает ссылку с именем <code>path</code>, указывающую на <code>target</code>. Completion callback не получает никаких аргументов, кроме возможного исключения.</p><p>Подробности смотрите в документации POSIX <a href="http://man7.org/linux/man-pages/man2/symlink.2" target="_blank" rel="noreferrer"><code>symlink(2)</code></a>.</p><p>Аргумент <code>type</code> доступен только в Windows и игнорируется на других платформах. Он может быть установлен в <code>&#39;dir&#39;</code>, <code>&#39;file&#39;</code> или <code>&#39;junction&#39;</code>. Если аргумент <code>type</code> имеет значение <code>null</code>, Node.js автоматически определит тип <code>target</code> и использует <code>&#39;file&#39;</code> или <code>&#39;dir&#39;</code>. Если <code>target</code> не существует, будет использоваться <code>&#39;file&#39;</code>. Точки соединения Windows требуют, чтобы путь назначения был абсолютным. При использовании <code>&#39;junction&#39;</code> аргумент <code>target</code> будет автоматически нормализован до абсолютного пути. Точки соединения на томах NTFS могут указывать только на каталоги.</p><p>Относительные цели отсчитываются от родительского каталога ссылки.</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { symlink } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;node:fs&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">symlink</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;./mew&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;./mewtwo&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, callback);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>В приведенном выше примере создается символическая ссылка <code>mewtwo</code>, которая указывает на <code>mew</code> в том же каталоге:</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> tree</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> .</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">.</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">├──</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mew</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">└──</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mewtwo</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> -</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ./mew</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="fstruncatepath-len-callback" tabindex="-1"><code>fs.truncate(path[, len], callback)</code> <a class="header-anchor" href="#fstruncatepath-len-callback" aria-label="Permalink to “fs.truncate(path[, len], callback)”">​</a></h3><div class="info custom-block"><p class="custom-block-title">[История]</p><table tabindex="0"><thead><tr><th>Версия</th><th>Изменения</th></tr></thead><tbody><tr><td>v18.0.0</td><td>Передача недействительного обратного вызова в аргумент <code>callback</code> теперь вызывает <code>ERR_INVALID_ARG_TYPE</code> вместо <code>ERR_INVALID_CALLBACK</code>.</td></tr><tr><td>v16.0.0</td><td>Возвращаемая ошибка может быть <code>AggregateError</code>, если возвращено несколько ошибок.</td></tr><tr><td>v10.0.0</td><td>Параметр <code>callback</code> больше не является необязательным. Его отсутствие вызовет <code>TypeError</code> во время выполнения.</td></tr><tr><td>v7.0.0</td><td>Параметр <code>callback</code> больше не является необязательным. Его отсутствие вызовет предупреждение об устаревании с идентификатором DEP0013.</td></tr><tr><td>v0.8.6</td><td>Добавлено в: v0.8.6</td></tr></tbody></table></div><ul><li><code>path</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="/ru/nodejs/api/buffer#class-buffer">&lt;Buffer&gt;</a> | <a href="/ru/nodejs/api/url#the-whatwg-url-api">&lt;URL&gt;</a></li><li><code>len</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;integer&gt;</a> <strong>По умолчанию:</strong> <code>0</code></li><li><code>callback</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function" target="_blank" rel="noreferrer">&lt;Function&gt;</a><ul><li><code>err</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error" target="_blank" rel="noreferrer">&lt;Error&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/AggregateError" target="_blank" rel="noreferrer">&lt;AggregateError&gt;</a></li></ul></li></ul><p>Обрезает файл. В обратный вызов завершения не передаются никакие аргументы, кроме возможного исключения. Дескриптор файла также может быть передан в качестве первого аргумента. В этом случае вызывается <code>fs.ftruncate()</code>.</p><div class="vp-code-group"><div class="tabs"><input type="radio" name="group-8284" id="tab-8285" checked><label data-title="ESM" for="tab-8285">ESM</label><input type="radio" name="group-8284" id="tab-8286"><label data-title="CJS" for="tab-8286">CJS</label></div><div class="blocks"><div class="language-js active line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { truncate } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;node:fs&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Предполагается, что &#39;path/file.txt&#39; является обычным файлом.</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">truncate</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;path/file.txt&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">err</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (err) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">throw</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> err;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;path/file.txt был обрезан&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">truncate</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;node:fs&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Предполагается, что &#39;path/file.txt&#39; является обычным файлом.</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">truncate</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;path/file.txt&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">err</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (err) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">throw</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> err;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;path/file.txt был обрезан&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div></div></div><p>Передача дескриптора файла устарела и может привести к возникновению ошибки в будущем.</p><p>Для получения более подробной информации см. документацию POSIX <a href="http://man7.org/linux/man-pages/man2/truncate.2" target="_blank" rel="noreferrer"><code>truncate(2)</code></a>.</p><h3 id="fsunlinkpath-callback" tabindex="-1"><code>fs.unlink(path, callback)</code> <a class="header-anchor" href="#fsunlinkpath-callback" aria-label="Permalink to “fs.unlink(path, callback)”">​</a></h3><div class="info custom-block"><p class="custom-block-title">[История]</p><table tabindex="0"><thead><tr><th>Версия</th><th>Изменения</th></tr></thead><tbody><tr><td>v18.0.0</td><td>Передача недействительного обратного вызова в аргумент <code>callback</code> теперь вызывает ошибку <code>ERR_INVALID_ARG_TYPE</code> вместо <code>ERR_INVALID_CALLBACK</code>.</td></tr><tr><td>v10.0.0</td><td>Параметр <code>callback</code> больше не является необязательным. Если он не передан, во время выполнения будет выдана ошибка <code>TypeError</code>.</td></tr><tr><td>v7.6.0</td><td>Параметр <code>path</code> может быть объектом WHATWG <code>URL</code>, использующим протокол <code>file:</code>.</td></tr><tr><td>v7.0.0</td><td>Параметр <code>callback</code> больше не является необязательным. Если он не передан, будет выдано предупреждение об устаревании с идентификатором DEP0013.</td></tr><tr><td>v0.0.2</td><td>Добавлено в: v0.0.2</td></tr></tbody></table></div><ul><li><code>path</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="/ru/nodejs/api/buffer#class-buffer">&lt;Buffer&gt;</a> | <a href="/ru/nodejs/api/url#the-whatwg-url-api">&lt;URL&gt;</a></li><li><code>callback</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function" target="_blank" rel="noreferrer">&lt;Function&gt;</a><ul><li><code>err</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error" target="_blank" rel="noreferrer">&lt;Error&gt;</a></li></ul></li></ul><p>Асинхронно удаляет файл или символическую ссылку. Завершающий обратный вызов не получает никаких аргументов, кроме возможного исключения.</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { unlink } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;node:fs&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Предполагая, что &#39;path/file.txt&#39; является обычным файлом.</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">unlink</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;path/file.txt&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">err</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (err) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">throw</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> err;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;path/file.txt был удален&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p><code>fs.unlink()</code> не будет работать с каталогом, пустым или иным. Чтобы удалить каталог, используйте <a href="/ru/nodejs/api/fs#fsrmdirpath-options-callback"><code>fs.rmdir()</code></a>.</p><p>См. документацию POSIX <a href="http://man7.org/linux/man-pages/man2/unlink.2" target="_blank" rel="noreferrer"><code>unlink(2)</code></a> для получения более подробной информации.</p><h3 id="fsunwatchfilefilename-listener" tabindex="-1"><code>fs.unwatchFile(filename[, listener])</code> <a class="header-anchor" href="#fsunwatchfilefilename-listener" aria-label="Permalink to “fs.unwatchFile(filename[, listener])”">​</a></h3><p><strong>Добавлено в: v0.1.31</strong></p><ul><li><code>filename</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="/ru/nodejs/api/buffer#class-buffer">&lt;Buffer&gt;</a> | <a href="/ru/nodejs/api/url#the-whatwg-url-api">&lt;URL&gt;</a></li><li><code>listener</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function" target="_blank" rel="noreferrer">&lt;Function&gt;</a> Необязательный, слушатель, ранее подключенный с помощью <code>fs.watchFile()</code></li></ul><p>Прекратить отслеживание изменений в <code>filename</code>. Если указан <code>listener</code>, удаляется только этот конкретный слушатель. В противном случае удаляются <em>все</em> слушатели, что фактически останавливает отслеживание <code>filename</code>.</p><p>Вызов <code>fs.unwatchFile()</code> с именем файла, который не отслеживается, является холостой операцией, а не ошибкой.</p><p>Использование <a href="/ru/nodejs/api/fs#fswatchfilename-options-listener"><code>fs.watch()</code></a> более эффективно, чем <code>fs.watchFile()</code> и <code>fs.unwatchFile()</code>. <code>fs.watch()</code> следует использовать вместо <code>fs.watchFile()</code> и <code>fs.unwatchFile()</code> по возможности.</p><h3 id="fsutimespath-atime-mtime-callback" tabindex="-1"><code>fs.utimes(path, atime, mtime, callback)</code> <a class="header-anchor" href="#fsutimespath-atime-mtime-callback" aria-label="Permalink to “fs.utimes(path, atime, mtime, callback)”">​</a></h3><div class="info custom-block"><p class="custom-block-title">[История]</p><table tabindex="0"><thead><tr><th>Версия</th><th>Изменения</th></tr></thead><tbody><tr><td>v18.0.0</td><td>Передача недействительного обратного вызова в аргумент <code>callback</code> теперь вызывает <code>ERR_INVALID_ARG_TYPE</code> вместо <code>ERR_INVALID_CALLBACK</code>.</td></tr><tr><td>v10.0.0</td><td>Параметр <code>callback</code> больше не является необязательным. Его отсутствие приведет к выбросу <code>TypeError</code> во время выполнения.</td></tr><tr><td>v8.0.0</td><td><code>NaN</code>, <code>Infinity</code> и <code>-Infinity</code> больше не являются допустимыми спецификаторами времени.</td></tr><tr><td>v7.6.0</td><td>Параметр <code>path</code> может быть объектом WHATWG <code>URL</code> с использованием протокола <code>file:</code>.</td></tr><tr><td>v7.0.0</td><td>Параметр <code>callback</code> больше не является необязательным. Его отсутствие приведет к выбросу предупреждения об устаревании с идентификатором DEP0013.</td></tr><tr><td>v4.1.0</td><td>Числовые строки, <code>NaN</code> и <code>Infinity</code> теперь являются допустимыми спецификаторами времени.</td></tr><tr><td>v0.4.2</td><td>Добавлено в: v0.4.2</td></tr></tbody></table></div><ul><li><code>path</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="/ru/nodejs/api/buffer#class-buffer">&lt;Buffer&gt;</a> | <a href="/ru/nodejs/api/url#the-whatwg-url-api">&lt;URL&gt;</a></li><li><code>atime</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;number&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date" target="_blank" rel="noreferrer">&lt;Date&gt;</a></li><li><code>mtime</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;number&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date" target="_blank" rel="noreferrer">&lt;Date&gt;</a></li><li><code>callback</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function" target="_blank" rel="noreferrer">&lt;Function&gt;</a><ul><li><code>err</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error" target="_blank" rel="noreferrer">&lt;Error&gt;</a></li></ul></li></ul><p>Изменяет временные метки файловой системы объекта, на который ссылается <code>path</code>.</p><p>Аргументы <code>atime</code> и <code>mtime</code> подчиняются следующим правилам:</p><ul><li>Значения могут быть либо числами, представляющими время Unix epoch в секундах, <code>Date</code> или числовой строкой, например <code>&#39;123456789.0&#39;</code>.</li><li>Если значение не может быть преобразовано в число или является <code>NaN</code>, <code>Infinity</code> или <code>-Infinity</code>, будет выдана <code>Error</code>.</li></ul><h3 id="fswatchfilename-options-listener" tabindex="-1"><code>fs.watch(filename[, options][, listener])</code> <a class="header-anchor" href="#fswatchfilename-options-listener" aria-label="Permalink to “fs.watch(filename[, options][, listener])”">​</a></h3><div class="info custom-block"><p class="custom-block-title">[История]</p><table tabindex="0"><thead><tr><th>Версия</th><th>Изменения</th></tr></thead><tbody><tr><td>v19.1.0</td><td>Добавлена рекурсивная поддержка для Linux, AIX и IBMi.</td></tr><tr><td>v15.9.0, v14.17.0</td><td>Добавлена поддержка закрытия наблюдателя с помощью AbortSignal.</td></tr><tr><td>v7.6.0</td><td>Параметр <code>filename</code> может быть объектом WHATWG <code>URL</code>, использующим протокол <code>file:</code>.</td></tr><tr><td>v7.0.0</td><td>Переданный объект <code>options</code> никогда не будет изменен.</td></tr><tr><td>v0.5.10</td><td>Добавлено в: v0.5.10</td></tr></tbody></table></div><ul><li><p><code>filename</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="/ru/nodejs/api/buffer#class-buffer">&lt;Buffer&gt;</a> | <a href="/ru/nodejs/api/url#the-whatwg-url-api">&lt;URL&gt;</a></p></li><li><p><code>options</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noreferrer">&lt;Object&gt;</a></p><ul><li><code>persistent</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" target="_blank" rel="noreferrer">&lt;boolean&gt;</a> Указывает, должен ли процесс продолжать работу, пока отслеживаются файлы. <strong>По умолчанию:</strong> <code>true</code>.</li><li><code>recursive</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" target="_blank" rel="noreferrer">&lt;boolean&gt;</a> Указывает, следует ли отслеживать все подкаталоги или только текущий каталог. Это применимо, когда указан каталог, и только на поддерживаемых платформах (см. <a href="/ru/nodejs/api/fs#caveats">предостережения</a>). <strong>По умолчанию:</strong> <code>false</code>.</li><li><code>encoding</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> Указывает кодировку символов, используемую для имени файла, передаваемого слушателю. <strong>По умолчанию:</strong> <code>&#39;utf8&#39;</code>.</li><li><code>signal</code> <a href="/ru/nodejs/api/globals#class-abortsignal">&lt;AbortSignal&gt;</a> позволяет закрыть наблюдатель с помощью AbortSignal.</li></ul></li><li><p><code>listener</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function" target="_blank" rel="noreferrer">&lt;Function&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Undefined_type" target="_blank" rel="noreferrer">&lt;undefined&gt;</a> <strong>По умолчанию:</strong> <code>undefined</code></p><ul><li><code>eventType</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a></li><li><code>filename</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="/ru/nodejs/api/buffer#class-buffer">&lt;Buffer&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Null_type" target="_blank" rel="noreferrer">&lt;null&gt;</a></li></ul></li><li><p>Возвращает: <a href="/ru/nodejs/api/fs#class-fsfswatcher">&lt;fs.FSWatcher&gt;</a></p></li></ul><p>Отслеживает изменения в <code>filename</code>, где <code>filename</code> - это файл или каталог.</p><p>Второй аргумент является необязательным. Если <code>options</code> предоставлен в виде строки, он указывает <code>encoding</code>. В противном случае <code>options</code> следует передавать как объект.</p><p>Обратный вызов слушателя получает два аргумента <code>(eventType, filename)</code>. <code>eventType</code> - это либо <code>&#39;rename&#39;</code>, либо <code>&#39;change&#39;</code>, а <code>filename</code> - это имя файла, вызвавшего событие.</p><p>На большинстве платформ <code>&#39;rename&#39;</code> испускается всякий раз, когда имя файла появляется или исчезает в каталоге.</p><p>Обратный вызов слушателя прикреплен к событию <code>&#39;change&#39;</code>, запускаемому <a href="/ru/nodejs/api/fs#class-fsfswatcher">&lt;fs.FSWatcher&gt;</a>, но это не то же самое, что значение <code>&#39;change&#39;</code> для <code>eventType</code>.</p><p>Если передан <code>signal</code>, прерывание соответствующего AbortController закроет возвращенный <a href="/ru/nodejs/api/fs#class-fsfswatcher">&lt;fs.FSWatcher&gt;</a>.</p><h4 id="caveats" tabindex="-1">Предостережения <a class="header-anchor" href="#caveats" aria-label="Permalink to “Предостережения”">​</a></h4><p>API <code>fs.watch</code> не является на 100% консистентным на разных платформах и недоступен в некоторых ситуациях.</p><p>В Windows события не будут генерироваться, если наблюдаемая директория перемещена или переименована. Об ошибке <code>EPERM</code> сообщается при удалении наблюдаемой директории.</p><h5 id="availability" tabindex="-1">Доступность <a class="header-anchor" href="#availability" aria-label="Permalink to “Доступность”">​</a></h5><p>Эта функция зависит от базовой операционной системы, предоставляющей способ уведомления об изменениях файловой системы.</p><ul><li>В системах Linux используется <a href="https://man7.org/linux/man-pages/man7/inotify.7" target="_blank" rel="noreferrer"><code>inotify(7)</code></a>.</li><li>В системах BSD используется <a href="https://www.freebsd.org/cgi/man.cgi?query=kqueue&amp;sektion=2" target="_blank" rel="noreferrer"><code>kqueue(2)</code></a>.</li><li>В macOS для файлов используется <a href="https://www.freebsd.org/cgi/man.cgi?query=kqueue&amp;sektion=2" target="_blank" rel="noreferrer"><code>kqueue(2)</code></a>, а для директорий — <a href="https://developer.apple.com/documentation/coreservices/file_system_events" target="_blank" rel="noreferrer"><code>FSEvents</code></a>.</li><li>В системах SunOS (включая Solaris и SmartOS) используются <a href="https://illumos.org/man/port_create" target="_blank" rel="noreferrer"><code>event ports</code></a>.</li><li>В системах Windows эта функция зависит от <a href="https://docs.microsoft.com/en-us/windows/desktop/api/winbase/nf-winbase-readdirectorychangesw" target="_blank" rel="noreferrer"><code>ReadDirectoryChangesW</code></a>.</li><li>В системах AIX эта функция зависит от <a href="https://developer.ibm.com/articles/au-aix_event_infrastructure/" target="_blank" rel="noreferrer"><code>AHAFS</code></a>, который должен быть включен.</li><li>В системах IBM i эта функция не поддерживается.</li></ul><p>Если базовая функциональность по какой-либо причине недоступна, то <code>fs.watch()</code> не сможет функционировать и может выбросить исключение. Например, наблюдение за файлами или каталогами может быть ненадежным, а в некоторых случаях и невозможным, в сетевых файловых системах (NFS, SMB и т. д.) или в файловых системах хоста при использовании программного обеспечения для виртуализации, такого как Vagrant или Docker.</p><p>Все еще можно использовать <code>fs.watchFile()</code>, который использует опрос stat, но этот метод медленнее и менее надежен.</p><h5 id="inodes" tabindex="-1">Inodes <a class="header-anchor" href="#inodes" aria-label="Permalink to “Inodes”">​</a></h5><p>В системах Linux и macOS <code>fs.watch()</code> разрешает путь к <a href="https://en.wikipedia.org/wiki/Inode" target="_blank" rel="noreferrer">inode</a> и наблюдает за inode. Если наблюдаемый путь удален и воссоздан, ему назначается новый inode. Наблюдатель сгенерирует событие для удаления, но продолжит наблюдать за <em>исходным</em> inode. События для нового inode не будут генерироваться. Это ожидаемое поведение.</p><p>Файлы AIX сохраняют один и тот же inode на протяжении всего срока существования файла. Сохранение и закрытие наблюдаемого файла в AIX приведет к двум уведомлениям (одно для добавления нового содержимого, а другое для усечения).</p><h5 id="filename-argument" tabindex="-1">Аргумент <code>filename</code> <a class="header-anchor" href="#filename-argument" aria-label="Permalink to “Аргумент filename”">​</a></h5><p>Предоставление аргумента <code>filename</code> в обратном вызове поддерживается только в Linux, macOS, Windows и AIX. Даже на поддерживаемых платформах не всегда гарантируется предоставление <code>filename</code>. Поэтому не следует предполагать, что аргумент <code>filename</code> всегда предоставляется в обратном вызове, и предусмотреть некоторую логику отката, если он имеет значение <code>null</code>.</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { watch } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;node:fs&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">watch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;somedir&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">eventType</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">filename</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">\`event type is: \${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">eventType</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}\`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (filename) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">\`filename provided: \${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">filename</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}\`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">else</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;filename not provided&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="fswatchfilefilename-options-listener" tabindex="-1"><code>fs.watchFile(filename[, options], listener)</code> <a class="header-anchor" href="#fswatchfilefilename-options-listener" aria-label="Permalink to “fs.watchFile(filename[, options], listener)”">​</a></h3><div class="info custom-block"><p class="custom-block-title">[История]</p><table tabindex="0"><thead><tr><th>Версия</th><th>Изменения</th></tr></thead><tbody><tr><td>v10.5.0</td><td>Теперь поддерживается опция <code>bigint</code>.</td></tr><tr><td>v7.6.0</td><td>Параметр <code>filename</code> может быть объектом WHATWG <code>URL</code>, использующим протокол <code>file:</code>.</td></tr><tr><td>v0.1.31</td><td>Добавлено в версии: v0.1.31</td></tr></tbody></table></div><ul><li><p><code>filename</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="/ru/nodejs/api/buffer#class-buffer">&lt;Buffer&gt;</a> | <a href="/ru/nodejs/api/url#the-whatwg-url-api">&lt;URL&gt;</a></p></li><li><p><code>options</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noreferrer">&lt;Object&gt;</a></p><ul><li><code>bigint</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" target="_blank" rel="noreferrer">&lt;boolean&gt;</a> <strong>По умолчанию:</strong> <code>false</code></li><li><code>persistent</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" target="_blank" rel="noreferrer">&lt;boolean&gt;</a> <strong>По умолчанию:</strong> <code>true</code></li><li><code>interval</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;integer&gt;</a> <strong>По умолчанию:</strong> <code>5007</code></li></ul></li><li><p><code>listener</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function" target="_blank" rel="noreferrer">&lt;Function&gt;</a></p><ul><li><code>current</code> <a href="/ru/nodejs/api/fs#class-fsstats">&lt;fs.Stats&gt;</a></li><li><code>previous</code> <a href="/ru/nodejs/api/fs#class-fsstats">&lt;fs.Stats&gt;</a></li></ul></li><li><p>Возвращает: <a href="/ru/nodejs/api/fs#class-fsstatwatcher">&lt;fs.StatWatcher&gt;</a></p></li></ul><p>Следит за изменениями в <code>filename</code>. Обратный вызов <code>listener</code> будет вызываться каждый раз, когда происходит доступ к файлу.</p><p>Аргумент <code>options</code> может быть опущен. Если он предоставлен, он должен быть объектом. Объект <code>options</code> может содержать логическое значение с именем <code>persistent</code>, которое указывает, должен ли процесс продолжать работу до тех пор, пока файлы находятся под наблюдением. Объект <code>options</code> может указывать свойство <code>interval</code>, указывающее, как часто следует опрашивать цель в миллисекундах.</p><p><code>listener</code> получает два аргумента: текущий объект stat и предыдущий объект stat:</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { watchFile } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;node:fs&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">watchFile</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;message.text&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">curr</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">prev</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">\`the current mtime is: \${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">curr</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">mtime</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}\`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">\`the previous mtime was: \${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">prev</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">mtime</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}\`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>Эти объекты stat являются экземплярами <code>fs.Stat</code>. Если опция <code>bigint</code> имеет значение <code>true</code>, числовые значения в этих объектах задаются как <code>BigInt</code>.</p><p>Чтобы получать уведомления, когда файл был изменен, а не просто получен к нему доступ, необходимо сравнить <code>curr.mtimeMs</code> и <code>prev.mtimeMs</code>.</p><p>Когда операция <code>fs.watchFile</code> приводит к ошибке <code>ENOENT</code>, она вызовет прослушиватель один раз со всеми полями, обнуленными (или, для дат, с эпохой Unix). Если файл будет создан позже, прослушиватель будет вызван снова, с последними объектами stat. Это изменение в функциональности, начиная с v0.10.</p><p>Использование <a href="/ru/nodejs/api/fs#fswatchfilename-options-listener"><code>fs.watch()</code></a> более эффективно, чем <code>fs.watchFile</code> и <code>fs.unwatchFile</code>. <code>fs.watch</code> следует использовать вместо <code>fs.watchFile</code> и <code>fs.unwatchFile</code>, когда это возможно.</p><p>Когда файл, находящийся под наблюдением <code>fs.watchFile()</code>, исчезает и появляется снова, содержимое <code>previous</code> во втором событии обратного вызова (повторное появление файла) будет таким же, как и содержимое <code>previous</code> в первом событии обратного вызова (его исчезновение).</p><p>Это происходит, когда:</p><ul><li>файл удален, а затем восстановлен</li><li>файл переименован, а затем переименован во второй раз обратно в его исходное имя</li></ul><h3 id="fswritefd-buffer-offset-length-position-callback" tabindex="-1"><code>fs.write(fd, buffer, offset[, length[, position]], callback)</code> <a class="header-anchor" href="#fswritefd-buffer-offset-length-position-callback" aria-label="Permalink to “fs.write(fd, buffer, offset[, length[, position]], callback)”">​</a></h3><div class="info custom-block"><p class="custom-block-title">[История]</p><table tabindex="0"><thead><tr><th>Версия</th><th>Изменения</th></tr></thead><tbody><tr><td>v18.0.0</td><td>Передача недействительного обратного вызова в аргумент <code>callback</code> теперь вызывает <code>ERR_INVALID_ARG_TYPE</code> вместо <code>ERR_INVALID_CALLBACK</code>.</td></tr><tr><td>v14.0.0</td><td>Параметр <code>buffer</code> больше не будет приводить неподдерживаемый ввод к строкам.</td></tr><tr><td>v10.10.0</td><td>Параметр <code>buffer</code> теперь может быть любым <code>TypedArray</code> или <code>DataView</code>.</td></tr><tr><td>v10.0.0</td><td>Параметр <code>callback</code> больше не является необязательным. Его отсутствие вызовет <code>TypeError</code> во время выполнения.</td></tr><tr><td>v7.4.0</td><td>Параметр <code>buffer</code> теперь может быть <code>Uint8Array</code>.</td></tr><tr><td>v7.2.0</td><td>Параметры <code>offset</code> и <code>length</code> теперь необязательны.</td></tr><tr><td>v7.0.0</td><td>Параметр <code>callback</code> больше не является необязательным. Его отсутствие вызовет предупреждение об устаревании с идентификатором DEP0013.</td></tr><tr><td>v0.0.2</td><td>Добавлено в версии: v0.0.2</td></tr></tbody></table></div><ul><li><code>fd</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;integer&gt;</a></li><li><code>buffer</code> <a href="/ru/nodejs/api/buffer#class-buffer">&lt;Buffer&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/TypedArray" target="_blank" rel="noreferrer">&lt;TypedArray&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/DataView" target="_blank" rel="noreferrer">&lt;DataView&gt;</a></li><li><code>offset</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;integer&gt;</a> <strong>По умолчанию:</strong> <code>0</code></li><li><code>length</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;integer&gt;</a> <strong>По умолчанию:</strong> <code>buffer.byteLength - offset</code></li><li><code>position</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;integer&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Null_type" target="_blank" rel="noreferrer">&lt;null&gt;</a> <strong>По умолчанию:</strong> <code>null</code></li><li><code>callback</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function" target="_blank" rel="noreferrer">&lt;Function&gt;</a><ul><li><code>err</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error" target="_blank" rel="noreferrer">&lt;Error&gt;</a></li><li><code>bytesWritten</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;integer&gt;</a></li><li><code>buffer</code> <a href="/ru/nodejs/api/buffer#class-buffer">&lt;Buffer&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/TypedArray" target="_blank" rel="noreferrer">&lt;TypedArray&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/DataView" target="_blank" rel="noreferrer">&lt;DataView&gt;</a></li></ul></li></ul><p>Записывает <code>buffer</code> в файл, указанный <code>fd</code>.</p><p><code>offset</code> определяет часть буфера для записи, а <code>length</code> — это целое число, указывающее количество байтов для записи.</p><p><code>position</code> относится к смещению от начала файла, куда должны быть записаны эти данные. Если <code>typeof position !== &#39;number&#39;</code>, данные будут записаны в текущую позицию. См. <a href="http://man7.org/linux/man-pages/man2/pwrite.2" target="_blank" rel="noreferrer"><code>pwrite(2)</code></a>.</p><p>Обратному вызову будут переданы три аргумента <code>(err, bytesWritten, buffer)</code>, где <code>bytesWritten</code> указывает, сколько <em>байтов</em> было записано из <code>buffer</code>.</p><p>Если этот метод вызывается как его <a href="/ru/nodejs/api/util#utilpromisifyoriginal"><code>util.promisify()</code></a>-версия, он возвращает промис для <code>Object</code> со свойствами <code>bytesWritten</code> и <code>buffer</code>.</p><p>Небезопасно использовать <code>fs.write()</code> несколько раз для одного и того же файла, не дожидаясь обратного вызова. В этом случае рекомендуется использовать <a href="/ru/nodejs/api/fs#fscreatewritestreampath-options"><code>fs.createWriteStream()</code></a>.</p><p>В Linux позиционная запись не работает, когда файл открыт в режиме добавления. Ядро игнорирует аргумент position и всегда добавляет данные в конец файла.</p><h3 id="fswritefd-buffer-options-callback" tabindex="-1"><code>fs.write(fd, buffer[, options], callback)</code> <a class="header-anchor" href="#fswritefd-buffer-options-callback" aria-label="Permalink to “fs.write(fd, buffer[, options], callback)”">​</a></h3><p><strong>Добавлено в: v18.3.0, v16.17.0</strong></p><ul><li><p><code>fd</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;integer&gt;</a></p></li><li><p><code>buffer</code> <a href="/ru/nodejs/api/buffer#class-buffer">&lt;Buffer&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/TypedArray" target="_blank" rel="noreferrer">&lt;TypedArray&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/DataView" target="_blank" rel="noreferrer">&lt;DataView&gt;</a></p></li><li><p><code>options</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noreferrer">&lt;Object&gt;</a></p><ul><li><code>offset</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;integer&gt;</a> <strong>По умолчанию:</strong> <code>0</code></li><li><code>length</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;integer&gt;</a> <strong>По умолчанию:</strong> <code>buffer.byteLength - offset</code></li><li><code>position</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;integer&gt;</a> <strong>По умолчанию:</strong> <code>null</code></li></ul></li><li><p><code>callback</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function" target="_blank" rel="noreferrer">&lt;Function&gt;</a></p><ul><li><code>err</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error" target="_blank" rel="noreferrer">&lt;Error&gt;</a></li><li><code>bytesWritten</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;integer&gt;</a></li><li><code>buffer</code> <a href="/ru/nodejs/api/buffer#class-buffer">&lt;Buffer&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/TypedArray" target="_blank" rel="noreferrer">&lt;TypedArray&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/DataView" target="_blank" rel="noreferrer">&lt;DataView&gt;</a></li></ul></li></ul><p>Записывает <code>buffer</code> в файл, указанный в <code>fd</code>.</p><p>Как и в случае с вышеупомянутой функцией <code>fs.write</code>, эта версия принимает необязательный объект <code>options</code>. Если объект <code>options</code> не указан, используются значения по умолчанию, указанные выше.</p><h3 id="fswritefd-string-position-encoding-callback" tabindex="-1"><code>fs.write(fd, string[, position[, encoding]], callback)</code> <a class="header-anchor" href="#fswritefd-string-position-encoding-callback" aria-label="Permalink to “fs.write(fd, string[, position[, encoding]], callback)”">​</a></h3><div class="info custom-block"><p class="custom-block-title">[История]</p><table tabindex="0"><thead><tr><th>Версия</th><th>Изменения</th></tr></thead><tbody><tr><td>v19.0.0</td><td>Передача в параметр <code>string</code> объекта с собственной функцией <code>toString</code> больше не поддерживается.</td></tr><tr><td>v17.8.0</td><td>Передача в параметр <code>string</code> объекта с собственной функцией <code>toString</code> устарела.</td></tr><tr><td>v14.12.0</td><td>Параметр <code>string</code> будет преобразовывать объект с явной функцией <code>toString</code> в строку.</td></tr><tr><td>v14.0.0</td><td>Параметр <code>string</code> больше не будет приводить неподдерживаемый ввод к строкам.</td></tr><tr><td>v10.0.0</td><td>Параметр <code>callback</code> больше не является необязательным. Если его не передать, во время выполнения будет выброшена ошибка <code>TypeError</code>.</td></tr><tr><td>v7.2.0</td><td>Параметр <code>position</code> теперь является необязательным.</td></tr><tr><td>v7.0.0</td><td>Параметр <code>callback</code> больше не является необязательным. Если его не передать, будет выдано предупреждение об устаревании с идентификатором DEP0013.</td></tr><tr><td>v0.11.5</td><td>Добавлено в: v0.11.5</td></tr></tbody></table></div><ul><li><code>fd</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;integer&gt;</a></li><li><code>string</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a></li><li><code>position</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;integer&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Null_type" target="_blank" rel="noreferrer">&lt;null&gt;</a> <strong>По умолчанию:</strong> <code>null</code></li><li><code>encoding</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> <strong>По умолчанию:</strong> <code>&#39;utf8&#39;</code></li><li><code>callback</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function" target="_blank" rel="noreferrer">&lt;Function&gt;</a><ul><li><code>err</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error" target="_blank" rel="noreferrer">&lt;Error&gt;</a></li><li><code>written</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;integer&gt;</a></li><li><code>string</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a></li></ul></li></ul><p>Записывает <code>string</code> в файл, указанный в <code>fd</code>. Если <code>string</code> не является строкой, выбрасывается исключение.</p><p><code>position</code> относится к смещению от начала файла, куда должны быть записаны эти данные. Если <code>typeof position !== &#39;number&#39;</code>, данные будут записаны в текущую позицию. См. <a href="http://man7.org/linux/man-pages/man2/pwrite.2" target="_blank" rel="noreferrer"><code>pwrite(2)</code></a>.</p><p><code>encoding</code> - ожидаемая кодировка строки.</p><p>Обратный вызов получит аргументы <code>(err, written, string)</code>, где <code>written</code> указывает, сколько <em>байтов</em> потребовалось для записи переданной строки. Количество записанных байтов не обязательно совпадает с количеством записанных символов строки. См. <a href="/ru/nodejs/api/buffer#static-method-bufferbytelengthstring-encoding"><code>Buffer.byteLength</code></a>.</p><p>Небезопасно использовать <code>fs.write()</code> несколько раз для одного и того же файла, не дожидаясь обратного вызова. Для этого сценария рекомендуется использовать <a href="/ru/nodejs/api/fs#fscreatewritestreampath-options"><code>fs.createWriteStream()</code></a>.</p><p>В Linux позиционная запись не работает, если файл открыт в режиме добавления. Ядро игнорирует аргумент position и всегда добавляет данные в конец файла.</p><p>В Windows, если файловый дескриптор подключен к консоли (например, <code>fd == 1</code> или <code>stdout</code>), строка, содержащая символы, отличные от ASCII, по умолчанию не будет отображаться должным образом, независимо от используемой кодировки. Можно настроить консоль для правильного отображения UTF-8, изменив активную кодовую страницу с помощью команды <code>chcp 65001</code>. Подробнее см. в документации <a href="https://ss64.com/nt/chcp" target="_blank" rel="noreferrer">chcp</a>.</p><h3 id="fswritefilefile-data-options-callback" tabindex="-1"><code>fs.writeFile(file, data[, options], callback)</code> <a class="header-anchor" href="#fswritefilefile-data-options-callback" aria-label="Permalink to “fs.writeFile(file, data[, options], callback)”">​</a></h3><div class="info custom-block"><p class="custom-block-title">[История]</p><table tabindex="0"><thead><tr><th>Версия</th><th>Изменения</th></tr></thead><tbody><tr><td>v21.0.0, v20.10.0</td><td>Теперь поддерживается опция <code>flush</code>.</td></tr><tr><td>v19.0.0</td><td>Передача в параметр <code>string</code> объекта с собственной функцией <code>toString</code> больше не поддерживается.</td></tr><tr><td>v18.0.0</td><td>Передача недействительного обратного вызова в аргумент <code>callback</code> теперь вызывает ошибку <code>ERR_INVALID_ARG_TYPE</code> вместо <code>ERR_INVALID_CALLBACK</code>.</td></tr><tr><td>v17.8.0</td><td>Передача в параметр <code>string</code> объекта с собственной функцией <code>toString</code> устарела.</td></tr><tr><td>v16.0.0</td><td>Возвращаемая ошибка может быть <code>AggregateError</code>, если возвращается более одной ошибки.</td></tr><tr><td>v15.2.0, v14.17.0</td><td>Аргумент options может включать AbortSignal для прерывания текущего запроса writeFile.</td></tr><tr><td>v14.12.0</td><td>Параметр <code>data</code> будет преобразовывать в строку объект с явной функцией <code>toString</code>.</td></tr><tr><td>v14.0.0</td><td>Параметр <code>data</code> больше не будет приводить неподдерживаемый ввод к строкам.</td></tr><tr><td>v10.10.0</td><td>Параметр <code>data</code> теперь может быть любым <code>TypedArray</code> или <code>DataView</code>.</td></tr><tr><td>v10.0.0</td><td>Параметр <code>callback</code> больше не является необязательным. Если его не передать, во время выполнения будет выдана ошибка <code>TypeError</code>.</td></tr><tr><td>v7.4.0</td><td>Параметр <code>data</code> теперь может быть <code>Uint8Array</code>.</td></tr><tr><td>v7.0.0</td><td>Параметр <code>callback</code> больше не является необязательным. Если его не передать, будет выдано предупреждение об устаревании с идентификатором DEP0013.</td></tr><tr><td>v5.0.0</td><td>Параметр <code>file</code> теперь может быть файловым дескриптором.</td></tr><tr><td>v0.1.29</td><td>Добавлено в: v0.1.29</td></tr></tbody></table></div><ul><li><p><code>file</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="/ru/nodejs/api/buffer#class-buffer">&lt;Buffer&gt;</a> | <a href="/ru/nodejs/api/url#the-whatwg-url-api">&lt;URL&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;integer&gt;</a> имя файла или файловый дескриптор</p></li><li><p><code>data</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="/ru/nodejs/api/buffer#class-buffer">&lt;Buffer&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/TypedArray" target="_blank" rel="noreferrer">&lt;TypedArray&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/DataView" target="_blank" rel="noreferrer">&lt;DataView&gt;</a></p></li><li><p><code>options</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noreferrer">&lt;Object&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a></p><ul><li><code>encoding</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Null_type" target="_blank" rel="noreferrer">&lt;null&gt;</a> <strong>По умолчанию:</strong> <code>&#39;utf8&#39;</code></li><li><code>mode</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;integer&gt;</a> <strong>По умолчанию:</strong> <code>0o666</code></li><li><code>flag</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> См. <a href="/ru/nodejs/api/fs#file-system-flags">поддержку флагов файловой системы</a>. <strong>По умолчанию:</strong> <code>&#39;w&#39;</code>.</li><li><code>flush</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" target="_blank" rel="noreferrer">&lt;boolean&gt;</a> Если все данные успешно записаны в файл и <code>flush</code> имеет значение <code>true</code>, для сброса данных используется <code>fs.fsync()</code>. <strong>По умолчанию:</strong> <code>false</code>.</li><li><code>signal</code> <a href="/ru/nodejs/api/globals#class-abortsignal">&lt;AbortSignal&gt;</a> позволяет прервать выполняющуюся writeFile</li></ul></li><li><p><code>callback</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function" target="_blank" rel="noreferrer">&lt;Function&gt;</a></p><ul><li><code>err</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error" target="_blank" rel="noreferrer">&lt;Error&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/AggregateError" target="_blank" rel="noreferrer">&lt;AggregateError&gt;</a></li></ul></li></ul><p>Когда <code>file</code> является именем файла, асинхронно записывает данные в файл, заменяя файл, если он уже существует. <code>data</code> может быть строкой или буфером.</p><p>Когда <code>file</code> является файловым дескриптором, поведение аналогично прямому вызову <code>fs.write()</code> (что рекомендуется). См. примечания ниже об использовании файлового дескриптора.</p><p>Опция <code>encoding</code> игнорируется, если <code>data</code> является буфером.</p><p>Опция <code>mode</code> влияет только на вновь созданный файл. Подробнее см. <a href="/ru/nodejs/api/fs#fsopenpath-flags-mode-callback"><code>fs.open()</code></a>.</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { writeFile } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;node:fs&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { Buffer } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;node:buffer&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> data</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Uint8Array</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Buffer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;Hello Node.js&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">));</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">writeFile</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;message.txt&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, data, (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">err</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (err) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">throw</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> err;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;The file has been saved!&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>Если <code>options</code> является строкой, то она указывает кодировку:</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { writeFile } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;node:fs&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">writeFile</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;message.txt&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;Hello Node.js&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;utf8&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, callback);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>Небезопасно использовать <code>fs.writeFile()</code> несколько раз для одного и того же файла, не дожидаясь обратного вызова. Для этого сценария рекомендуется <a href="/ru/nodejs/api/fs#fscreatewritestreampath-options"><code>fs.createWriteStream()</code></a>.</p><p>Подобно <code>fs.readFile</code> - <code>fs.writeFile</code> является удобным методом, который выполняет несколько вызовов <code>write</code> внутри для записи переданного ему буфера. Для кода, чувствительного к производительности, рекомендуется использовать <a href="/ru/nodejs/api/fs#fscreatewritestreampath-options"><code>fs.createWriteStream()</code></a>.</p><p>Можно использовать <a href="/ru/nodejs/api/globals#class-abortsignal">&lt;AbortSignal&gt;</a> для отмены <code>fs.writeFile()</code>. Отмена выполняется &quot;по возможности&quot;, и, вероятно, некоторое количество данных все еще будет записано.</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { writeFile } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;node:fs&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { Buffer } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;node:buffer&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> controller</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> AbortController</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">signal</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> controller;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> data</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Uint8Array</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Buffer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;Hello Node.js&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">));</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">writeFile</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;message.txt&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, data, { signal }, (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">err</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // Когда запрос прерывается - вызывается обратный вызов с AbortError</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Когда запрос должен быть прерван</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">controller.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">abort</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>Прерывание текущего запроса не прерывает отдельные запросы операционной системы, а скорее внутреннюю буферизацию, выполняемую <code>fs.writeFile</code>.</p><h4 id="using-fswritefile-with-file-descriptors" tabindex="-1">Использование <code>fs.writeFile()</code> с файловыми дескрипторами <a class="header-anchor" href="#using-fswritefile-with-file-descriptors" aria-label="Permalink to “Использование fs.writeFile() с файловыми дескрипторами”">​</a></h4><p>Когда <code>file</code> является файловым дескриптором, поведение почти идентично прямому вызову <code>fs.write()</code>, как показано ниже:</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { write } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;node:fs&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { Buffer } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;node:buffer&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">write</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(fd, Buffer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(data, options.encoding), callback);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>Разница с прямым вызовом <code>fs.write()</code> заключается в том, что при некоторых необычных условиях <code>fs.write()</code> может записать только часть буфера и потребует повторных попыток для записи оставшихся данных, тогда как <code>fs.writeFile()</code> повторяет попытки до тех пор, пока данные не будут записаны полностью (или не произойдет ошибка).</p><p>Последствия этого часто являются источником путаницы. В случае с файловым дескриптором файл не заменяется! Данные не обязательно записываются в начало файла, и исходные данные файла могут оставаться до и/или после вновь записанных данных.</p><p>Например, если <code>fs.writeFile()</code> вызывается два раза подряд, сначала для записи строки <code>&#39;Hello&#39;</code>, затем для записи строки <code>&#39;, World&#39;</code>, файл будет содержать <code>&#39;Hello, World&#39;</code>, и может содержать часть исходных данных файла (в зависимости от размера исходного файла и положения файлового дескриптора). Если бы вместо дескриптора было использовано имя файла, файл гарантированно содержал бы только <code>&#39;, World&#39;</code>.</p><h3 id="fswritevfd-buffers-position-callback" tabindex="-1"><code>fs.writev(fd, buffers[, position], callback)</code> <a class="header-anchor" href="#fswritevfd-buffers-position-callback" aria-label="Permalink to “fs.writev(fd, buffers[, position], callback)”">​</a></h3><div class="info custom-block"><p class="custom-block-title">[История изменений]</p><table tabindex="0"><thead><tr><th>Версия</th><th>Изменения</th></tr></thead><tbody><tr><td>v18.0.0</td><td>Передача недействительного обратного вызова в аргумент <code>callback</code> теперь вызывает <code>ERR_INVALID_ARG_TYPE</code> вместо <code>ERR_INVALID_CALLBACK</code>.</td></tr><tr><td>v12.9.0</td><td>Добавлено в: v12.9.0</td></tr></tbody></table></div><ul><li><code>fd</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;integer&gt;</a></li><li><code>buffers</code> <a href="https://developer.mozilla.org/en-US/docs/Web/API/ArrayBufferView" target="_blank" rel="noreferrer">&lt;ArrayBufferView[]&gt;</a></li><li><code>position</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;integer&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Null_type" target="_blank" rel="noreferrer">&lt;null&gt;</a> <strong>По умолчанию:</strong> <code>null</code></li><li><code>callback</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function" target="_blank" rel="noreferrer">&lt;Function&gt;</a><ul><li><code>err</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error" target="_blank" rel="noreferrer">&lt;Error&gt;</a></li><li><code>bytesWritten</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;integer&gt;</a></li><li><code>buffers</code> <a href="https://developer.mozilla.org/en-US/docs/Web/API/ArrayBufferView" target="_blank" rel="noreferrer">&lt;ArrayBufferView[]&gt;</a></li></ul></li></ul><p>Записывает массив <code>ArrayBufferView</code> в файл, указанный в <code>fd</code>, с использованием <code>writev()</code>.</p><p><code>position</code> — это смещение от начала файла, куда должны быть записаны эти данные. Если <code>typeof position !== &#39;number&#39;</code>, данные будут записаны в текущую позицию.</p><p>Обратному вызову будут переданы три аргумента: <code>err</code>, <code>bytesWritten</code> и <code>buffers</code>. <code>bytesWritten</code> — это количество байтов, записанных из <code>buffers</code>.</p><p>Если этот метод является <a href="/ru/nodejs/api/util#utilpromisifyoriginal"><code>util.promisify()</code></a>ed, он возвращает promise для <code>Object</code> со свойствами <code>bytesWritten</code> и <code>buffers</code>.</p><p>Небезопасно использовать <code>fs.writev()</code> несколько раз в одном и том же файле, не дожидаясь обратного вызова. Для этого сценария используйте <a href="/ru/nodejs/api/fs#fscreatewritestreampath-options"><code>fs.createWriteStream()</code></a>.</p><p>В Linux позиционные записи не работают, когда файл открыт в режиме добавления. Ядро игнорирует аргумент позиции и всегда добавляет данные в конец файла.</p><h2 id="synchronous-api" tabindex="-1">Синхронный API <a class="header-anchor" href="#synchronous-api" aria-label="Permalink to “Синхронный API”">​</a></h2><p>Синхронные API выполняют все операции синхронно, блокируя цикл событий до тех пор, пока операция не завершится успешно или с ошибкой.</p><h3 id="fsaccesssyncpath-mode" tabindex="-1"><code>fs.accessSync(path[, mode])</code> <a class="header-anchor" href="#fsaccesssyncpath-mode" aria-label="Permalink to “fs.accessSync(path[, mode])”">​</a></h3><div class="info custom-block"><p class="custom-block-title">[История]</p><table tabindex="0"><thead><tr><th>Версия</th><th>Изменения</th></tr></thead><tbody><tr><td>v7.6.0</td><td>Параметр <code>path</code> может быть объектом WHATWG <code>URL</code>, использующим протокол <code>file:</code>.</td></tr><tr><td>v0.11.15</td><td>Добавлено в: v0.11.15</td></tr></tbody></table></div><ul><li><code>path</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="/ru/nodejs/api/buffer#class-buffer">&lt;Buffer&gt;</a> | <a href="/ru/nodejs/api/url#the-whatwg-url-api">&lt;URL&gt;</a></li><li><code>mode</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;integer&gt;</a> <strong>По умолчанию:</strong> <code>fs.constants.F_OK</code></li></ul><p>Синхронно проверяет права пользователя на файл или каталог, указанный в <code>path</code>. Аргумент <code>mode</code> является необязательным целым числом, которое определяет проверки доступности, которые необходимо выполнить. <code>mode</code> должен быть либо значением <code>fs.constants.F_OK</code>, либо маской, состоящей из побитового ИЛИ любого из <code>fs.constants.R_OK</code>, <code>fs.constants.W_OK</code> и <code>fs.constants.X_OK</code> (например, <code>fs.constants.W_OK | fs.constants.R_OK</code>). См. <a href="/ru/nodejs/api/fs#file-access-constants">Константы доступа к файлам</a> для возможных значений <code>mode</code>.</p><p>Если какая-либо из проверок доступности завершается неудачно, будет выброшена <code>Error</code>. В противном случае метод вернет <code>undefined</code>.</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { accessSync, constants } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;node:fs&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">try</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  accessSync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;etc/passwd&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, constants.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">R_OK</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> constants.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">W_OK</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;can read/write&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">} </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">catch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (err) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;no access!&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="fsappendfilesyncpath-data-options" tabindex="-1"><code>fs.appendFileSync(path, data[, options])</code> <a class="header-anchor" href="#fsappendfilesyncpath-data-options" aria-label="Permalink to “fs.appendFileSync(path, data[, options])”">​</a></h3><div class="info custom-block"><p class="custom-block-title">[История]</p><table tabindex="0"><thead><tr><th>Версия</th><th>Изменения</th></tr></thead><tbody><tr><td>v21.1.0, v20.10.0</td><td>Теперь поддерживается опция <code>flush</code>.</td></tr><tr><td>v7.0.0</td><td>Переданный объект <code>options</code> никогда не будет изменен.</td></tr><tr><td>v5.0.0</td><td>Параметр <code>file</code> теперь может быть файловым дескриптором.</td></tr><tr><td>v0.6.7</td><td>Добавлено в: v0.6.7</td></tr></tbody></table></div><ul><li><code>path</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="/ru/nodejs/api/buffer#class-buffer">&lt;Buffer&gt;</a> | <a href="/ru/nodejs/api/url#the-whatwg-url-api">&lt;URL&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;number&gt;</a> имя файла или файловый дескриптор</li><li><code>data</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="/ru/nodejs/api/buffer#class-buffer">&lt;Buffer&gt;</a></li><li><code>options</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noreferrer">&lt;Object&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a><ul><li><code>encoding</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Null_type" target="_blank" rel="noreferrer">&lt;null&gt;</a> <strong>По умолчанию:</strong> <code>&#39;utf8&#39;</code></li><li><code>mode</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;integer&gt;</a> <strong>По умолчанию:</strong> <code>0o666</code></li><li><code>flag</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> См. <a href="/ru/nodejs/api/fs#file-system-flags">поддержку флагов файловой системы</a>. <strong>По умолчанию:</strong> <code>&#39;a&#39;</code>.</li><li><code>flush</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" target="_blank" rel="noreferrer">&lt;boolean&gt;</a> Если <code>true</code>, базовый файловый дескриптор сбрасывается перед его закрытием. <strong>По умолчанию:</strong> <code>false</code>.</li></ul></li></ul><p>Синхронно добавляет данные в файл, создавая файл, если он еще не существует. <code>data</code> может быть строкой или <a href="/ru/nodejs/api/buffer#class-buffer">&lt;Buffer&gt;</a>.</p><p>Опция <code>mode</code> влияет только на вновь созданный файл. См. <a href="/ru/nodejs/api/fs#fsopenpath-flags-mode-callback"><code>fs.open()</code></a> для получения более подробной информации.</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { appendFileSync } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;node:fs&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">try</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  appendFileSync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;message.txt&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;data to append&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;The &quot;data to append&quot; was appended to file!&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">} </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">catch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (err) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  /* Handle the error */</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>Если <code>options</code> является строкой, то она определяет кодировку:</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { appendFileSync } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;node:fs&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">appendFileSync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;message.txt&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;data to append&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;utf8&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><code>path</code> может быть указан как числовой файловый дескриптор, который был открыт для добавления (с использованием <code>fs.open()</code> или <code>fs.openSync()</code>). Файловый дескриптор не будет закрыт автоматически.</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { openSync, closeSync, appendFileSync } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;node:fs&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> fd;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">try</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  fd </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> openSync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;message.txt&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;a&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  appendFileSync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(fd, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;data to append&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;utf8&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">} </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">catch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (err) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  /* Handle the error */</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">} </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">finally</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (fd </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!==</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> undefined</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    closeSync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(fd);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h3 id="fschmodsyncpath-mode" tabindex="-1"><code>fs.chmodSync(path, mode)</code> <a class="header-anchor" href="#fschmodsyncpath-mode" aria-label="Permalink to “fs.chmodSync(path, mode)”">​</a></h3><div class="info custom-block"><p class="custom-block-title">[История]</p><table tabindex="0"><thead><tr><th>Версия</th><th>Изменения</th></tr></thead><tbody><tr><td>v7.6.0</td><td>Параметр <code>path</code> может быть объектом WHATWG <code>URL</code> с использованием протокола <code>file:</code>.</td></tr><tr><td>v0.6.7</td><td>Добавлено в: v0.6.7</td></tr></tbody></table></div><ul><li><code>path</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="/ru/nodejs/api/buffer#class-buffer">&lt;Buffer&gt;</a> | <a href="/ru/nodejs/api/url#the-whatwg-url-api">&lt;URL&gt;</a></li><li><code>mode</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;integer&gt;</a></li></ul><p>Для получения подробной информации см. документацию по асинхронной версии этого API: <a href="/ru/nodejs/api/fs#fschmodpath-mode-callback"><code>fs.chmod()</code></a>.</p><p>Подробности смотрите в POSIX документации <a href="http://man7.org/linux/man-pages/man2/chmod.2" target="_blank" rel="noreferrer"><code>chmod(2)</code></a>.</p><h3 id="fschownsyncpath-uid-gid" tabindex="-1"><code>fs.chownSync(path, uid, gid)</code> <a class="header-anchor" href="#fschownsyncpath-uid-gid" aria-label="Permalink to “fs.chownSync(path, uid, gid)”">​</a></h3><div class="info custom-block"><p class="custom-block-title">[История]</p><table tabindex="0"><thead><tr><th>Версия</th><th>Изменения</th></tr></thead><tbody><tr><td>v7.6.0</td><td>Параметр <code>path</code> может быть объектом WHATWG <code>URL</code> с использованием протокола <code>file:</code>.</td></tr><tr><td>v0.1.97</td><td>Добавлено в: v0.1.97</td></tr></tbody></table></div><ul><li><code>path</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="/ru/nodejs/api/buffer#class-buffer">&lt;Buffer&gt;</a> | <a href="/ru/nodejs/api/url#the-whatwg-url-api">&lt;URL&gt;</a></li><li><code>uid</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;integer&gt;</a></li><li><code>gid</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;integer&gt;</a></li></ul><p>Синхронно изменяет владельца и группу файла. Возвращает <code>undefined</code>. Это синхронная версия <a href="/ru/nodejs/api/fs#fschownpath-uid-gid-callback"><code>fs.chown()</code></a>.</p><p>Подробности смотрите в POSIX документации <a href="http://man7.org/linux/man-pages/man2/chown.2" target="_blank" rel="noreferrer"><code>chown(2)</code></a>.</p><h3 id="fsclosesyncfd" tabindex="-1"><code>fs.closeSync(fd)</code> <a class="header-anchor" href="#fsclosesyncfd" aria-label="Permalink to “fs.closeSync(fd)”">​</a></h3><p><strong>Добавлено в: v0.1.21</strong></p><ul><li><code>fd</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;integer&gt;</a></li></ul><p>Закрывает файловый дескриптор. Возвращает <code>undefined</code>.</p><p>Вызов <code>fs.closeSync()</code> для любого файлового дескриптора (<code>fd</code>), который в данный момент используется в какой-либо другой операции <code>fs</code>, может привести к неопределенному поведению.</p><p>Подробности смотрите в POSIX документации <a href="http://man7.org/linux/man-pages/man2/close.2" target="_blank" rel="noreferrer"><code>close(2)</code></a>.</p><h3 id="fscopyfilesyncsrc-dest-mode" tabindex="-1"><code>fs.copyFileSync(src, dest[, mode])</code> <a class="header-anchor" href="#fscopyfilesyncsrc-dest-mode" aria-label="Permalink to “fs.copyFileSync(src, dest[, mode])”">​</a></h3><div class="info custom-block"><p class="custom-block-title">[История]</p><table tabindex="0"><thead><tr><th>Версия</th><th>Изменения</th></tr></thead><tbody><tr><td>v14.0.0</td><td>Аргумент <code>flags</code> изменен на <code>mode</code> и наложена более строгая проверка типов.</td></tr><tr><td>v8.5.0</td><td>Добавлено в: v8.5.0</td></tr></tbody></table></div><ul><li><code>src</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="/ru/nodejs/api/buffer#class-buffer">&lt;Buffer&gt;</a> | <a href="/ru/nodejs/api/url#the-whatwg-url-api">&lt;URL&gt;</a> исходное имя файла для копирования</li><li><code>dest</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="/ru/nodejs/api/buffer#class-buffer">&lt;Buffer&gt;</a> | <a href="/ru/nodejs/api/url#the-whatwg-url-api">&lt;URL&gt;</a> целевое имя файла для операции копирования</li><li><code>mode</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;integer&gt;</a> модификаторы для операции копирования. <strong>По умолчанию:</strong> <code>0</code>.</li></ul><p>Синхронно копирует <code>src</code> в <code>dest</code>. По умолчанию, <code>dest</code> перезаписывается, если он уже существует. Возвращает <code>undefined</code>. Node.js не дает никаких гарантий относительно атомарности операции копирования. Если происходит ошибка после открытия целевого файла для записи, Node.js попытается удалить целевой файл.</p><p><code>mode</code> - это необязательное целое число, которое определяет поведение операции копирования. Можно создать маску, состоящую из побитового ИЛИ двух или более значений (например, <code>fs.constants.COPYFILE_EXCL | fs.constants.COPYFILE_FICLONE</code>).</p><ul><li><code>fs.constants.COPYFILE_EXCL</code>: Операция копирования завершится неудачно, если <code>dest</code> уже существует.</li><li><code>fs.constants.COPYFILE_FICLONE</code>: Операция копирования попытается создать reflink copy-on-write. Если платформа не поддерживает copy-on-write, то используется резервный механизм копирования.</li><li><code>fs.constants.COPYFILE_FICLONE_FORCE</code>: Операция копирования попытается создать reflink copy-on-write. Если платформа не поддерживает copy-on-write, то операция завершится неудачно.</li></ul><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { copyFileSync, constants } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;node:fs&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// destination.txt будет создан или перезаписан по умолчанию.</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">copyFileSync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;source.txt&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;destination.txt&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;source.txt был скопирован в destination.txt&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Используя COPYFILE_EXCL, операция завершится неудачно, если destination.txt существует.</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">copyFileSync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;source.txt&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;destination.txt&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, constants.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">COPYFILE_EXCL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="fscpsyncsrc-dest-options" tabindex="-1"><code>fs.cpSync(src, dest[, options])</code> <a class="header-anchor" href="#fscpsyncsrc-dest-options" aria-label="Permalink to “fs.cpSync(src, dest[, options])”">​</a></h3><div class="info custom-block"><p class="custom-block-title">[История]</p><table tabindex="0"><thead><tr><th>Версия</th><th>Изменения</th></tr></thead><tbody><tr><td>v22.3.0</td><td>Этот API больше не является экспериментальным.</td></tr><tr><td>v20.1.0, v18.17.0</td><td>Принимает дополнительную опцию <code>mode</code> для указания поведения копирования как аргумент <code>mode</code> в <code>fs.copyFile()</code>.</td></tr><tr><td>v17.6.0, v16.15.0</td><td>Принимает дополнительную опцию <code>verbatimSymlinks</code> для указания необходимости выполнения разрешения пути для символических ссылок.</td></tr><tr><td>v16.7.0</td><td>Добавлено в: v16.7.0</td></tr></tbody></table></div><ul><li><code>src</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="/ru/nodejs/api/url#the-whatwg-url-api">&lt;URL&gt;</a> исходный путь для копирования.</li><li><code>dest</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="/ru/nodejs/api/url#the-whatwg-url-api">&lt;URL&gt;</a> путь назначения для копирования.</li><li><code>options</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noreferrer">&lt;Object&gt;</a><ul><li><p><code>dereference</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" target="_blank" rel="noreferrer">&lt;boolean&gt;</a> разрешает символические ссылки. <strong>По умолчанию:</strong> <code>false</code>.</p></li><li><p><code>errorOnExist</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" target="_blank" rel="noreferrer">&lt;boolean&gt;</a> когда <code>force</code> имеет значение <code>false</code> и место назначения существует, выбрасывает ошибку. <strong>По умолчанию:</strong> <code>false</code>.</p></li><li><p><code>filter</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function" target="_blank" rel="noreferrer">&lt;Function&gt;</a> Функция для фильтрации копируемых файлов/директорий. Возвращает <code>true</code> для копирования элемента, <code>false</code> для его игнорирования. При игнорировании каталога все его содержимое также будет пропущено. <strong>По умолчанию:</strong> <code>undefined</code></p></li><li><p><code>src</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> исходный путь для копирования.</p></li><li><p><code>dest</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> путь назначения для копирования.</p></li><li><p>Возвращает: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" target="_blank" rel="noreferrer">&lt;boolean&gt;</a> Любое значение, отличное от <code>Promise</code>, которое может быть приведено к <code>boolean</code>.</p></li><li><p><code>force</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" target="_blank" rel="noreferrer">&lt;boolean&gt;</a> перезаписывает существующий файл или каталог. Операция копирования будет игнорировать ошибки, если установить для этого значения false и место назначения существует. Используйте опцию <code>errorOnExist</code>, чтобы изменить это поведение. <strong>По умолчанию:</strong> <code>true</code>.</p></li><li><p><code>mode</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;integer&gt;</a> модификаторы для операции копирования. <strong>По умолчанию:</strong> <code>0</code>. См. флаг <code>mode</code> в <a href="/ru/nodejs/api/fs#fscopyfilesyncsrc-dest-mode"><code>fs.copyFileSync()</code></a>.</p></li><li><p><code>preserveTimestamps</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" target="_blank" rel="noreferrer">&lt;boolean&gt;</a> Если <code>true</code>, то временные метки из <code>src</code> будут сохранены. <strong>По умолчанию:</strong> <code>false</code>.</p></li><li><p><code>recursive</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" target="_blank" rel="noreferrer">&lt;boolean&gt;</a> копирует каталоги рекурсивно <strong>По умолчанию:</strong> <code>false</code></p></li><li><p><code>verbatimSymlinks</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" target="_blank" rel="noreferrer">&lt;boolean&gt;</a> Если <code>true</code>, разрешение пути для символических ссылок будет пропущено. <strong>По умолчанию:</strong> <code>false</code></p></li></ul></li></ul><p>Синхронно копирует всю структуру каталогов из <code>src</code> в <code>dest</code>, включая подкаталоги и файлы.</p><p>При копировании каталога в другой каталог глобы не поддерживаются, и поведение аналогично <code>cp dir1/ dir2/</code>.</p><h3 id="fsexistssyncpath" tabindex="-1"><code>fs.existsSync(path)</code> <a class="header-anchor" href="#fsexistssyncpath" aria-label="Permalink to “fs.existsSync(path)”">​</a></h3><div class="info custom-block"><p class="custom-block-title">[История]</p><table tabindex="0"><thead><tr><th>Версия</th><th>Изменения</th></tr></thead><tbody><tr><td>v7.6.0</td><td>Параметр <code>path</code> может быть объектом WHATWG <code>URL</code>, использующим протокол <code>file:</code>.</td></tr><tr><td>v0.1.21</td><td>Добавлено в: v0.1.21</td></tr></tbody></table></div><ul><li><code>path</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="/ru/nodejs/api/buffer#class-buffer">&lt;Buffer&gt;</a> | <a href="/ru/nodejs/api/url#the-whatwg-url-api">&lt;URL&gt;</a></li><li>Возвращает: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" target="_blank" rel="noreferrer">&lt;boolean&gt;</a></li></ul><p>Возвращает <code>true</code>, если путь существует, в противном случае <code>false</code>.</p><p>Для получения подробной информации см. документацию асинхронной версии этого API: <a href="/ru/nodejs/api/fs#fsexistspath-callback"><code>fs.exists()</code></a>.</p><p><code>fs.exists()</code> устарел, но <code>fs.existsSync()</code> - нет. Параметр <code>callback</code> для <code>fs.exists()</code> принимает параметры, которые несовместимы с другими обратными вызовами Node.js. <code>fs.existsSync()</code> не использует обратный вызов.</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { existsSync } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;node:fs&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">existsSync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;/etc/passwd&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">))</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;Путь существует.&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="fsfchmodsyncfd-mode" tabindex="-1"><code>fs.fchmodSync(fd, mode)</code> <a class="header-anchor" href="#fsfchmodsyncfd-mode" aria-label="Permalink to “fs.fchmodSync(fd, mode)”">​</a></h3><p><strong>Добавлено в: v0.4.7</strong></p><ul><li><code>fd</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;integer&gt;</a></li><li><code>mode</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;integer&gt;</a></li></ul><p>Устанавливает разрешения на файл. Возвращает <code>undefined</code>.</p><p>Подробности см. в документации POSIX <a href="http://man7.org/linux/man-pages/man2/fchmod.2" target="_blank" rel="noreferrer"><code>fchmod(2)</code></a>.</p><h3 id="fsfchownsyncfd-uid-gid" tabindex="-1"><code>fs.fchownSync(fd, uid, gid)</code> <a class="header-anchor" href="#fsfchownsyncfd-uid-gid" aria-label="Permalink to “fs.fchownSync(fd, uid, gid)”">​</a></h3><p><strong>Добавлено в: v0.4.7</strong></p><ul><li><code>fd</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;integer&gt;</a></li><li><code>uid</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;integer&gt;</a> Идентификатор пользователя нового владельца файла.</li><li><code>gid</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;integer&gt;</a> Идентификатор группы новой группы файла.</li></ul><p>Устанавливает владельца файла. Возвращает <code>undefined</code>.</p><p>Подробности см. в документации POSIX <a href="http://man7.org/linux/man-pages/man2/fchown.2" target="_blank" rel="noreferrer"><code>fchown(2)</code></a>.</p><h3 id="fsfdatasyncsyncfd" tabindex="-1"><code>fs.fdatasyncSync(fd)</code> <a class="header-anchor" href="#fsfdatasyncsyncfd" aria-label="Permalink to “fs.fdatasyncSync(fd)”">​</a></h3><p><strong>Добавлено в: v0.1.96</strong></p><ul><li><code>fd</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;integer&gt;</a></li></ul><p>Принудительно приводит все текущие операции ввода-вывода, связанные с файлом, к состоянию завершения синхронизированного ввода-вывода операционной системы. Подробности см. в документации POSIX <a href="http://man7.org/linux/man-pages/man2/fdatasync.2" target="_blank" rel="noreferrer"><code>fdatasync(2)</code></a>. Возвращает <code>undefined</code>.</p><h3 id="fsfstatsyncfd-options" tabindex="-1"><code>fs.fstatSync(fd[, options])</code> <a class="header-anchor" href="#fsfstatsyncfd-options" aria-label="Permalink to “fs.fstatSync(fd[, options])”">​</a></h3><div class="info custom-block"><p class="custom-block-title">[История]</p><table tabindex="0"><thead><tr><th>Версия</th><th>Изменения</th></tr></thead><tbody><tr><td>v10.5.0</td><td>Принимает дополнительный объект <code>options</code> для указания, следует ли возвращать числовые значения как bigint.</td></tr><tr><td>v0.1.95</td><td>Добавлено в: v0.1.95</td></tr></tbody></table></div><ul><li><p><code>fd</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;integer&gt;</a></p></li><li><p><code>options</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noreferrer">&lt;Object&gt;</a></p><ul><li><code>bigint</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" target="_blank" rel="noreferrer">&lt;boolean&gt;</a> Определяет, должны ли числовые значения в возвращаемом объекте <a href="/ru/nodejs/api/fs#class-fsstats">&lt;fs.Stats&gt;</a> быть <code>bigint</code>. <strong>По умолчанию:</strong> <code>false</code>.</li></ul></li><li><p>Возвращает: <a href="/ru/nodejs/api/fs#class-fsstats">&lt;fs.Stats&gt;</a></p></li></ul><p>Извлекает <a href="/ru/nodejs/api/fs#class-fsstats">&lt;fs.Stats&gt;</a> для файлового дескриптора.</p><p>Подробную информацию см. в документации POSIX <a href="http://man7.org/linux/man-pages/man2/fstat.2" target="_blank" rel="noreferrer"><code>fstat(2)</code></a>.</p><h3 id="fsfsyncsyncfd" tabindex="-1"><code>fs.fsyncSync(fd)</code> <a class="header-anchor" href="#fsfsyncsyncfd" aria-label="Permalink to “fs.fsyncSync(fd)”">​</a></h3><p><strong>Добавлено в: v0.1.96</strong></p><ul><li><code>fd</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;integer&gt;</a></li></ul><p>Запрашивает сброс всех данных для открытого файлового дескриптора на запоминающее устройство. Конкретная реализация зависит от операционной системы и устройства. Подробности см. в документации POSIX <a href="http://man7.org/linux/man-pages/man2/fsync.2" target="_blank" rel="noreferrer"><code>fsync(2)</code></a>. Возвращает <code>undefined</code>.</p><h3 id="fsftruncatesyncfd-len" tabindex="-1"><code>fs.ftruncateSync(fd[, len])</code> <a class="header-anchor" href="#fsftruncatesyncfd-len" aria-label="Permalink to “fs.ftruncateSync(fd[, len])”">​</a></h3><p><strong>Добавлено в: v0.8.6</strong></p><ul><li><code>fd</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;integer&gt;</a></li><li><code>len</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;integer&gt;</a> <strong>По умолчанию:</strong> <code>0</code></li></ul><p>Усекает файловый дескриптор. Возвращает <code>undefined</code>.</p><p>Подробную информацию см. в документации асинхронной версии этого API: <a href="/ru/nodejs/api/fs#fsftruncatefd-len-callback"><code>fs.ftruncate()</code></a>.</p><h3 id="fsfutimessyncfd-atime-mtime" tabindex="-1"><code>fs.futimesSync(fd, atime, mtime)</code> <a class="header-anchor" href="#fsfutimessyncfd-atime-mtime" aria-label="Permalink to “fs.futimesSync(fd, atime, mtime)”">​</a></h3><div class="info custom-block"><p class="custom-block-title">[История]</p><table tabindex="0"><thead><tr><th>Версия</th><th>Изменения</th></tr></thead><tbody><tr><td>v4.1.0</td><td>Числовые строки, <code>NaN</code> и <code>Infinity</code> теперь разрешены в качестве спецификаторов времени.</td></tr><tr><td>v0.4.2</td><td>Добавлено в: v0.4.2</td></tr></tbody></table></div><ul><li><code>fd</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;integer&gt;</a></li><li><code>atime</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;number&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date" target="_blank" rel="noreferrer">&lt;Date&gt;</a></li><li><code>mtime</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;number&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date" target="_blank" rel="noreferrer">&lt;Date&gt;</a></li></ul><p>Синхронная версия <a href="/ru/nodejs/api/fs#fsfutimesfd-atime-mtime-callback"><code>fs.futimes()</code></a>. Возвращает <code>undefined</code>.</p><h3 id="fsglobsyncpattern-options" tabindex="-1"><code>fs.globSync(pattern[, options])</code> <a class="header-anchor" href="#fsglobsyncpattern-options" aria-label="Permalink to “fs.globSync(pattern[, options])”">​</a></h3><div class="info custom-block"><p class="custom-block-title">[История]</p><table tabindex="0"><thead><tr><th>Версия</th><th>Изменения</th></tr></thead><tbody><tr><td>v22.2.0</td><td>Добавлена поддержка <code>withFileTypes</code> в качестве опции.</td></tr><tr><td>v22.0.0</td><td>Добавлено в: v22.0.0</td></tr></tbody></table></div><div class="warning custom-block"><p class="custom-block-title">[Стабильно: 1 - Экспериментально]</p><p><a href="/ru/nodejs/api/documentation#stability-index">Стабильно: 1</a> <a href="/ru/nodejs/api/documentation#stability-index">Стабильность: 1</a> - Экспериментально</p></div><ul><li><p><code>pattern</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string[]&gt;</a></p></li><li><p><code>options</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noreferrer">&lt;Object&gt;</a></p><ul><li><code>cwd</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> текущий рабочий каталог. <strong>По умолчанию:</strong> <code>process.cwd()</code></li><li><code>exclude</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function" target="_blank" rel="noreferrer">&lt;Function&gt;</a> Функция для фильтрации файлов/каталогов. Верните <code>true</code>, чтобы исключить элемент, <code>false</code>, чтобы включить его. <strong>По умолчанию:</strong> <code>undefined</code>.</li><li><code>withFileTypes</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" target="_blank" rel="noreferrer">&lt;boolean&gt;</a> <code>true</code>, если glob должен возвращать пути в виде Dirent, <code>false</code> в противном случае. <strong>По умолчанию:</strong> <code>false</code>.</li></ul></li><li><p>Возвращает: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string[]&gt;</a> пути к файлам, соответствующим шаблону.</p></li></ul><div class="vp-code-group"><div class="tabs"><input type="radio" name="group-10431" id="tab-10432" checked><label data-title="ESM" for="tab-10432">ESM</label><input type="radio" name="group-10431" id="tab-10433"><label data-title="CJS" for="tab-10433">CJS</label></div><div class="blocks"><div class="language-js active line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { globSync } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;node:fs&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">globSync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;**/*.js&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">));</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">globSync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;node:fs&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">globSync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;**/*.js&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">));</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></div></div><h3 id="fslchmodsyncpath-mode" tabindex="-1"><code>fs.lchmodSync(path, mode)</code> <a class="header-anchor" href="#fslchmodsyncpath-mode" aria-label="Permalink to “fs.lchmodSync(path, mode)”">​</a></h3><p><strong>Устарело, начиная с: v0.4.7</strong></p><ul><li><code>path</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="/ru/nodejs/api/buffer#class-buffer">&lt;Buffer&gt;</a> | <a href="/ru/nodejs/api/url#the-whatwg-url-api">&lt;URL&gt;</a></li><li><code>mode</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;integer&gt;</a></li></ul><p>Изменяет разрешения символической ссылки. Возвращает <code>undefined</code>.</p><p>Этот метод реализован только в macOS.</p><p>Для получения дополнительной информации см. документацию POSIX <a href="https://www.freebsd.org/cgi/man.cgi?query=lchmod&amp;sektion=2" target="_blank" rel="noreferrer"><code>lchmod(2)</code></a>.</p><h3 id="fslchownsyncpath-uid-gid" tabindex="-1"><code>fs.lchownSync(path, uid, gid)</code> <a class="header-anchor" href="#fslchownsyncpath-uid-gid" aria-label="Permalink to “fs.lchownSync(path, uid, gid)”">​</a></h3><div class="info custom-block"><p class="custom-block-title">[История]</p><table tabindex="0"><thead><tr><th>Версия</th><th>Изменения</th></tr></thead><tbody><tr><td>v10.6.0</td><td>Этот API больше не является устаревшим.</td></tr><tr><td>v0.4.7</td><td>Устаревание только в документации.</td></tr></tbody></table></div><ul><li><code>path</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="/ru/nodejs/api/buffer#class-buffer">&lt;Buffer&gt;</a> | <a href="/ru/nodejs/api/url#the-whatwg-url-api">&lt;URL&gt;</a></li><li><code>uid</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;integer&gt;</a> Идентификатор пользователя нового владельца файла.</li><li><code>gid</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;integer&gt;</a> Идентификатор группы новой группы файла.</li></ul><p>Устанавливает владельца для указанного пути. Возвращает <code>undefined</code>.</p><p>Для получения дополнительной информации см. документацию POSIX <a href="http://man7.org/linux/man-pages/man2/lchown.2" target="_blank" rel="noreferrer"><code>lchown(2)</code></a>.</p><h3 id="fslutimessyncpath-atime-mtime" tabindex="-1"><code>fs.lutimesSync(path, atime, mtime)</code> <a class="header-anchor" href="#fslutimessyncpath-atime-mtime" aria-label="Permalink to “fs.lutimesSync(path, atime, mtime)”">​</a></h3><p><strong>Добавлено в: v14.5.0, v12.19.0</strong></p><ul><li><code>path</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="/ru/nodejs/api/buffer#class-buffer">&lt;Buffer&gt;</a> | <a href="/ru/nodejs/api/url#the-whatwg-url-api">&lt;URL&gt;</a></li><li><code>atime</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;number&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date" target="_blank" rel="noreferrer">&lt;Date&gt;</a></li><li><code>mtime</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;number&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date" target="_blank" rel="noreferrer">&lt;Date&gt;</a></li></ul><p>Изменяет временные метки файловой системы символической ссылки, на которую ссылается <code>path</code>. Возвращает <code>undefined</code> или выбрасывает исключение, если параметры неверны или операция не удалась. Это синхронная версия <a href="/ru/nodejs/api/fs#fslutimespath-atime-mtime-callback"><code>fs.lutimes()</code></a>.</p><h3 id="fslinksyncexistingpath-newpath" tabindex="-1"><code>fs.linkSync(existingPath, newPath)</code> <a class="header-anchor" href="#fslinksyncexistingpath-newpath" aria-label="Permalink to “fs.linkSync(existingPath, newPath)”">​</a></h3><div class="info custom-block"><p class="custom-block-title">[История]</p><table tabindex="0"><thead><tr><th>Версия</th><th>Изменения</th></tr></thead><tbody><tr><td>v7.6.0</td><td>Параметры <code>existingPath</code> и <code>newPath</code> могут быть объектами WHATWG <code>URL</code> с использованием протокола <code>file:</code>. Поддержка в настоящее время все еще <em>экспериментальная</em>.</td></tr><tr><td>v0.1.31</td><td>Добавлено в версии: v0.1.31</td></tr></tbody></table></div><ul><li><code>existingPath</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="/ru/nodejs/api/buffer#class-buffer">&lt;Buffer&gt;</a> | <a href="/ru/nodejs/api/url#the-whatwg-url-api">&lt;URL&gt;</a></li><li><code>newPath</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="/ru/nodejs/api/buffer#class-buffer">&lt;Buffer&gt;</a> | <a href="/ru/nodejs/api/url#the-whatwg-url-api">&lt;URL&gt;</a></li></ul><p>Создаёт новую ссылку из <code>existingPath</code> в <code>newPath</code>. Дополнительные сведения см. в документации POSIX <a href="http://man7.org/linux/man-pages/man2/link.2" target="_blank" rel="noreferrer"><code>link(2)</code></a>. Возвращает <code>undefined</code>.</p><h3 id="fslstatsyncpath-options" tabindex="-1"><code>fs.lstatSync(path[, options])</code> <a class="header-anchor" href="#fslstatsyncpath-options" aria-label="Permalink to “fs.lstatSync(path[, options])”">​</a></h3><div class="info custom-block"><p class="custom-block-title">[История]</p><table tabindex="0"><thead><tr><th>Версия</th><th>Изменения</th></tr></thead><tbody><tr><td>v15.3.0, v14.17.0</td><td>Принимает параметр <code>throwIfNoEntry</code>, чтобы указать, следует ли вызывать исключение, если запись не существует.</td></tr><tr><td>v10.5.0</td><td>Принимает дополнительный объект <code>options</code>, чтобы указать, должны ли возвращаемые числовые значения быть bigint.</td></tr><tr><td>v7.6.0</td><td>Параметр <code>path</code> может быть объектом WHATWG <code>URL</code> с использованием протокола <code>file:</code>.</td></tr><tr><td>v0.1.30</td><td>Добавлено в версии: v0.1.30</td></tr></tbody></table></div><ul><li><p><code>path</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="/ru/nodejs/api/buffer#class-buffer">&lt;Buffer&gt;</a> | <a href="/ru/nodejs/api/url#the-whatwg-url-api">&lt;URL&gt;</a></p></li><li><p><code>options</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noreferrer">&lt;Object&gt;</a></p><ul><li><code>bigint</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" target="_blank" rel="noreferrer">&lt;boolean&gt;</a> Указывает, должны ли числовые значения в возвращаемом объекте <a href="/ru/nodejs/api/fs#class-fsstats">&lt;fs.Stats&gt;</a> быть <code>bigint</code>. <strong>По умолчанию:</strong> <code>false</code>.</li><li><code>throwIfNoEntry</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" target="_blank" rel="noreferrer">&lt;boolean&gt;</a> Указывает, будет ли вызвано исключение, если запись файловой системы не существует, вместо возврата <code>undefined</code>. <strong>По умолчанию:</strong> <code>true</code>.</li></ul></li><li><p>Возвращает: <a href="/ru/nodejs/api/fs#class-fsstats">&lt;fs.Stats&gt;</a></p></li></ul><p>Получает <a href="/ru/nodejs/api/fs#class-fsstats">&lt;fs.Stats&gt;</a> для символической ссылки, на которую ссылается <code>path</code>.</p><p>Дополнительные сведения см. в документации POSIX <a href="http://man7.org/linux/man-pages/man2/lstat.2" target="_blank" rel="noreferrer"><code>lstat(2)</code></a>.</p><h3 id="fsmkdirsyncpath-options" tabindex="-1"><code>fs.mkdirSync(path[, options])</code> <a class="header-anchor" href="#fsmkdirsyncpath-options" aria-label="Permalink to “fs.mkdirSync(path[, options])”">​</a></h3><div class="info custom-block"><p class="custom-block-title">[История]</p><table tabindex="0"><thead><tr><th>Версия</th><th>Изменения</th></tr></thead><tbody><tr><td>v13.11.0, v12.17.0</td><td>В режиме <code>recursive</code> теперь возвращается первый созданный путь.</td></tr><tr><td>v10.12.0</td><td>Второй аргумент теперь может быть объектом <code>options</code> со свойствами <code>recursive</code> и <code>mode</code>.</td></tr><tr><td>v7.6.0</td><td>Параметр <code>path</code> может быть объектом WHATWG <code>URL</code> с использованием протокола <code>file:</code>.</td></tr><tr><td>v0.1.21</td><td>Добавлено в версии: v0.1.21</td></tr></tbody></table></div><ul><li><p><code>path</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="/ru/nodejs/api/buffer#class-buffer">&lt;Buffer&gt;</a> | <a href="/ru/nodejs/api/url#the-whatwg-url-api">&lt;URL&gt;</a></p></li><li><p><code>options</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noreferrer">&lt;Object&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;integer&gt;</a></p><ul><li><code>recursive</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" target="_blank" rel="noreferrer">&lt;boolean&gt;</a> <strong>По умолчанию:</strong> <code>false</code></li><li><code>mode</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;integer&gt;</a> Не поддерживается в Windows. <strong>По умолчанию:</strong> <code>0o777</code>.</li></ul></li><li><p>Возвращает: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Undefined_type" target="_blank" rel="noreferrer">&lt;undefined&gt;</a></p></li></ul><p>Синхронно создает каталог. Возвращает <code>undefined</code> или, если <code>recursive</code> имеет значение <code>true</code>, путь к первому созданному каталогу. Это синхронная версия <a href="/ru/nodejs/api/fs#fsmkdirpath-options-callback"><code>fs.mkdir()</code></a>.</p><p>Для получения дополнительной информации см. документацию POSIX <a href="http://man7.org/linux/man-pages/man2/mkdir.2" target="_blank" rel="noreferrer"><code>mkdir(2)</code></a>.</p><h3 id="fsmkdtempsyncprefix-options" tabindex="-1"><code>fs.mkdtempSync(prefix[, options])</code> <a class="header-anchor" href="#fsmkdtempsyncprefix-options" aria-label="Permalink to “fs.mkdtempSync(prefix[, options])”">​</a></h3><div class="info custom-block"><p class="custom-block-title">[История]</p><table tabindex="0"><thead><tr><th>Версия</th><th>Изменения</th></tr></thead><tbody><tr><td>v20.6.0, v18.19.0</td><td>Параметр <code>prefix</code> теперь принимает буферы и URL.</td></tr><tr><td>v16.5.0, v14.18.0</td><td>Параметр <code>prefix</code> теперь принимает пустую строку.</td></tr><tr><td>v5.10.0</td><td>Добавлено в версии: v5.10.0</td></tr></tbody></table></div><ul><li><p><code>prefix</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="/ru/nodejs/api/buffer#class-buffer">&lt;Buffer&gt;</a> | <a href="/ru/nodejs/api/url#the-whatwg-url-api">&lt;URL&gt;</a></p></li><li><p><code>options</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noreferrer">&lt;Object&gt;</a></p><ul><li><code>encoding</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> <strong>По умолчанию:</strong> <code>&#39;utf8&#39;</code></li></ul></li><li><p>Возвращает: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a></p></li></ul><p>Возвращает путь к созданному каталогу.</p><p>Для получения подробной информации см. документацию асинхронной версии этого API: <a href="/ru/nodejs/api/fs#fsmkdtempprefix-options-callback"><code>fs.mkdtemp()</code></a>.</p><p>Необязательный аргумент <code>options</code> может быть строкой, указывающей кодировку, или объектом со свойством <code>encoding</code>, указывающим используемую кодировку символов.</p><h3 id="fsopendirsyncpath-options" tabindex="-1"><code>fs.opendirSync(path[, options])</code> <a class="header-anchor" href="#fsopendirsyncpath-options" aria-label="Permalink to “fs.opendirSync(path[, options])”">​</a></h3><div class="info custom-block"><p class="custom-block-title">[История]</p><table tabindex="0"><thead><tr><th>Версия</th><th>Изменения</th></tr></thead><tbody><tr><td>v20.1.0, v18.17.0</td><td>Добавлена опция <code>recursive</code>.</td></tr><tr><td>v13.1.0, v12.16.0</td><td>Введена опция <code>bufferSize</code>.</td></tr><tr><td>v12.12.0</td><td>Добавлено в: v12.12.0</td></tr></tbody></table></div><ul><li><p><code>path</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="/ru/nodejs/api/buffer#class-buffer">&lt;Buffer&gt;</a> | <a href="/ru/nodejs/api/url#the-whatwg-url-api">&lt;URL&gt;</a></p></li><li><p><code>options</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noreferrer">&lt;Object&gt;</a></p><ul><li><code>encoding</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Null_type" target="_blank" rel="noreferrer">&lt;null&gt;</a> <strong>По умолчанию:</strong> <code>&#39;utf8&#39;</code></li><li><code>bufferSize</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;number&gt;</a> Количество записей каталога, которые буферизуются внутри при чтении из каталога. Более высокие значения приводят к лучшей производительности, но и к большему использованию памяти. <strong>По умолчанию:</strong> <code>32</code></li><li><code>recursive</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" target="_blank" rel="noreferrer">&lt;boolean&gt;</a> <strong>По умолчанию:</strong> <code>false</code></li></ul></li><li><p>Возвращает: <a href="/ru/nodejs/api/fs#class-fsdir">&lt;fs.Dir&gt;</a></p></li></ul><p>Синхронно открывает каталог. См. <a href="http://man7.org/linux/man-pages/man3/opendir.3" target="_blank" rel="noreferrer"><code>opendir(3)</code></a>.</p><p>Создает <a href="/ru/nodejs/api/fs#class-fsdir">&lt;fs.Dir&gt;</a>, который содержит все дальнейшие функции для чтения и очистки каталога.</p><p>Опция <code>encoding</code> устанавливает кодировку для <code>path</code> при открытии каталога и последующих операциях чтения.</p><h3 id="fsopensyncpath-flags-mode" tabindex="-1"><code>fs.openSync(path[, flags[, mode]])</code> <a class="header-anchor" href="#fsopensyncpath-flags-mode" aria-label="Permalink to “fs.openSync(path[, flags[, mode]])”">​</a></h3><div class="info custom-block"><p class="custom-block-title">[История]</p><table tabindex="0"><thead><tr><th>Версия</th><th>Изменения</th></tr></thead><tbody><tr><td>v11.1.0</td><td>Аргумент <code>flags</code> теперь необязателен и по умолчанию имеет значение <code>&#39;r&#39;</code>.</td></tr><tr><td>v9.9.0</td><td>Теперь поддерживаются флаги <code>as</code> и <code>as+</code>.</td></tr><tr><td>v7.6.0</td><td>Параметр <code>path</code> может быть объектом WHATWG <code>URL</code>, использующим протокол <code>file:</code>.</td></tr><tr><td>v0.1.21</td><td>Добавлено в: v0.1.21</td></tr></tbody></table></div><ul><li><code>path</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="/ru/nodejs/api/buffer#class-buffer">&lt;Buffer&gt;</a> | <a href="/ru/nodejs/api/url#the-whatwg-url-api">&lt;URL&gt;</a></li><li><code>flags</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;number&gt;</a> <strong>По умолчанию:</strong> <code>&#39;r&#39;</code>. См. <a href="/ru/nodejs/api/fs#file-system-flags">поддержка файловой системы <code>flags</code></a>.</li><li><code>mode</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;integer&gt;</a> <strong>По умолчанию:</strong> <code>0o666</code></li><li>Возвращает: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;number&gt;</a></li></ul><p>Возвращает целое число, представляющее файловый дескриптор.</p><p>Для получения подробной информации см. документацию асинхронной версии этого API: <a href="/ru/nodejs/api/fs#fsopenpath-flags-mode-callback"><code>fs.open()</code></a>.</p><h3 id="fsreaddirsyncpath-options" tabindex="-1"><code>fs.readdirSync(path[, options])</code> <a class="header-anchor" href="#fsreaddirsyncpath-options" aria-label="Permalink to “fs.readdirSync(path[, options])”">​</a></h3><div class="info custom-block"><p class="custom-block-title">[История]</p><table tabindex="0"><thead><tr><th>Версия</th><th>Изменения</th></tr></thead><tbody><tr><td>v20.1.0, v18.17.0</td><td>Добавлена опция <code>recursive</code>.</td></tr><tr><td>v10.10.0</td><td>Добавлена новая опция <code>withFileTypes</code>.</td></tr><tr><td>v7.6.0</td><td>Параметр <code>path</code> может быть объектом WHATWG <code>URL</code>, использующим протокол <code>file:</code>.</td></tr><tr><td>v0.1.21</td><td>Добавлено в: v0.1.21</td></tr></tbody></table></div><ul><li><p><code>path</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="/ru/nodejs/api/buffer#class-buffer">&lt;Buffer&gt;</a> | <a href="/ru/nodejs/api/url#the-whatwg-url-api">&lt;URL&gt;</a></p></li><li><p><code>options</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noreferrer">&lt;Object&gt;</a></p><ul><li><code>encoding</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> <strong>По умолчанию:</strong> <code>&#39;utf8&#39;</code></li><li><code>withFileTypes</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" target="_blank" rel="noreferrer">&lt;boolean&gt;</a> <strong>По умолчанию:</strong> <code>false</code></li><li><code>recursive</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" target="_blank" rel="noreferrer">&lt;boolean&gt;</a> Если <code>true</code>, читает содержимое каталога рекурсивно. В рекурсивном режиме будут перечислены все файлы, подфайлы и каталоги. <strong>По умолчанию:</strong> <code>false</code>.</li></ul></li><li><p>Возвращает: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string[]&gt;</a> | <a href="/ru/nodejs/api/buffer#class-buffer">&lt;Buffer[]&gt;</a> | <a href="/ru/nodejs/api/fs#class-fsdirent">&lt;fs.Dirent[]&gt;</a></p></li></ul><p>Читает содержимое каталога.</p><p>Подробности смотрите в документации POSIX <a href="http://man7.org/linux/man-pages/man3/readdir.3" target="_blank" rel="noreferrer"><code>readdir(3)</code></a>.</p><p>Необязательный аргумент <code>options</code> может быть строкой, указывающей кодировку, или объектом со свойством <code>encoding</code>, указывающим кодировку символов, используемую для возвращаемых имен файлов. Если <code>encoding</code> установлено в <code>&#39;buffer&#39;</code>, возвращаемые имена файлов будут передаваться как объекты <a href="/ru/nodejs/api/buffer#class-buffer">&lt;Buffer&gt;</a>.</p><p>Если <code>options.withFileTypes</code> установлено в <code>true</code>, результат будет содержать объекты <a href="/ru/nodejs/api/fs#class-fsdirent">&lt;fs.Dirent&gt;</a>.</p><h3 id="fsreadfilesyncpath-options" tabindex="-1"><code>fs.readFileSync(path[, options])</code> <a class="header-anchor" href="#fsreadfilesyncpath-options" aria-label="Permalink to “fs.readFileSync(path[, options])”">​</a></h3><div class="info custom-block"><p class="custom-block-title">[История]</p><table tabindex="0"><thead><tr><th>Версия</th><th>Изменения</th></tr></thead><tbody><tr><td>v7.6.0</td><td>Параметр <code>path</code> может быть объектом WHATWG <code>URL</code>, использующим протокол <code>file:</code>.</td></tr><tr><td>v5.0.0</td><td>Параметр <code>path</code> теперь может быть файловым дескриптором.</td></tr><tr><td>v0.1.8</td><td>Добавлено в версии: v0.1.8</td></tr></tbody></table></div><ul><li><p><code>path</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="/ru/nodejs/api/buffer#class-buffer">&lt;Buffer&gt;</a> | <a href="/ru/nodejs/api/url#the-whatwg-url-api">&lt;URL&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;integer&gt;</a> имя файла или файловый дескриптор</p></li><li><p><code>options</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noreferrer">&lt;Object&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a></p><ul><li><code>encoding</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Null_type" target="_blank" rel="noreferrer">&lt;null&gt;</a> <strong>По умолчанию:</strong> <code>null</code></li><li><code>flag</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> См. <a href="/ru/nodejs/api/fs#file-system-flags">поддержку флагов файловой системы</a>. <strong>По умолчанию:</strong> <code>&#39;r&#39;</code>.</li></ul></li><li><p>Возвращает: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="/ru/nodejs/api/buffer#class-buffer">&lt;Buffer&gt;</a></p></li></ul><p>Возвращает содержимое <code>path</code>.</p><p>Для получения подробной информации см. документацию асинхронной версии этого API: <a href="/ru/nodejs/api/fs#fsreadfilepath-options-callback"><code>fs.readFile()</code></a>.</p><p>Если указана опция <code>encoding</code>, то эта функция возвращает строку. В противном случае она возвращает буфер.</p><p>Аналогично <a href="/ru/nodejs/api/fs#fsreadfilepath-options-callback"><code>fs.readFile()</code></a>, когда путь является каталогом, поведение <code>fs.readFileSync()</code> зависит от платформы.</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { readFileSync } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;node:fs&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// macOS, Linux и Windows</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">readFileSync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;&lt;directory&gt;&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// =&gt; [Error: EISDIR: illegal operation on a directory, read &lt;directory&gt;]</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//  FreeBSD</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">readFileSync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;&lt;directory&gt;&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// =&gt; &lt;data&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="fsreadlinksyncpath-options" tabindex="-1"><code>fs.readlinkSync(path[, options])</code> <a class="header-anchor" href="#fsreadlinksyncpath-options" aria-label="Permalink to “fs.readlinkSync(path[, options])”">​</a></h3><div class="info custom-block"><p class="custom-block-title">[История]</p><table tabindex="0"><thead><tr><th>Версия</th><th>Изменения</th></tr></thead><tbody><tr><td>v7.6.0</td><td>Параметр <code>path</code> может быть объектом WHATWG <code>URL</code>, использующим протокол <code>file:</code>.</td></tr><tr><td>v0.1.31</td><td>Добавлено в: v0.1.31</td></tr></tbody></table></div><ul><li><p><code>path</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="/ru/nodejs/api/buffer#class-buffer">&lt;Buffer&gt;</a> | <a href="/ru/nodejs/api/url#the-whatwg-url-api">&lt;URL&gt;</a></p></li><li><p><code>options</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noreferrer">&lt;Object&gt;</a></p><ul><li><code>encoding</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> <strong>По умолчанию:</strong> <code>&#39;utf8&#39;</code></li></ul></li><li><p>Возвращает: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="/ru/nodejs/api/buffer#class-buffer">&lt;Buffer&gt;</a></p></li></ul><p>Возвращает строковое значение символической ссылки.</p><p>Дополнительную информацию смотрите в документации POSIX <a href="http://man7.org/linux/man-pages/man2/readlink.2" target="_blank" rel="noreferrer"><code>readlink(2)</code></a>.</p><p>Необязательный аргумент <code>options</code> может быть строкой, определяющей кодировку, или объектом со свойством <code>encoding</code>, определяющим кодировку символов, используемую для возвращаемого пути ссылки. Если <code>encoding</code> установлено в <code>&#39;buffer&#39;</code>, возвращаемый путь ссылки будет передан как объект <a href="/ru/nodejs/api/buffer#class-buffer">&lt;Buffer&gt;</a>.</p><h3 id="fsreadsyncfd-buffer-offset-length-position" tabindex="-1"><code>fs.readSync(fd, buffer, offset, length[, position])</code> <a class="header-anchor" href="#fsreadsyncfd-buffer-offset-length-position" aria-label="Permalink to “fs.readSync(fd, buffer, offset, length[, position])”">​</a></h3><div class="info custom-block"><p class="custom-block-title">[История]</p><table tabindex="0"><thead><tr><th>Версия</th><th>Изменения</th></tr></thead><tbody><tr><td>v10.10.0</td><td>Параметр <code>buffer</code> теперь может быть любым <code>TypedArray</code> или <code>DataView</code>.</td></tr><tr><td>v6.0.0</td><td>Параметр <code>length</code> теперь может быть <code>0</code>.</td></tr><tr><td>v0.1.21</td><td>Добавлено в: v0.1.21</td></tr></tbody></table></div><ul><li><code>fd</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;integer&gt;</a></li><li><code>buffer</code> <a href="/ru/nodejs/api/buffer#class-buffer">&lt;Buffer&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/TypedArray" target="_blank" rel="noreferrer">&lt;TypedArray&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/DataView" target="_blank" rel="noreferrer">&lt;DataView&gt;</a></li><li><code>offset</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;integer&gt;</a></li><li><code>length</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;integer&gt;</a></li><li><code>position</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;integer&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/BigInt" target="_blank" rel="noreferrer">&lt;bigint&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Null_type" target="_blank" rel="noreferrer">&lt;null&gt;</a> <strong>По умолчанию:</strong> <code>null</code></li><li>Возвращает: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;number&gt;</a></li></ul><p>Возвращает количество <code>bytesRead</code>.</p><p>Подробную информацию смотрите в документации асинхронной версии этого API: <a href="/ru/nodejs/api/fs#fsreadfd-buffer-offset-length-position-callback"><code>fs.read()</code></a>.</p><h3 id="fsreadsyncfd-buffer-options" tabindex="-1"><code>fs.readSync(fd, buffer[, options])</code> <a class="header-anchor" href="#fsreadsyncfd-buffer-options" aria-label="Permalink to “fs.readSync(fd, buffer[, options])”">​</a></h3><div class="info custom-block"><p class="custom-block-title">[История]</p><table tabindex="0"><thead><tr><th>Версия</th><th>Изменения</th></tr></thead><tbody><tr><td>v13.13.0, v12.17.0</td><td>Объект параметров может быть передан, чтобы сделать offset, length и position необязательными.</td></tr><tr><td>v13.13.0, v12.17.0</td><td>Добавлено в: v13.13.0, v12.17.0</td></tr></tbody></table></div><ul><li><p><code>fd</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;integer&gt;</a></p></li><li><p><code>buffer</code> <a href="/ru/nodejs/api/buffer#class-buffer">&lt;Buffer&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/TypedArray" target="_blank" rel="noreferrer">&lt;TypedArray&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/DataView" target="_blank" rel="noreferrer">&lt;DataView&gt;</a></p></li><li><p><code>options</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noreferrer">&lt;Object&gt;</a></p><ul><li><code>offset</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;integer&gt;</a> <strong>По умолчанию:</strong> <code>0</code></li><li><code>length</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;integer&gt;</a> <strong>По умолчанию:</strong> <code>buffer.byteLength - offset</code></li><li><code>position</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;integer&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/BigInt" target="_blank" rel="noreferrer">&lt;bigint&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Null_type" target="_blank" rel="noreferrer">&lt;null&gt;</a> <strong>По умолчанию:</strong> <code>null</code></li></ul></li><li><p>Возвращает: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;number&gt;</a></p></li></ul><p>Возвращает количество прочитанных <code>bytesRead</code>.</p><p>Аналогично вышеуказанной функции <code>fs.readSync</code>, эта версия принимает необязательный объект <code>options</code>. Если объект <code>options</code> не указан, он будет по умолчанию использовать вышеуказанные значения.</p><p>Для получения подробной информации см. документацию по асинхронной версии этого API: <a href="/ru/nodejs/api/fs#fsreadfd-buffer-offset-length-position-callback"><code>fs.read()</code></a>.</p><h3 id="fsreadvsyncfd-buffers-position" tabindex="-1"><code>fs.readvSync(fd, buffers[, position])</code> <a class="header-anchor" href="#fsreadvsyncfd-buffers-position" aria-label="Permalink to “fs.readvSync(fd, buffers[, position])”">​</a></h3><p><strong>Добавлено в: v13.13.0, v12.17.0</strong></p><ul><li><code>fd</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;integer&gt;</a></li><li><code>buffers</code> <a href="https://developer.mozilla.org/en-US/docs/Web/API/ArrayBufferView" target="_blank" rel="noreferrer">&lt;ArrayBufferView[]&gt;</a></li><li><code>position</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;integer&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Null_type" target="_blank" rel="noreferrer">&lt;null&gt;</a> <strong>По умолчанию:</strong> <code>null</code></li><li>Возвращает: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;number&gt;</a> Количество прочитанных байтов.</li></ul><p>Для получения подробной информации см. документацию по асинхронной версии этого API: <a href="/ru/nodejs/api/fs#fsreadvfd-buffers-position-callback"><code>fs.readv()</code></a>.</p><h3 id="fsrealpathsyncpath-options" tabindex="-1"><code>fs.realpathSync(path[, options])</code> <a class="header-anchor" href="#fsrealpathsyncpath-options" aria-label="Permalink to “fs.realpathSync(path[, options])”">​</a></h3><div class="info custom-block"><p class="custom-block-title">[История]</p><table tabindex="0"><thead><tr><th>Версия</th><th>Изменения</th></tr></thead><tbody><tr><td>v8.0.0</td><td>Добавлена поддержка разрешения Pipe/Socket.</td></tr><tr><td>v7.6.0</td><td>Параметр <code>path</code> может быть объектом WHATWG <code>URL</code>, использующим протокол <code>file:</code>.</td></tr><tr><td>v6.4.0</td><td>Вызов <code>realpathSync</code> теперь снова работает для различных крайних случаев в Windows.</td></tr><tr><td>v6.0.0</td><td>Параметр <code>cache</code> был удалён.</td></tr><tr><td>v0.1.31</td><td>Добавлено в: v0.1.31</td></tr></tbody></table></div><ul><li><p><code>path</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="/ru/nodejs/api/buffer#class-buffer">&lt;Buffer&gt;</a> | <a href="/ru/nodejs/api/url#the-whatwg-url-api">&lt;URL&gt;</a></p></li><li><p><code>options</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noreferrer">&lt;Object&gt;</a></p><ul><li><code>encoding</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> <strong>По умолчанию:</strong> <code>&#39;utf8&#39;</code></li></ul></li><li><p>Возвращает: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="/ru/nodejs/api/buffer#class-buffer">&lt;Buffer&gt;</a></p></li></ul><p>Возвращает разрешённый путь.</p><p>Для получения подробной информации смотрите документацию асинхронной версии этого API: <a href="/ru/nodejs/api/fs#fsrealpathpath-options-callback"><code>fs.realpath()</code></a>.</p><h3 id="fsrealpathsyncnativepath-options" tabindex="-1"><code>fs.realpathSync.native(path[, options])</code> <a class="header-anchor" href="#fsrealpathsyncnativepath-options" aria-label="Permalink to “fs.realpathSync.native(path[, options])”">​</a></h3><p><strong>Добавлено в: v9.2.0</strong></p><ul><li><p><code>path</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="/ru/nodejs/api/buffer#class-buffer">&lt;Buffer&gt;</a> | <a href="/ru/nodejs/api/url#the-whatwg-url-api">&lt;URL&gt;</a></p></li><li><p><code>options</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noreferrer">&lt;Object&gt;</a></p><ul><li><code>encoding</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> <strong>По умолчанию:</strong> <code>&#39;utf8&#39;</code></li></ul></li><li><p>Возвращает: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="/ru/nodejs/api/buffer#class-buffer">&lt;Buffer&gt;</a></p></li></ul><p>Синхронный <a href="http://man7.org/linux/man-pages/man3/realpath.3" target="_blank" rel="noreferrer"><code>realpath(3)</code></a>.</p><p>Поддерживаются только пути, которые могут быть преобразованы в строки UTF8.</p><p>Необязательный аргумент <code>options</code> может быть строкой, указывающей кодировку, или объектом со свойством <code>encoding</code>, указывающим кодировку символов, используемую для возвращаемого пути. Если <code>encoding</code> установлено в <code>&#39;buffer&#39;</code>, возвращаемый путь будет передан как объект <a href="/ru/nodejs/api/buffer#class-buffer">&lt;Buffer&gt;</a>.</p><p>В Linux, когда Node.js связан с musl libc, файловая система procfs должна быть смонтирована на <code>/proc</code>, чтобы эта функция работала. Glibc не имеет этого ограничения.</p><h3 id="fsrenamesyncoldpath-newpath" tabindex="-1"><code>fs.renameSync(oldPath, newPath)</code> <a class="header-anchor" href="#fsrenamesyncoldpath-newpath" aria-label="Permalink to “fs.renameSync(oldPath, newPath)”">​</a></h3><div class="info custom-block"><p class="custom-block-title">[История]</p><table tabindex="0"><thead><tr><th>Версия</th><th>Изменения</th></tr></thead><tbody><tr><td>v7.6.0</td><td>Параметры <code>oldPath</code> и <code>newPath</code> могут быть объектами WHATWG <code>URL</code>, использующими протокол <code>file:</code>. Поддержка в настоящее время является <em>экспериментальной</em>.</td></tr><tr><td>v0.1.21</td><td>Добавлено в: v0.1.21</td></tr></tbody></table></div><ul><li><code>oldPath</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="/ru/nodejs/api/buffer#class-buffer">&lt;Buffer&gt;</a> | <a href="/ru/nodejs/api/url#the-whatwg-url-api">&lt;URL&gt;</a></li><li><code>newPath</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="/ru/nodejs/api/buffer#class-buffer">&lt;Buffer&gt;</a> | <a href="/ru/nodejs/api/url#the-whatwg-url-api">&lt;URL&gt;</a></li></ul><p>Переименовывает файл из <code>oldPath</code> в <code>newPath</code>. Возвращает <code>undefined</code>.</p><p>Подробности см. в документации POSIX <a href="http://man7.org/linux/man-pages/man2/rename.2" target="_blank" rel="noreferrer"><code>rename(2)</code></a>.</p><h3 id="fsrmdirsyncpath-options" tabindex="-1"><code>fs.rmdirSync(path[, options])</code> <a class="header-anchor" href="#fsrmdirsyncpath-options" aria-label="Permalink to “fs.rmdirSync(path[, options])”">​</a></h3><div class="info custom-block"><p class="custom-block-title">[История]</p><table tabindex="0"><thead><tr><th>Версия</th><th>Изменения</th></tr></thead><tbody><tr><td>v16.0.0</td><td>Использование <code>fs.rmdirSync(path, { recursive: true })</code> для <code>path</code>, который является файлом, больше не разрешено и приводит к ошибке <code>ENOENT</code> в Windows и ошибке <code>ENOTDIR</code> в POSIX.</td></tr><tr><td>v16.0.0</td><td>Использование <code>fs.rmdirSync(path, { recursive: true })</code> для <code>path</code>, который не существует, больше не разрешено и приводит к ошибке <code>ENOENT</code>.</td></tr><tr><td>v16.0.0</td><td>Опция <code>recursive</code> устарела, ее использование вызывает предупреждение об устаревании.</td></tr><tr><td>v14.14.0</td><td>Опция <code>recursive</code> устарела, используйте вместо нее <code>fs.rmSync</code>.</td></tr><tr><td>v13.3.0, v12.16.0</td><td>Опция <code>maxBusyTries</code> переименована в <code>maxRetries</code>, и ее значение по умолчанию равно 0. Опция <code>emfileWait</code> была удалена, и ошибки <code>EMFILE</code> используют ту же логику повторных попыток, что и другие ошибки. Теперь поддерживается опция <code>retryDelay</code>. Теперь повторяются ошибки <code>ENFILE</code>.</td></tr><tr><td>v12.10.0</td><td>Теперь поддерживаются опции <code>recursive</code>, <code>maxBusyTries</code> и <code>emfileWait</code>.</td></tr><tr><td>v7.6.0</td><td>Параметры <code>path</code> могут быть объектом WHATWG <code>URL</code>, использующим протокол <code>file:</code>.</td></tr><tr><td>v0.1.21</td><td>Добавлено в: v0.1.21</td></tr></tbody></table></div><ul><li><code>path</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="/ru/nodejs/api/buffer#class-buffer">&lt;Buffer&gt;</a> | <a href="/ru/nodejs/api/url#the-whatwg-url-api">&lt;URL&gt;</a></li><li><code>options</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noreferrer">&lt;Object&gt;</a><ul><li><code>maxRetries</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;integer&gt;</a> Если встречается ошибка <code>EBUSY</code>, <code>EMFILE</code>, <code>ENFILE</code>, <code>ENOTEMPTY</code> или <code>EPERM</code>, Node.js повторяет операцию с линейным уменьшением времени ожидания <code>retryDelay</code> миллисекунд при каждой попытке. Эта опция представляет количество повторных попыток. Эта опция игнорируется, если опция <code>recursive</code> не равна <code>true</code>. <strong>По умолчанию:</strong> <code>0</code>.</li><li><code>recursive</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" target="_blank" rel="noreferrer">&lt;boolean&gt;</a> Если <code>true</code>, выполнить рекурсивное удаление каталога. В рекурсивном режиме операции повторяются при сбое. <strong>По умолчанию:</strong> <code>false</code>. <strong>Устарело.</strong></li><li><code>retryDelay</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;integer&gt;</a> Количество времени в миллисекундах для ожидания между повторными попытками. Эта опция игнорируется, если опция <code>recursive</code> не равна <code>true</code>. <strong>По умолчанию:</strong> <code>100</code>.</li></ul></li></ul><p>Синхронный <a href="http://man7.org/linux/man-pages/man2/rmdir.2" target="_blank" rel="noreferrer"><code>rmdir(2)</code></a>. Возвращает <code>undefined</code>.</p><p>Использование <code>fs.rmdirSync()</code> для файла (не каталога) приводит к ошибке <code>ENOENT</code> в Windows и ошибке <code>ENOTDIR</code> в POSIX.</p><p>Чтобы получить поведение, аналогичное команде Unix <code>rm -rf</code>, используйте <a href="/ru/nodejs/api/fs#fsrmsyncpath-options"><code>fs.rmSync()</code></a> с опциями <code>{ recursive: true, force: true }</code>.</p><h3 id="fsrmsyncpath-options" tabindex="-1"><code>fs.rmSync(path[, options])</code> <a class="header-anchor" href="#fsrmsyncpath-options" aria-label="Permalink to “fs.rmSync(path[, options])”">​</a></h3><div class="info custom-block"><p class="custom-block-title">[История]</p><table tabindex="0"><thead><tr><th>Версия</th><th>Изменения</th></tr></thead><tbody><tr><td>v17.3.0, v16.14.0</td><td>Параметр <code>path</code> может быть объектом WHATWG <code>URL</code>, использующим протокол <code>file:</code>.</td></tr><tr><td>v14.14.0</td><td>Добавлено в: v14.14.0</td></tr></tbody></table></div><ul><li><code>path</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="/ru/nodejs/api/buffer#class-buffer">&lt;Buffer&gt;</a> | <a href="/ru/nodejs/api/url#the-whatwg-url-api">&lt;URL&gt;</a></li><li><code>options</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noreferrer">&lt;Object&gt;</a><ul><li><code>force</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" target="_blank" rel="noreferrer">&lt;boolean&gt;</a> Если <code>true</code>, исключения будут игнорироваться, если <code>path</code> не существует. <strong>По умолчанию:</strong> <code>false</code>.</li><li><code>maxRetries</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;integer&gt;</a> Если возникает ошибка <code>EBUSY</code>, <code>EMFILE</code>, <code>ENFILE</code>, <code>ENOTEMPTY</code> или <code>EPERM</code>, Node.js будет повторять операцию с линейной задержкой <code>retryDelay</code> миллисекунд дольше при каждой попытке. Этот параметр представляет количество повторных попыток. Этот параметр игнорируется, если параметр <code>recursive</code> не равен <code>true</code>. <strong>По умолчанию:</strong> <code>0</code>.</li><li><code>recursive</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" target="_blank" rel="noreferrer">&lt;boolean&gt;</a> Если <code>true</code>, выполните рекурсивное удаление каталога. В рекурсивном режиме операции повторяются при сбое. <strong>По умолчанию:</strong> <code>false</code>.</li><li><code>retryDelay</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;integer&gt;</a> Время ожидания в миллисекундах между повторными попытками. Этот параметр игнорируется, если параметр <code>recursive</code> не равен <code>true</code>. <strong>По умолчанию:</strong> <code>100</code>.</li></ul></li></ul><p>Синхронно удаляет файлы и каталоги (смоделировано на основе стандартной утилиты POSIX <code>rm</code>). Возвращает <code>undefined</code>.</p><h3 id="fsstatsyncpath-options" tabindex="-1"><code>fs.statSync(path[, options])</code> <a class="header-anchor" href="#fsstatsyncpath-options" aria-label="Permalink to “fs.statSync(path[, options])”">​</a></h3><div class="info custom-block"><p class="custom-block-title">[История]</p><table tabindex="0"><thead><tr><th>Версия</th><th>Изменения</th></tr></thead><tbody><tr><td>v15.3.0, v14.17.0</td><td>Принимает параметр <code>throwIfNoEntry</code>, чтобы указать, следует ли выбрасывать исключение, если запись не существует.</td></tr><tr><td>v10.5.0</td><td>Принимает дополнительный объект <code>options</code>, чтобы указать, должны ли возвращаемые числовые значения быть bigint.</td></tr><tr><td>v7.6.0</td><td>Параметр <code>path</code> может быть объектом WHATWG <code>URL</code>, использующим протокол <code>file:</code>.</td></tr><tr><td>v0.1.21</td><td>Добавлено в: v0.1.21</td></tr></tbody></table></div><ul><li><p><code>path</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="/ru/nodejs/api/buffer#class-buffer">&lt;Buffer&gt;</a> | <a href="/ru/nodejs/api/url#the-whatwg-url-api">&lt;URL&gt;</a></p></li><li><p><code>options</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noreferrer">&lt;Object&gt;</a></p><ul><li><code>bigint</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" target="_blank" rel="noreferrer">&lt;boolean&gt;</a> Должны ли числовые значения в возвращаемом объекте <a href="/ru/nodejs/api/fs#class-fsstats">&lt;fs.Stats&gt;</a> быть <code>bigint</code>. <strong>По умолчанию:</strong> <code>false</code>.</li><li><code>throwIfNoEntry</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" target="_blank" rel="noreferrer">&lt;boolean&gt;</a> Будет ли выбрасываться исключение, если запись в файловой системе не существует, вместо возврата <code>undefined</code>. <strong>По умолчанию:</strong> <code>true</code>.</li></ul></li><li><p>Возвращает: <a href="/ru/nodejs/api/fs#class-fsstats">&lt;fs.Stats&gt;</a></p></li></ul><p>Получает <a href="/ru/nodejs/api/fs#class-fsstats">&lt;fs.Stats&gt;</a> для указанного пути.</p><h3 id="fsstatfssyncpath-options" tabindex="-1"><code>fs.statfsSync(path[, options])</code> <a class="header-anchor" href="#fsstatfssyncpath-options" aria-label="Permalink to “fs.statfsSync(path[, options])”">​</a></h3><p><strong>Добавлено в версии: v19.6.0, v18.15.0</strong></p><ul><li><p><code>path</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="/ru/nodejs/api/buffer#class-buffer">&lt;Buffer&gt;</a> | <a href="/ru/nodejs/api/url#the-whatwg-url-api">&lt;URL&gt;</a></p></li><li><p><code>options</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noreferrer">&lt;Object&gt;</a></p><ul><li><code>bigint</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" target="_blank" rel="noreferrer">&lt;boolean&gt;</a> Указывает, следует ли использовать тип <code>bigint</code> для числовых значений в возвращаемом объекте <a href="/ru/nodejs/api/fs#class-fsstatfs">&lt;fs.StatFs&gt;</a>. <strong>По умолчанию:</strong> <code>false</code>.</li></ul></li><li><p>Возвращает: <a href="/ru/nodejs/api/fs#class-fsstatfs">&lt;fs.StatFs&gt;</a></p></li></ul><p>Синхронная версия <a href="http://man7.org/linux/man-pages/man2/statfs.2" target="_blank" rel="noreferrer"><code>statfs(2)</code></a>. Возвращает информацию о смонтированной файловой системе, содержащей <code>path</code>.</p><p>В случае ошибки, <code>err.code</code> будет одним из <a href="/ru/nodejs/api/errors#common-system-errors">Общих системных ошибок</a>.</p><h3 id="fssymlinksynctarget-path-type" tabindex="-1"><code>fs.symlinkSync(target, path[, type])</code> <a class="header-anchor" href="#fssymlinksynctarget-path-type" aria-label="Permalink to “fs.symlinkSync(target, path[, type])”">​</a></h3><div class="info custom-block"><p class="custom-block-title">[История]</p><table tabindex="0"><thead><tr><th>Версия</th><th>Изменения</th></tr></thead><tbody><tr><td>v12.0.0</td><td>Если аргумент <code>type</code> не определен, Node автоматически определит тип <code>target</code> и автоматически выберет <code>dir</code> или <code>file</code>.</td></tr><tr><td>v7.6.0</td><td>Параметры <code>target</code> и <code>path</code> могут быть объектами WHATWG <code>URL</code>, использующими протокол <code>file:</code>. Поддержка в настоящее время все еще <em>экспериментальная</em>.</td></tr><tr><td>v0.1.31</td><td>Добавлено в версии: v0.1.31</td></tr></tbody></table></div><ul><li><code>target</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="/ru/nodejs/api/buffer#class-buffer">&lt;Buffer&gt;</a> | <a href="/ru/nodejs/api/url#the-whatwg-url-api">&lt;URL&gt;</a></li><li><code>path</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="/ru/nodejs/api/buffer#class-buffer">&lt;Buffer&gt;</a> | <a href="/ru/nodejs/api/url#the-whatwg-url-api">&lt;URL&gt;</a></li><li><code>type</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Null_type" target="_blank" rel="noreferrer">&lt;null&gt;</a> <strong>По умолчанию:</strong> <code>null</code></li></ul><p>Возвращает <code>undefined</code>.</p><p>Для получения подробной информации, см. документацию асинхронной версии этого API: <a href="/ru/nodejs/api/fs#fssymlinktarget-path-type-callback"><code>fs.symlink()</code></a>.</p><h3 id="fstruncatesyncpath-len" tabindex="-1"><code>fs.truncateSync(path[, len])</code> <a class="header-anchor" href="#fstruncatesyncpath-len" aria-label="Permalink to “fs.truncateSync(path[, len])”">​</a></h3><p><strong>Добавлено в версии: v0.8.6</strong></p><ul><li><code>path</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="/ru/nodejs/api/buffer#class-buffer">&lt;Buffer&gt;</a> | <a href="/ru/nodejs/api/url#the-whatwg-url-api">&lt;URL&gt;</a></li><li><code>len</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;integer&gt;</a> <strong>По умолчанию:</strong> <code>0</code></li></ul><p>Усекает файл. Возвращает <code>undefined</code>. Файловый дескриптор также может быть передан в качестве первого аргумента. В этом случае вызывается <code>fs.ftruncateSync()</code>.</p><p>Передача файлового дескриптора является устаревшей и в будущем может привести к возникновению ошибки.</p><h3 id="fsunlinksyncpath" tabindex="-1"><code>fs.unlinkSync(path)</code> <a class="header-anchor" href="#fsunlinksyncpath" aria-label="Permalink to “fs.unlinkSync(path)”">​</a></h3><div class="info custom-block"><p class="custom-block-title">[История]</p><table tabindex="0"><thead><tr><th>Версия</th><th>Изменения</th></tr></thead><tbody><tr><td>v7.6.0</td><td>Параметр <code>path</code> может быть объектом WHATWG <code>URL</code> с использованием протокола <code>file:</code>.</td></tr><tr><td>v0.1.21</td><td>Добавлено в версии: v0.1.21</td></tr></tbody></table></div><ul><li><code>path</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="/ru/nodejs/api/buffer#class-buffer">&lt;Buffer&gt;</a> | <a href="/ru/nodejs/api/url#the-whatwg-url-api">&lt;URL&gt;</a></li></ul><p>Синхронная версия <a href="http://man7.org/linux/man-pages/man2/unlink.2" target="_blank" rel="noreferrer"><code>unlink(2)</code></a>. Возвращает <code>undefined</code>.</p><h3 id="fsutimessyncpath-atime-mtime" tabindex="-1"><code>fs.utimesSync(path, atime, mtime)</code> <a class="header-anchor" href="#fsutimessyncpath-atime-mtime" aria-label="Permalink to “fs.utimesSync(path, atime, mtime)”">​</a></h3><div class="info custom-block"><p class="custom-block-title">[История]</p><table tabindex="0"><thead><tr><th>Версия</th><th>Изменения</th></tr></thead><tbody><tr><td>v8.0.0</td><td><code>NaN</code>, <code>Infinity</code> и <code>-Infinity</code> больше не являются допустимыми спецификаторами времени.</td></tr><tr><td>v7.6.0</td><td>Параметр <code>path</code> может быть объектом WHATWG <code>URL</code> с использованием протокола <code>file:</code>.</td></tr><tr><td>v4.1.0</td><td>Числовые строки, <code>NaN</code> и <code>Infinity</code> теперь являются допустимыми спецификаторами времени.</td></tr><tr><td>v0.4.2</td><td>Добавлено в версии: v0.4.2</td></tr></tbody></table></div><ul><li><code>path</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="/ru/nodejs/api/buffer#class-buffer">&lt;Buffer&gt;</a> | <a href="/ru/nodejs/api/url#the-whatwg-url-api">&lt;URL&gt;</a></li><li><code>atime</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;number&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date" target="_blank" rel="noreferrer">&lt;Date&gt;</a></li><li><code>mtime</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;number&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date" target="_blank" rel="noreferrer">&lt;Date&gt;</a></li></ul><p>Возвращает <code>undefined</code>.</p><p>Для получения подробной информации см. документацию асинхронной версии этого API: <a href="/ru/nodejs/api/fs#fsutimespath-atime-mtime-callback"><code>fs.utimes()</code></a>.</p><h3 id="fswritefilesyncfile-data-options" tabindex="-1"><code>fs.writeFileSync(file, data[, options])</code> <a class="header-anchor" href="#fswritefilesyncfile-data-options" aria-label="Permalink to “fs.writeFileSync(file, data[, options])”">​</a></h3><div class="info custom-block"><p class="custom-block-title">[История изменений]</p><table tabindex="0"><thead><tr><th>Версия</th><th>Изменения</th></tr></thead><tbody><tr><td>v21.0.0, v20.10.0</td><td>Теперь поддерживается опция <code>flush</code>.</td></tr><tr><td>v19.0.0</td><td>Передача в параметр <code>data</code> объекта с собственной функцией <code>toString</code> больше не поддерживается.</td></tr><tr><td>v17.8.0</td><td>Передача в параметр <code>data</code> объекта с собственной функцией <code>toString</code> устарела.</td></tr><tr><td>v14.12.0</td><td>Параметр <code>data</code> будет преобразовывать в строку объект с явной функцией <code>toString</code>.</td></tr><tr><td>v14.0.0</td><td>Параметр <code>data</code> больше не будет приводить неподдерживаемый ввод к строкам.</td></tr><tr><td>v10.10.0</td><td>Параметр <code>data</code> теперь может быть любым <code>TypedArray</code> или <code>DataView</code>.</td></tr><tr><td>v7.4.0</td><td>Параметр <code>data</code> теперь может быть <code>Uint8Array</code>.</td></tr><tr><td>v5.0.0</td><td>Параметр <code>file</code> теперь может быть файловым дескриптором.</td></tr><tr><td>v0.1.29</td><td>Добавлено в версии: v0.1.29</td></tr></tbody></table></div><ul><li><code>file</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="/ru/nodejs/api/buffer#class-buffer">&lt;Buffer&gt;</a> | <a href="/ru/nodejs/api/url#the-whatwg-url-api">&lt;URL&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;integer&gt;</a> имя файла или файловый дескриптор</li><li><code>data</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="/ru/nodejs/api/buffer#class-buffer">&lt;Buffer&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/TypedArray" target="_blank" rel="noreferrer">&lt;TypedArray&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/DataView" target="_blank" rel="noreferrer">&lt;DataView&gt;</a></li><li><code>options</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noreferrer">&lt;Object&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a><ul><li><code>encoding</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Null_type" target="_blank" rel="noreferrer">&lt;null&gt;</a> <strong>По умолчанию:</strong> <code>&#39;utf8&#39;</code></li><li><code>mode</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;integer&gt;</a> <strong>По умолчанию:</strong> <code>0o666</code></li><li><code>flag</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> См. <a href="/ru/nodejs/api/fs#file-system-flags">поддержку флагов файловой системы</a>. <strong>По умолчанию:</strong> <code>&#39;w&#39;</code>.</li><li><code>flush</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" target="_blank" rel="noreferrer">&lt;boolean&gt;</a> Если все данные успешно записаны в файл, и <code>flush</code> имеет значение <code>true</code>, используется <code>fs.fsyncSync()</code> для сброса данных на диск.</li></ul></li></ul><p>Возвращает <code>undefined</code>.</p><p>Параметр <code>mode</code> влияет только на вновь созданный файл. Подробнее см. <a href="/ru/nodejs/api/fs#fsopenpath-flags-mode-callback"><code>fs.open()</code></a>.</p><p>Для получения подробной информации см. документацию асинхронной версии этого API: <a href="/ru/nodejs/api/fs#fswritefilefile-data-options-callback"><code>fs.writeFile()</code></a>.</p><h3 id="fswritesyncfd-buffer-offset-length-position" tabindex="-1"><code>fs.writeSync(fd, buffer, offset[, length[, position]])</code> <a class="header-anchor" href="#fswritesyncfd-buffer-offset-length-position" aria-label="Permalink to “fs.writeSync(fd, buffer, offset[, length[, position]])”">​</a></h3><div class="info custom-block"><p class="custom-block-title">[История]</p><table tabindex="0"><thead><tr><th>Версия</th><th>Изменения</th></tr></thead><tbody><tr><td>v14.0.0</td><td>Параметр <code>buffer</code> больше не будет приводить неподдерживаемые входные данные к строкам.</td></tr><tr><td>v10.10.0</td><td>Параметр <code>buffer</code> теперь может быть любым <code>TypedArray</code> или <code>DataView</code>.</td></tr><tr><td>v7.4.0</td><td>Параметр <code>buffer</code> теперь может быть <code>Uint8Array</code>.</td></tr><tr><td>v7.2.0</td><td>Параметры <code>offset</code> и <code>length</code> теперь являются необязательными.</td></tr><tr><td>v0.1.21</td><td>Добавлено в версии: v0.1.21</td></tr></tbody></table></div><ul><li><code>fd</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;integer&gt;</a></li><li><code>buffer</code> <a href="/ru/nodejs/api/buffer#class-buffer">&lt;Buffer&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/TypedArray" target="_blank" rel="noreferrer">&lt;TypedArray&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/DataView" target="_blank" rel="noreferrer">&lt;DataView&gt;</a></li><li><code>offset</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;integer&gt;</a> <strong>По умолчанию:</strong> <code>0</code></li><li><code>length</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;integer&gt;</a> <strong>По умолчанию:</strong> <code>buffer.byteLength - offset</code></li><li><code>position</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;integer&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Null_type" target="_blank" rel="noreferrer">&lt;null&gt;</a> <strong>По умолчанию:</strong> <code>null</code></li><li>Возвращает: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;number&gt;</a> Количество записанных байтов.</li></ul><p>Для получения подробной информации см. документацию асинхронной версии этого API: <a href="/ru/nodejs/api/fs#fswritefd-buffer-offset-length-position-callback"><code>fs.write(fd, buffer...)</code></a>.</p><h3 id="fswritesyncfd-buffer-options" tabindex="-1"><code>fs.writeSync(fd, buffer[, options])</code> <a class="header-anchor" href="#fswritesyncfd-buffer-options" aria-label="Permalink to “fs.writeSync(fd, buffer[, options])”">​</a></h3><p><strong>Добавлено в версии: v18.3.0, v16.17.0</strong></p><ul><li><p><code>fd</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;integer&gt;</a></p></li><li><p><code>buffer</code> <a href="/ru/nodejs/api/buffer#class-buffer">&lt;Buffer&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/TypedArray" target="_blank" rel="noreferrer">&lt;TypedArray&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/DataView" target="_blank" rel="noreferrer">&lt;DataView&gt;</a></p></li><li><p><code>options</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noreferrer">&lt;Object&gt;</a></p><ul><li><code>offset</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;integer&gt;</a> <strong>По умолчанию:</strong> <code>0</code></li><li><code>length</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;integer&gt;</a> <strong>По умолчанию:</strong> <code>buffer.byteLength - offset</code></li><li><code>position</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;integer&gt;</a> <strong>По умолчанию:</strong> <code>null</code></li></ul></li><li><p>Возвращает: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;number&gt;</a> Количество записанных байтов.</p></li></ul><p>Для получения подробной информации см. документацию асинхронной версии этого API: <a href="/ru/nodejs/api/fs#fswritefd-buffer-offset-length-position-callback"><code>fs.write(fd, buffer...)</code></a>.</p><h3 id="fswritesyncfd-string-position-encoding" tabindex="-1"><code>fs.writeSync(fd, string[, position[, encoding]])</code> <a class="header-anchor" href="#fswritesyncfd-string-position-encoding" aria-label="Permalink to “fs.writeSync(fd, string[, position[, encoding]])”">​</a></h3><div class="info custom-block"><p class="custom-block-title">[История]</p><table tabindex="0"><thead><tr><th>Версия</th><th>Изменения</th></tr></thead><tbody><tr><td>v14.0.0</td><td>Параметр <code>string</code> больше не будет приводить неподдерживаемый ввод к строкам.</td></tr><tr><td>v7.2.0</td><td>Параметр <code>position</code> теперь является необязательным.</td></tr><tr><td>v0.11.5</td><td>Добавлено в версии: v0.11.5</td></tr></tbody></table></div><ul><li><code>fd</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;integer&gt;</a></li><li><code>string</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a></li><li><code>position</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;integer&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Null_type" target="_blank" rel="noreferrer">&lt;null&gt;</a> <strong>По умолчанию:</strong> <code>null</code></li><li><code>encoding</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> <strong>По умолчанию:</strong> <code>&#39;utf8&#39;</code></li><li>Возвращает: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;number&gt;</a> Количество записанных байтов.</li></ul><p>Для получения подробной информации см. документацию асинхронной версии этого API: <a href="/ru/nodejs/api/fs#fswritefd-string-position-encoding-callback"><code>fs.write(fd, string...)</code></a>.</p><h3 id="fswritevsyncfd-buffers-position" tabindex="-1"><code>fs.writevSync(fd, buffers[, position])</code> <a class="header-anchor" href="#fswritevsyncfd-buffers-position" aria-label="Permalink to “fs.writevSync(fd, buffers[, position])”">​</a></h3><p><strong>Добавлено в версии: v12.9.0</strong></p><ul><li><code>fd</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;integer&gt;</a></li><li><code>buffers</code> <a href="https://developer.mozilla.org/en-US/docs/Web/API/ArrayBufferView" target="_blank" rel="noreferrer">&lt;ArrayBufferView[]&gt;</a></li><li><code>position</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;integer&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Null_type" target="_blank" rel="noreferrer">&lt;null&gt;</a> <strong>По умолчанию:</strong> <code>null</code></li><li>Возвращает: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;number&gt;</a> Количество записанных байтов.</li></ul><p>Для получения подробной информации см. документацию асинхронной версии этого API: <a href="/ru/nodejs/api/fs#fswritevfd-buffers-position-callback"><code>fs.writev()</code></a>.</p><h2 id="common-objects" tabindex="-1">Общие объекты <a class="header-anchor" href="#common-objects" aria-label="Permalink to “Общие объекты”">​</a></h2><p>Общие объекты используются всеми вариантами API файловой системы (promise, callback и synchronous).</p><h3 id="class-fsdir" tabindex="-1">Класс: <code>fs.Dir</code> <a class="header-anchor" href="#class-fsdir" aria-label="Permalink to “Класс: fs.Dir”">​</a></h3><p><strong>Добавлено в: v12.12.0</strong></p><p>Класс, представляющий поток директории.</p><p>Создается с помощью <a href="/ru/nodejs/api/fs#fsopendirpath-options-callback"><code>fs.opendir()</code></a>, <a href="/ru/nodejs/api/fs#fsopendirsyncpath-options"><code>fs.opendirSync()</code></a>, или <a href="/ru/nodejs/api/fs#fspromisesopendirpath-options"><code>fsPromises.opendir()</code></a>.</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { opendir } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;node:fs/promises&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">try</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> dir</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> opendir</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;./&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  for</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> dirent</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> of</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> dir)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(dirent.name);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">} </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">catch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (err) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(err);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>При использовании асинхронного итератора объект <a href="/ru/nodejs/api/fs#class-fsdir">&lt;fs.Dir&gt;</a> будет автоматически закрыт после выхода итератора.</p><h4 id="dirclose" tabindex="-1"><code>dir.close()</code> <a class="header-anchor" href="#dirclose" aria-label="Permalink to “dir.close()”">​</a></h4><p><strong>Добавлено в: v12.12.0</strong></p><ul><li>Возвращает: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" target="_blank" rel="noreferrer">&lt;Promise&gt;</a></li></ul><p>Асинхронно закрывает базовый дескриптор ресурса директории. Последующие чтения приведут к ошибкам.</p><p>Возвращается promise, который будет выполнен после закрытия ресурса.</p><h4 id="dirclosecallback" tabindex="-1"><code>dir.close(callback)</code> <a class="header-anchor" href="#dirclosecallback" aria-label="Permalink to “dir.close(callback)”">​</a></h4><div class="info custom-block"><p class="custom-block-title">[История]</p><table tabindex="0"><thead><tr><th>Версия</th><th>Изменения</th></tr></thead><tbody><tr><td>v18.0.0</td><td>Передача недействительного колбэка в аргумент <code>callback</code> теперь вызывает <code>ERR_INVALID_ARG_TYPE</code> вместо <code>ERR_INVALID_CALLBACK</code>.</td></tr><tr><td>v12.12.0</td><td>Добавлено в: v12.12.0</td></tr></tbody></table></div><ul><li><code>callback</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function" target="_blank" rel="noreferrer">&lt;Function&gt;</a><ul><li><code>err</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error" target="_blank" rel="noreferrer">&lt;Error&gt;</a></li></ul></li></ul><p>Асинхронно закрывает базовый дескриптор ресурса директории. Последующие чтения приведут к ошибкам.</p><p><code>callback</code> будет вызван после закрытия дескриптора ресурса.</p><h4 id="dirclosesync" tabindex="-1"><code>dir.closeSync()</code> <a class="header-anchor" href="#dirclosesync" aria-label="Permalink to “dir.closeSync()”">​</a></h4><p><strong>Добавлено в: v12.12.0</strong></p><p>Синхронно закрывает базовый дескриптор ресурса директории. Последующие чтения приведут к ошибкам.</p><h4 id="dirpath" tabindex="-1"><code>dir.path</code> <a class="header-anchor" href="#dirpath" aria-label="Permalink to “dir.path”">​</a></h4><p><strong>Добавлено в: v12.12.0</strong></p><ul><li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a></li></ul><p>Путь только для чтения к этой директории, как он был предоставлен в <a href="/ru/nodejs/api/fs#fsopendirpath-options-callback"><code>fs.opendir()</code></a>, <a href="/ru/nodejs/api/fs#fsopendirsyncpath-options"><code>fs.opendirSync()</code></a>, или <a href="/ru/nodejs/api/fs#fspromisesopendirpath-options"><code>fsPromises.opendir()</code></a>.</p><h4 id="dirread" tabindex="-1"><code>dir.read()</code> <a class="header-anchor" href="#dirread" aria-label="Permalink to “dir.read()”">​</a></h4><p><strong>Добавлено в: v12.12.0</strong></p><ul><li>Возвращает: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" target="_blank" rel="noreferrer">&lt;Promise&gt;</a> Разрешается с <a href="/ru/nodejs/api/fs#class-fsdirent">&lt;fs.Dirent&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Null_type" target="_blank" rel="noreferrer">&lt;null&gt;</a></li></ul><p>Асинхронно считывает следующую запись каталога через <a href="http://man7.org/linux/man-pages/man3/readdir.3" target="_blank" rel="noreferrer"><code>readdir(3)</code></a> как <a href="/ru/nodejs/api/fs#class-fsdirent">&lt;fs.Dirent&gt;</a>.</p><p>Возвращается промис, который будет выполнен с <a href="/ru/nodejs/api/fs#class-fsdirent">&lt;fs.Dirent&gt;</a> или <code>null</code>, если больше нет записей для чтения.</p><p>Записи каталога, возвращаемые этой функцией, не упорядочены каким-либо образом, как это предусмотрено базовыми механизмами каталога операционной системы. Записи, добавленные или удаленные во время итерации по каталогу, могут не включаться в результаты итерации.</p><h4 id="dirreadcallback" tabindex="-1"><code>dir.read(callback)</code> <a class="header-anchor" href="#dirreadcallback" aria-label="Permalink to “dir.read(callback)”">​</a></h4><p><strong>Добавлено в: v12.12.0</strong></p><ul><li><code>callback</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function" target="_blank" rel="noreferrer">&lt;Function&gt;</a><ul><li><code>err</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error" target="_blank" rel="noreferrer">&lt;Error&gt;</a></li><li><code>dirent</code> <a href="/ru/nodejs/api/fs#class-fsdirent">&lt;fs.Dirent&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Null_type" target="_blank" rel="noreferrer">&lt;null&gt;</a></li></ul></li></ul><p>Асинхронно считывает следующую запись каталога через <a href="http://man7.org/linux/man-pages/man3/readdir.3" target="_blank" rel="noreferrer"><code>readdir(3)</code></a> как <a href="/ru/nodejs/api/fs#class-fsdirent">&lt;fs.Dirent&gt;</a>.</p><p>После завершения чтения будет вызвана функция <code>callback</code> с <a href="/ru/nodejs/api/fs#class-fsdirent">&lt;fs.Dirent&gt;</a> или <code>null</code>, если больше нет записей для чтения.</p><p>Записи каталога, возвращаемые этой функцией, не упорядочены каким-либо образом, как это предусмотрено базовыми механизмами каталога операционной системы. Записи, добавленные или удаленные во время итерации по каталогу, могут не включаться в результаты итерации.</p><h4 id="dirreadsync" tabindex="-1"><code>dir.readSync()</code> <a class="header-anchor" href="#dirreadsync" aria-label="Permalink to “dir.readSync()”">​</a></h4><p><strong>Добавлено в: v12.12.0</strong></p><ul><li>Возвращает: <a href="/ru/nodejs/api/fs#class-fsdirent">&lt;fs.Dirent&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Null_type" target="_blank" rel="noreferrer">&lt;null&gt;</a></li></ul><p>Синхронно считывает следующую запись каталога как <a href="/ru/nodejs/api/fs#class-fsdirent">&lt;fs.Dirent&gt;</a>. См. документацию POSIX <a href="http://man7.org/linux/man-pages/man3/readdir.3" target="_blank" rel="noreferrer"><code>readdir(3)</code></a> для получения более подробной информации.</p><p>Если больше нет записей каталога для чтения, будет возвращено значение <code>null</code>.</p><p>Записи каталога, возвращаемые этой функцией, не упорядочены каким-либо образом, как это предусмотрено базовыми механизмами каталога операционной системы. Записи, добавленные или удаленные во время итерации по каталогу, могут не включаться в результаты итерации.</p><h4 id="dirsymbolasynciterator" tabindex="-1"><code>dir[Symbol.asyncIterator]()</code> <a class="header-anchor" href="#dirsymbolasynciterator" aria-label="Permalink to “dir[Symbol.asyncIterator]()”">​</a></h4><p><strong>Добавлено в версии: v12.12.0</strong></p><ul><li>Возвращает: <a href="https://tc39.github.io/ecma262/#sec-asynciterator-interface" target="_blank" rel="noreferrer">&lt;AsyncIterator&gt;</a> Асинхронный итератор <a href="/ru/nodejs/api/fs#class-fsdirent">&lt;fs.Dirent&gt;</a></li></ul><p>Асинхронно выполняет итерацию по каталогу, пока не будут прочитаны все записи. Подробную информацию см. в документации POSIX <a href="http://man7.org/linux/man-pages/man3/readdir.3" target="_blank" rel="noreferrer"><code>readdir(3)</code></a>.</p><p>Записи, возвращаемые асинхронным итератором, всегда являются <a href="/ru/nodejs/api/fs#class-fsdirent">&lt;fs.Dirent&gt;</a>. Случай <code>null</code> из <code>dir.read()</code> обрабатывается внутри.</p><p>См. пример в разделе <a href="/ru/nodejs/api/fs#class-fsdir">&lt;fs.Dir&gt;</a>.</p><p>Записи каталога, возвращаемые этим итератором, не упорядочены каким-либо образом, как это предусмотрено базовыми механизмами каталога операционной системы. Записи, добавленные или удаленные во время итерации по каталогу, могут не быть включены в результаты итерации.</p><h3 id="class-fsdirent" tabindex="-1">Класс: <code>fs.Dirent</code> <a class="header-anchor" href="#class-fsdirent" aria-label="Permalink to “Класс: fs.Dirent”">​</a></h3><p><strong>Добавлено в версии: v10.10.0</strong></p><p>Представление записи каталога, которая может быть файлом или подкаталогом внутри каталога, как возвращается при чтении из <a href="/ru/nodejs/api/fs#class-fsdir">&lt;fs.Dir&gt;</a>. Запись каталога представляет собой комбинацию имени файла и пар типа файла.</p><p>Кроме того, когда <a href="/ru/nodejs/api/fs#fsreaddirpath-options-callback"><code>fs.readdir()</code></a> или <a href="/ru/nodejs/api/fs#fsreaddirsyncpath-options"><code>fs.readdirSync()</code></a> вызываются с параметром <code>withFileTypes</code>, установленным в <code>true</code>, результирующий массив заполняется объектами <a href="/ru/nodejs/api/fs#class-fsdirent">&lt;fs.Dirent&gt;</a>, а не строками или <a href="/ru/nodejs/api/buffer#class-buffer">&lt;Buffer&gt;</a>ами.</p><h4 id="direntisblockdevice" tabindex="-1"><code>dirent.isBlockDevice()</code> <a class="header-anchor" href="#direntisblockdevice" aria-label="Permalink to “dirent.isBlockDevice()”">​</a></h4><p><strong>Добавлено в версии: v10.10.0</strong></p><ul><li>Возвращает: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" target="_blank" rel="noreferrer">&lt;boolean&gt;</a></li></ul><p>Возвращает <code>true</code>, если объект <a href="/ru/nodejs/api/fs#class-fsdirent">&lt;fs.Dirent&gt;</a> описывает блочное устройство.</p><h4 id="direntischaracterdevice" tabindex="-1"><code>dirent.isCharacterDevice()</code> <a class="header-anchor" href="#direntischaracterdevice" aria-label="Permalink to “dirent.isCharacterDevice()”">​</a></h4><p><strong>Добавлено в версии: v10.10.0</strong></p><ul><li>Возвращает: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" target="_blank" rel="noreferrer">&lt;boolean&gt;</a></li></ul><p>Возвращает <code>true</code>, если объект <a href="/ru/nodejs/api/fs#class-fsdirent">&lt;fs.Dirent&gt;</a> описывает символьное устройство.</p><h4 id="direntisdirectory" tabindex="-1"><code>dirent.isDirectory()</code> <a class="header-anchor" href="#direntisdirectory" aria-label="Permalink to “dirent.isDirectory()”">​</a></h4><p><strong>Добавлено в версии: v10.10.0</strong></p><ul><li>Возвращает: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" target="_blank" rel="noreferrer">&lt;boolean&gt;</a></li></ul><p>Возвращает <code>true</code>, если объект <a href="/ru/nodejs/api/fs#class-fsdirent">&lt;fs.Dirent&gt;</a> описывает каталог в файловой системе.</p><h4 id="direntisfifo" tabindex="-1"><code>dirent.isFIFO()</code> <a class="header-anchor" href="#direntisfifo" aria-label="Permalink to “dirent.isFIFO()”">​</a></h4><p><strong>Добавлено в версии: v10.10.0</strong></p><ul><li>Возвращает: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" target="_blank" rel="noreferrer">&lt;boolean&gt;</a></li></ul><p>Возвращает <code>true</code>, если объект <a href="/ru/nodejs/api/fs#class-fsdirent">&lt;fs.Dirent&gt;</a> описывает канал FIFO (first-in-first-out).</p><h4 id="direntisfile" tabindex="-1"><code>dirent.isFile()</code> <a class="header-anchor" href="#direntisfile" aria-label="Permalink to “dirent.isFile()”">​</a></h4><p><strong>Добавлено в версии: v10.10.0</strong></p><ul><li>Возвращает: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" target="_blank" rel="noreferrer">&lt;boolean&gt;</a></li></ul><p>Возвращает <code>true</code>, если объект <a href="/ru/nodejs/api/fs#class-fsdirent">&lt;fs.Dirent&gt;</a> описывает обычный файл.</p><h4 id="direntissocket" tabindex="-1"><code>dirent.isSocket()</code> <a class="header-anchor" href="#direntissocket" aria-label="Permalink to “dirent.isSocket()”">​</a></h4><p><strong>Добавлено в версии: v10.10.0</strong></p><ul><li>Возвращает: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" target="_blank" rel="noreferrer">&lt;boolean&gt;</a></li></ul><p>Возвращает <code>true</code>, если объект <a href="/ru/nodejs/api/fs#class-fsdirent">&lt;fs.Dirent&gt;</a> описывает сокет.</p><h4 id="direntissymboliclink" tabindex="-1"><code>dirent.isSymbolicLink()</code> <a class="header-anchor" href="#direntissymboliclink" aria-label="Permalink to “dirent.isSymbolicLink()”">​</a></h4><p><strong>Добавлено в версии: v10.10.0</strong></p><ul><li>Возвращает: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" target="_blank" rel="noreferrer">&lt;boolean&gt;</a></li></ul><p>Возвращает <code>true</code>, если объект <a href="/ru/nodejs/api/fs#class-fsdirent">&lt;fs.Dirent&gt;</a> описывает символическую ссылку.</p><h4 id="direntname" tabindex="-1"><code>dirent.name</code> <a class="header-anchor" href="#direntname" aria-label="Permalink to “dirent.name”">​</a></h4><p><strong>Добавлено в версии: v10.10.0</strong></p><ul><li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="/ru/nodejs/api/buffer#class-buffer">&lt;Buffer&gt;</a></li></ul><p>Имя файла, на который ссылается данный объект <a href="/ru/nodejs/api/fs#class-fsdirent">&lt;fs.Dirent&gt;</a>. Тип этого значения определяется параметром <code>options.encoding</code>, переданным в <a href="/ru/nodejs/api/fs#fsreaddirpath-options-callback"><code>fs.readdir()</code></a> или <a href="/ru/nodejs/api/fs#fsreaddirsyncpath-options"><code>fs.readdirSync()</code></a>.</p><h4 id="direntparentpath" tabindex="-1"><code>dirent.parentPath</code> <a class="header-anchor" href="#direntparentpath" aria-label="Permalink to “dirent.parentPath”">​</a></h4><p><strong>Добавлено в версии: v21.4.0, v20.12.0, v18.20.0</strong></p><div class="warning custom-block"><p class="custom-block-title">[Stable: 1 - Experimental]</p><p><a href="/ru/nodejs/api/documentation#stability-index">Stable: 1</a> <a href="/ru/nodejs/api/documentation#stability-index">Стабильность: 1</a> - Экспериментально</p></div><ul><li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a></li></ul><p>Путь к родительскому каталогу файла, на который ссылается этот объект <a href="/ru/nodejs/api/fs#class-fsdirent">&lt;fs.Dirent&gt;</a>.</p><h4 id="direntpath" tabindex="-1"><code>dirent.path</code> <a class="header-anchor" href="#direntpath" aria-label="Permalink to “dirent.path”">​</a></h4><div class="info custom-block"><p class="custom-block-title">[История]</p><table tabindex="0"><thead><tr><th>Версия</th><th>Изменения</th></tr></thead><tbody><tr><td>v23.2.0</td><td>Свойство больше не является доступным только для чтения.</td></tr><tr><td>v23.0.0</td><td>Доступ к этому свойству вызывает предупреждение. Теперь оно доступно только для чтения.</td></tr><tr><td>v21.5.0, v20.12.0, v18.20.0</td><td>Устарело с версии: v21.5.0, v20.12.0, v18.20.0</td></tr><tr><td>v20.1.0, v18.17.0</td><td>Добавлено в версии: v20.1.0, v18.17.0</td></tr></tbody></table></div><div class="danger custom-block"><p class="custom-block-title">[Стабильно: 0 - Устарело]</p><p><a href="/ru/nodejs/api/documentation#stability-index">Стабильно: 0</a> <a href="/ru/nodejs/api/documentation#stability-index">Стабильность: 0</a> - Устарело: Используйте <a href="/ru/nodejs/api/fs#direntparentpath"><code>dirent.parentPath</code></a> вместо этого.</p></div><ul><li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a></li></ul><p>Псевдоним для <code>dirent.parentPath</code>.</p><h3 id="class-fsfswatcher" tabindex="-1">Класс: <code>fs.FSWatcher</code> <a class="header-anchor" href="#class-fsfswatcher" aria-label="Permalink to “Класс: fs.FSWatcher”">​</a></h3><p><strong>Добавлено в версии: v0.5.8</strong></p><ul><li>Расширяет <a href="/ru/nodejs/api/events#class-eventemitter">&lt;EventEmitter&gt;</a></li></ul><p>Успешный вызов метода <a href="/ru/nodejs/api/fs#fswatchfilename-options-listener"><code>fs.watch()</code></a> вернет новый объект <a href="/ru/nodejs/api/fs#class-fsfswatcher">&lt;fs.FSWatcher&gt;</a>.</p><p>Все объекты <a href="/ru/nodejs/api/fs#class-fsfswatcher">&lt;fs.FSWatcher&gt;</a> генерируют событие <code>&#39;change&#39;</code> всякий раз, когда конкретный отслеживаемый файл изменяется.</p><h4 id="event-change" tabindex="-1">Событие: <code>&#39;change&#39;</code> <a class="header-anchor" href="#event-change" aria-label="Permalink to “Событие: &#39;change&#39;”">​</a></h4><p><strong>Добавлено в версии: v0.5.8</strong></p><ul><li><code>eventType</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> Тип произошедшего события изменения</li><li><code>filename</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="/ru/nodejs/api/buffer#class-buffer">&lt;Buffer&gt;</a> Имя файла, который был изменен (если уместно/доступно)</li></ul><p>Генерируется, когда что-то меняется в отслеживаемом каталоге или файле. Подробнее см. в <a href="/ru/nodejs/api/fs#fswatchfilename-options-listener"><code>fs.watch()</code></a>.</p><p>Аргумент <code>filename</code> может быть не предоставлен в зависимости от поддержки операционной системы. Если <code>filename</code> предоставлен, он будет предоставлен в виде <a href="/ru/nodejs/api/buffer#class-buffer">&lt;Buffer&gt;</a>, если <code>fs.watch()</code> вызывается с параметром <code>encoding</code>, установленным в <code>&#39;buffer&#39;</code>, в противном случае <code>filename</code> будет строкой UTF-8.</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { watch } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;node:fs&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Пример обработки через прослушиватель fs.watch()</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">watch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;./tmp&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, { encoding: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;buffer&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }, (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">eventType</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">filename</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (filename) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(filename);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // Выводит: &lt;Buffer ...&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h4 id="event-close_1" tabindex="-1">Событие: <code>&#39;close&#39;</code> <a class="header-anchor" href="#event-close_1" aria-label="Permalink to “Событие: &#39;close&#39;”">​</a></h4><p><strong>Добавлено в версии: v10.0.0</strong></p><p>Генерируется, когда наблюдатель прекращает отслеживание изменений. Закрытый объект <a href="/ru/nodejs/api/fs#class-fsfswatcher">&lt;fs.FSWatcher&gt;</a> больше не может использоваться в обработчике событий.</p><h4 id="event-error" tabindex="-1">Событие: <code>&#39;error&#39;</code> <a class="header-anchor" href="#event-error" aria-label="Permalink to “Событие: &#39;error&#39;”">​</a></h4><p><strong>Добавлено в версии: v0.5.8</strong></p><ul><li><code>error</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error" target="_blank" rel="noreferrer">&lt;Error&gt;</a></li></ul><p>Генерируется, когда во время наблюдения за файлом происходит ошибка. Объект <a href="/ru/nodejs/api/fs#class-fsfswatcher">&lt;fs.FSWatcher&gt;</a>, вызвавший ошибку, больше не может использоваться в обработчике событий.</p><h4 id="watcherclose" tabindex="-1"><code>watcher.close()</code> <a class="header-anchor" href="#watcherclose" aria-label="Permalink to “watcher.close()”">​</a></h4><p><strong>Добавлено в версии: v0.5.8</strong></p><p>Прекращает отслеживание изменений в данном <a href="/ru/nodejs/api/fs#class-fsfswatcher">&lt;fs.FSWatcher&gt;</a>. После остановки объект <a href="/ru/nodejs/api/fs#class-fsfswatcher">&lt;fs.FSWatcher&gt;</a> больше не может использоваться.</p><h4 id="watcherref" tabindex="-1"><code>watcher.ref()</code> <a class="header-anchor" href="#watcherref" aria-label="Permalink to “watcher.ref()”">​</a></h4><p><strong>Добавлено в версии: v14.3.0, v12.20.0</strong></p><ul><li>Возвращает: <a href="/ru/nodejs/api/fs#class-fsfswatcher">&lt;fs.FSWatcher&gt;</a></li></ul><p>При вызове запрашивает, чтобы цикл событий Node.js <em>не</em> завершался до тех пор, пока <a href="/ru/nodejs/api/fs#class-fsfswatcher">&lt;fs.FSWatcher&gt;</a> активен. Многократный вызов <code>watcher.ref()</code> не оказывает никакого эффекта.</p><p>По умолчанию все объекты <a href="/ru/nodejs/api/fs#class-fsfswatcher">&lt;fs.FSWatcher&gt;</a> имеют состояние &quot;ref&#39;ed&quot;, поэтому обычно нет необходимости вызывать <code>watcher.ref()</code>, если только ранее не был вызван <code>watcher.unref()</code>.</p><h4 id="watcherunref" tabindex="-1"><code>watcher.unref()</code> <a class="header-anchor" href="#watcherunref" aria-label="Permalink to “watcher.unref()”">​</a></h4><p><strong>Добавлено в версии: v14.3.0, v12.20.0</strong></p><ul><li>Возвращает: <a href="/ru/nodejs/api/fs#class-fsfswatcher">&lt;fs.FSWatcher&gt;</a></li></ul><p>При вызове активный объект <a href="/ru/nodejs/api/fs#class-fsfswatcher">&lt;fs.FSWatcher&gt;</a> больше не требует, чтобы цикл событий Node.js оставался активным. Если нет другой активности, поддерживающей работу цикла событий, процесс может завершиться до вызова обратного вызова объекта <a href="/ru/nodejs/api/fs#class-fsfswatcher">&lt;fs.FSWatcher&gt;</a>. Многократный вызов <code>watcher.unref()</code> не оказывает никакого эффекта.</p><h3 id="class-fsstatwatcher" tabindex="-1">Класс: <code>fs.StatWatcher</code> <a class="header-anchor" href="#class-fsstatwatcher" aria-label="Permalink to “Класс: fs.StatWatcher”">​</a></h3><p><strong>Добавлено в версии: v14.3.0, v12.20.0</strong></p><ul><li>Наследуется от <a href="/ru/nodejs/api/events#class-eventemitter">&lt;EventEmitter&gt;</a></li></ul><p>Успешный вызов метода <code>fs.watchFile()</code> вернет новый объект <a href="/ru/nodejs/api/fs#class-fsstatwatcher">&lt;fs.StatWatcher&gt;</a>.</p><h4 id="watcherref_1" tabindex="-1"><code>watcher.ref()</code> <a class="header-anchor" href="#watcherref_1" aria-label="Permalink to “watcher.ref()”">​</a></h4><p><strong>Добавлено в версии: v14.3.0, v12.20.0</strong></p><ul><li>Возвращает: <a href="/ru/nodejs/api/fs#class-fsstatwatcher">&lt;fs.StatWatcher&gt;</a></li></ul><p>При вызове запрашивает, чтобы цикл событий Node.js <em>не</em> завершался до тех пор, пока <a href="/ru/nodejs/api/fs#class-fsstatwatcher">&lt;fs.StatWatcher&gt;</a> активен. Многократный вызов <code>watcher.ref()</code> не оказывает никакого эффекта.</p><p>По умолчанию все объекты <a href="/ru/nodejs/api/fs#class-fsstatwatcher">&lt;fs.StatWatcher&gt;</a> имеют состояние &quot;ref&#39;ed&quot;, поэтому обычно нет необходимости вызывать <code>watcher.ref()</code>, если только ранее не был вызван <code>watcher.unref()</code>.</p><h4 id="watcherunref_1" tabindex="-1"><code>watcher.unref()</code> <a class="header-anchor" href="#watcherunref_1" aria-label="Permalink to “watcher.unref()”">​</a></h4><p><strong>Добавлено в: v14.3.0, v12.20.0</strong></p><ul><li>Возвращает: <a href="/ru/nodejs/api/fs#class-fsstatwatcher">&lt;fs.StatWatcher&gt;</a></li></ul><p>При вызове активный объект <a href="/ru/nodejs/api/fs#class-fsstatwatcher">&lt;fs.StatWatcher&gt;</a> не потребует, чтобы цикл событий Node.js оставался активным. Если нет другой активности, поддерживающей работу цикла событий, процесс может завершиться до вызова обратного вызова объекта <a href="/ru/nodejs/api/fs#class-fsstatwatcher">&lt;fs.StatWatcher&gt;</a>. Многократный вызов <code>watcher.unref()</code> не даст никакого эффекта.</p><h3 id="class-fsreadstream" tabindex="-1">Класс: <code>fs.ReadStream</code> <a class="header-anchor" href="#class-fsreadstream" aria-label="Permalink to “Класс: fs.ReadStream”">​</a></h3><p><strong>Добавлено в: v0.1.93</strong></p><ul><li>Расширяет: <a href="/ru/nodejs/api/stream#class-streamreadable">&lt;stream.Readable&gt;</a></li></ul><p>Экземпляры <a href="/ru/nodejs/api/fs#class-fsreadstream">&lt;fs.ReadStream&gt;</a> создаются и возвращаются с использованием функции <a href="/ru/nodejs/api/fs#fscreatereadstreampath-options"><code>fs.createReadStream()</code></a>.</p><h4 id="event-close_2" tabindex="-1">Событие: <code>&#39;close&#39;</code> <a class="header-anchor" href="#event-close_2" aria-label="Permalink to “Событие: &#39;close&#39;”">​</a></h4><p><strong>Добавлено в: v0.1.93</strong></p><p>Генерируется, когда закрыт базовый файловый дескриптор <a href="/ru/nodejs/api/fs#class-fsreadstream">&lt;fs.ReadStream&gt;</a>.</p><h4 id="event-open" tabindex="-1">Событие: <code>&#39;open&#39;</code> <a class="header-anchor" href="#event-open" aria-label="Permalink to “Событие: &#39;open&#39;”">​</a></h4><p><strong>Добавлено в: v0.1.93</strong></p><ul><li><code>fd</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;integer&gt;</a> Целочисленный файловый дескриптор, используемый <a href="/ru/nodejs/api/fs#class-fsreadstream">&lt;fs.ReadStream&gt;</a>.</li></ul><p>Генерируется, когда открыт файловый дескриптор <a href="/ru/nodejs/api/fs#class-fsreadstream">&lt;fs.ReadStream&gt;</a>.</p><h4 id="event-ready" tabindex="-1">Событие: <code>&#39;ready&#39;</code> <a class="header-anchor" href="#event-ready" aria-label="Permalink to “Событие: &#39;ready&#39;”">​</a></h4><p><strong>Добавлено в: v9.11.0</strong></p><p>Генерируется, когда <a href="/ru/nodejs/api/fs#class-fsreadstream">&lt;fs.ReadStream&gt;</a> готов к использованию.</p><p>Вызывается сразу после <code>&#39;open&#39;</code>.</p><h4 id="readstreambytesread" tabindex="-1"><code>readStream.bytesRead</code> <a class="header-anchor" href="#readstreambytesread" aria-label="Permalink to “readStream.bytesRead”">​</a></h4><p><strong>Добавлено в: v6.4.0</strong></p><ul><li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;number&gt;</a></li></ul><p>Количество байтов, прочитанных на данный момент.</p><h4 id="readstreampath" tabindex="-1"><code>readStream.path</code> <a class="header-anchor" href="#readstreampath" aria-label="Permalink to “readStream.path”">​</a></h4><p><strong>Добавлено в: v0.1.93</strong></p><ul><li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="/ru/nodejs/api/buffer#class-buffer">&lt;Buffer&gt;</a></li></ul><p>Путь к файлу, из которого поток считывает данные, как указано в первом аргументе <code>fs.createReadStream()</code>. Если <code>path</code> передан в виде строки, то <code>readStream.path</code> будет строкой. Если <code>path</code> передан в виде <a href="/ru/nodejs/api/buffer#class-buffer">&lt;Buffer&gt;</a>, то <code>readStream.path</code> будет <a href="/ru/nodejs/api/buffer#class-buffer">&lt;Buffer&gt;</a>. Если указан <code>fd</code>, то <code>readStream.path</code> будет <code>undefined</code>.</p><h4 id="readstreampending" tabindex="-1"><code>readStream.pending</code> <a class="header-anchor" href="#readstreampending" aria-label="Permalink to “readStream.pending”">​</a></h4><p><strong>Добавлено в: v11.2.0, v10.16.0</strong></p><ul><li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" target="_blank" rel="noreferrer">&lt;boolean&gt;</a></li></ul><p>Это свойство имеет значение <code>true</code>, если базовый файл еще не открыт, то есть до того, как будет сгенерировано событие <code>&#39;ready&#39;</code>.</p><h3 id="class-fsstats" tabindex="-1">Класс: <code>fs.Stats</code> <a class="header-anchor" href="#class-fsstats" aria-label="Permalink to “Класс: fs.Stats”">​</a></h3><div class="info custom-block"><p class="custom-block-title">[История]</p><table tabindex="0"><thead><tr><th>Версия</th><th>Изменения</th></tr></thead><tbody><tr><td>v22.0.0, v20.13.0</td><td>Публичный конструктор устарел.</td></tr><tr><td>v8.1.0</td><td>Добавлено время в виде чисел.</td></tr><tr><td>v0.1.21</td><td>Добавлено в: v0.1.21</td></tr></tbody></table></div><p>Объект <a href="/ru/nodejs/api/fs#class-fsstats">&lt;fs.Stats&gt;</a> предоставляет информацию о файле.</p><p>Объекты, возвращаемые из <a href="/ru/nodejs/api/fs#fsstatpath-options-callback"><code>fs.stat()</code></a>, <a href="/ru/nodejs/api/fs#fslstatpath-options-callback"><code>fs.lstat()</code></a>, <a href="/ru/nodejs/api/fs#fsfstatfd-options-callback"><code>fs.fstat()</code></a> и их синхронных аналогов, имеют этот тип. Если <code>bigint</code> в <code>options</code>, переданных этим методам, имеет значение true, числовые значения будут <code>bigint</code> вместо <code>number</code>, и объект будет содержать дополнительные свойства с наносекундной точностью и суффиксом <code>Ns</code>. Объекты <code>Stat</code> не должны создаваться напрямую с использованием ключевого слова <code>new</code>.</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Stats</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  dev:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 2114,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  ino:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 48064969,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  mode:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 33188,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  nlink:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 1,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  uid:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 85,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  gid:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 100,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  rdev:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 0,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  size:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 527,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  blksize:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 4096,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  blocks:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 8,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  atimeMs:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 1318289051000.1,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  mtimeMs:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 1318289051000.1,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  ctimeMs:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 1318289051000.1,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  birthtimeMs:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 1318289051000.1,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  atime:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Mon,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 10</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Oct</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2011</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 23:24:11</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> GMT,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  mtime:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Mon,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 10</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Oct</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2011</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 23:24:11</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> GMT,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  ctime:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Mon,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 10</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Oct</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2011</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 23:24:11</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> GMT,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  birthtime:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Mon,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 10</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Oct</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2011</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 23:24:11</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> GMT</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> }</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><p><code>bigint</code> версия:</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">BigIntStats</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  dev:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 2114n,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  ino:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 48064969n,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  mode:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 33188n,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  nlink:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 1n,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  uid:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 85n,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  gid:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 100n,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  rdev:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 0n,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  size:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 527n,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  blksize:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 4096n,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  blocks:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 8n,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  atimeMs:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 1318289051000n,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  mtimeMs:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 1318289051000n,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  ctimeMs:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 1318289051000n,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  birthtimeMs:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 1318289051000n,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  atimeNs:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 1318289051000000000n,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  mtimeNs:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 1318289051000000000n,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  ctimeNs:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 1318289051000000000n,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  birthtimeNs:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 1318289051000000000n,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  atime:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Mon,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 10</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Oct</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2011</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 23:24:11</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> GMT,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  mtime:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Mon,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 10</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Oct</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2011</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 23:24:11</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> GMT,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  ctime:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Mon,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 10</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Oct</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2011</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 23:24:11</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> GMT,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  birthtime:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Mon,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 10</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Oct</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2011</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 23:24:11</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> GMT</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> }</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><h4 id="statsisblockdevice" tabindex="-1"><code>stats.isBlockDevice()</code> <a class="header-anchor" href="#statsisblockdevice" aria-label="Permalink to “stats.isBlockDevice()”">​</a></h4><p><strong>Добавлено в: v0.1.10</strong></p><ul><li>Возвращает: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" target="_blank" rel="noreferrer">&lt;boolean&gt;</a></li></ul><p>Возвращает <code>true</code>, если объект <a href="/ru/nodejs/api/fs#class-fsstats">&lt;fs.Stats&gt;</a> описывает блочное устройство.</p><h4 id="statsischaracterdevice" tabindex="-1"><code>stats.isCharacterDevice()</code> <a class="header-anchor" href="#statsischaracterdevice" aria-label="Permalink to “stats.isCharacterDevice()”">​</a></h4><p><strong>Добавлено в: v0.1.10</strong></p><ul><li>Возвращает: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" target="_blank" rel="noreferrer">&lt;boolean&gt;</a></li></ul><p>Возвращает <code>true</code>, если объект <a href="/ru/nodejs/api/fs#class-fsstats">&lt;fs.Stats&gt;</a> описывает символьное устройство.</p><h4 id="statsisdirectory" tabindex="-1"><code>stats.isDirectory()</code> <a class="header-anchor" href="#statsisdirectory" aria-label="Permalink to “stats.isDirectory()”">​</a></h4><p><strong>Добавлено в: v0.1.10</strong></p><ul><li>Возвращает: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" target="_blank" rel="noreferrer">&lt;boolean&gt;</a></li></ul><p>Возвращает <code>true</code>, если объект <a href="/ru/nodejs/api/fs#class-fsstats">&lt;fs.Stats&gt;</a> описывает директорию файловой системы.</p><p>Если объект <a href="/ru/nodejs/api/fs#class-fsstats">&lt;fs.Stats&gt;</a> был получен в результате вызова <a href="/ru/nodejs/api/fs#fslstatpath-options-callback"><code>fs.lstat()</code></a> на символьной ссылке, которая разрешается в директорию, этот метод вернет <code>false</code>. Это потому, что <a href="/ru/nodejs/api/fs#fslstatpath-options-callback"><code>fs.lstat()</code></a> возвращает информацию о самой символьной ссылке, а не о пути, в который она разрешается.</p><h4 id="statsisfifo" tabindex="-1"><code>stats.isFIFO()</code> <a class="header-anchor" href="#statsisfifo" aria-label="Permalink to “stats.isFIFO()”">​</a></h4><p><strong>Добавлено в: v0.1.10</strong></p><ul><li>Возвращает: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" target="_blank" rel="noreferrer">&lt;boolean&gt;</a></li></ul><p>Возвращает <code>true</code>, если объект <a href="/ru/nodejs/api/fs#class-fsstats">&lt;fs.Stats&gt;</a> описывает канал FIFO (first-in-first-out).</p><h4 id="statsisfile" tabindex="-1"><code>stats.isFile()</code> <a class="header-anchor" href="#statsisfile" aria-label="Permalink to “stats.isFile()”">​</a></h4><p><strong>Добавлено в: v0.1.10</strong></p><ul><li>Возвращает: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" target="_blank" rel="noreferrer">&lt;boolean&gt;</a></li></ul><p>Возвращает <code>true</code>, если объект <a href="/ru/nodejs/api/fs#class-fsstats">&lt;fs.Stats&gt;</a> описывает обычный файл.</p><h4 id="statsissocket" tabindex="-1"><code>stats.isSocket()</code> <a class="header-anchor" href="#statsissocket" aria-label="Permalink to “stats.isSocket()”">​</a></h4><p><strong>Добавлено в: v0.1.10</strong></p><ul><li>Возвращает: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" target="_blank" rel="noreferrer">&lt;boolean&gt;</a></li></ul><p>Возвращает <code>true</code>, если объект <a href="/ru/nodejs/api/fs#class-fsstats">&lt;fs.Stats&gt;</a> описывает сокет.</p><h4 id="statsissymboliclink" tabindex="-1"><code>stats.isSymbolicLink()</code> <a class="header-anchor" href="#statsissymboliclink" aria-label="Permalink to “stats.isSymbolicLink()”">​</a></h4><p><strong>Добавлено в: v0.1.10</strong></p><ul><li>Возвращает: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" target="_blank" rel="noreferrer">&lt;boolean&gt;</a></li></ul><p>Возвращает <code>true</code>, если объект <a href="/ru/nodejs/api/fs#class-fsstats">&lt;fs.Stats&gt;</a> описывает символическую ссылку.</p><p>Этот метод действителен только при использовании <a href="/ru/nodejs/api/fs#fslstatpath-options-callback"><code>fs.lstat()</code></a>.</p><h4 id="statsdev" tabindex="-1"><code>stats.dev</code> <a class="header-anchor" href="#statsdev" aria-label="Permalink to “stats.dev”">​</a></h4><ul><li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;number&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/BigInt" target="_blank" rel="noreferrer">&lt;bigint&gt;</a></li></ul><p>Числовой идентификатор устройства, содержащего файл.</p><h4 id="statsino" tabindex="-1"><code>stats.ino</code> <a class="header-anchor" href="#statsino" aria-label="Permalink to “stats.ino”">​</a></h4><ul><li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;number&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/BigInt" target="_blank" rel="noreferrer">&lt;bigint&gt;</a></li></ul><p>Специфический для файловой системы номер &quot;Inode&quot; для файла.</p><h4 id="statsmode" tabindex="-1"><code>stats.mode</code> <a class="header-anchor" href="#statsmode" aria-label="Permalink to “stats.mode”">​</a></h4><ul><li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;number&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/BigInt" target="_blank" rel="noreferrer">&lt;bigint&gt;</a></li></ul><p>Битовое поле, описывающее тип и режим файла.</p><h4 id="statsnlink" tabindex="-1"><code>stats.nlink</code> <a class="header-anchor" href="#statsnlink" aria-label="Permalink to “stats.nlink”">​</a></h4><ul><li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;number&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/BigInt" target="_blank" rel="noreferrer">&lt;bigint&gt;</a></li></ul><p>Количество жестких ссылок, существующих для файла.</p><h4 id="statsuid" tabindex="-1"><code>stats.uid</code> <a class="header-anchor" href="#statsuid" aria-label="Permalink to “stats.uid”">​</a></h4><ul><li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;number&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/BigInt" target="_blank" rel="noreferrer">&lt;bigint&gt;</a></li></ul><p>Числовой идентификатор пользователя, которому принадлежит файл (POSIX).</p><h4 id="statsgid" tabindex="-1"><code>stats.gid</code> <a class="header-anchor" href="#statsgid" aria-label="Permalink to “stats.gid”">​</a></h4><ul><li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;number&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/BigInt" target="_blank" rel="noreferrer">&lt;bigint&gt;</a></li></ul><p>Числовой идентификатор группы, которой принадлежит файл (POSIX).</p><h4 id="statsrdev" tabindex="-1"><code>stats.rdev</code> <a class="header-anchor" href="#statsrdev" aria-label="Permalink to “stats.rdev”">​</a></h4><ul><li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;number&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/BigInt" target="_blank" rel="noreferrer">&lt;bigint&gt;</a></li></ul><p>Числовой идентификатор устройства, если файл представляет собой устройство.</p><h4 id="statssize" tabindex="-1"><code>stats.size</code> <a class="header-anchor" href="#statssize" aria-label="Permalink to “stats.size”">​</a></h4><ul><li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;number&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/BigInt" target="_blank" rel="noreferrer">&lt;bigint&gt;</a></li></ul><p>Размер файла в байтах.</p><p>Если базовая файловая система не поддерживает получение размера файла, это будет <code>0</code>.</p><h4 id="statsblksize" tabindex="-1"><code>stats.blksize</code> <a class="header-anchor" href="#statsblksize" aria-label="Permalink to “stats.blksize”">​</a></h4><ul><li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;number&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/BigInt" target="_blank" rel="noreferrer">&lt;bigint&gt;</a></li></ul><p>Размер блока файловой системы для операций ввода-вывода.</p><h4 id="statsblocks" tabindex="-1"><code>stats.blocks</code> <a class="header-anchor" href="#statsblocks" aria-label="Permalink to “stats.blocks”">​</a></h4><ul><li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;number&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/BigInt" target="_blank" rel="noreferrer">&lt;bigint&gt;</a></li></ul><p>Количество блоков, выделенных для этого файла.</p><h4 id="statsatimems" tabindex="-1"><code>stats.atimeMs</code> <a class="header-anchor" href="#statsatimems" aria-label="Permalink to “stats.atimeMs”">​</a></h4><p><strong>Добавлено в: v8.1.0</strong></p><ul><li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;number&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/BigInt" target="_blank" rel="noreferrer">&lt;bigint&gt;</a></li></ul><p>Временная метка, указывающая время последнего доступа к этому файлу, выраженное в миллисекундах с эпохи POSIX.</p><h4 id="statsmtimems" tabindex="-1"><code>stats.mtimeMs</code> <a class="header-anchor" href="#statsmtimems" aria-label="Permalink to “stats.mtimeMs”">​</a></h4><p><strong>Добавлено в: v8.1.0</strong></p><ul><li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;number&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/BigInt" target="_blank" rel="noreferrer">&lt;bigint&gt;</a></li></ul><p>Временная метка, указывающая время последнего изменения этого файла, выраженное в миллисекундах с эпохи POSIX.</p><h4 id="statsctimems" tabindex="-1"><code>stats.ctimeMs</code> <a class="header-anchor" href="#statsctimems" aria-label="Permalink to “stats.ctimeMs”">​</a></h4><p><strong>Добавлено в: v8.1.0</strong></p><ul><li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;number&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/BigInt" target="_blank" rel="noreferrer">&lt;bigint&gt;</a></li></ul><p>Временная метка, указывающая время последнего изменения статуса файла, выраженное в миллисекундах с эпохи POSIX.</p><h4 id="statsbirthtimems" tabindex="-1"><code>stats.birthtimeMs</code> <a class="header-anchor" href="#statsbirthtimems" aria-label="Permalink to “stats.birthtimeMs”">​</a></h4><p><strong>Добавлено в: v8.1.0</strong></p><ul><li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;number&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/BigInt" target="_blank" rel="noreferrer">&lt;bigint&gt;</a></li></ul><p>Временная метка, указывающая время создания этого файла, выраженное в миллисекундах с эпохи POSIX.</p><h4 id="statsatimens" tabindex="-1"><code>stats.atimeNs</code> <a class="header-anchor" href="#statsatimens" aria-label="Permalink to “stats.atimeNs”">​</a></h4><p><strong>Добавлено в: v12.10.0</strong></p><ul><li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/BigInt" target="_blank" rel="noreferrer">&lt;bigint&gt;</a></li></ul><p>Присутствует только тогда, когда в метод, генерирующий объект, передано <code>bigint: true</code>. Временная метка, указывающая время последнего доступа к этому файлу, выраженное в наносекундах с эпохи POSIX.</p><h4 id="statsmtimens" tabindex="-1"><code>stats.mtimeNs</code> <a class="header-anchor" href="#statsmtimens" aria-label="Permalink to “stats.mtimeNs”">​</a></h4><p><strong>Добавлено в: v12.10.0</strong></p><ul><li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/BigInt" target="_blank" rel="noreferrer">&lt;bigint&gt;</a></li></ul><p>Присутствует только тогда, когда в метод, генерирующий объект, передается <code>bigint: true</code>. Метка времени, указывающая время последнего изменения этого файла, выраженное в наносекундах с эпохи POSIX.</p><h4 id="statsctimens" tabindex="-1"><code>stats.ctimeNs</code> <a class="header-anchor" href="#statsctimens" aria-label="Permalink to “stats.ctimeNs”">​</a></h4><p><strong>Добавлено в: v12.10.0</strong></p><ul><li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/BigInt" target="_blank" rel="noreferrer">&lt;bigint&gt;</a></li></ul><p>Присутствует только тогда, когда в метод, генерирующий объект, передается <code>bigint: true</code>. Метка времени, указывающая время последнего изменения статуса файла, выраженное в наносекундах с эпохи POSIX.</p><h4 id="statsbirthtimens" tabindex="-1"><code>stats.birthtimeNs</code> <a class="header-anchor" href="#statsbirthtimens" aria-label="Permalink to “stats.birthtimeNs”">​</a></h4><p><strong>Добавлено в: v12.10.0</strong></p><ul><li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/BigInt" target="_blank" rel="noreferrer">&lt;bigint&gt;</a></li></ul><p>Присутствует только тогда, когда в метод, генерирующий объект, передается <code>bigint: true</code>. Метка времени, указывающая время создания этого файла, выраженное в наносекундах с эпохи POSIX.</p><h4 id="statsatime" tabindex="-1"><code>stats.atime</code> <a class="header-anchor" href="#statsatime" aria-label="Permalink to “stats.atime”">​</a></h4><p><strong>Добавлено в: v0.11.13</strong></p><ul><li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date" target="_blank" rel="noreferrer">&lt;Date&gt;</a></li></ul><p>Метка времени, указывающая время последнего доступа к этому файлу.</p><h4 id="statsmtime" tabindex="-1"><code>stats.mtime</code> <a class="header-anchor" href="#statsmtime" aria-label="Permalink to “stats.mtime”">​</a></h4><p><strong>Добавлено в: v0.11.13</strong></p><ul><li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date" target="_blank" rel="noreferrer">&lt;Date&gt;</a></li></ul><p>Метка времени, указывающая время последнего изменения этого файла.</p><h4 id="statsctime" tabindex="-1"><code>stats.ctime</code> <a class="header-anchor" href="#statsctime" aria-label="Permalink to “stats.ctime”">​</a></h4><p><strong>Добавлено в: v0.11.13</strong></p><ul><li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date" target="_blank" rel="noreferrer">&lt;Date&gt;</a></li></ul><p>Метка времени, указывающая время последнего изменения статуса файла.</p><h4 id="statsbirthtime" tabindex="-1"><code>stats.birthtime</code> <a class="header-anchor" href="#statsbirthtime" aria-label="Permalink to “stats.birthtime”">​</a></h4><p><strong>Добавлено в: v0.11.13</strong></p><ul><li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date" target="_blank" rel="noreferrer">&lt;Date&gt;</a></li></ul><p>Метка времени, указывающая время создания этого файла.</p><h4 id="stat-time-values" tabindex="-1">Значения времени Stat <a class="header-anchor" href="#stat-time-values" aria-label="Permalink to “Значения времени Stat”">​</a></h4><p>Свойства <code>atimeMs</code>, <code>mtimeMs</code>, <code>ctimeMs</code>, <code>birthtimeMs</code> являются числовыми значениями, которые содержат соответствующие времена в миллисекундах. Их точность зависит от платформы. Когда <code>bigint: true</code> передается в метод, который генерирует объект, свойства будут <a href="https://tc39.github.io/proposal-bigint" target="_blank" rel="noreferrer">bigint</a>, в противном случае они будут <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">числами</a>.</p><p>Свойства <code>atimeNs</code>, <code>mtimeNs</code>, <code>ctimeNs</code>, <code>birthtimeNs</code> являются <a href="https://tc39.github.io/proposal-bigint" target="_blank" rel="noreferrer">bigint</a>, которые содержат соответствующие времена в наносекундах. Они присутствуют только тогда, когда <code>bigint: true</code> передается в метод, который генерирует объект. Их точность зависит от платформы.</p><p><code>atime</code>, <code>mtime</code>, <code>ctime</code> и <code>birthtime</code> являются альтернативными представлениями <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date" target="_blank" rel="noreferrer"><code>Date</code></a> различных времен. Значения <code>Date</code> и число не связаны. Присвоение нового числового значения или изменение значения <code>Date</code> не будет отражено в соответствующем альтернативном представлении.</p><p>Время в объекте stat имеет следующую семантику:</p><ul><li><code>atime</code> &quot;Время доступа&quot;: Время последнего доступа к данным файла. Изменяется системными вызовами <a href="http://man7.org/linux/man-pages/man2/mknod.2" target="_blank" rel="noreferrer"><code>mknod(2)</code></a>, <a href="http://man7.org/linux/man-pages/man2/utimes.2" target="_blank" rel="noreferrer"><code>utimes(2)</code></a> и <a href="http://man7.org/linux/man-pages/man2/read.2" target="_blank" rel="noreferrer"><code>read(2)</code></a>.</li><li><code>mtime</code> &quot;Время изменения&quot;: Время последнего изменения данных файла. Изменяется системными вызовами <a href="http://man7.org/linux/man-pages/man2/mknod.2" target="_blank" rel="noreferrer"><code>mknod(2)</code></a>, <a href="http://man7.org/linux/man-pages/man2/utimes.2" target="_blank" rel="noreferrer"><code>utimes(2)</code></a> и <a href="http://man7.org/linux/man-pages/man2/write.2" target="_blank" rel="noreferrer"><code>write(2)</code></a>.</li><li><code>ctime</code> &quot;Время изменения&quot;: Время последнего изменения статуса файла (модификация данных inode). Изменяется системными вызовами <a href="http://man7.org/linux/man-pages/man2/chmod.2" target="_blank" rel="noreferrer"><code>chmod(2)</code></a>, <a href="http://man7.org/linux/man-pages/man2/chown.2" target="_blank" rel="noreferrer"><code>chown(2)</code></a>, <a href="http://man7.org/linux/man-pages/man2/link.2" target="_blank" rel="noreferrer"><code>link(2)</code></a>, <a href="http://man7.org/linux/man-pages/man2/mknod.2" target="_blank" rel="noreferrer"><code>mknod(2)</code></a>, <a href="http://man7.org/linux/man-pages/man2/rename.2" target="_blank" rel="noreferrer"><code>rename(2)</code></a>, <a href="http://man7.org/linux/man-pages/man2/unlink.2" target="_blank" rel="noreferrer"><code>unlink(2)</code></a>, <a href="http://man7.org/linux/man-pages/man2/utimes.2" target="_blank" rel="noreferrer"><code>utimes(2)</code></a>, <a href="http://man7.org/linux/man-pages/man2/read.2" target="_blank" rel="noreferrer"><code>read(2)</code></a> и <a href="http://man7.org/linux/man-pages/man2/write.2" target="_blank" rel="noreferrer"><code>write(2)</code></a>.</li><li><code>birthtime</code> &quot;Время создания&quot;: Время создания файла. Устанавливается один раз при создании файла. В файловых системах, где birthtime недоступно, это поле может вместо этого содержать либо <code>ctime</code>, либо <code>1970-01-01T00:00Z</code> (то есть метку времени Unix-эпохи <code>0</code>). В этом случае это значение может быть больше, чем <code>atime</code> или <code>mtime</code>. В Darwin и других вариантах FreeBSD также устанавливается, если <code>atime</code> явно установлено в более раннее значение, чем текущее <code>birthtime</code>, с помощью системного вызова <a href="http://man7.org/linux/man-pages/man2/utimes.2" target="_blank" rel="noreferrer"><code>utimes(2)</code></a>.</li></ul><p>До Node.js 0.12, <code>ctime</code> содержал <code>birthtime</code> в системах Windows. Начиная с 0.12, <code>ctime</code> не является &quot;временем создания&quot;, и в системах Unix им никогда не было.</p><h3 id="class-fsstatfs" tabindex="-1">Класс: <code>fs.StatFs</code> <a class="header-anchor" href="#class-fsstatfs" aria-label="Permalink to “Класс: fs.StatFs”">​</a></h3><p><strong>Добавлено в версии: v19.6.0, v18.15.0</strong></p><p>Предоставляет информацию о смонтированной файловой системе.</p><p>Объекты, возвращаемые из <a href="/ru/nodejs/api/fs#fsstatfspath-options-callback"><code>fs.statfs()</code></a> и ее синхронного аналога, имеют этот тип. Если <code>bigint</code> в <code>options</code>, переданных этим методам, имеет значение <code>true</code>, числовые значения будут <code>bigint</code> вместо <code>number</code>.</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">StatFs</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  type</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 1397114950,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  bsize:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 4096,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  blocks:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 121938943,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  bfree:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 61058895,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  bavail:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 61058895,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  files:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 999,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  ffree:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1000000</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>Версия <code>bigint</code>:</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">StatFs</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  type</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 1397114950n,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  bsize:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 4096n,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  blocks:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 121938943n,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  bfree:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 61058895n,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  bavail:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 61058895n,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  files:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 999n,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  ffree:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 1000000n</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h4 id="statfsbavail" tabindex="-1"><code>statfs.bavail</code> <a class="header-anchor" href="#statfsbavail" aria-label="Permalink to “statfs.bavail”">​</a></h4><p><strong>Добавлено в версии: v19.6.0, v18.15.0</strong></p><ul><li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;number&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/BigInt" target="_blank" rel="noreferrer">&lt;bigint&gt;</a></li></ul><p>Свободные блоки, доступные непривилегированным пользователям.</p><h4 id="statfsbfree" tabindex="-1"><code>statfs.bfree</code> <a class="header-anchor" href="#statfsbfree" aria-label="Permalink to “statfs.bfree”">​</a></h4><p><strong>Добавлено в версии: v19.6.0, v18.15.0</strong></p><ul><li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;number&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/BigInt" target="_blank" rel="noreferrer">&lt;bigint&gt;</a></li></ul><p>Свободные блоки в файловой системе.</p><h4 id="statfsblocks" tabindex="-1"><code>statfs.blocks</code> <a class="header-anchor" href="#statfsblocks" aria-label="Permalink to “statfs.blocks”">​</a></h4><p><strong>Добавлено в версии: v19.6.0, v18.15.0</strong></p><ul><li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;number&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/BigInt" target="_blank" rel="noreferrer">&lt;bigint&gt;</a></li></ul><p>Общее количество блоков данных в файловой системе.</p><h4 id="statfsbsize" tabindex="-1"><code>statfs.bsize</code> <a class="header-anchor" href="#statfsbsize" aria-label="Permalink to “statfs.bsize”">​</a></h4><p><strong>Добавлено в версии: v19.6.0, v18.15.0</strong></p><ul><li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;number&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/BigInt" target="_blank" rel="noreferrer">&lt;bigint&gt;</a></li></ul><p>Оптимальный размер блока передачи.</p><h4 id="statfsffree" tabindex="-1"><code>statfs.ffree</code> <a class="header-anchor" href="#statfsffree" aria-label="Permalink to “statfs.ffree”">​</a></h4><p><strong>Добавлено в версии: v19.6.0, v18.15.0</strong></p><ul><li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;number&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/BigInt" target="_blank" rel="noreferrer">&lt;bigint&gt;</a></li></ul><p>Свободные файловые узлы в файловой системе.</p><h4 id="statfsfiles" tabindex="-1"><code>statfs.files</code> <a class="header-anchor" href="#statfsfiles" aria-label="Permalink to “statfs.files”">​</a></h4><p><strong>Добавлено в: v19.6.0, v18.15.0</strong></p><ul><li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;number&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/BigInt" target="_blank" rel="noreferrer">&lt;bigint&gt;</a></li></ul><p>Общее количество файловых узлов в файловой системе.</p><h4 id="statfstype" tabindex="-1"><code>statfs.type</code> <a class="header-anchor" href="#statfstype" aria-label="Permalink to “statfs.type”">​</a></h4><p><strong>Добавлено в: v19.6.0, v18.15.0</strong></p><ul><li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;number&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/BigInt" target="_blank" rel="noreferrer">&lt;bigint&gt;</a></li></ul><p>Тип файловой системы.</p><h3 id="class-fswritestream" tabindex="-1">Класс: <code>fs.WriteStream</code> <a class="header-anchor" href="#class-fswritestream" aria-label="Permalink to “Класс: fs.WriteStream”">​</a></h3><p><strong>Добавлено в: v0.1.93</strong></p><ul><li>Наследует <a href="/ru/nodejs/api/stream#class-streamwritable">&lt;stream.Writable&gt;</a></li></ul><p>Экземпляры <a href="/ru/nodejs/api/fs#class-fswritestream">&lt;fs.WriteStream&gt;</a> создаются и возвращаются с помощью функции <a href="/ru/nodejs/api/fs#fscreatewritestreampath-options"><code>fs.createWriteStream()</code></a>.</p><h4 id="event-close_3" tabindex="-1">Событие: <code>&#39;close&#39;</code> <a class="header-anchor" href="#event-close_3" aria-label="Permalink to “Событие: &#39;close&#39;”">​</a></h4><p><strong>Добавлено в: v0.1.93</strong></p><p>Генерируется, когда базовый файловый дескриптор <a href="/ru/nodejs/api/fs#class-fswritestream">&lt;fs.WriteStream&gt;</a> был закрыт.</p><h4 id="event-open_1" tabindex="-1">Событие: <code>&#39;open&#39;</code> <a class="header-anchor" href="#event-open_1" aria-label="Permalink to “Событие: &#39;open&#39;”">​</a></h4><p><strong>Добавлено в: v0.1.93</strong></p><ul><li><code>fd</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;integer&gt;</a> Целочисленный файловый дескриптор, используемый <a href="/ru/nodejs/api/fs#class-fswritestream">&lt;fs.WriteStream&gt;</a>.</li></ul><p>Генерируется, когда файл <a href="/ru/nodejs/api/fs#class-fswritestream">&lt;fs.WriteStream&gt;</a> открыт.</p><h4 id="event-ready_1" tabindex="-1">Событие: <code>&#39;ready&#39;</code> <a class="header-anchor" href="#event-ready_1" aria-label="Permalink to “Событие: &#39;ready&#39;”">​</a></h4><p><strong>Добавлено в: v9.11.0</strong></p><p>Генерируется, когда <a href="/ru/nodejs/api/fs#class-fswritestream">&lt;fs.WriteStream&gt;</a> готов к использованию.</p><p>Срабатывает сразу после <code>&#39;open&#39;</code>.</p><h4 id="writestreambyteswritten" tabindex="-1"><code>writeStream.bytesWritten</code> <a class="header-anchor" href="#writestreambyteswritten" aria-label="Permalink to “writeStream.bytesWritten”">​</a></h4><p><strong>Добавлено в: v0.4.7</strong></p><p>Количество записанных к настоящему моменту байтов. Не включает данные, которые все еще находятся в очереди на запись.</p><h4 id="writestreamclosecallback" tabindex="-1"><code>writeStream.close([callback])</code> <a class="header-anchor" href="#writestreamclosecallback" aria-label="Permalink to “writeStream.close([callback])”">​</a></h4><p><strong>Добавлено в: v0.9.4</strong></p><ul><li><code>callback</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function" target="_blank" rel="noreferrer">&lt;Function&gt;</a><ul><li><code>err</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error" target="_blank" rel="noreferrer">&lt;Error&gt;</a></li></ul></li></ul><p>Закрывает <code>writeStream</code>. Необязательно принимает обратный вызов, который будет выполнен после закрытия <code>writeStream</code>.</p><h4 id="writestreampath" tabindex="-1"><code>writeStream.path</code> <a class="header-anchor" href="#writestreampath" aria-label="Permalink to “writeStream.path”">​</a></h4><p><strong>Добавлено в версии: v0.1.93</strong></p><p>Путь к файлу, в который поток записывает данные, указанный в качестве первого аргумента в <a href="/ru/nodejs/api/fs#fscreatewritestreampath-options"><code>fs.createWriteStream()</code></a>. Если <code>path</code> передается в виде строки, то <code>writeStream.path</code> будет строкой. Если <code>path</code> передается в виде <a href="/ru/nodejs/api/buffer#class-buffer">&lt;Buffer&gt;</a>, то <code>writeStream.path</code> будет <a href="/ru/nodejs/api/buffer#class-buffer">&lt;Buffer&gt;</a>.</p><h4 id="writestreampending" tabindex="-1"><code>writeStream.pending</code> <a class="header-anchor" href="#writestreampending" aria-label="Permalink to “writeStream.pending”">​</a></h4><p><strong>Добавлено в версии: v11.2.0</strong></p><ul><li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" target="_blank" rel="noreferrer">&lt;boolean&gt;</a></li></ul><p>Это свойство имеет значение <code>true</code>, если базовый файл еще не был открыт, т.е. до того, как будет сгенерировано событие <code>&#39;ready&#39;</code>.</p><h3 id="fsconstants" tabindex="-1"><code>fs.constants</code> <a class="header-anchor" href="#fsconstants" aria-label="Permalink to “fs.constants”">​</a></h3><ul><li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noreferrer">&lt;Object&gt;</a></li></ul><p>Возвращает объект, содержащий часто используемые константы для операций с файловой системой.</p><h4 id="fs-constants" tabindex="-1">Константы FS <a class="header-anchor" href="#fs-constants" aria-label="Permalink to “Константы FS”">​</a></h4><p>Следующие константы экспортируются <code>fs.constants</code> и <code>fsPromises.constants</code>.</p><p>Не каждая константа будет доступна в каждой операционной системе; это особенно важно для Windows, где многие специфичные для POSIX определения недоступны. Для переносимых приложений рекомендуется проверять их наличие перед использованием.</p><p>Чтобы использовать более одной константы, используйте побитовое ИЛИ <code>|</code>.</p><p>Пример:</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { open, constants } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;node:fs&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  O_RDWR</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  O_CREAT</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  O_EXCL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">} </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> constants;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">open</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;/path/to/my/file&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">O_RDWR</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> O_CREAT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> O_EXCL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">err</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">fd</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // ...</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h5 id="file-access-constants" tabindex="-1">Константы доступа к файлам <a class="header-anchor" href="#file-access-constants" aria-label="Permalink to “Константы доступа к файлам”">​</a></h5><p>Следующие константы предназначены для использования в качестве параметра <code>mode</code>, передаваемого в <a href="/ru/nodejs/api/fs#fspromisesaccesspath-mode"><code>fsPromises.access()</code></a>, <a href="/ru/nodejs/api/fs#fsaccesspath-mode-callback"><code>fs.access()</code></a> и <a href="/ru/nodejs/api/fs#fsaccesssyncpath-mode"><code>fs.accessSync()</code></a>.</p><table tabindex="0"><thead><tr><th>Константа</th><th>Описание</th></tr></thead><tbody><tr><td><code>F_OK</code></td><td>Флаг, указывающий, что файл виден вызывающему процессу. Это полезно для определения существования файла, но ничего не говорит о разрешениях <code>rwx</code>. Значение по умолчанию, если режим не указан.</td></tr><tr><td><code>R_OK</code></td><td>Флаг, указывающий, что файл может быть прочитан вызывающим процессом.</td></tr><tr><td><code>W_OK</code></td><td>Флаг, указывающий, что файл может быть записан вызывающим процессом.</td></tr><tr><td><code>X_OK</code></td><td>Флаг, указывающий, что файл может быть выполнен вызывающим процессом. Это не влияет на Windows (будет вести себя как <code>fs.constants.F_OK</code>).</td></tr><tr><td>Определения также доступны в Windows.</td><td></td></tr></tbody></table><h5 id="file-copy-constants" tabindex="-1">Константы для копирования файлов <a class="header-anchor" href="#file-copy-constants" aria-label="Permalink to “Константы для копирования файлов”">​</a></h5><p>Следующие константы предназначены для использования с <a href="/ru/nodejs/api/fs#fscopyfilesrc-dest-mode-callback"><code>fs.copyFile()</code></a>.</p><table tabindex="0"><thead><tr><th>Константа</th><th>Описание</th></tr></thead><tbody><tr><td><code>COPYFILE_EXCL</code></td><td>Если присутствует, операция копирования завершится с ошибкой, если путь назначения уже существует.</td></tr><tr><td><code>COPYFILE_FICLONE</code></td><td>Если присутствует, операция копирования попытается создать reflink copy-on-write. Если базовая платформа не поддерживает copy-on-write, используется резервный механизм копирования.</td></tr><tr><td><code>COPYFILE_FICLONE_FORCE</code></td><td>Если присутствует, операция копирования попытается создать reflink copy-on-write. Если базовая платформа не поддерживает copy-on-write, операция завершится с ошибкой.</td></tr><tr><td>Определения также доступны в Windows.</td><td></td></tr></tbody></table><h5 id="file-open-constants" tabindex="-1">Константы для открытия файлов <a class="header-anchor" href="#file-open-constants" aria-label="Permalink to “Константы для открытия файлов”">​</a></h5><p>Следующие константы предназначены для использования с <code>fs.open()</code>.</p><table tabindex="0"><thead><tr><th>Константа</th><th>Описание</th></tr></thead><tbody><tr><td><code>O_RDONLY</code></td><td>Флаг, указывающий на открытие файла только для чтения.</td></tr><tr><td><code>O_WRONLY</code></td><td>Флаг, указывающий на открытие файла только для записи.</td></tr><tr><td><code>O_RDWR</code></td><td>Флаг, указывающий на открытие файла для чтения и записи.</td></tr><tr><td><code>O_CREAT</code></td><td>Флаг, указывающий на создание файла, если он еще не существует.</td></tr><tr><td><code>O_EXCL</code></td><td>Флаг, указывающий, что открытие файла должно завершиться неудачей, если установлен флаг <code>O_CREAT</code> и файл уже существует.</td></tr><tr><td><code>O_NOCTTY</code></td><td>Флаг, указывающий, что если путь идентифицирует терминальное устройство, открытие пути не должно приводить к тому, что этот терминал станет управляющим терминалом для процесса (если у процесса еще нет его).</td></tr><tr><td><code>O_TRUNC</code></td><td>Флаг, указывающий, что если файл существует и является обычным файлом, и файл успешно открыт для записи, его длина должна быть усечена до нуля.</td></tr><tr><td><code>O_APPEND</code></td><td>Флаг, указывающий, что данные будут добавлены в конец файла.</td></tr><tr><td><code>O_DIRECTORY</code></td><td>Флаг, указывающий, что открытие должно завершиться неудачей, если путь не является каталогом.</td></tr><tr><td><code>O_NOATIME</code></td><td>Флаг, указывающий, что операции чтения в файловой системе больше не приведут к обновлению информации <code>atime</code>, связанной с файлом. Этот флаг доступен только в операционных системах Linux.</td></tr><tr><td><code>O_NOFOLLOW</code></td><td>Флаг, указывающий, что открытие должно завершиться неудачей, если путь является символической ссылкой.</td></tr><tr><td><code>O_SYNC</code></td><td>Флаг, указывающий, что файл открыт для синхронизированного ввода-вывода с операциями записи, ожидающими целостности файла.</td></tr><tr><td><code>O_DSYNC</code></td><td>Флаг, указывающий, что файл открыт для синхронизированного ввода-вывода с операциями записи, ожидающими целостности данных.</td></tr><tr><td><code>O_SYMLINK</code></td><td>Флаг, указывающий на открытие самой символической ссылки, а не ресурса, на который она указывает.</td></tr><tr><td><code>O_DIRECT</code></td><td>Если установлено, будет предпринята попытка минимизировать эффекты кэширования ввода-вывода файла.</td></tr><tr><td><code>O_NONBLOCK</code></td><td>Флаг, указывающий на открытие файла в неблокирующем режиме, когда это возможно.</td></tr><tr><td><code>UV_FS_O_FILEMAP</code></td><td>Если установлено, для доступа к файлу используется отображение файла в памяти. Этот флаг доступен только в операционных системах Windows. В других операционных системах этот флаг игнорируется.</td></tr><tr><td>В Windows доступны только <code>O_APPEND</code>, <code>O_CREAT</code>, <code>O_EXCL</code>, <code>O_RDONLY</code>, <code>O_RDWR</code>, <code>O_TRUNC</code>, <code>O_WRONLY</code> и <code>UV_FS_O_FILEMAP</code>.</td><td></td></tr></tbody></table><h5 id="file-type-constants" tabindex="-1">Константы типов файлов <a class="header-anchor" href="#file-type-constants" aria-label="Permalink to “Константы типов файлов”">​</a></h5><p>Следующие константы предназначены для использования со свойством <code>mode</code> объекта <a href="/ru/nodejs/api/fs#class-fsstats">&lt;fs.Stats&gt;</a> для определения типа файла.</p><table tabindex="0"><thead><tr><th>Константа</th><th>Описание</th></tr></thead><tbody><tr><td><code>S_IFMT</code></td><td>Битовая маска, используемая для извлечения кода типа файла.</td></tr><tr><td><code>S_IFREG</code></td><td>Константа типа файла для обычного файла.</td></tr><tr><td><code>S_IFDIR</code></td><td>Константа типа файла для каталога.</td></tr><tr><td><code>S_IFCHR</code></td><td>Константа типа файла для файла символьного устройства.</td></tr><tr><td><code>S_IFBLK</code></td><td>Константа типа файла для файла блочного устройства.</td></tr><tr><td><code>S_IFIFO</code></td><td>Константа типа файла для FIFO/pipe.</td></tr><tr><td><code>S_IFLNK</code></td><td>Константа типа файла для символической ссылки.</td></tr><tr><td><code>S_IFSOCK</code></td><td>Константа типа файла для сокета.</td></tr><tr><td>В Windows доступны только <code>S_IFCHR</code>, <code>S_IFDIR</code>, <code>S_IFLNK</code>, <code>S_IFMT</code> и <code>S_IFREG</code>.</td><td></td></tr></tbody></table><h5 id="file-mode-constants" tabindex="-1">Константы режима файла <a class="header-anchor" href="#file-mode-constants" aria-label="Permalink to “Константы режима файла”">​</a></h5><p>Следующие константы предназначены для использования со свойством <code>mode</code> объекта <a href="/ru/nodejs/api/fs#class-fsstats">&lt;fs.Stats&gt;</a> для определения прав доступа к файлу.</p><table tabindex="0"><thead><tr><th>Константа</th><th>Описание</th></tr></thead><tbody><tr><td><code>S_IRWXU</code></td><td>Режим файла, указывающий на возможность чтения, записи и выполнения владельцем.</td></tr><tr><td><code>S_IRUSR</code></td><td>Режим файла, указывающий на возможность чтения владельцем.</td></tr><tr><td><code>S_IWUSR</code></td><td>Режим файла, указывающий на возможность записи владельцем.</td></tr><tr><td><code>S_IXUSR</code></td><td>Режим файла, указывающий на возможность выполнения владельцем.</td></tr><tr><td><code>S_IRWXG</code></td><td>Режим файла, указывающий на возможность чтения, записи и выполнения группой.</td></tr><tr><td><code>S_IRGRP</code></td><td>Режим файла, указывающий на возможность чтения группой.</td></tr><tr><td><code>S_IWGRP</code></td><td>Режим файла, указывающий на возможность записи группой.</td></tr><tr><td><code>S_IXGRP</code></td><td>Режим файла, указывающий на возможность выполнения группой.</td></tr><tr><td><code>S_IRWXO</code></td><td>Режим файла, указывающий на возможность чтения, записи и выполнения другими.</td></tr><tr><td><code>S_IROTH</code></td><td>Режим файла, указывающий на возможность чтения другими.</td></tr><tr><td><code>S_IWOTH</code></td><td>Режим файла, указывающий на возможность записи другими.</td></tr><tr><td><code>S_IXOTH</code></td><td>Режим файла, указывающий на возможность выполнения другими.</td></tr><tr><td>В Windows доступны только <code>S_IRUSR</code> и <code>S_IWUSR</code>.</td><td></td></tr></tbody></table><h2 id="notes" tabindex="-1">Заметки <a class="header-anchor" href="#notes" aria-label="Permalink to “Заметки”">​</a></h2><h3 id="ordering-of-callback-and-promise-based-operations" tabindex="-1">Порядок операций на основе обратных вызовов и промисов <a class="header-anchor" href="#ordering-of-callback-and-promise-based-operations" aria-label="Permalink to “Порядок операций на основе обратных вызовов и промисов”">​</a></h3><p>Поскольку они выполняются асинхронно базовым пулом потоков, нет гарантированного порядка при использовании методов на основе обратных вызовов или промисов.</p><p>Например, следующее подвержено ошибкам, поскольку операция <code>fs.stat()</code> может завершиться до операции <code>fs.rename()</code>:</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> fs</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;node:fs&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">fs.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">rename</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;/tmp/hello&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;/tmp/world&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">err</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (err) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">throw</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> err;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;renamed complete&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">fs.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">stat</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;/tmp/world&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">err</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">stats</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (err) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">throw</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> err;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">\`stats: \${</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">JSON</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">stringify</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">stats</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">)</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}\`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>Важно правильно упорядочить операции, дождавшись результатов одной, прежде чем вызывать другую:</p><div class="vp-code-group"><div class="tabs"><input type="radio" name="group-14573" id="tab-14574" checked><label data-title="ESM" for="tab-14574">ESM</label><input type="radio" name="group-14573" id="tab-14575"><label data-title="CJS" for="tab-14575">CJS</label></div><div class="blocks"><div class="language-js active line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { rename, stat } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;node:fs/promises&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> oldPath</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;/tmp/hello&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> newPath</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;/tmp/world&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">try</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> rename</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(oldPath, newPath);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> stats</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> stat</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(newPath);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">\`stats: \${</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">JSON</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">stringify</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">stats</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">)</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}\`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">} </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">catch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (error) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;there was an error:&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, error.message);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">rename</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">stat</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;node:fs/promises&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">async</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">oldPath</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">newPath</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  try</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> rename</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(oldPath, newPath);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> stats</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> stat</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(newPath);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">\`stats: \${</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">JSON</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">stringify</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">stats</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">)</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}\`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">catch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (error) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;there was an error:&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, error.message);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;/tmp/hello&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;/tmp/world&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div></div></div><p>Или, при использовании API обратных вызовов, переместите вызов <code>fs.stat()</code> в обратный вызов операции <code>fs.rename()</code>:</p><div class="vp-code-group"><div class="tabs"><input type="radio" name="group-14580" id="tab-14581" checked><label data-title="ESM" for="tab-14581">ESM</label><input type="radio" name="group-14580" id="tab-14582"><label data-title="CJS" for="tab-14582">CJS</label></div><div class="blocks"><div class="language-js active line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { rename, stat } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;node:fs&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">rename</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;/tmp/hello&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;/tmp/world&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">err</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (err) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">throw</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> err;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  stat</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;/tmp/world&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">err</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">stats</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (err) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">throw</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> err;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">\`stats: \${</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">JSON</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">stringify</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">stats</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">)</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}\`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">rename</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">stat</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;node:fs/promises&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">rename</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;/tmp/hello&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;/tmp/world&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">err</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (err) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">throw</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> err;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  stat</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;/tmp/world&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">err</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">stats</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (err) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">throw</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> err;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">\`stats: \${</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">JSON</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">stringify</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">stats</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">)</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}\`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div></div></div><h3 id="file-paths" tabindex="-1">Пути к файлам <a class="header-anchor" href="#file-paths" aria-label="Permalink to “Пути к файлам”">​</a></h3><p>Большинство операций <code>fs</code> принимают пути к файлам, которые могут быть указаны в виде строки, <a href="/ru/nodejs/api/buffer#class-buffer">&lt;Buffer&gt;</a> или объекта <a href="/ru/nodejs/api/url#the-whatwg-url-api">&lt;URL&gt;</a> с использованием протокола <code>file:</code>.</p><h4 id="string-paths" tabindex="-1">Строковые пути <a class="header-anchor" href="#string-paths" aria-label="Permalink to “Строковые пути”">​</a></h4><p>Строковые пути интерпретируются как последовательности символов UTF-8, идентифицирующие абсолютное или относительное имя файла. Относительные пути будут разрешаться относительно текущего рабочего каталога, определяемого вызовом <code>process.cwd()</code>.</p><p>Пример использования абсолютного пути в POSIX:</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { open } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;node:fs/promises&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> fd;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">try</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  fd </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> open</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;/open/some/file.txt&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;r&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // Do something with the file</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">} </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">finally</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> fd?.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">close</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>Пример использования относительного пути в POSIX (относительно <code>process.cwd()</code>):</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { open } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;node:fs/promises&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> fd;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">try</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  fd </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> open</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;file.txt&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;r&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // Do something with the file</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">} </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">finally</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> fd?.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">close</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h4 id="file-url-paths" tabindex="-1">Пути File URL <a class="header-anchor" href="#file-url-paths" aria-label="Permalink to “Пути File URL”">​</a></h4><p><strong>Добавлено в: v7.6.0</strong></p><p>Для большинства функций модуля <code>node:fs</code> аргумент <code>path</code> или <code>filename</code> может быть передан как объект <a href="/ru/nodejs/api/url#the-whatwg-url-api">&lt;URL&gt;</a> с использованием протокола <code>file:</code>.</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { readFileSync } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;node:fs&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">readFileSync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> URL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;file:///tmp/hello&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">));</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><code>file:</code> URLs всегда являются абсолютными путями.</p><h5 id="platform-specific-considerations" tabindex="-1">Специфические для платформы соображения <a class="header-anchor" href="#platform-specific-considerations" aria-label="Permalink to “Специфические для платформы соображения”">​</a></h5><p>В Windows <code>file:</code> <a href="/ru/nodejs/api/url#the-whatwg-url-api">&lt;URL&gt;</a> с именем хоста преобразуются в UNC-пути, в то время как <code>file:</code> <a href="/ru/nodejs/api/url#the-whatwg-url-api">&lt;URL&gt;</a> с буквами дисков преобразуются в локальные абсолютные пути. <code>file:</code> <a href="/ru/nodejs/api/url#the-whatwg-url-api">&lt;URL&gt;</a> без имени хоста и без буквы диска приведут к ошибке:</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { readFileSync } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;node:fs&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// On Windows :</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// - WHATWG file URLs with hostname convert to UNC path</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// file://hostname/p/a/t/h/file =&gt; \\\\hostname\\p\\a\\t\\h\\file</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">readFileSync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> URL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;file://hostname/p/a/t/h/file&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">));</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// - WHATWG file URLs with drive letters convert to absolute path</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// file:///C:/tmp/hello =&gt; C:\\tmp\\hello</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">readFileSync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> URL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;file:///C:/tmp/hello&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">));</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// - WHATWG file URLs without hostname must have a drive letters</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">readFileSync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> URL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;file:///notdriveletter/p/a/t/h/file&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">));</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">readFileSync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> URL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;file:///c/p/a/t/h/file&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">));</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// TypeError [ERR_INVALID_FILE_URL_PATH]: File URL path must be absolute</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p><code>file:</code> <a href="/ru/nodejs/api/url#the-whatwg-url-api">&lt;URL&gt;</a> с буквами дисков должны использовать <code>:</code> в качестве разделителя сразу после буквы диска. Использование другого разделителя приведет к ошибке.</p><p>На всех других платформах <code>file:</code> <a href="/ru/nodejs/api/url#the-whatwg-url-api">&lt;URL&gt;</a> с именем хоста не поддерживаются и приведут к ошибке:</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { readFileSync } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;node:fs&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// On other platforms:</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// - WHATWG file URLs with hostname are unsupported</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// file://hostname/p/a/t/h/file =&gt; throw!</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">readFileSync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> URL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;file://hostname/p/a/t/h/file&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">));</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// TypeError [ERR_INVALID_FILE_URL_PATH]: must be absolute</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// - WHATWG file URLs convert to absolute path</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// file:///tmp/hello =&gt; /tmp/hello</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">readFileSync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> URL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;file:///tmp/hello&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">));</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p><code>file:</code> <a href="/ru/nodejs/api/url#the-whatwg-url-api">&lt;URL&gt;</a>, содержащий закодированные символы косой черты, приведет к ошибке на всех платформах:</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { readFileSync } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;node:fs&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// On Windows</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">readFileSync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> URL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;file:///C:/p/a/t/h/%2F&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">));</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">readFileSync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> URL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;file:///C:/p/a/t/h/%2f&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">));</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/* TypeError [ERR_INVALID_FILE_URL_PATH]: File URL path must not include encoded</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">\\ or / characters */</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// On POSIX</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">readFileSync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> URL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;file:///p/a/t/h/%2F&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">));</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">readFileSync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> URL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;file:///p/a/t/h/%2f&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">));</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/* TypeError [ERR_INVALID_FILE_URL_PATH]: File URL path must not include encoded</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/ characters */</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>В Windows <code>file:</code> <a href="/ru/nodejs/api/url#the-whatwg-url-api">&lt;URL&gt;</a>, содержащий закодированный обратный слеш, приведет к ошибке:</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { readFileSync } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;node:fs&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// On Windows</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">readFileSync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> URL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;file:///C:/path/%5C&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">));</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">readFileSync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> URL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;file:///C:/path/%5c&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">));</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/* TypeError [ERR_INVALID_FILE_URL_PATH]: File URL path must not include encoded</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">\\ or / characters */</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h4 id="buffer-paths" tabindex="-1">Пути буфера <a class="header-anchor" href="#buffer-paths" aria-label="Permalink to “Пути буфера”">​</a></h4><p>Пути, указанные с использованием <a href="/ru/nodejs/api/buffer#class-buffer">&lt;Buffer&gt;</a>, полезны в основном в некоторых операционных системах POSIX, которые рассматривают пути к файлам как непрозрачные последовательности байтов. В таких системах возможно, что один путь к файлу содержит подпоследовательности, использующие несколько кодировок символов. Как и в случае строковых путей, пути <a href="/ru/nodejs/api/buffer#class-buffer">&lt;Buffer&gt;</a> могут быть относительными или абсолютными:</p><p>Пример использования абсолютного пути в POSIX:</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { open } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;node:fs/promises&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { Buffer } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;node:buffer&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> fd;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">try</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  fd </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> open</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Buffer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;/open/some/file.txt&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">), </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;r&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // Что-то делаем с файлом</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">} </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">finally</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> fd?.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">close</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h4 id="per-drive-working-directories-on-windows" tabindex="-1">Рабочие каталоги для каждого диска в Windows <a class="header-anchor" href="#per-drive-working-directories-on-windows" aria-label="Permalink to “Рабочие каталоги для каждого диска в Windows”">​</a></h4><p>В Windows Node.js следует концепции рабочего каталога для каждого диска. Это поведение можно наблюдать при использовании пути к диску без обратной косой черты. Например, <code>fs.readdirSync(&#39;C:\\\\&#39;)</code> потенциально может вернуть результат, отличный от <code>fs.readdirSync(&#39;C:&#39;)</code>. Для получения дополнительной информации см. <a href="https://docs.microsoft.com/en-us/windows/desktop/FileIO/naming-a-file#fully-qualified-vs-relative-paths" target="_blank" rel="noreferrer">эту страницу MSDN</a>.</p><h3 id="file-descriptors_1" tabindex="-1">Файловые дескрипторы <a class="header-anchor" href="#file-descriptors_1" aria-label="Permalink to “Файловые дескрипторы”">​</a></h3><p>В системах POSIX для каждого процесса ядро ведет таблицу текущих открытых файлов и ресурсов. Каждому открытому файлу присваивается простой числовой идентификатор, называемый <em>файловым дескриптором</em>. На системном уровне все операции с файловой системой используют эти файловые дескрипторы для идентификации и отслеживания каждого конкретного файла. Системы Windows используют другой, но концептуально похожий механизм для отслеживания ресурсов. Чтобы упростить задачу для пользователей, Node.js абстрагируется от различий между операционными системами и присваивает всем открытым файлам числовой файловый дескриптор.</p><p>Метод <code>fs.open()</code> на основе обратного вызова и синхронный метод <code>fs.openSync()</code> открывают файл и выделяют новый файловый дескриптор. После выделения файловый дескриптор можно использовать для чтения данных из файла, записи данных в файл или запроса информации о файле.</p><p>Операционные системы ограничивают количество файловых дескрипторов, которые могут быть открыты в любой момент времени, поэтому крайне важно закрывать дескриптор после завершения операций. Невыполнение этого требования приведет к утечке памяти, которая в конечном итоге приведет к сбою приложения.</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { open, close, fstat } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;node:fs&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> closeFd</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">fd</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  close</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(fd, (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">err</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (err) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">throw</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> err;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">open</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;/open/some/file.txt&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;r&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">err</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">fd</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (err) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">throw</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> err;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  try</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    fstat</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(fd, (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">err</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">stat</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (err) {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        closeFd</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(fd);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        throw</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> err;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      // используем stat</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">      closeFd</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(fd);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">catch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (err) {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    closeFd</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(fd);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    throw</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> err;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><p>API на основе промисов используют объект <a href="/ru/nodejs/api/fs#class-filehandle">&lt;FileHandle&gt;</a> вместо числового файлового дескриптора. Этими объектами лучше управляет система, чтобы гарантировать отсутствие утечки ресурсов. Однако по-прежнему требуется, чтобы они были закрыты после завершения операций:</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { open } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;node:fs/promises&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> file;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">try</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  file </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> open</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;/open/some/file.txt&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;r&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> stat</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> file.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">stat</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // используем stat</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">} </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">finally</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> file.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">close</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h3 id="threadpool-usage" tabindex="-1">Использование пула потоков <a class="header-anchor" href="#threadpool-usage" aria-label="Permalink to “Использование пула потоков”">​</a></h3><p>Все API файловой системы, основанные на обратных вызовах и промисах (за исключением <code>fs.FSWatcher()</code>), используют пул потоков libuv. Это может иметь неожиданные и негативные последствия для производительности некоторых приложений. Дополнительную информацию можно найти в документации <a href="/ru/nodejs/api/cli#uv-threadpool-sizesize"><code>UV_THREADPOOL_SIZE</code></a>.</p><h3 id="file-system-flags" tabindex="-1">Флаги файловой системы <a class="header-anchor" href="#file-system-flags" aria-label="Permalink to “Флаги файловой системы”">​</a></h3><p>Следующие флаги доступны везде, где опция <code>flag</code> принимает строку.</p><ul><li><code>&#39;a&#39;</code>: Открыть файл для добавления. Файл создается, если он не существует.</li><li><code>&#39;ax&#39;</code>: Как <code>&#39;a&#39;</code>, но завершается с ошибкой, если путь существует.</li><li><code>&#39;a+&#39;</code>: Открыть файл для чтения и добавления. Файл создается, если он не существует.</li><li><code>&#39;ax+&#39;</code>: Как <code>&#39;a+&#39;</code>, но завершается с ошибкой, если путь существует.</li><li><code>&#39;as&#39;</code>: Открыть файл для добавления в синхронном режиме. Файл создается, если он не существует.</li><li><code>&#39;as+&#39;</code>: Открыть файл для чтения и добавления в синхронном режиме. Файл создается, если он не существует.</li><li><code>&#39;r&#39;</code>: Открыть файл для чтения. Возникает исключение, если файл не существует.</li><li><code>&#39;rs&#39;</code>: Открыть файл для чтения в синхронном режиме. Возникает исключение, если файл не существует.</li><li><code>&#39;r+&#39;</code>: Открыть файл для чтения и записи. Возникает исключение, если файл не существует.</li><li><code>&#39;rs+&#39;</code>: Открыть файл для чтения и записи в синхронном режиме. Указывает операционной системе обходить локальный кеш файловой системы. Это в основном полезно для открытия файлов на NFS-монтированиях, поскольку позволяет пропустить потенциально устаревший локальный кеш. Это оказывает очень реальное влияние на производительность ввода-вывода, поэтому не рекомендуется использовать этот флаг, если это не требуется. Это не превращает <code>fs.open()</code> или <code>fsPromises.open()</code> в синхронный блокирующий вызов. Если требуется синхронная операция, следует использовать что-то вроде <code>fs.openSync()</code>.</li><li><code>&#39;w&#39;</code>: Открыть файл для записи. Файл создается (если он не существует) или усекается (если он существует).</li><li><code>&#39;wx&#39;</code>: Как <code>&#39;w&#39;</code>, но завершается с ошибкой, если путь существует.</li><li><code>&#39;w+&#39;</code>: Открыть файл для чтения и записи. Файл создается (если он не существует) или усекается (если он существует).</li><li><code>&#39;wx+&#39;</code>: Как <code>&#39;w+&#39;</code>, но завершается с ошибкой, если путь существует.</li></ul><p><code>flag</code> также может быть числом, как указано в <a href="http://man7.org/linux/man-pages/man2/open.2" target="_blank" rel="noreferrer"><code>open(2)</code></a>; часто используемые константы доступны из <code>fs.constants</code>. В Windows флаги преобразуются в их эквиваленты, где это применимо, например, <code>O_WRONLY</code> в <code>FILE_GENERIC_WRITE</code> или <code>O_EXCL|O_CREAT</code> в <code>CREATE_NEW</code>, как это принимается <code>CreateFileW</code>.</p><p>Эксклюзивный флаг <code>&#39;x&#39;</code> (флаг <code>O_EXCL</code> в <a href="http://man7.org/linux/man-pages/man2/open.2" target="_blank" rel="noreferrer"><code>open(2)</code></a>) приводит к тому, что операция возвращает ошибку, если путь уже существует. В POSIX, если путь является символической ссылкой, использование <code>O_EXCL</code> возвращает ошибку, даже если ссылка указывает на путь, который не существует. Эксклюзивный флаг может не работать с сетевыми файловыми системами.</p><p>В Linux позиционные записи не работают, когда файл открыт в режиме добавления. Ядро игнорирует аргумент позиции и всегда добавляет данные в конец файла.</p><p>Изменение файла, а не его замена, может потребовать установки опции <code>flag</code> в <code>&#39;r+&#39;</code> вместо значения по умолчанию <code>&#39;w&#39;</code>.</p><p>Поведение некоторых флагов зависит от платформы. Таким образом, открытие каталога в macOS и Linux с флагом <code>&#39;a+&#39;</code>, как в примере ниже, вернет ошибку. Напротив, в Windows и FreeBSD будет возвращен файловый дескриптор или <code>FileHandle</code>.</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// macOS и Linux</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">fs.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">open</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;&lt;directory&gt;&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;a+&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">err</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">fd</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // =&gt; [Error: EISDIR: illegal operation on a directory, open &lt;directory&gt;]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Windows и FreeBSD</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">fs.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">open</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;&lt;directory&gt;&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;a+&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">err</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">fd</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // =&gt; null, &lt;fd&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>В Windows открытие существующего скрытого файла с использованием флага <code>&#39;w&#39;</code> (либо через <code>fs.open()</code>, <code>fs.writeFile()</code> или <code>fsPromises.open()</code>) завершится с ошибкой <code>EPERM</code>. Существующие скрытые файлы можно открыть для записи с помощью флага <code>&#39;r+&#39;</code>.</p><p>Вызов <code>fs.ftruncate()</code> или <code>filehandle.truncate()</code> можно использовать для сброса содержимого файла.</p>`,1502)])}var s=e(a,[[`render`,o]]);export{i as __pageData,s as default};