import{__plugin_vue_export_helper_default as e,createElementBlock as t,createStaticVNode as n,openBlock as r}from"./chunks/plugin-vue_export-helper.Bts1mPc7.js";const i=JSON.parse(`{"title":"Documentation des paquets Node.js","description":"Découvrez la documentation officielle de Node.js sur les paquets, y compris comment les gérer, les créer et les publier, avec des détails sur package.json, les dépendances et les outils de gestion de paquets.","frontmatter":{"title":"Documentation des paquets Node.js","description":"Découvrez la documentation officielle de Node.js sur les paquets, y compris comment les gérer, les créer et les publier, avec des détails sur package.json, les dépendances et les outils de gestion de paquets.","head":[["meta",{"name":"og:title","content":"Documentation des paquets Node.js | Node.js - iDoc.dev"}],["meta",{"name":"og:description","content":"Découvrez la documentation officielle de Node.js sur les paquets, y compris comment les gérer, les créer et les publier, avec des détails sur package.json, les dépendances et les outils de gestion de paquets."}],["meta",{"name":"twitter:title","content":"Documentation des paquets Node.js | Node.js - iDoc.dev"}],["meta",{"name":"twitter:description","content":"Découvrez la documentation officielle de Node.js sur les paquets, y compris comment les gérer, les créer et les publier, avec des détails sur package.json, les dépendances et les outils de gestion de paquets."}],["link",{"rel":"canonical","href":"https://idoc.dev/fr/nodejs/api/packages"}],["meta",{"property":"og:url","content":"https://idoc.dev/fr/nodejs/api/packages"}]]},"headers":[],"relativePath":"fr/nodejs/api/packages.md","filePath":"fr/nodejs/api/packages.md","lastUpdated":null}`),a={name:`fr/nodejs/api/packages.md`};function o(e,i,a,o,s,c){return r(),t(`div`,null,i[0]||=[n(`<h1 id="modules-packages" tabindex="-1">Modules\xA0: Packages <a class="header-anchor" href="#modules-packages" aria-label="Permalink to “Modules\xA0: Packages”">​</a></h1><div class="info custom-block"><p class="custom-block-title">[Historique]</p><table tabindex="0"><thead><tr><th style="text-align:left;">Version</th><th style="text-align:left;">Modifications</th></tr></thead><tbody><tr><td style="text-align:left;">v14.13.0, v12.20.0</td><td style="text-align:left;">Ajout de la prise en charge des modèles <code>&quot;exports&quot;</code>.</td></tr><tr><td style="text-align:left;">v14.6.0, v12.19.0</td><td style="text-align:left;">Ajout du champ <code>&quot;imports&quot;</code> du package.</td></tr><tr><td style="text-align:left;">v13.7.0, v12.17.0</td><td style="text-align:left;">Suppression du marquage conditionnel des exports.</td></tr><tr><td style="text-align:left;">v13.7.0, v12.16.0</td><td style="text-align:left;">Suppression de l&#39;option <code>--experimental-conditional-exports</code>. Dans la version\xA012.16.0, les exports conditionnels restent derrière <code>--experimental-modules</code>.</td></tr><tr><td style="text-align:left;">v13.6.0, v12.16.0</td><td style="text-align:left;">Suppression du marquage de l&#39;auto-référencement d&#39;un package à l&#39;aide de son nom.</td></tr><tr><td style="text-align:left;">v12.7.0</td><td style="text-align:left;">Introduction du champ <code>&quot;exports&quot;</code> <code>package.json</code> en tant qu&#39;alternative plus puissante au champ <code>&quot;main&quot;</code> classique.</td></tr><tr><td style="text-align:left;">v12.0.0</td><td style="text-align:left;">Ajout de la prise en charge des modules ES utilisant l&#39;extension de fichier <code>.js</code> via le champ <code>&quot;type&quot;</code> <code>package.json</code>.</td></tr></tbody></table></div><h2 id="introduction" tabindex="-1">Introduction <a class="header-anchor" href="#introduction" aria-label="Permalink to “Introduction”">​</a></h2><p>Un package est une arborescence de dossiers décrite par un fichier <code>package.json</code>. Le package se compose du dossier contenant le fichier <code>package.json</code> et de tous les sous-dossiers jusqu&#39;au prochain dossier contenant un autre fichier <code>package.json</code>, ou d&#39;un dossier nommé <code>node_modules</code>.</p><p>Cette page fournit des conseils aux auteurs de packages qui écrivent des fichiers <code>package.json</code> ainsi qu&#39;une référence pour les champs <a href="/fr/nodejs/api/packages#nodejs-packagejson-field-definitions"><code>package.json</code></a> définis par Node.js.</p><h2 id="determining-module-system" tabindex="-1">Détermination du système de modules <a class="header-anchor" href="#determining-module-system" aria-label="Permalink to “Détermination du système de modules”">​</a></h2><h3 id="introduction_1" tabindex="-1">Introduction <a class="header-anchor" href="#introduction_1" aria-label="Permalink to “Introduction”">​</a></h3><p>Node.js traitera les éléments suivants comme des <a href="/fr/nodejs/api/esm">modules ES</a> lorsqu&#39;ils sont passés à <code>node</code> comme entrée initiale, ou lorsqu&#39;ils sont référencés par des instructions <code>import</code> ou des expressions <code>import()</code>\xA0:</p><ul><li>Les fichiers avec une extension <code>.mjs</code>.</li><li>Les fichiers avec une extension <code>.js</code> lorsque le fichier <code>package.json</code> parent le plus proche contient un champ de premier niveau <a href="/fr/nodejs/api/packages#type"><code>&quot;type&quot;</code></a> avec une valeur de <code>&quot;module&quot;</code>.</li><li>Les chaînes passées en argument à <code>--eval</code>, ou transmises à <code>node</code> via <code>STDIN</code>, avec l&#39;indicateur <code>--input-type=module</code>.</li><li>Le code contenant une syntaxe analysée avec succès uniquement en tant que <a href="/fr/nodejs/api/esm">modules ES</a>, comme les instructions <code>import</code> ou <code>export</code> ou <code>import.meta</code>, sans marqueur explicite de la manière dont il doit être interprété. Les marqueurs explicites sont les extensions <code>.mjs</code> ou <code>.cjs</code>, les champs <code>&quot;type&quot;</code> <code>package.json</code> avec les valeurs <code>&quot;module&quot;</code> ou <code>&quot;commonjs&quot;</code>, ou l&#39;indicateur <code>--input-type</code>. Les expressions dynamiques <code>import()</code> sont prises en charge dans les modules CommonJS ou ES et ne forceraient pas un fichier à être traité comme un module ES. Voir <a href="/fr/nodejs/api/packages#syntax-detection">Détection de syntaxe</a>.</li></ul><p>Node.js traitera les éléments suivants comme des <a href="/fr/nodejs/api/modules">CommonJS</a> lorsqu&#39;ils sont passés à <code>node</code> comme entrée initiale, ou lorsqu&#39;ils sont référencés par des instructions <code>import</code> ou des expressions <code>import()</code>\xA0:</p><ul><li>Les fichiers avec une extension <code>.cjs</code>.</li><li>Les fichiers avec une extension <code>.js</code> lorsque le fichier <code>package.json</code> parent le plus proche contient un champ de premier niveau <a href="/fr/nodejs/api/packages#type"><code>&quot;type&quot;</code></a> avec une valeur de <code>&quot;commonjs&quot;</code>.</li><li>Les chaînes passées en argument à <code>--eval</code> ou <code>--print</code>, ou transmises à <code>node</code> via <code>STDIN</code>, avec l&#39;indicateur <code>--input-type=commonjs</code>.</li><li>Les fichiers avec une extension <code>.js</code> sans fichier <code>package.json</code> parent ou lorsque le fichier <code>package.json</code> parent le plus proche n&#39;a pas de champ <code>type</code>, et où le code peut être évalué avec succès en tant que CommonJS. En d&#39;autres termes, Node.js essaie d&#39;exécuter ces fichiers «\xA0ambigus\xA0» en tant que CommonJS en premier, et réessayera de les évaluer en tant que modules ES si l&#39;évaluation en tant que CommonJS échoue parce que l&#39;analyseur a trouvé une syntaxe de module ES.</li></ul><p>L&#39;écriture de la syntaxe du module ES dans des fichiers «\xA0ambigus\xA0» entraîne une perte de performance, et il est donc conseillé aux auteurs d&#39;être explicites autant que possible. En particulier, les auteurs de packages doivent toujours inclure le champ <a href="/fr/nodejs/api/packages#type"><code>&quot;type&quot;</code></a> dans leurs fichiers <code>package.json</code>, même dans les packages où toutes les sources sont CommonJS. Être explicite sur le <code>type</code> du package permettra de pérenniser le package au cas où le type par défaut de Node.js changerait un jour, et cela facilitera également la tâche des outils de construction et des chargeurs pour déterminer comment les fichiers du package doivent être interprétés.</p><h3 id="syntax-detection" tabindex="-1">Détection de syntaxe <a class="header-anchor" href="#syntax-detection" aria-label="Permalink to “Détection de syntaxe”">​</a></h3><div class="info custom-block"><p class="custom-block-title">[Historique]</p><table tabindex="0"><thead><tr><th>Version</th><th>Modifications</th></tr></thead><tbody><tr><td>v22.7.0</td><td>La détection de syntaxe est activée par défaut.</td></tr><tr><td>v21.1.0, v20.10.0</td><td>Ajouté dans : v21.1.0, v20.10.0</td></tr></tbody></table></div><div class="warning custom-block"><p class="custom-block-title">[Stable: 1 - Expérimental]</p><p><a href="/fr/nodejs/api/documentation#stability-index">Stable: 1</a> <a href="/fr/nodejs/api/documentation#stability-index">Stabilité: 1</a>.2 - Version candidate</p></div><p>Node.js inspectera le code source des entrées ambiguës pour déterminer si elles contiennent une syntaxe de module ES ; si une telle syntaxe est détectée, l&#39;entrée sera traitée comme un module ES.</p><p>Les entrées ambiguës sont définies comme suit :</p><ul><li>Les fichiers avec une extension <code>.js</code> ou sans extension ; et soit aucun fichier <code>package.json</code> de contrôle, soit un fichier qui n&#39;a pas de champ <code>type</code>.</li><li>Entrée de chaîne (<code>--eval</code> ou <code>STDIN</code>) lorsque <code>--input-type</code> n&#39;est pas spécifié.</li></ul><p>La syntaxe du module ES est définie comme une syntaxe qui lèverait une exception lorsqu&#39;elle est évaluée comme CommonJS. Cela comprend les éléments suivants :</p><ul><li>Instructions <code>import</code> (mais <em>pas</em> les expressions <code>import()</code>, qui sont valides dans CommonJS).</li><li>Instructions <code>export</code>.</li><li>Références <code>import.meta</code>.</li><li><code>await</code> au niveau supérieur d&#39;un module.</li><li>Redéclarations lexicales des variables wrapper CommonJS (<code>require</code>, <code>module</code>, <code>exports</code>, <code>__dirname</code>, <code>__filename</code>).</li></ul><h3 id="modules-loaders" tabindex="-1">Chargeurs de modules <a class="header-anchor" href="#modules-loaders" aria-label="Permalink to “Chargeurs de modules”">​</a></h3><p>Node.js dispose de deux systèmes pour résoudre un spécificateur et charger des modules.</p><p>Il existe le chargeur de modules CommonJS :</p><ul><li>Il est entièrement synchrone.</li><li>Il est responsable de la gestion des appels <code>require()</code>.</li><li>Il est patchable (monkey patching).</li><li>Il prend en charge les <a href="/fr/nodejs/api/modules#folders-as-modules">dossiers en tant que modules</a>.</li><li>Lors de la résolution d&#39;un spécificateur, si aucune correspondance exacte n&#39;est trouvée, il essaiera d&#39;ajouter des extensions (<code>.js</code>, <code>.json</code> et enfin <code>.node</code>) puis tentera de résoudre les <a href="/fr/nodejs/api/modules#folders-as-modules">dossiers en tant que modules</a>.</li><li>Il traite <code>.json</code> comme des fichiers texte JSON.</li><li>Les fichiers <code>.node</code> sont interprétés comme des modules d&#39;extension compilés chargés avec <code>process.dlopen()</code>.</li><li>Il traite tous les fichiers qui n&#39;ont pas d&#39;extensions <code>.json</code> ou <code>.node</code> comme des fichiers texte JavaScript.</li><li>Il ne peut être utilisé pour <a href="/fr/nodejs/api/modules#loading-ecmascript-modules-using-require">charger des modules ECMAScript à partir de modules CommonJS</a> que si le graphe des modules est synchrone (c&#39;est-à-dire qu&#39;il ne contient pas de <code>await</code> de niveau supérieur). Lorsqu&#39;il est utilisé pour charger un fichier texte JavaScript qui n&#39;est pas un module ECMAScript, le fichier sera chargé comme un module CommonJS.</li></ul><p>Il existe le chargeur de modules ECMAScript :</p><ul><li>Il est asynchrone, sauf s&#39;il est utilisé pour charger des modules pour <code>require()</code>.</li><li>Il est responsable de la gestion des instructions <code>import</code> et des expressions <code>import()</code>.</li><li>Il n&#39;est pas patchable (monkey patching), peut être personnalisé à l&#39;aide de <a href="/fr/nodejs/api/esm#loaders">crochets de chargeur</a>.</li><li>Il ne prend pas en charge les dossiers en tant que modules, les index de répertoire (par exemple, <code>&#39;./startup/index.js&#39;</code>) doivent être entièrement spécifiés.</li><li>Il n&#39;effectue aucune recherche d&#39;extension. Une extension de fichier doit être fournie lorsque le spécificateur est une URL de fichier relative ou absolue.</li><li>Il peut charger des modules JSON, mais un attribut de type d&#39;importation est requis.</li><li>Il n&#39;accepte que les extensions <code>.js</code>, <code>.mjs</code> et <code>.cjs</code> pour les fichiers texte JavaScript.</li><li>Il peut être utilisé pour charger des modules JavaScript CommonJS. Ces modules sont transmis via <code>cjs-module-lexer</code> pour essayer d&#39;identifier les exports nommés, qui sont disponibles s&#39;ils peuvent être déterminés par analyse statique. Les modules CommonJS importés ont leurs URLs converties en chemins absolus, puis sont chargés via le chargeur de modules CommonJS.</li></ul><h3 id="packagejson-and-file-extensions" tabindex="-1"><code>package.json</code> et extensions de fichier <a class="header-anchor" href="#packagejson-and-file-extensions" aria-label="Permalink to “package.json et extensions de fichier”">​</a></h3><p>Au sein d&#39;un paquet, le champ <a href="/fr/nodejs/api/packages#type"><code>&quot;type&quot;</code></a> du <a href="/fr/nodejs/api/packages#nodejs-packagejson-field-definitions"><code>package.json</code></a> définit comment Node.js doit interpréter les fichiers <code>.js</code>. Si un fichier <code>package.json</code> n&#39;a pas de champ <code>&quot;type&quot;</code>, les fichiers <code>.js</code> sont traités comme <a href="/fr/nodejs/api/modules">CommonJS</a>.</p><p>Une valeur <code>&quot;type&quot;</code> de <code>&quot;module&quot;</code> dans <code>package.json</code> indique à Node.js d&#39;interpréter les fichiers <code>.js</code> de ce paquet comme utilisant la syntaxe <a href="/fr/nodejs/api/esm">ES module</a>.</p><p>Le champ <code>&quot;type&quot;</code> s&#39;applique non seulement aux points d&#39;entrée initiaux (<code>node my-app.js</code>) mais aussi aux fichiers référencés par les instructions <code>import</code> et les expressions <code>import()</code>.</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// my-app.js, traité comme un module ES car il y a un fichier package.json</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// dans le même dossier avec &quot;type&quot;: &quot;module&quot;.</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;./startup/init.js&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Chargé comme module ES car ./startup ne contient pas de fichier package.json,</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// et hérite donc de la valeur &quot;type&quot; du niveau supérieur.</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;commonjs-package&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Chargé comme CommonJS car ./node_modules/commonjs-package/package.json</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// n&#39;a pas de champ &quot;type&quot; ou contient &quot;type&quot;: &quot;commonjs&quot;.</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;./node_modules/commonjs-package/index.js&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Chargé comme CommonJS car ./node_modules/commonjs-package/package.json</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// n&#39;a pas de champ &quot;type&quot; ou contient &quot;type&quot;: &quot;commonjs&quot;.</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>Les fichiers se terminant par <code>.mjs</code> sont toujours chargés comme <a href="/fr/nodejs/api/esm">modules ES</a> quel que soit le <code>package.json</code> parent le plus proche.</p><p>Les fichiers se terminant par <code>.cjs</code> sont toujours chargés comme <a href="/fr/nodejs/api/modules">CommonJS</a> quel que soit le <code>package.json</code> parent le plus proche.</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;./legacy-file.cjs&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Chargé comme CommonJS car .cjs est toujours chargé comme CommonJS.</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;commonjs-package/src/index.mjs&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Chargé comme module ES car .mjs est toujours chargé comme module ES.</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>Les extensions <code>.mjs</code> et <code>.cjs</code> peuvent être utilisées pour mélanger les types au sein du même paquet\xA0:</p><ul><li>Dans un paquet <code>&quot;type&quot;: &quot;module&quot;</code>, Node.js peut être configuré pour interpréter un fichier particulier comme <a href="/fr/nodejs/api/modules">CommonJS</a> en le nommant avec une extension <code>.cjs</code> (étant donné que les fichiers <code>.js</code> et <code>.mjs</code> sont traités comme des modules ES dans un paquet <code>&quot;module&quot;</code>).</li><li>Dans un paquet <code>&quot;type&quot;: &quot;commonjs&quot;</code>, Node.js peut être configuré pour interpréter un fichier particulier comme un <a href="/fr/nodejs/api/esm">module ES</a> en le nommant avec une extension <code>.mjs</code> (étant donné que les fichiers <code>.js</code> et <code>.cjs</code> sont traités comme CommonJS dans un paquet <code>&quot;commonjs&quot;</code>).</li></ul><h3 id="--input-type-flag" tabindex="-1">Indicateur <code>--input-type</code> <a class="header-anchor" href="#--input-type-flag" aria-label="Permalink to “Indicateur --input-type”">​</a></h3><p><strong>Ajouté dans\xA0: v12.0.0</strong></p><p>Les chaînes de caractères passées en argument à <code>--eval</code> (ou <code>-e</code>), ou transmises à <code>node</code> via <code>STDIN</code>, sont traitées comme des <a href="/fr/nodejs/api/esm">modules ES</a> lorsque l&#39;indicateur <code>--input-type=module</code> est défini.</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">node</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --input-type=module</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --eval</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;import { sep } from &#39;node:path&#39;; console.log(sep);&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">echo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;import { sep } from &#39;node:path&#39;; console.log(sep);&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> node</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --input-type=module</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>Par souci d&#39;exhaustivité, il existe également <code>--input-type=commonjs</code>, pour exécuter explicitement une entrée de chaîne de caractères en tant que CommonJS. C&#39;est le comportement par défaut si <code>--input-type</code> n&#39;est pas spécifié.</p><h2 id="determining-package-manager" tabindex="-1">Détermination du gestionnaire de paquets <a class="header-anchor" href="#determining-package-manager" aria-label="Permalink to “Détermination du gestionnaire de paquets”">​</a></h2><div class="warning custom-block"><p class="custom-block-title">[Stable: 1 - Expérimental]</p><p><a href="/fr/nodejs/api/documentation#stability-index">Stable: 1</a> <a href="/fr/nodejs/api/documentation#stability-index">Stabilité: 1</a> - Expérimental</p></div><p>Bien que tous les projets Node.js soient censés pouvoir être installés par tous les gestionnaires de paquets une fois publiés, leurs équipes de développement sont souvent tenues d&#39;utiliser un gestionnaire de paquets spécifique. Pour faciliter ce processus, Node.js est livré avec un outil appelé <a href="/fr/nodejs/api/corepack">Corepack</a> qui vise à rendre tous les gestionnaires de paquets disponibles de manière transparente dans votre environnement - à condition que Node.js soit installé.</p><p>Par défaut, Corepack n&#39;appliquera aucun gestionnaire de paquets spécifique et utilisera les versions génériques «\xA0Last Known Good\xA0» associées à chaque version de Node.js, mais vous pouvez améliorer cette expérience en définissant le champ <a href="/fr/nodejs/api/packages#packagemanager"><code>&quot;packageManager&quot;</code></a> dans le <code>package.json</code> de votre projet.</p><h2 id="package-entry-points" tabindex="-1">Points d&#39;entrée du paquet <a class="header-anchor" href="#package-entry-points" aria-label="Permalink to “Points d&#39;entrée du paquet”">​</a></h2><p>Dans le fichier <code>package.json</code> d&#39;un paquet, deux champs peuvent définir les points d&#39;entrée d&#39;un paquet\xA0: <a href="/fr/nodejs/api/packages#main"><code>&quot;main&quot;</code></a> et <a href="/fr/nodejs/api/packages#exports"><code>&quot;exports&quot;</code></a>. Les deux champs s&#39;appliquent aux points d&#39;entrée des modules ES et des modules CommonJS.</p><p>Le champ <a href="/fr/nodejs/api/packages#main"><code>&quot;main&quot;</code></a> est pris en charge dans toutes les versions de Node.js, mais ses capacités sont limitées\xA0: il ne définit que le point d&#39;entrée principal du paquet.</p><p>Le champ <a href="/fr/nodejs/api/packages#exports"><code>&quot;exports&quot;</code></a> fournit une alternative moderne à <a href="/fr/nodejs/api/packages#main"><code>&quot;main&quot;</code></a> permettant de définir plusieurs points d&#39;entrée, la prise en charge de la résolution conditionnelle des entrées entre les environnements et <strong>d&#39;empêcher tout autre point d&#39;entrée que ceux définis dans <a href="#exports"><code>&quot;exports&quot;</code></a></strong>. Cette encapsulation permet aux auteurs de modules de définir clairement l&#39;interface publique de leur paquet.</p><p>Pour les nouveaux paquets ciblant les versions actuellement prises en charge de Node.js, le champ <a href="/fr/nodejs/api/packages#exports"><code>&quot;exports&quot;</code></a> est recommandé. Pour les paquets prenant en charge Node.js 10 et versions antérieures, le champ <a href="/fr/nodejs/api/packages#main"><code>&quot;main&quot;</code></a> est requis. Si <a href="/fr/nodejs/api/packages#exports"><code>&quot;exports&quot;</code></a> et <a href="/fr/nodejs/api/packages#main"><code>&quot;main&quot;</code></a> sont tous les deux définis, le champ <a href="/fr/nodejs/api/packages#exports"><code>&quot;exports&quot;</code></a> est prioritaire sur <a href="/fr/nodejs/api/packages#main"><code>&quot;main&quot;</code></a> dans les versions prises en charge de Node.js.</p><p>Les <a href="/fr/nodejs/api/packages#conditional-exports">exports conditionnels</a> peuvent être utilisés dans <a href="/fr/nodejs/api/packages#exports"><code>&quot;exports&quot;</code></a> pour définir différents points d&#39;entrée de paquet par environnement, y compris si le paquet est référencé via <code>require</code> ou via <code>import</code>. Pour plus d&#39;informations sur la prise en charge des modules CommonJS et des modules ES dans un seul paquet, veuillez consulter <a href="/fr/nodejs/api/packages#dual-commonjses-module-packages">la section sur les paquets double CommonJS/ES module</a>.</p><p>Les paquets existants introduisant le champ <a href="/fr/nodejs/api/packages#exports"><code>&quot;exports&quot;</code></a> empêcheront les consommateurs du paquet d&#39;utiliser les points d&#39;entrée qui ne sont pas définis, y compris le <a href="/fr/nodejs/api/packages#nodejs-packagejson-field-definitions"><code>package.json</code></a> (par exemple <code>require(&#39;your-package/package.json&#39;)</code>). <strong>Il s&#39;agira probablement d&#39;une modification destructrice.</strong></p><p>Pour que l&#39;introduction de <a href="/fr/nodejs/api/packages#exports"><code>&quot;exports&quot;</code></a> ne soit pas destructrice, assurez-vous que chaque point d&#39;entrée précédemment pris en charge est exporté. Il est préférable de spécifier explicitement les points d&#39;entrée afin que l&#39;API publique du paquet soit bien définie. Par exemple, un projet qui exportait auparavant <code>main</code>, <code>lib</code>, <code>feature</code> et le <code>package.json</code> pourrait utiliser le <code>package.exports</code> suivant\xA0:</p><div class="language-json line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;my-package&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;exports&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;.&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;./lib/index.js&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;./lib&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;./lib/index.js&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;./lib/index&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;./lib/index.js&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;./lib/index.js&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;./lib/index.js&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;./feature&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;./feature/index.js&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;./feature/index&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;./feature/index.js&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;./feature/index.js&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;./feature/index.js&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;./package.json&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;./package.json&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>Alternativement, un projet pourrait choisir d&#39;exporter des dossiers entiers avec et sans sous-chemins avec extension en utilisant des modèles d&#39;exportation\xA0:</p><div class="language-json line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;my-package&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;exports&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;.&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;./lib/index.js&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;./lib&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;./lib/index.js&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;./lib/*&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;./lib/*.js&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;./lib/*.js&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;./lib/*.js&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;./feature&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;./feature/index.js&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;./feature/*&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;./feature/*.js&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;./feature/*.js&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;./feature/*.js&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;./package.json&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;./package.json&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>Ce qui précède assurant une compatibilité descendante pour toutes les versions mineures du paquet, une future modification majeure du paquet peut alors restreindre correctement les exports aux seuls exports de fonctionnalités spécifiques exposés\xA0:</p><div class="language-json line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;my-package&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;exports&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;.&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;./lib/index.js&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;./feature/*.js&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;./feature/*.js&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;./feature/internal/*&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">null</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="main-entry-point-export" tabindex="-1">Point d&#39;entrée principal de l&#39;exportation <a class="header-anchor" href="#main-entry-point-export" aria-label="Permalink to “Point d&#39;entrée principal de l&#39;exportation”">​</a></h3><p>Lors de l&#39;écriture d&#39;un nouveau paquet, il est recommandé d&#39;utiliser le champ <a href="/fr/nodejs/api/packages#exports"><code>&quot;exports&quot;</code></a>\xA0:</p><div class="language-json line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;exports&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;./index.js&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>Lorsque le champ <a href="/fr/nodejs/api/packages#exports"><code>&quot;exports&quot;</code></a> est défini, tous les sous-chemins du paquet sont encapsulés et ne sont plus disponibles pour les importateurs. Par exemple, <code>require(&#39;pkg/subpath.js&#39;)</code> génère une erreur <a href="/fr/nodejs/api/errors#err-package-path-not-exported"><code>ERR_PACKAGE_PATH_NOT_EXPORTED</code></a>.</p><p>Cette encapsulation des exports fournit des garanties plus fiables sur les interfaces de paquet pour les outils et lors de la gestion des mises à niveau semver pour un paquet. Ce n&#39;est pas une encapsulation forte puisqu&#39;une <code>require</code> directe d&#39;un sous-chemin absolu du paquet tel que <code>require(&#39;/path/to/node_modules/pkg/subpath.js&#39;)</code> chargera toujours <code>subpath.js</code>.</p><p>Toutes les versions de Node.js actuellement prises en charge et les outils de construction modernes prennent en charge le champ <code>&quot;exports&quot;</code>. Pour les projets utilisant une ancienne version de Node.js ou un outil de construction associé, la compatibilité peut être obtenue en incluant le champ <code>&quot;main&quot;</code> à côté de <code>&quot;exports&quot;</code> pointant vers le même module\xA0:</p><div class="language-json line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;main&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;./index.js&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;exports&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;./index.js&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="subpath-exports" tabindex="-1">Exports de sous-chemins <a class="header-anchor" href="#subpath-exports" aria-label="Permalink to “Exports de sous-chemins”">​</a></h3><p><strong>Ajouté dans\xA0: v12.7.0</strong></p><p>Lors de l&#39;utilisation du champ <a href="/fr/nodejs/api/packages#exports"><code>&quot;exports&quot;</code></a>, des sous-chemins personnalisés peuvent être définis avec le point d&#39;entrée principal en traitant le point d&#39;entrée principal comme le sous-chemin <code>&quot;.&quot;</code>\xA0:</p><div class="language-json line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;exports&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;.&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;./index.js&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;./submodule.js&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;./src/submodule.js&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>Désormais, seul le sous-chemin défini dans <a href="/fr/nodejs/api/packages#exports"><code>&quot;exports&quot;</code></a> peut être importé par un consommateur\xA0:</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> submodule </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;es-module-package/submodule.js&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Charge ./node_modules/es-module-package/src/submodule.js</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>Alors que les autres sous-chemins provoqueront une erreur\xA0:</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> submodule </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;es-module-package/private-module.js&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Lève ERR_PACKAGE_PATH_NOT_EXPORTED</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h4 id="extensions-in-subpaths" tabindex="-1">Extensions dans les sous-chemins <a class="header-anchor" href="#extensions-in-subpaths" aria-label="Permalink to “Extensions dans les sous-chemins”">​</a></h4><p>Les auteurs de paquets doivent fournir des sous-chemins avec extension (<code>import &#39;pkg/subpath.js&#39;</code>) ou sans extension (<code>import &#39;pkg/subpath&#39;</code>) dans leurs exports. Cela garantit qu&#39;il n&#39;y a qu&#39;un seul sous-chemin pour chaque module exporté, de sorte que tous les dépendants importent le même spécificateur cohérent, ce qui maintient le contrat du paquet clair pour les consommateurs et simplifie les complétions des sous-chemins de paquet.</p><p>Traditionnellement, les paquets avaient tendance à utiliser le style sans extension, qui a l&#39;avantage d&#39;être lisible et de masquer le véritable chemin du fichier dans le paquet.</p><p>Avec les <a href="https://github.com/WICG/import-maps" target="_blank" rel="noreferrer">cartes d&#39;importation</a> qui fournissent désormais une norme pour la résolution de paquets dans les navigateurs et autres environnements d&#39;exécution JavaScript, l&#39;utilisation du style sans extension peut entraîner des définitions de cartes d&#39;importation gonflées. Les extensions de fichier explicites peuvent éviter ce problème en permettant à la carte d&#39;importation d&#39;utiliser un <a href="https://github.com/WICG/import-maps#packages-via-trailing-slashes" target="_blank" rel="noreferrer">mappage de dossiers de paquets</a> pour mapper plusieurs sous-chemins lorsque cela est possible au lieu d&#39;une entrée de carte distincte par export de sous-chemin de paquet. Cela reflète également l&#39;exigence d&#39;utiliser <a href="/fr/nodejs/api/esm#mandatory-file-extensions">le chemin complet du spécificateur</a> dans les spécificateurs d&#39;importation relatifs et absolus.</p><h3 id="exports-sugar" tabindex="-1">Sucre syntaxique pour les exports <a class="header-anchor" href="#exports-sugar" aria-label="Permalink to “Sucre syntaxique pour les exports”">​</a></h3><p><strong>Ajouté dans : v12.11.0</strong></p><p>Si l&#39;export <code>&quot;.&quot;</code> est le seul export, le champ <a href="/fr/nodejs/api/packages#exports"><code>&quot;exports&quot;</code></a> fournit un sucre syntaxique pour ce cas en étant la valeur directe du champ <a href="/fr/nodejs/api/packages#exports"><code>&quot;exports&quot;</code></a>.</p><div class="language-json line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;exports&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;.&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;./index.js&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>peut être écrit :</p><div class="language-json line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;exports&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;./index.js&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="subpath-imports" tabindex="-1">Imports de sous-chemins <a class="header-anchor" href="#subpath-imports" aria-label="Permalink to “Imports de sous-chemins”">​</a></h3><p><strong>Ajouté dans : v14.6.0, v12.19.0</strong></p><p>En plus du champ <a href="/fr/nodejs/api/packages#exports"><code>&quot;exports&quot;</code></a>, il existe un champ <code>&quot;imports&quot;</code> dans le paquet pour créer des correspondances privées qui s&#39;appliquent uniquement aux spécificateurs d&#39;importation à partir de l&#39;intérieur du paquet lui-même.</p><p>Les entrées dans le champ <code>&quot;imports&quot;</code> doivent toujours commencer par <code>#</code> pour s&#39;assurer qu&#39;elles sont différenciées des spécificateurs de paquets externes.</p><p>Par exemple, le champ imports peut être utilisé pour bénéficier des avantages des exports conditionnels pour les modules internes :</p><div class="language-json line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// package.json</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;imports&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;#dep&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;node&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;dep-node-native&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;default&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;./dep-polyfill.js&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;dependencies&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;dep-node-native&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;^1.0.0&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>où <code>import &#39;#dep&#39;</code> n&#39;obtient pas la résolution du paquet externe <code>dep-node-native</code> (y compris ses exports à leur tour), et obtient à la place le fichier local <code>./dep-polyfill.js</code> par rapport au paquet dans d&#39;autres environnements.</p><p>Contrairement au champ <code>&quot;exports&quot;</code>, le champ <code>&quot;imports&quot;</code> permet de mapper vers des paquets externes.</p><p>Les règles de résolution pour le champ imports sont par ailleurs analogues à celles du champ exports.</p><h3 id="subpath-patterns" tabindex="-1">Modèles de sous-chemins <a class="header-anchor" href="#subpath-patterns" aria-label="Permalink to “Modèles de sous-chemins”">​</a></h3><div class="info custom-block"><p class="custom-block-title">[Historique]</p><table tabindex="0"><thead><tr><th>Version</th><th>Modifications</th></tr></thead><tbody><tr><td>v16.10.0, v14.19.0</td><td>Support des suffixe de motif dans le champ &quot;imports&quot;.</td></tr><tr><td>v16.9.0, v14.19.0</td><td>Support des suffixe de motif.</td></tr><tr><td>v14.13.0, v12.20.0</td><td>Ajouté dans : v14.13.0, v12.20.0</td></tr></tbody></table></div><p>Pour les paquets avec un petit nombre d&#39;exports ou d&#39;imports, nous recommandons de lister explicitement chaque entrée de sous-chemin d&#39;exports. Mais pour les paquets qui ont un grand nombre de sous-chemins, cela pourrait entraîner un gonflement du <code>package.json</code> et des problèmes de maintenance.</p><p>Pour ces cas d&#39;utilisation, des modèles d&#39;exports de sous-chemins peuvent être utilisés à la place :</p><div class="language-json line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ./node_modules/es-module-package/package.json</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;exports&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;./features/*.js&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;./src/features/*.js&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;imports&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;#internal/*.js&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;./src/internal/*.js&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p><strong><code>*</code> Les mappages exposent les sous-chemins imbriqués car il s&#39;agit uniquement d&#39;une syntaxe de remplacement de chaîne.</strong></p><p>Toutes les occurrences de <code>*</code> sur le côté droit seront ensuite remplacées par cette valeur, y compris si elle contient des séparateurs <code>/</code>.</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> featureX </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;es-module-package/features/x.js&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Charge ./node_modules/es-module-package/src/features/x.js</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> featureY </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;es-module-package/features/y/y.js&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Charge ./node_modules/es-module-package/src/features/y/y.js</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> internalZ </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;#internal/z.js&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Charge ./node_modules/es-module-package/src/internal/z.js</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>Il s&#39;agit d&#39;une correspondance et d&#39;un remplacement statique direct sans aucune gestion spéciale des extensions de fichier. L&#39;inclusion de <code>&quot;*.js&quot;</code> des deux côtés du mappage restreint les exports de paquets exposés aux seuls fichiers JS.</p><p>La propriété des exports étant statiquement énumérable est maintenue avec les modèles d&#39;exports puisque les exports individuels pour un paquet peuvent être déterminés en traitant le modèle cible du côté droit comme un glob <code>**</code> par rapport à la liste des fichiers dans le paquet. Étant donné que les chemins <code>node_modules</code> sont interdits dans les cibles d&#39;exports, cette expansion dépend uniquement des fichiers du paquet lui-même.</p><p>Pour exclure les sous-dossiers privés des motifs, des cibles <code>null</code> peuvent être utilisées :</p><div class="language-json line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ./node_modules/es-module-package/package.json</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;exports&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;./features/*.js&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;./src/features/*.js&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;./features/private-internal/*&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">null</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> featureInternal </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;es-module-package/features/private-internal/m.js&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Lève : ERR_PACKAGE_PATH_NOT_EXPORTED</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> featureX </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;es-module-package/features/x.js&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Charge ./node_modules/es-module-package/src/features/x.js</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="conditional-exports" tabindex="-1">Exports conditionnels <a class="header-anchor" href="#conditional-exports" aria-label="Permalink to “Exports conditionnels”">​</a></h3><div class="info custom-block"><p class="custom-block-title">[Historique]</p><table tabindex="0"><thead><tr><th>Version</th><th>Modifications</th></tr></thead><tbody><tr><td>v13.7.0, v12.16.0</td><td>Suppression du drapeau des exports conditionnels.</td></tr><tr><td>v13.2.0, v12.16.0</td><td>Ajouté dans\xA0: v13.2.0, v12.16.0</td></tr></tbody></table></div><p>Les exports conditionnels fournissent un moyen de mapper différents chemins en fonction de certaines conditions. Ils sont pris en charge pour les importations CommonJS et les importations de modules ES.</p><p>Par exemple, un paquet qui souhaite fournir différents exports de modules ES pour <code>require()</code> et <code>import</code> peut être écrit\xA0:</p><div class="language-json line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// package.json</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;exports&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;import&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;./index-module.js&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;require&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;./index-require.cjs&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;type&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;module&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>Node.js implémente les conditions suivantes, listées par ordre de spécificité décroissante, car les conditions doivent être définies\xA0:</p><ul><li><code>&quot;node-addons&quot;</code> - similaire à <code>&quot;node&quot;</code> et correspond à n&#39;importe quel environnement Node.js. Cette condition peut être utilisée pour fournir un point d&#39;entrée qui utilise des extensions C++ natives par opposition à un point d&#39;entrée qui est plus universel et ne repose pas sur des extensions natives. Cette condition peut être désactivée via l&#39;option <a href="/fr/nodejs/api/cli#no-addons"><code>--no-addons</code></a>.</li><li><code>&quot;node&quot;</code> - correspond à n&#39;importe quel environnement Node.js. Peut être un fichier CommonJS ou un module ES. <em>Dans la plupart des cas, il n&#39;est pas nécessaire d&#39;appeler explicitement la plateforme Node.js.</em></li><li><code>&quot;import&quot;</code> - correspond lorsque le paquet est chargé via <code>import</code> ou <code>import()</code>, ou via toute opération d&#39;import ou de résolution de premier niveau par le chargeur de modules ECMAScript. S&#39;applique quel que soit le format de module du fichier cible. <em>Toujours mutuellement exclusif avec <code>&quot;require&quot;</code>.</em></li><li><code>&quot;require&quot;</code> - correspond lorsque le paquet est chargé via <code>require()</code>. Le fichier référencé doit être chargeable avec <code>require()</code>, bien que la condition corresponde quel que soit le format de module du fichier cible. Les formats attendus incluent CommonJS, JSON, les extensions natives et les modules ES. <em>Toujours mutuellement exclusif avec <code>&quot;import&quot;</code>.</em></li><li><code>&quot;module-sync&quot;</code> - correspond, quel que soit le chargement du paquet via <code>import</code>, <code>import()</code> ou <code>require()</code>. Le format attendu est celui des modules ES qui ne contiennent pas d&#39;await de premier niveau dans leur graphe de modules - si c&#39;est le cas, <code>ERR_REQUIRE_ASYNC_MODULE</code> sera lancé lorsque le module est <code>require()</code>-ed.</li><li><code>&quot;default&quot;</code> - le repli générique qui correspond toujours. Peut être un fichier CommonJS ou un module ES. <em>Cette condition doit toujours venir en dernier.</em></li></ul><p>Dans l&#39;objet <a href="/fr/nodejs/api/packages#exports"><code>&quot;exports&quot;</code></a>, l&#39;ordre des clés est important. Lors de la correspondance des conditions, les entrées les plus anciennes ont une priorité plus élevée et prévalent sur les entrées les plus récentes. <em>La règle générale est que les conditions doivent être classées de la plus spécifique à la moins spécifique dans l&#39;ordre des objets</em>.</p><p>L&#39;utilisation des conditions <code>&quot;import&quot;</code> et <code>&quot;require&quot;</code> peut entraîner certains dangers, qui sont expliqués plus en détail dans <a href="/fr/nodejs/api/packages#dual-commonjses-module-packages">la section sur les paquets doubles CommonJS/module ES</a>.</p><p>La condition <code>&quot;node-addons&quot;</code> peut être utilisée pour fournir un point d&#39;entrée qui utilise des extensions C++ natives. Cependant, cette condition peut être désactivée via l&#39;option <a href="/fr/nodejs/api/cli#no-addons"><code>--no-addons</code></a>. Lors de l&#39;utilisation de <code>&quot;node-addons&quot;</code>, il est recommandé de traiter <code>&quot;default&quot;</code> comme une amélioration qui fournit un point d&#39;entrée plus universel, par exemple en utilisant WebAssembly au lieu d&#39;une extension native.</p><p>Les exports conditionnels peuvent également être étendus aux sous-chemins des exports, par exemple\xA0:</p><div class="language-json line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;exports&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;.&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;./index.js&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;./feature.js&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;node&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;./feature-node.js&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;default&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;./feature.js&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>Définit un paquet où <code>require(&#39;pkg/feature.js&#39;)</code> et <code>import &#39;pkg/feature.js&#39;</code> pourraient fournir différentes implémentations entre Node.js et d&#39;autres environnements JS.</p><p>Lors de l&#39;utilisation de branches d&#39;environnement, incluez toujours une condition <code>&quot;default&quot;</code> lorsque cela est possible. Fournir une condition <code>&quot;default&quot;</code> garantit que tout environnement JS inconnu peut utiliser cette implémentation universelle, ce qui évite à ces environnements JS de prétendre être des environnements existants afin de prendre en charge les paquets avec des exports conditionnels. Pour cette raison, il est généralement préférable d&#39;utiliser les branches de condition <code>&quot;node&quot;</code> et <code>&quot;default&quot;</code> plutôt que d&#39;utiliser les branches de condition <code>&quot;node&quot;</code> et <code>&quot;browser&quot;</code>.</p><h3 id="nested-conditions" tabindex="-1">Conditions imbriquées <a class="header-anchor" href="#nested-conditions" aria-label="Permalink to “Conditions imbriquées”">​</a></h3><p>En plus des correspondances directes, Node.js prend également en charge les objets de conditions imbriquées.</p><p>Par exemple, pour définir un paquet qui n&#39;a que des points d&#39;entrée en mode dual pour une utilisation dans Node.js mais pas dans le navigateur\xA0:</p><div class="language-json line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;exports&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;node&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;import&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;./feature-node.mjs&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;require&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;./feature-node.cjs&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    },</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;default&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;./feature.mjs&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>Les conditions continuent d&#39;être comparées dans l&#39;ordre comme avec les conditions plates. Si une condition imbriquée n&#39;a pas de mappage, la vérification des conditions restantes de la condition parent se poursuivra. De cette façon, les conditions imbriquées se comportent de manière analogue aux instructions <code>if</code> imbriquées en JavaScript.</p><h3 id="resolving-user-conditions" tabindex="-1">Résolution des conditions utilisateur <a class="header-anchor" href="#resolving-user-conditions" aria-label="Permalink to “Résolution des conditions utilisateur”">​</a></h3><p><strong>Ajouté dans\xA0: v14.9.0, v12.19.0</strong></p><p>Lors de l&#39;exécution de Node.js, des conditions utilisateur personnalisées peuvent être ajoutées avec l&#39;indicateur <code>--conditions</code>\xA0:</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">node</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --conditions=development</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> index.js</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>ce qui résoudrait alors la condition <code>&quot;development&quot;</code> dans les importations et exportations de paquets, tout en résolvant les conditions existantes <code>&quot;node&quot;</code>, <code>&quot;node-addons&quot;</code>, <code>&quot;default&quot;</code>, <code>&quot;import&quot;</code> et <code>&quot;require&quot;</code> comme il convient.</p><p>Un nombre quelconque de conditions personnalisées peut être défini avec des indicateurs répétés.</p><p>Les conditions typiques ne doivent contenir que des caractères alphanumériques, en utilisant &quot;:&quot;, &quot;-&quot; ou &quot;=&quot; comme séparateurs si nécessaire. Tout le reste peut entraîner des problèmes de compatibilité en dehors de Node.</p><p>Dans Node, les conditions ont très peu de restrictions, mais celles-ci incluent spécifiquement\xA0:</p><h3 id="community-conditions-definitions" tabindex="-1">Définitions de conditions communautaires <a class="header-anchor" href="#community-conditions-definitions" aria-label="Permalink to “Définitions de conditions communautaires”">​</a></h3><p>Les chaînes de condition autres que les conditions <code>&quot;import&quot;</code>, <code>&quot;require&quot;</code>, <code>&quot;node&quot;</code>, <code>&quot;module-sync&quot;</code>, <code>&quot;node-addons&quot;</code> et <code>&quot;default&quot;</code> <a href="/fr/nodejs/api/packages#conditional-exports">implémentées dans le cœur de Node.js</a> sont ignorées par défaut.</p><p>D&#39;autres plateformes peuvent implémenter d&#39;autres conditions, et les conditions utilisateur peuvent être activées dans Node.js via l&#39;indicateur <a href="/fr/nodejs/api/packages#resolving-user-conditions"><code>--conditions</code>\xA0/\xA0<code>-C</code></a>.</p><p>Étant donné que les conditions de paquet personnalisées nécessitent des définitions claires pour garantir une utilisation correcte, une liste des conditions de paquet connues et courantes et de leurs définitions strictes est fournie ci-dessous pour faciliter la coordination de l&#39;écosystème.</p><ul><li><code>&quot;types&quot;</code> - peut être utilisé par les systèmes de saisie pour résoudre le fichier de saisie pour l&#39;exportation donnée. <em>Cette condition doit toujours être incluse en premier.</em></li><li><code>&quot;browser&quot;</code> - tout environnement de navigateur Web.</li><li><code>&quot;development&quot;</code> - peut être utilisé pour définir un point d&#39;entrée d&#39;environnement réservé au développement, par exemple pour fournir un contexte de débogage supplémentaire tel que de meilleurs messages d&#39;erreur lors de l&#39;exécution en mode développement. <em>Doit toujours être mutuellement exclusif avec <code>&quot;production&quot;</code>.</em></li><li><code>&quot;production&quot;</code> - peut être utilisé pour définir un point d&#39;entrée d&#39;environnement de production. <em>Doit toujours être mutuellement exclusif avec <code>&quot;development&quot;</code>.</em></li></ul><p>Pour les autres environnements d&#39;exécution, les définitions de clés de condition spécifiques à la plateforme sont gérées par <a href="https://wintercg.org/" target="_blank" rel="noreferrer">WinterCG</a> dans la spécification de proposition <a href="https://runtime-keys.proposal.wintercg.org/" target="_blank" rel="noreferrer">Runtime Keys</a>.</p><p>De nouvelles définitions de conditions peuvent être ajoutées à cette liste en créant une requête d&#39;extraction vers la <a href="https://github.com/nodejs/node/blob/HEAD/doc/api/packages.md#conditions-definitions" target="_blank" rel="noreferrer">documentation Node.js pour cette section</a>. Les exigences pour répertorier une nouvelle définition de condition ici sont les suivantes\xA0:</p><ul><li>La définition doit être claire et non ambiguë pour tous les implémenteurs.</li><li>Le cas d&#39;utilisation expliquant pourquoi la condition est nécessaire doit être clairement justifié.</li><li>Il doit exister une utilisation d&#39;implémentation existante suffisante.</li><li>Le nom de la condition ne doit pas entrer en conflit avec une autre définition de condition ou une condition largement utilisée.</li><li>La liste de la définition de condition doit fournir un avantage de coordination à l&#39;écosystème qui ne serait pas possible autrement. Par exemple, ce ne serait pas nécessairement le cas pour les conditions spécifiques à l&#39;entreprise ou à l&#39;application.</li><li>La condition doit être telle qu&#39;un utilisateur de Node.js s&#39;attendrait à ce qu&#39;elle figure dans la documentation principale de Node.js. La condition <code>&quot;types&quot;</code> en est un bon exemple\xA0: elle n&#39;a pas vraiment sa place dans la proposition <a href="https://runtime-keys.proposal.wintercg.org/" target="_blank" rel="noreferrer">Runtime Keys</a>, mais elle convient bien ici dans la documentation Node.js.</li></ul><p>Les définitions ci-dessus peuvent être déplacées vers un registre de conditions dédié en temps voulu.</p><h3 id="self-referencing-a-package-using-its-name" tabindex="-1">Auto-référencement d&#39;un paquet en utilisant son nom <a class="header-anchor" href="#self-referencing-a-package-using-its-name" aria-label="Permalink to “Auto-référencement d&#39;un paquet en utilisant son nom”">​</a></h3><div class="info custom-block"><p class="custom-block-title">[Historique]</p><table tabindex="0"><thead><tr><th>Version</th><th>Modifications</th></tr></thead><tbody><tr><td>v13.6.0, v12.16.0</td><td>Suppression du marquage de l&#39;auto-référencement d&#39;un paquet en utilisant son nom.</td></tr><tr><td>v13.1.0, v12.16.0</td><td>Ajouté dans : v13.1.0, v12.16.0</td></tr></tbody></table></div><p>Au sein d&#39;un paquet, les valeurs définies dans le champ <a href="/fr/nodejs/api/packages#exports"><code>&quot;exports&quot;</code></a> du fichier <code>package.json</code> du paquet peuvent être référencées via le nom du paquet. Par exemple, en supposant que le <code>package.json</code> soit\xA0:</p><div class="language-json line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// package.json</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;a-package&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;exports&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;.&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;./index.mjs&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;./foo.js&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;./foo.js&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>Alors tout module <em>dans ce paquet</em> peut référencer une exportation dans le paquet lui-même\xA0:</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ./a-module.mjs</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { something } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;a-package&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Importe &quot;something&quot; depuis ./index.mjs.</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>L&#39;auto-référencement n&#39;est disponible que si <code>package.json</code> a <a href="/fr/nodejs/api/packages#exports"><code>&quot;exports&quot;</code></a>, et permettra d&#39;importer uniquement ce que <a href="/fr/nodejs/api/packages#exports"><code>&quot;exports&quot;</code></a> (dans le <code>package.json</code>) autorise. Ainsi, le code ci-dessous, étant donné le paquet précédent, générera une erreur d&#39;exécution\xA0:</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ./another-module.mjs</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Importe &quot;another&quot; depuis ./m.mjs. Échoue car</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// le champ &quot;exports&quot; de &quot;package.json&quot;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ne fournit pas d&#39;exportation nommée &quot;./m.mjs&quot;.</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { another } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;a-package/m.mjs&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>L&#39;auto-référencement est également disponible lors de l&#39;utilisation de <code>require</code>, à la fois dans un module ES et dans un module CommonJS. Par exemple, ce code fonctionnera également\xA0:</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ./a-module.js</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">something</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;a-package/foo.js&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Charge depuis ./foo.js.</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>Enfin, l&#39;auto-référencement fonctionne également avec les paquets à portée. Par exemple, ce code fonctionnera également\xA0:</p><div class="language-json line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// package.json</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;@my/package&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;exports&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;./index.js&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ./index.js</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">module</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">exports</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 42</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ./other.js</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;@my/package&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">));</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> node</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> other.js</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">42</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="dual-commonjs/es-module-packages" tabindex="-1">Paquets doubles CommonJS/module ES <a class="header-anchor" href="#dual-commonjs/es-module-packages" aria-label="Permalink to “Paquets doubles CommonJS/module ES”">​</a></h2><p>Voir <a href="https://github.com/nodejs/package-examples" target="_blank" rel="noreferrer">le dépôt d&#39;exemples de paquets</a> pour plus de détails.</p><h2 id="nodejs-packagejson-field-definitions" tabindex="-1">Définitions de champs <code>package.json</code> Node.js <a class="header-anchor" href="#nodejs-packagejson-field-definitions" aria-label="Permalink to “Définitions de champs package.json Node.js”">​</a></h2><p>Cette section décrit les champs utilisés par l&#39;exécution Node.js. D&#39;autres outils (tels que <a href="https://docs.npmjs.com/cli/v8/configuring-npm/package-json" target="_blank" rel="noreferrer">npm</a>) utilisent des champs supplémentaires qui sont ignorés par Node.js et non documentés ici.</p><p>Les champs suivants dans les fichiers <code>package.json</code> sont utilisés dans Node.js\xA0:</p><ul><li><a href="/fr/nodejs/api/packages#name"><code>&quot;name&quot;</code></a> - Pertinent lors de l&#39;utilisation d&#39;importations nommées dans un paquet. Également utilisé par les gestionnaires de paquets comme nom du paquet.</li><li><a href="/fr/nodejs/api/packages#main"><code>&quot;main&quot;</code></a> - Le module par défaut lors du chargement du paquet, si les exports ne sont pas spécifiés, et dans les versions de Node.js antérieures à l&#39;introduction des exports.</li><li><a href="/fr/nodejs/api/packages#packagemanager"><code>&quot;packageManager&quot;</code></a> - Le gestionnaire de paquets recommandé lors de la contribution au paquet. Tiré parti par les shims <a href="/fr/nodejs/api/corepack">Corepack</a>.</li><li><a href="/fr/nodejs/api/packages#type"><code>&quot;type&quot;</code></a> - Le type de paquet déterminant s&#39;il faut charger les fichiers <code>.js</code> comme CommonJS ou comme modules ES.</li><li><a href="/fr/nodejs/api/packages#exports"><code>&quot;exports&quot;</code></a> - Exports de paquets et exports conditionnels. Lorsqu&#39;il est présent, limite les sous-modules qui peuvent être chargés à partir du paquet.</li><li><a href="/fr/nodejs/api/packages#imports"><code>&quot;imports&quot;</code></a> - Importations de paquets, pour une utilisation par les modules au sein du paquet lui-même.</li></ul><h3 id="name" tabindex="-1"><code>&quot;name&quot;</code> <a class="header-anchor" href="#name" aria-label="Permalink to “&quot;name&quot;”">​</a></h3><div class="info custom-block"><p class="custom-block-title">[Historique]</p><table tabindex="0"><thead><tr><th>Version</th><th>Modifications</th></tr></thead><tbody><tr><td>v13.6.0, v12.16.0</td><td>Suppression de l&#39;option <code>--experimental-resolve-self</code>.</td></tr><tr><td>v13.1.0, v12.16.0</td><td>Ajouté dans : v13.1.0, v12.16.0</td></tr></tbody></table></div><ul><li>Type\xA0: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a></li></ul><div class="language-json line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;nom-du-package&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>Le champ <code>&quot;name&quot;</code> définit le nom de votre package. La publication sur le registre <em>npm</em> nécessite un nom qui satisfait <a href="https://docs.npmjs.com/files/package.json#name" target="_blank" rel="noreferrer">certaines exigences</a>.</p><p>Le champ <code>&quot;name&quot;</code> peut être utilisé en plus du champ <a href="/fr/nodejs/api/packages#exports"><code>&quot;exports&quot;</code></a> pour <a href="/fr/nodejs/api/packages#self-referencing-a-package-using-its-name">s&#39;auto-référencer</a> un package en utilisant son nom.</p><h3 id="main" tabindex="-1"><code>&quot;main&quot;</code> <a class="header-anchor" href="#main" aria-label="Permalink to “&quot;main&quot;”">​</a></h3><p><strong>Ajouté dans\xA0: v0.4.0</strong></p><ul><li>Type\xA0: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a></li></ul><div class="language-json line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;main&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;./index.js&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>Le champ <code>&quot;main&quot;</code> définit le point d&#39;entrée d&#39;un package lorsqu&#39;il est importé par son nom via une recherche <code>node_modules</code>. Sa valeur est un chemin.</p><p>Lorsqu&#39;un package a un champ <a href="/fr/nodejs/api/packages#exports"><code>&quot;exports&quot;</code></a>, celui-ci prévaudra sur le champ <code>&quot;main&quot;</code> lors de l&#39;importation du package par son nom.</p><p>Il définit également le script qui est utilisé lorsque le <a href="/fr/nodejs/api/modules#folders-as-modules">répertoire du package est chargé via <code>require()</code></a>.</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Cela se résout en ./path/to/directory/index.js.</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;./path/to/directory&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="packagemanager" tabindex="-1"><code>&quot;packageManager&quot;</code> <a class="header-anchor" href="#packagemanager" aria-label="Permalink to “&quot;packageManager&quot;”">​</a></h3><p><strong>Ajouté dans\xA0: v16.9.0, v14.19.0</strong></p><div class="warning custom-block"><p class="custom-block-title">[Stable\xA0: 1 - Expérimental]</p><p><a href="/fr/nodejs/api/documentation#stability-index">Stable\xA0: 1</a> <a href="/fr/nodejs/api/documentation#stability-index">Stabilité\xA0: 1</a> - Expérimental</p></div><ul><li>Type\xA0: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a></li></ul><div class="language-json line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;packageManager&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;&lt;nom du gestionnaire de paquets&gt;@&lt;version&gt;&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>Le champ <code>&quot;packageManager&quot;</code> définit quel gestionnaire de paquets doit être utilisé lorsque l&#39;on travaille sur le projet actuel. Il peut être défini sur n&#39;importe lequel des <a href="/fr/nodejs/api/corepack#supported-package-managers">gestionnaires de paquets supportés</a>, et garantira que vos équipes utilisent exactement les mêmes versions de gestionnaire de paquets sans avoir à installer quoi que ce soit d&#39;autre que Node.js.</p><p>Ce champ est actuellement expérimental et nécessite une activation\xA0; consultez la page <a href="/fr/nodejs/api/corepack">Corepack</a> pour plus de détails sur la procédure.</p><h3 id="type" tabindex="-1"><code>&quot;type&quot;</code> <a class="header-anchor" href="#type" aria-label="Permalink to “&quot;type&quot;”">​</a></h3><div class="info custom-block"><p class="custom-block-title">[Historique]</p><table tabindex="0"><thead><tr><th>Version</th><th>Modifications</th></tr></thead><tbody><tr><td>v13.2.0, v12.17.0</td><td>Suppression du flag <code>--experimental-modules</code>.</td></tr><tr><td>v12.0.0</td><td>Ajouté dans\xA0: v12.0.0</td></tr></tbody></table></div><ul><li>Type\xA0: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a></li></ul><p>Le champ <code>&quot;type&quot;</code> définit le format de module que Node.js utilise pour tous les fichiers <code>.js</code> qui ont ce fichier <code>package.json</code> comme parent le plus proche.</p><p>Les fichiers se terminant par <code>.js</code> sont chargés en tant que modules ES lorsque le fichier <code>package.json</code> parent le plus proche contient un champ de niveau supérieur <code>&quot;type&quot;</code> avec une valeur de <code>&quot;module&quot;</code>.</p><p>Le <code>package.json</code> parent le plus proche est défini comme le premier <code>package.json</code> trouvé lors de la recherche dans le dossier actuel, le dossier parent de ce dossier, et ainsi de suite jusqu&#39;à ce qu&#39;un dossier node_modules ou la racine du volume soit atteinte.</p><div class="language-json line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// package.json</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;type&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;module&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Dans le même dossier que le package.json précédent {#in-same-folder-as-preceding-packagejson}</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">node</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> my-app.js</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # S&#39;exécute en tant que module ES</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>Si le <code>package.json</code> parent le plus proche n&#39;a pas de champ <code>&quot;type&quot;</code>, ou contient <code>&quot;type&quot;: &quot;commonjs&quot;</code>, les fichiers <code>.js</code> sont traités comme <a href="/fr/nodejs/api/modules">CommonJS</a>. Si la racine du volume est atteinte et qu&#39;aucun <code>package.json</code> n&#39;est trouvé, les fichiers <code>.js</code> sont traités comme <a href="/fr/nodejs/api/modules">CommonJS</a>.</p><p>Les instructions <code>import</code> des fichiers <code>.js</code> sont traitées comme des modules ES si le <code>package.json</code> parent le plus proche contient <code>&quot;type&quot;: &quot;module&quot;</code>.</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// my-app.js, qui fait partie du même exemple que ci-dessus</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;./startup.js&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Chargé en tant que module ES à cause du package.json</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>Quelle que soit la valeur du champ <code>&quot;type&quot;</code>, les fichiers <code>.mjs</code> sont toujours traités comme des modules ES et les fichiers <code>.cjs</code> sont toujours traités comme CommonJS.</p><h3 id="exports" tabindex="-1"><code>&quot;exports&quot;</code> <a class="header-anchor" href="#exports" aria-label="Permalink to “&quot;exports&quot;”">​</a></h3><div class="info custom-block"><p class="custom-block-title">[Historique]</p><table tabindex="0"><thead><tr><th>Version</th><th>Modifications</th></tr></thead><tbody><tr><td>v14.13.0, v12.20.0</td><td>Ajout du support des modèles <code>&quot;exports&quot;</code>.</td></tr><tr><td>v13.7.0, v12.17.0</td><td>Suppression du flag des exports conditionnels.</td></tr><tr><td>v13.7.0, v12.16.0</td><td>Implémentation de l&#39;ordonnancement logique des exports conditionnels.</td></tr><tr><td>v13.7.0, v12.16.0</td><td>Suppression de l&#39;option <code>--experimental-conditional-exports</code>. Dans la version 12.16.0, les exports conditionnels sont toujours derrière <code>--experimental-modules</code>.</td></tr><tr><td>v13.2.0, v12.16.0</td><td>Implémentation des exports conditionnels.</td></tr><tr><td>v12.7.0</td><td>Ajouté dans\xA0: v12.7.0</td></tr></tbody></table></div><ul><li>Type\xA0: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noreferrer">&lt;Object&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string[]&gt;</a></li></ul><div class="language-json line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;exports&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;./index.js&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>Le champ <code>&quot;exports&quot;</code> permet de définir les <a href="/fr/nodejs/api/packages#package-entry-points">points d&#39;entrée</a> d&#39;un package lorsqu&#39;il est importé par nom, chargé soit via une recherche <code>node_modules</code>, soit par une <a href="/fr/nodejs/api/packages#self-referencing-a-package-using-its-name">auto-référence</a> à son propre nom. Il est pris en charge dans Node.js 12+ comme alternative à <a href="/fr/nodejs/api/packages#main"><code>&quot;main&quot;</code></a> qui peut prendre en charge la définition de <a href="/fr/nodejs/api/packages#subpath-exports">subpath exports</a> et de <a href="/fr/nodejs/api/packages#conditional-exports">conditional exports</a> tout en encapsulant les modules internes non exportés.</p><p>Les <a href="/fr/nodejs/api/packages#conditional-exports">Exports Conditionnels</a> peuvent également être utilisés dans <code>&quot;exports&quot;</code> pour définir différents points d&#39;entrée de package par environnement, y compris si le package est référencé via <code>require</code> ou via <code>import</code>.</p><p>Tous les chemins définis dans <code>&quot;exports&quot;</code> doivent être des URL de fichiers relatives commençant par <code>./</code>.</p><h3 id="imports" tabindex="-1"><code>&quot;imports&quot;</code> <a class="header-anchor" href="#imports" aria-label="Permalink to “&quot;imports&quot;”">​</a></h3><p><strong>Ajouté dans\xA0: v14.6.0, v12.19.0</strong></p><ul><li>Type\xA0: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noreferrer">&lt;Object&gt;</a></li></ul><div class="language-json line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// package.json</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;imports&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;#dep&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;node&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;dep-node-native&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;default&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;./dep-polyfill.js&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;dependencies&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;dep-node-native&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;^1.0.0&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>Les entrées dans le champ imports doivent être des chaînes de caractères commençant par <code>#</code>.</p><p>Les importations de paquets permettent le mappage vers des paquets externes.</p><p>Ce champ définit les <a href="/fr/nodejs/api/packages#subpath-imports">importations de sous-chemin</a> pour le paquet actuel.</p>`,209)])}var s=e(a,[[`render`,o]]);export{i as __pageData,s as default};