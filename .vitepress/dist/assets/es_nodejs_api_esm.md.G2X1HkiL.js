import{__plugin_vue_export_helper_default as e,createElementBlock as t,createStaticVNode as n,openBlock as r}from"./chunks/plugin-vue_export-helper.Bts1mPc7.js";const i=JSON.parse(`{"title":"Módulos ECMAScript en Node.js","description":"Esta página ofrece documentación detallada sobre cómo usar los módulos ECMAScript (ESM) en Node.js, incluyendo la resolución de módulos, la sintaxis de importación y exportación, y la compatibilidad con CommonJS.","frontmatter":{"title":"Módulos ECMAScript en Node.js","description":"Esta página ofrece documentación detallada sobre cómo usar los módulos ECMAScript (ESM) en Node.js, incluyendo la resolución de módulos, la sintaxis de importación y exportación, y la compatibilidad con CommonJS.","head":[["meta",{"name":"og:title","content":"Módulos ECMAScript en Node.js | Node.js - iDoc.dev"}],["meta",{"name":"og:description","content":"Esta página ofrece documentación detallada sobre cómo usar los módulos ECMAScript (ESM) en Node.js, incluyendo la resolución de módulos, la sintaxis de importación y exportación, y la compatibilidad con CommonJS."}],["meta",{"name":"twitter:title","content":"Módulos ECMAScript en Node.js | Node.js - iDoc.dev"}],["meta",{"name":"twitter:description","content":"Esta página ofrece documentación detallada sobre cómo usar los módulos ECMAScript (ESM) en Node.js, incluyendo la resolución de módulos, la sintaxis de importación y exportación, y la compatibilidad con CommonJS."}],["link",{"rel":"canonical","href":"https://idoc.dev/es/nodejs/api/esm"}],["meta",{"property":"og:url","content":"https://idoc.dev/es/nodejs/api/esm"}]]},"headers":[],"relativePath":"es/nodejs/api/esm.md","filePath":"es/nodejs/api/esm.md","lastUpdated":null}`),a={name:`es/nodejs/api/esm.md`};function o(e,i,a,o,s,c){return r(),t(`div`,null,i[0]||=[n(`<h1 id="modules-ecmascript-modules" tabindex="-1">Módulos: Módulos ECMAScript <a class="header-anchor" href="#modules-ecmascript-modules" aria-label="Permalink to “Módulos: Módulos ECMAScript”">​</a></h1><div class="info custom-block"><p class="custom-block-title">[Historial]</p><table tabindex="0"><thead><tr><th>Versión</th><th>Cambios</th></tr></thead><tbody><tr><td>v23.1.0</td><td>Los atributos de importación ya no son experimentales.</td></tr><tr><td>v22.0.0</td><td>Se elimina la compatibilidad con las aserciones de importación.</td></tr><tr><td>v21.0.0, v20.10.0, v18.20.0</td><td>Se añade soporte experimental para los atributos de importación.</td></tr><tr><td>v20.0.0, v18.19.0</td><td>Los ganchos de personalización de módulos se ejecutan fuera del hilo principal.</td></tr><tr><td>v18.6.0, v16.17.0</td><td>Se añade soporte para encadenar ganchos de personalización de módulos.</td></tr><tr><td>v17.1.0, v16.14.0</td><td>Se añade soporte experimental para las aserciones de importación.</td></tr><tr><td>v17.0.0, v16.12.0</td><td>Se consolidan los ganchos de personalización, se eliminan los ganchos <code>getFormat</code>, <code>getSource</code>, <code>transformSource</code> y <code>getGlobalPreloadCode</code>, se añaden los ganchos <code>load</code> y <code>globalPreload</code> que permiten devolver <code>format</code> desde los ganchos <code>resolve</code> o <code>load</code>.</td></tr><tr><td>v14.8.0</td><td>Se elimina el indicador de Await de nivel superior.</td></tr><tr><td>v15.3.0, v14.17.0, v12.22.0</td><td>Se estabiliza la implementación de los módulos.</td></tr><tr><td>v14.13.0, v12.20.0</td><td>Soporte para la detección de exportaciones con nombre de CommonJS.</td></tr><tr><td>v14.0.0, v13.14.0, v12.20.0</td><td>Se elimina la advertencia de módulos experimentales.</td></tr><tr><td>v13.2.0, v12.17.0</td><td>La carga de módulos ECMAScript ya no requiere una bandera de línea de comandos.</td></tr><tr><td>v12.0.0</td><td>Se añade soporte para módulos ES que utilizan la extensión de archivo <code>.js</code> a través del campo <code>&quot;type&quot;</code> de <code>package.json</code>.</td></tr><tr><td>v8.5.0</td><td>Añadido en: v8.5.0</td></tr></tbody></table></div><div class="tip custom-block"><p class="custom-block-title">[Estable: 2 - Estable]</p><p><a href="/es/nodejs/api/documentation#stability-index">Estable: 2</a> <a href="/es/nodejs/api/documentation#stability-index">Estabilidad: 2</a> - Estable</p></div><h2 id="introduction" tabindex="-1">Introducción <a class="header-anchor" href="#introduction" aria-label="Permalink to “Introducción”">​</a></h2><p>Los módulos ECMAScript son <a href="https://tc39.github.io/ecma262/#sec-modules" target="_blank" rel="noreferrer">el formato estándar oficial</a> para empaquetar código JavaScript para su reutilización. Los módulos se definen utilizando una variedad de sentencias <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/import" target="_blank" rel="noreferrer"><code>import</code></a> y <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/export" target="_blank" rel="noreferrer"><code>export</code></a>.</p><p>El siguiente ejemplo de un módulo ES exporta una función:</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// addTwo.mjs</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> addTwo</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">num</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> num </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { addTwo };</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>El siguiente ejemplo de un módulo ES importa la función de <code>addTwo.mjs</code>:</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// app.mjs</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { addTwo } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;./addTwo.mjs&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Prints: 6</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">addTwo</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">4</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">));</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>Node.js soporta completamente los módulos ECMAScript tal y como están especificados actualmente y proporciona interoperabilidad entre ellos y su formato de módulo original, <a href="/es/nodejs/api/modules">CommonJS</a>.</p><h2 id="enabling" tabindex="-1">Habilitación <a class="header-anchor" href="#enabling" aria-label="Permalink to “Habilitación”">​</a></h2><p>Node.js tiene dos sistemas de módulos: módulos <a href="/es/nodejs/api/modules">CommonJS</a> y módulos ECMAScript.</p><p>Los autores pueden indicar a Node.js que interprete JavaScript como un módulo ES a través de la extensión de archivo <code>.mjs</code>, el campo <a href="/es/nodejs/api/packages#type"><code>&quot;type&quot;</code></a> de <code>package.json</code> con el valor <code>&quot;module&quot;</code>, o el indicador <a href="/es/nodejs/api/cli#input-typetype"><code>--input-type</code></a> con el valor <code>&quot;module&quot;</code>. Estos son marcadores explícitos de código que se pretende ejecutar como un módulo ES.</p><p>Inversamente, los autores pueden indicar explícitamente a Node.js que interprete JavaScript como CommonJS a través de la extensión de archivo <code>.cjs</code>, el campo <a href="/es/nodejs/api/packages#type"><code>&quot;type&quot;</code></a> de <code>package.json</code> con el valor <code>&quot;commonjs&quot;</code>, o el indicador <a href="/es/nodejs/api/cli#input-typetype"><code>--input-type</code></a> con el valor <code>&quot;commonjs&quot;</code>.</p><p>Cuando el código carece de marcadores explícitos para cualquiera de los sistemas de módulos, Node.js inspeccionará el código fuente de un módulo para buscar sintaxis de módulo ES. Si se encuentra tal sintaxis, Node.js ejecutará el código como un módulo ES; de lo contrario, ejecutará el módulo como CommonJS. Consulte <a href="/es/nodejs/api/packages#determining-module-system">Determining module system</a> para obtener más detalles.</p><h2 id="packages" tabindex="-1">Paquetes <a class="header-anchor" href="#packages" aria-label="Permalink to “Paquetes”">​</a></h2><p>Esta sección se movió a <a href="/es/nodejs/api/packages">Modules: Packages</a>.</p><h2 id="import-specifiers" tabindex="-1">Especificadores <code>import</code> <a class="header-anchor" href="#import-specifiers" aria-label="Permalink to “Especificadores import”">​</a></h2><h3 id="terminology" tabindex="-1">Terminología <a class="header-anchor" href="#terminology" aria-label="Permalink to “Terminología”">​</a></h3><p>El <em>especificador</em> de una declaración <code>import</code> es la cadena después de la palabra clave <code>from</code>, por ejemplo, <code>&#39;node:path&#39;</code> en <code>import { sep } from &#39;node:path&#39;</code>. Los especificadores también se utilizan en declaraciones <code>export from</code> y como argumento para una expresión <code>import()</code>.</p><p>Hay tres tipos de especificadores:</p><ul><li><em>Especificadores relativos</em> como <code>&#39;./startup.js&#39;</code> o <code>&#39;../config.mjs&#39;</code>. Se refieren a una ruta relativa a la ubicación del archivo de importación. <em>La extensión de archivo siempre es necesaria para estos.</em></li><li><em>Especificadores desnudos</em> como <code>&#39;some-package&#39;</code> o <code>&#39;some-package/shuffle&#39;</code>. Pueden referirse al punto de entrada principal de un paquete por el nombre del paquete, o a un módulo de características específico dentro de un paquete con el prefijo del nombre del paquete como en los ejemplos respectivamente. <em>Incluir la extensión de archivo solo es necesario para paquetes sin un campo <a href="packages.html#exports"><code>&quot;exports&quot;</code></a>.</em></li><li><em>Especificadores absolutos</em> como <code>&#39;file:///opt/nodejs/config.js&#39;</code>. Se refieren directa y explícitamente a una ruta completa.</li></ul><p>La resolución de especificadores desnudos es manejada por el <a href="/es/nodejs/api/esm#resolution-algorithm-specification">algoritmo de resolución y carga de módulos de Node.js</a>. Todas las demás resoluciones de especificadores siempre se resuelven únicamente con la semántica estándar de resolución <a href="https://url.spec.whatwg.org/" target="_blank" rel="noreferrer">URL</a> relativa.</p><p>Al igual que en CommonJS, se puede acceder a los archivos de módulos dentro de los paquetes añadiendo una ruta al nombre del paquete a menos que el <a href="/es/nodejs/api/packages#nodejs-packagejson-field-definitions"><code>package.json</code></a> del paquete contenga un campo <a href="/es/nodejs/api/packages#exports"><code>&quot;exports&quot;</code></a>, en cuyo caso solo se puede acceder a los archivos dentro de los paquetes a través de las rutas definidas en <a href="/es/nodejs/api/packages#exports"><code>&quot;exports&quot;</code></a>.</p><p>Para obtener detalles sobre estas reglas de resolución de paquetes que se aplican a los especificadores desnudos en la resolución de módulos de Node.js, consulte la <a href="/es/nodejs/api/packages">documentación de paquetes</a>.</p><h3 id="mandatory-file-extensions" tabindex="-1">Extensiones de archivo obligatorias <a class="header-anchor" href="#mandatory-file-extensions" aria-label="Permalink to “Extensiones de archivo obligatorias”">​</a></h3><p>Se debe proporcionar una extensión de archivo al usar la palabra clave <code>import</code> para resolver especificadores relativos o absolutos. Los índices de directorio (p. ej., <code>&#39;./startup/index.js&#39;</code>) también deben especificarse completamente.</p><p>Este comportamiento coincide con el comportamiento de <code>import</code> en entornos de navegador, asumiendo un servidor configurado de manera típica.</p><h3 id="urls" tabindex="-1">URLs <a class="header-anchor" href="#urls" aria-label="Permalink to “URLs”">​</a></h3><p>Los módulos ES se resuelven y almacenan en caché como URLs. Esto significa que los caracteres especiales deben estar <a href="/es/nodejs/api/url#percent-encoding-in-urls">codificados por porcentaje</a>, como <code>#</code> con <code>%23</code> y <code>?</code> con <code>%3F</code>.</p><p>Se admiten esquemas de URL <code>file:</code>, <code>node:</code> y <code>data:</code>. Un especificador como <code>&#39;https://example.com/app.js&#39;</code> no es compatible de forma nativa en Node.js a menos que se use un <a href="/es/nodejs/api/module#import-from-https">cargador HTTPS personalizado</a>.</p><h4 id="file-urls" tabindex="-1">URLs <code>file:</code> <a class="header-anchor" href="#file-urls" aria-label="Permalink to “URLs file:”">​</a></h4><p>Los módulos se cargan varias veces si el especificador <code>import</code> utilizado para resolverlos tiene una consulta o fragmento diferente.</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;./foo.mjs?query=1&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// carga ./foo.mjs con la consulta &quot;?query=1&quot;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;./foo.mjs?query=2&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// carga ./foo.mjs con la consulta &quot;?query=2&quot;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>Se puede hacer referencia a la raíz del volumen a través de <code>/</code>, <code>//</code> o <code>file:///</code>. Dadas las diferencias entre <a href="https://url.spec.whatwg.org/" target="_blank" rel="noreferrer">URL</a> y la resolución de rutas (como los detalles de la codificación por porcentaje), se recomienda utilizar <a href="/es/nodejs/api/url#urlpathtofileurlpath-options">url.pathToFileURL</a> al importar una ruta.</p><h4 id="data-imports" tabindex="-1">Importaciones <code>data:</code> <a class="header-anchor" href="#data-imports" aria-label="Permalink to “Importaciones data:”">​</a></h4><p><strong>Agregado en: v12.10.0</strong></p><p>Las <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/Data_URIs" target="_blank" rel="noreferrer"><code>data:</code> URLs</a> son compatibles para la importación con los siguientes tipos MIME:</p><ul><li><code>text/javascript</code> para módulos ES</li><li><code>application/json</code> para JSON</li><li><code>application/wasm</code> para Wasm</li></ul><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;data:text/javascript,console.log(&quot;hello!&quot;);&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> _ </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;data:application/json,&quot;world!&quot;&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> with</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { type: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;json&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> };</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>Las URLs <code>data:</code> solo resuelven <a href="/es/nodejs/api/esm#terminology">especificadores simples</a> para módulos incorporados y <a href="/es/nodejs/api/esm#terminology">especificadores absolutos</a>. La resolución de <a href="/es/nodejs/api/esm#terminology">especificadores relativos</a> no funciona porque <code>data:</code> no es un <a href="https://url.spec.whatwg.org/#special-scheme" target="_blank" rel="noreferrer">esquema especial</a>. Por ejemplo, intentar cargar <code>./foo</code> desde <code>data:text/javascript,import &quot;./foo&quot;;</code> no se resuelve porque no existe el concepto de resolución relativa para las URLs <code>data:</code>.</p><h4 id="node-imports" tabindex="-1">Imports <code>node:</code> <a class="header-anchor" href="#node-imports" aria-label="Permalink to “Imports node:”">​</a></h4><div class="info custom-block"><p class="custom-block-title">[Historial]</p><table tabindex="0"><thead><tr><th>Versión</th><th>Cambios</th></tr></thead><tbody><tr><td>v16.0.0, v14.18.0</td><td>Se añadió compatibilidad con la importación <code>node:</code> a <code>require(...)</code>.</td></tr><tr><td>v14.13.1, v12.20.0</td><td>Añadido en: v14.13.1, v12.20.0</td></tr></tbody></table></div><p>Las URLs <code>node:</code> son compatibles como un medio alternativo para cargar módulos incorporados de Node.js. Este esquema de URL permite que los módulos incorporados se referencien mediante cadenas de URL absolutas válidas.</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> fs </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;node:fs/promises&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h2 id="import-attributes" tabindex="-1">Atributos de importación <a class="header-anchor" href="#import-attributes" aria-label="Permalink to “Atributos de importación”">​</a></h2><div class="info custom-block"><p class="custom-block-title">[Historial]</p><table tabindex="0"><thead><tr><th>Versión</th><th>Cambios</th></tr></thead><tbody><tr><td>v21.0.0, v20.10.0, v18.20.0</td><td>Cambiar de Aserciones de importación a Atributos de importación.</td></tr><tr><td>v17.1.0, v16.14.0</td><td>Añadido en: v17.1.0, v16.14.0</td></tr></tbody></table></div><div class="tip custom-block"><p class="custom-block-title">[Estable: 2 - Estable]</p><p><a href="/es/nodejs/api/documentation#stability-index">Estable: 2</a> <a href="/es/nodejs/api/documentation#stability-index">Estabilidad: 2</a> - Estable</p></div><p>Los <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/import/with" target="_blank" rel="noreferrer">atributos de importación</a> son una sintaxis en línea para las sentencias de importación de módulos para pasar más información junto con el especificador del módulo.</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> fooData </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;./foo.json&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> with</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { type: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;json&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> };</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">default</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">barData</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  await</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;./bar.json&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, { with: { type: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;json&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> } });</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>Node.js solo admite el atributo <code>type</code>, para el que admite los siguientes valores:</p><table tabindex="0"><thead><tr><th>Atributo <code>type</code></th><th>Necesario para</th></tr></thead><tbody><tr><td><code>&#39;json&#39;</code></td><td><a href="/es/nodejs/api/esm#json-modules">Módulos JSON</a></td></tr><tr><td>El atributo <code>type: &#39;json&#39;</code> es obligatorio al importar módulos JSON.</td><td></td></tr></tbody></table><h2 id="built-in-modules" tabindex="-1">Módulos incorporados <a class="header-anchor" href="#built-in-modules" aria-label="Permalink to “Módulos incorporados”">​</a></h2><p>Los <a href="/es/nodejs/api/modules#built-in-modules">módulos incorporados</a> proporcionan exportaciones con nombre de su API pública. También se proporciona una exportación predeterminada que es el valor de las exportaciones de CommonJS. La exportación predeterminada se puede utilizar, entre otras cosas, para modificar las exportaciones con nombre. Las exportaciones con nombre de los módulos incorporados se actualizan solo llamando a <a href="/es/nodejs/api/module#modulesyncbuiltinesmexports"><code>module.syncBuiltinESMExports()</code></a>.</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> EventEmitter </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;node:events&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> e</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> EventEmitter</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { readFile } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;node:fs&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">readFile</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;./foo.txt&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">err</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">source</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (err) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(err);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">else</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(source);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> fs, { readFileSync } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;node:fs&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { syncBuiltinESMExports } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;node:module&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { Buffer } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;node:buffer&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">fs.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">readFileSync</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Buffer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;Hello, ESM&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">syncBuiltinESMExports</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">fs.readFileSync </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">===</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> readFileSync;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h2 id="import-expressions" tabindex="-1">expresiones <code>import()</code> <a class="header-anchor" href="#import-expressions" aria-label="Permalink to “expresiones import()”">​</a></h2><p><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/import" target="_blank" rel="noreferrer"><code>import()</code></a> dinámico es compatible tanto en CommonJS como en módulos ES. En módulos CommonJS se puede usar para cargar módulos ES.</p><h2 id="importmeta" tabindex="-1"><code>import.meta</code> <a class="header-anchor" href="#importmeta" aria-label="Permalink to “import.meta”">​</a></h2><ul><li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noreferrer">&lt;Object&gt;</a></li></ul><p>La metapropiedad <code>import.meta</code> es un <code>Object</code> que contiene las siguientes propiedades. Solo es compatible en módulos ES.</p><h3 id="importmetadirname" tabindex="-1"><code>import.meta.dirname</code> <a class="header-anchor" href="#importmetadirname" aria-label="Permalink to “import.meta.dirname”">​</a></h3><p><strong>Agregado en: v21.2.0, v20.11.0</strong></p><div class="warning custom-block"><p class="custom-block-title">[Estable: 1 - Experimental]</p><p><a href="/es/nodejs/api/documentation#stability-index">Estable: 1</a> <a href="/es/nodejs/api/documentation#stability-index">Estabilidad: 1</a>.2 - Candidato para lanzamiento</p></div><ul><li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> El nombre del directorio del módulo actual. Esto es lo mismo que el <a href="/es/nodejs/api/path#pathdirnamepath"><code>path.dirname()</code></a> de <a href="/es/nodejs/api/esm#importmetafilename"><code>import.meta.filename</code></a>.</li></ul><h3 id="importmetafilename" tabindex="-1"><code>import.meta.filename</code> <a class="header-anchor" href="#importmetafilename" aria-label="Permalink to “import.meta.filename”">​</a></h3><p><strong>Agregado en: v21.2.0, v20.11.0</strong></p><div class="warning custom-block"><p class="custom-block-title">[Estable: 1 - Experimental]</p><p><a href="/es/nodejs/api/documentation#stability-index">Estable: 1</a> <a href="/es/nodejs/api/documentation#stability-index">Estabilidad: 1</a>.2 - Candidato para lanzamiento</p></div><ul><li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> La ruta absoluta completa y el nombre de archivo del módulo actual, con los enlaces simbólicos resueltos.</li><li>Esto es lo mismo que el <a href="/es/nodejs/api/url#urlfileurltopathurl-options"><code>url.fileURLToPath()</code></a> de <a href="/es/nodejs/api/esm#importmetaurl"><code>import.meta.url</code></a>.</li></ul><h3 id="importmetaurl" tabindex="-1"><code>import.meta.url</code> <a class="header-anchor" href="#importmetaurl" aria-label="Permalink to “import.meta.url”">​</a></h3><ul><li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> La URL <code>file:</code> absoluta del módulo.</li></ul><p>Esto se define exactamente igual que en los navegadores, proporcionando la URL del archivo de módulo actual.</p><p>Esto permite patrones útiles como la carga de archivos relativos:</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { readFileSync } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;node:fs&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> buffer</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> readFileSync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> URL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;./data.proto&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">meta</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.url));</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="importmetaresolvespecifier" tabindex="-1"><code>import.meta.resolve(specifier)</code> <a class="header-anchor" href="#importmetaresolvespecifier" aria-label="Permalink to “import.meta.resolve(specifier)”">​</a></h3><div class="info custom-block"><p class="custom-block-title">[Historial]</p><table tabindex="0"><thead><tr><th>Versión</th><th>Cambios</th></tr></thead><tbody><tr><td>v20.6.0, v18.19.0</td><td>Ya no está detrás del flag de CLI <code>--experimental-import-meta-resolve</code>, excepto para el parámetro no estándar <code>parentURL</code>.</td></tr><tr><td>v20.6.0, v18.19.0</td><td>Esta API ya no lanza un error al apuntar a URLs <code>file:</code> que no se corresponden con un archivo existente en el sistema de archivos local.</td></tr><tr><td>v20.0.0, v18.19.0</td><td>Esta API ahora devuelve una cadena de forma sincrónica en lugar de una Promise.</td></tr><tr><td>v16.2.0, v14.18.0</td><td>Se agrega soporte para el objeto WHATWG <code>URL</code> al parámetro <code>parentURL</code>.</td></tr><tr><td>v13.9.0, v12.16.2</td><td>Agregado en: v13.9.0, v12.16.2</td></tr></tbody></table></div><div class="warning custom-block"><p class="custom-block-title">[Estable: 1 - Experimental]</p><p><a href="/es/nodejs/api/documentation#stability-index">Estable: 1</a> <a href="/es/nodejs/api/documentation#stability-index">Estabilidad: 1</a>.2 - Candidato para lanzamiento</p></div><ul><li><code>specifier</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> El especificador del módulo para resolver en relación con el módulo actual.</li><li>Devuelve: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> La cadena URL absoluta a la que se resolvería el especificador.</li></ul><p><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/import.meta/resolve" target="_blank" rel="noreferrer"><code>import.meta.resolve</code></a> es una función de resolución relativa al módulo con ámbito para cada módulo, que devuelve la cadena URL.</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> dependencyAsset</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">meta</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">resolve</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;component-lib/asset.css&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// file:///app/node_modules/component-lib/asset.css</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">meta</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">resolve</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;./dep.js&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// file:///app/dep.js</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>Se admiten todas las características de la resolución de módulos de Node.js. Las resoluciones de dependencias están sujetas a las resoluciones de exportaciones permitidas dentro del paquete.</p><p><strong>Advertencias</strong>:</p><ul><li>Esto puede resultar en operaciones sincrónicas del sistema de archivos, lo que puede afectar al rendimiento de forma similar a <code>require.resolve</code>.</li><li>Esta característica no está disponible dentro de los cargadores personalizados (crearía un interbloqueo).</li></ul><p><strong>API no estándar</strong>:</p><p>Cuando se utiliza el flag <code>--experimental-import-meta-resolve</code>, esta función acepta un segundo argumento:</p><ul><li><code>parent</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="/es/nodejs/api/url#the-whatwg-url-api">&lt;URL&gt;</a> Una URL de módulo padre absoluta opcional desde la que resolver. <strong>Predeterminado:</strong> <code>import.meta.url</code></li></ul><h2 id="interoperability-with-commonjs" tabindex="-1">Interoperabilidad con CommonJS <a class="header-anchor" href="#interoperability-with-commonjs" aria-label="Permalink to “Interoperabilidad con CommonJS”">​</a></h2><h3 id="import-statements" tabindex="-1">Declaraciones <code>import</code> <a class="header-anchor" href="#import-statements" aria-label="Permalink to “Declaraciones import”">​</a></h3><p>Una declaración <code>import</code> puede hacer referencia a un módulo ES o a un módulo CommonJS. Las declaraciones <code>import</code> solo se permiten en módulos ES, pero las expresiones dinámicas <a href="/es/nodejs/api/esm#import-expressions"><code>import()</code></a> se admiten en CommonJS para cargar módulos ES.</p><p>Al importar <a href="/es/nodejs/api/esm#commonjs-namespaces">módulos CommonJS</a>, el objeto <code>module.exports</code> se proporciona como la exportación predeterminada. Las exportaciones con nombre pueden estar disponibles, proporcionadas por análisis estático como una conveniencia para una mejor compatibilidad del ecosistema.</p><h3 id="require" tabindex="-1"><code>require</code> <a class="header-anchor" href="#require" aria-label="Permalink to “require”">​</a></h3><p>El módulo CommonJS <code>require</code> actualmente solo admite la carga de módulos ES síncronos (es decir, módulos ES que no utilizan <code>await</code> de nivel superior).</p><p>Consulta <a href="/es/nodejs/api/modules#loading-ecmascript-modules-using-require">Cargando módulos ECMAScript utilizando <code>require()</code></a> para obtener más detalles.</p><h3 id="commonjs-namespaces" tabindex="-1">Espacios de nombres CommonJS <a class="header-anchor" href="#commonjs-namespaces" aria-label="Permalink to “Espacios de nombres CommonJS”">​</a></h3><div class="info custom-block"><p class="custom-block-title">[Historia]</p><table tabindex="0"><thead><tr><th>Versión</th><th>Cambios</th></tr></thead><tbody><tr><td>v23.0.0</td><td>Se agregó el marcador de exportación <code>&#39;module.exports&#39;</code> a los espacios de nombres CJS.</td></tr><tr><td>v14.13.0</td><td>Agregado en: v14.13.0</td></tr></tbody></table></div><p>Los módulos CommonJS consisten en un objeto <code>module.exports</code> que puede ser de cualquier tipo.</p><p>Para admitir esto, al importar CommonJS desde un módulo ECMAScript, se construye un envoltorio de espacio de nombres para el módulo CommonJS, que siempre proporciona una clave de exportación <code>default</code> que apunta al valor <code>module.exports</code> de CommonJS.</p><p>Además, se realiza un análisis estático heurístico en el texto fuente del módulo CommonJS para obtener una lista estática de exportaciones del mejor esfuerzo para proporcionar en el espacio de nombres desde los valores en <code>module.exports</code>. Esto es necesario ya que estos espacios de nombres deben construirse antes de la evaluación del módulo CJS.</p><p>Estos objetos de espacio de nombres CommonJS también proporcionan la exportación <code>default</code> como una exportación con nombre <code>&#39;module.exports&#39;</code>, para indicar inequívocamente que su representación en CommonJS utiliza este valor, y no el valor del espacio de nombres. Esto refleja la semántica del manejo del nombre de exportación <code>&#39;module.exports&#39;</code> en el soporte de interop de <a href="/es/nodejs/api/modules#loading-ecmascript-modules-using-require"><code>require(esm)</code></a>.</p><p>Al importar un módulo CommonJS, se puede importar de manera confiable utilizando la importación predeterminada del módulo ES o su sintaxis de azúcar correspondiente:</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">default</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> as</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> cjs } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;cjs&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Idéntico a lo anterior</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> cjsSugar </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;cjs&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(cjs);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(cjs </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">===</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> cjsSugar);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Imprime:</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//   &lt;module.exports&gt;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//   true</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>Este objeto exótico de espacio de nombres de módulo se puede observar directamente ya sea cuando se usa <code>import * as m from &#39;cjs&#39;</code> o una importación dinámica:</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> *</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> as</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> m </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;cjs&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(m);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(m </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">===</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;cjs&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">));</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Imprime:</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//   [Module] { default: &lt;module.exports&gt;, &#39;module.exports&#39;: &lt;module.exports&gt; }</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//   true</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>Para una mejor compatibilidad con el uso existente en el ecosistema de JS, Node.js además intenta determinar las exportaciones con nombre de CommonJS de cada módulo CommonJS importado para proporcionarlas como exportaciones de módulos ES separados utilizando un proceso de análisis estático.</p><p>Por ejemplo, considera un módulo CommonJS escrito:</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// cjs.cjs</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">exports</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.name </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;exported&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>El módulo anterior admite importaciones con nombre en módulos ES:</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { name } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;./cjs.cjs&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(name);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Imprime: &#39;exported&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> cjs </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;./cjs.cjs&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(cjs);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Imprime: { name: &#39;exported&#39; }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> *</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> as</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> m </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;./cjs.cjs&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(m);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Imprime:</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//   [Module] {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//     default: { name: &#39;exported&#39; },</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//     &#39;module.exports&#39;: { name: &#39;exported&#39; },</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//     name: &#39;exported&#39;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//   }</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p>Como se puede ver en el último ejemplo del objeto exótico de espacio de nombres de módulo que se está registrando, la exportación <code>name</code> se copia del objeto <code>module.exports</code> y se establece directamente en el espacio de nombres del módulo ES cuando se importa el módulo.</p><p>Las actualizaciones de enlace en vivo o las nuevas exportaciones agregadas a <code>module.exports</code> no se detectan para estas exportaciones con nombre.</p><p>La detección de exportaciones con nombre se basa en patrones de sintaxis comunes, pero no siempre detecta correctamente las exportaciones con nombre. En estos casos, usar el formulario de importación predeterminado descrito anteriormente puede ser una mejor opción.</p><p>La detección de exportaciones con nombre cubre muchos patrones de exportación comunes, patrones de reexportación y salidas de herramientas de compilación y transpiladores. Consulta <a href="https://github.com/nodejs/cjs-module-lexer/tree/1.2.2" target="_blank" rel="noreferrer">cjs-module-lexer</a> para conocer la semántica exacta implementada.</p><h3 id="differences-between-es-modules-and-commonjs" tabindex="-1">Diferencias entre los módulos ES y CommonJS <a class="header-anchor" href="#differences-between-es-modules-and-commonjs" aria-label="Permalink to “Diferencias entre los módulos ES y CommonJS”">​</a></h3><h4 id="no-require-exports-or-moduleexports" tabindex="-1">Sin <code>require</code>, <code>exports</code> o <code>module.exports</code> <a class="header-anchor" href="#no-require-exports-or-moduleexports" aria-label="Permalink to “Sin require, exports o module.exports”">​</a></h4><p>En la mayoría de los casos, el <code>import</code> del módulo ES se puede utilizar para cargar módulos CommonJS.</p><p>Si es necesario, se puede construir una función <code>require</code> dentro de un módulo ES utilizando <a href="/es/nodejs/api/module#modulecreaterequirefilename"><code>module.createRequire()</code></a>.</p><h4 id="no-__filename-or-__dirname" tabindex="-1">Sin <code>__filename</code> o <code>__dirname</code> <a class="header-anchor" href="#no-__filename-or-__dirname" aria-label="Permalink to “Sin __filename o __dirname”">​</a></h4><p>Estas variables de CommonJS no están disponibles en los módulos ES.</p><p>Los casos de uso de <code>__filename</code> y <code>__dirname</code> se pueden replicar mediante <a href="/es/nodejs/api/esm#importmetafilename"><code>import.meta.filename</code></a> e <a href="/es/nodejs/api/esm#importmetadirname"><code>import.meta.dirname</code></a>.</p><h4 id="no-addon-loading" tabindex="-1">Sin carga de complementos <a class="header-anchor" href="#no-addon-loading" aria-label="Permalink to “Sin carga de complementos”">​</a></h4><p>Los <a href="/es/nodejs/api/addons">complementos</a> no son compatibles actualmente con las importaciones de módulos ES.</p><p>En su lugar, se pueden cargar con <a href="/es/nodejs/api/module#modulecreaterequirefilename"><code>module.createRequire()</code></a> o <a href="/es/nodejs/api/process#processdlopenmodule-filename-flags"><code>process.dlopen</code></a>.</p><h4 id="no-requireresolve" tabindex="-1">Sin <code>require.resolve</code> <a class="header-anchor" href="#no-requireresolve" aria-label="Permalink to “Sin require.resolve”">​</a></h4><p>La resolución relativa se puede manejar a través de <code>new URL(&#39;./local&#39;, import.meta.url)</code>.</p><p>Para un reemplazo completo de <code>require.resolve</code>, existe la API <a href="/es/nodejs/api/esm#importmetaresolvespecifier">import.meta.resolve</a>.</p><p>Alternativamente, se puede utilizar <code>module.createRequire()</code>.</p><h4 id="no-node_path" tabindex="-1">Sin <code>NODE_PATH</code> <a class="header-anchor" href="#no-node_path" aria-label="Permalink to “Sin NODE_PATH”">​</a></h4><p><code>NODE_PATH</code> no forma parte de la resolución de especificadores <code>import</code>. Utilice enlaces simbólicos si desea este comportamiento.</p><h4 id="no-requireextensions" tabindex="-1">Sin <code>require.extensions</code> <a class="header-anchor" href="#no-requireextensions" aria-label="Permalink to “Sin require.extensions”">​</a></h4><p><code>require.extensions</code> no es utilizado por <code>import</code>. Los hooks de personalización de módulos pueden proporcionar un reemplazo.</p><h4 id="no-requirecache" tabindex="-1">Sin <code>require.cache</code> <a class="header-anchor" href="#no-requirecache" aria-label="Permalink to “Sin require.cache”">​</a></h4><p><code>require.cache</code> no es utilizado por <code>import</code>, ya que el cargador de módulos ES tiene su propia caché separada.</p><h2 id="json-modules" tabindex="-1">Módulos JSON <a class="header-anchor" href="#json-modules" aria-label="Permalink to “Módulos JSON”">​</a></h2><div class="info custom-block"><p class="custom-block-title">[Historia]</p><table tabindex="0"><thead><tr><th>Versión</th><th>Cambios</th></tr></thead><tbody><tr><td>v23.1.0</td><td>Los módulos JSON ya no son experimentales.</td></tr></tbody></table></div><div class="tip custom-block"><p class="custom-block-title">[Estable: 2 - Estable]</p><p><a href="/es/nodejs/api/documentation#stability-index">Estable: 2</a> <a href="/es/nodejs/api/documentation#stability-index">Estabilidad: 2</a> - Estable</p></div><p>Se puede hacer referencia a archivos JSON mediante <code>import</code>:</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> packageConfig </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;./package.json&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> with</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { type: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;json&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> };</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>La sintaxis <code>with { type: &#39;json&#39; }</code> es obligatoria; consulte <a href="/es/nodejs/api/esm#import-attributes">Atributos de importación</a>.</p><p>El JSON importado solo expone una exportación <code>default</code>. No hay soporte para exportaciones con nombre. Se crea una entrada de caché en la caché de CommonJS para evitar la duplicación. El mismo objeto se devuelve en CommonJS si el módulo JSON ya se ha importado desde la misma ruta.</p><h2 id="wasm-modules" tabindex="-1">Módulos Wasm <a class="header-anchor" href="#wasm-modules" aria-label="Permalink to “Módulos Wasm”">​</a></h2><div class="warning custom-block"><p class="custom-block-title">[Estable: 1 - Experimental]</p><p><a href="/es/nodejs/api/documentation#stability-index">Estable: 1</a> <a href="/es/nodejs/api/documentation#stability-index">Estabilidad: 1</a> - Experimental</p></div><p>La importación de módulos WebAssembly es compatible con la bandera <code>--experimental-wasm-modules</code>, lo que permite importar cualquier archivo <code>.wasm</code> como módulos normales y, al mismo tiempo, admitir las importaciones de sus módulos.</p><p>Esta integración está en línea con la <a href="https://github.com/webassembly/esm-integration" target="_blank" rel="noreferrer">Propuesta de integración del módulo ES para WebAssembly</a>.</p><p>Por ejemplo, un <code>index.mjs</code> que contiene:</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> *</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> as</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> M </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;./module.wasm&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">M</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>ejecutado bajo:</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">node</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --experimental-wasm-modules</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> index.mjs</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>proporcionaría la interfaz de exportación para la instanciación de <code>module.wasm</code>.</p><h2 id="top-level-await" tabindex="-1"><code>await</code> de nivel superior <a class="header-anchor" href="#top-level-await" aria-label="Permalink to “await de nivel superior”">​</a></h2><p><strong>Agregado en: v14.8.0</strong></p><p>La palabra clave <code>await</code> se puede utilizar en el cuerpo de nivel superior de un módulo ECMAScript.</p><p>Suponiendo un <code>a.mjs</code> con</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> five</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> Promise</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">resolve</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">5</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>Y un <code>b.mjs</code> con</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { five } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;./a.mjs&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(five); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Registra \`5\`</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">node</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> b.mjs</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # funciona</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>Si una expresión <code>await</code> de nivel superior nunca se resuelve, el proceso <code>node</code> saldrá con un <a href="/es/nodejs/api/process#exit-codes">código de estado</a> <code>13</code>.</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { spawn } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;node:child_process&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { execPath } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;node:process&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">spawn</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(execPath, [</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  &#39;--input-type=module&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  &#39;--eval&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // Promesa que nunca se resuelve:</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  &#39;await new Promise(() =&gt; {})&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">once</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;exit&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">code</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(code); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Registra \`13\`</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h2 id="loaders" tabindex="-1">Cargadores <a class="header-anchor" href="#loaders" aria-label="Permalink to “Cargadores”">​</a></h2><p>La documentación anterior de Cargadores ahora se encuentra en <a href="/es/nodejs/api/module#customization-hooks">Módulos: Hooks de personalización</a>.</p><h2 id="resolution-and-loading-algorithm" tabindex="-1">Algoritmo de resolución y carga <a class="header-anchor" href="#resolution-and-loading-algorithm" aria-label="Permalink to “Algoritmo de resolución y carga”">​</a></h2><h3 id="features" tabindex="-1">Características <a class="header-anchor" href="#features" aria-label="Permalink to “Características”">​</a></h3><p>El resolutor predeterminado tiene las siguientes propiedades:</p><ul><li>Resolución basada en FileURL como la que utilizan los módulos ES</li><li>Resolución de URL relativas y absolutas</li><li>Sin extensiones predeterminadas</li><li>Sin mains de carpeta</li><li>Búsqueda de resolución de paquetes de especificadores simples a través de node_modules</li><li>No falla en extensiones o protocolos desconocidos</li><li>Opcionalmente, puede proporcionar una sugerencia del formato a la fase de carga</li></ul><p>El cargador predeterminado tiene las siguientes propiedades</p><ul><li>Soporte para la carga de módulos incorporados a través de URL <code>node:</code></li><li>Soporte para la carga de módulos &quot;inline&quot; a través de URL <code>data:</code></li><li>Soporte para la carga de módulos <code>file:</code></li><li>Falla en cualquier otro protocolo URL</li><li>Falla en extensiones desconocidas para la carga <code>file:</code> (solo admite <code>.cjs</code>, <code>.js</code> y <code>.mjs</code>)</li></ul><h3 id="resolution-algorithm" tabindex="-1">Algoritmo de resolución <a class="header-anchor" href="#resolution-algorithm" aria-label="Permalink to “Algoritmo de resolución”">​</a></h3><p>El algoritmo para cargar un especificador de módulo ES se proporciona a través del método <strong>ESM_RESOLVE</strong> a continuación. Devuelve la URL resuelta para un especificador de módulo en relación con una parentURL.</p><p>El algoritmo de resolución determina la URL resuelta completa para una carga de módulo, junto con su formato de módulo sugerido. El algoritmo de resolución no determina si el protocolo de la URL resuelta se puede cargar o si las extensiones de archivo están permitidas; en cambio, Node.js aplica estas validaciones durante la fase de carga (por ejemplo, si se solicitó cargar una URL que tiene un protocolo que no es <code>file:</code>, <code>data:</code> o <code>node:</code>).</p><p>El algoritmo también intenta determinar el formato del archivo según la extensión (consulte el algoritmo <code>ESM_FILE_FORMAT</code> a continuación). Si no reconoce la extensión del archivo (por ejemplo, si no es <code>.mjs</code>, <code>.cjs</code> o <code>.json</code>), se devuelve un formato de <code>undefined</code>, que generará un error durante la fase de carga.</p><p>El algoritmo para determinar el formato del módulo de una URL resuelta se proporciona mediante <strong>ESM_FILE_FORMAT</strong>, que devuelve el formato de módulo único para cualquier archivo. El formato <em>&quot;module&quot;</em> se devuelve para un Módulo ECMAScript, mientras que el formato <em>&quot;commonjs&quot;</em> se usa para indicar la carga a través del cargador CommonJS heredado. Se pueden ampliar formatos adicionales como <em>&quot;addon&quot;</em> en futuras actualizaciones.</p><p>En los siguientes algoritmos, todos los errores de subrutina se propagan como errores de estas rutinas de nivel superior, a menos que se indique lo contrario.</p><p><em>defaultConditions</em> es la matriz de nombres de entorno condicional, <code>[&quot;node&quot;, &quot;import&quot;]</code>.</p><p>El resolvedor puede generar los siguientes errores:</p><ul><li><em>Especificador de módulo no válido</em>: El especificador de módulo es una URL no válida, un nombre de paquete o un especificador de subruta de paquete.</li><li><em>Configuración de paquete no válida</em>: La configuración de package.json no es válida o contiene una configuración no válida.</li><li><em>Destino de paquete no válido</em>: Las exportaciones o importaciones del paquete definen un módulo de destino para el paquete que es un tipo no válido o un destino de cadena.</li><li><em>Ruta de paquete no exportada</em>: Las exportaciones del paquete no definen ni permiten una subruta de destino en el paquete para el módulo dado.</li><li><em>Importación de paquete no definida</em>: Las importaciones del paquete no definen el especificador.</li><li><em>Módulo no encontrado</em>: El paquete o módulo solicitado no existe.</li><li><em>Importación de directorio no admitida</em>: La ruta resuelta corresponde a un directorio, que no es un destino admitido para las importaciones de módulos.</li></ul><h3 id="resolution-algorithm-specification" tabindex="-1">Especificación del Algoritmo de Resolución <a class="header-anchor" href="#resolution-algorithm-specification" aria-label="Permalink to “Especificación del Algoritmo de Resolución”">​</a></h3><p><strong>ESM_RESOLVE</strong>(<em>specifier</em>, <em>parentURL</em>)</p><p><strong>PACKAGE_RESOLVE</strong>(<em>packageSpecifier</em>, <em>parentURL</em>)</p><p><strong>PACKAGE_SELF_RESOLVE</strong>(<em>packageName</em>, <em>packageSubpath</em>, <em>parentURL</em>)</p><p><strong>PACKAGE_EXPORTS_RESOLVE</strong>(<em>packageURL</em>, <em>subpath</em>, <em>exports</em>, <em>conditions</em>)</p><p><strong>PACKAGE_IMPORTS_RESOLVE</strong>(<em>specifier</em>, <em>parentURL</em>, <em>conditions</em>)</p><p><strong>PACKAGE_IMPORTS_EXPORTS_RESOLVE</strong>(<em>matchKey</em>, <em>matchObj</em>, <em>packageURL</em>, <em>isImports</em>, <em>conditions</em>)</p><p><strong>PATTERN_KEY_COMPARE</strong>(<em>keyA</em>, <em>keyB</em>)</p><p><strong>PACKAGE_TARGET_RESOLVE</strong>(<em>packageURL</em>, <em>target</em>, <em>patternMatch</em>, <em>isImports</em>, <em>conditions</em>)</p><p><strong>ESM_FILE_FORMAT</strong>(<em>url</em>)</p><p><strong>LOOKUP_PACKAGE_SCOPE</strong>(<em>url</em>)</p><p><strong>READ_PACKAGE_JSON</strong>(<em>packageURL</em>)</p><p><strong>DETECT_MODULE_SYNTAX</strong>(<em>source</em>)</p><h3 id="customizing-esm-specifier-resolution-algorithm" tabindex="-1">Personalización del algoritmo de resolución de especificadores ESM <a class="header-anchor" href="#customizing-esm-specifier-resolution-algorithm" aria-label="Permalink to “Personalización del algoritmo de resolución de especificadores ESM”">​</a></h3><p>Los <a href="/es/nodejs/api/module#customization-hooks">hooks de personalización de módulos</a> proporcionan un mecanismo para personalizar el algoritmo de resolución de especificadores ESM. Un ejemplo que proporciona la resolución al estilo CommonJS para los especificadores ESM es <a href="https://github.com/nodejs/loaders-test/tree/main/commonjs-extension-resolution-loader" target="_blank" rel="noreferrer">commonjs-extension-resolution-loader</a>.</p>`,191)])}var s=e(a,[[`render`,o]]);export{i as __pageData,s as default};