import{__plugin_vue_export_helper_default as e,createElementBlock as t,createStaticVNode as n,openBlock as r}from"./chunks/plugin-vue_export-helper.Bts1mPc7.js";const i=JSON.parse(`{"title":"Опции командной строки Node.js","description":"Эта страница предоставляет полное руководство по доступным опциям командной строки в Node.js, подробно описывая, как использовать различные флаги и аргументы для настройки среды выполнения, управления отладкой и контроля поведения выполнения.","frontmatter":{"title":"Опции командной строки Node.js","description":"Эта страница предоставляет полное руководство по доступным опциям командной строки в Node.js, подробно описывая, как использовать различные флаги и аргументы для настройки среды выполнения, управления отладкой и контроля поведения выполнения.","head":[["meta",{"name":"og:title","content":"Опции командной строки Node.js | Node.js - iDoc.dev"}],["meta",{"name":"og:description","content":"Эта страница предоставляет полное руководство по доступным опциям командной строки в Node.js, подробно описывая, как использовать различные флаги и аргументы для настройки среды выполнения, управления отладкой и контроля поведения выполнения."}],["meta",{"name":"twitter:title","content":"Опции командной строки Node.js | Node.js - iDoc.dev"}],["meta",{"name":"twitter:description","content":"Эта страница предоставляет полное руководство по доступным опциям командной строки в Node.js, подробно описывая, как использовать различные флаги и аргументы для настройки среды выполнения, управления отладкой и контроля поведения выполнения."}],["link",{"rel":"canonical","href":"https://idoc.dev/ru/nodejs/api/cli"}],["meta",{"property":"og:url","content":"https://idoc.dev/ru/nodejs/api/cli"}]]},"headers":[],"relativePath":"ru/nodejs/api/cli.md","filePath":"ru/nodejs/api/cli.md","lastUpdated":1749464498000}`),a={name:`ru/nodejs/api/cli.md`};function o(e,i,a,o,s,c){return r(),t(`div`,null,i[0]||=[n(`<h1 id="command-line-api" tabindex="-1">Параметры командной строки <a class="header-anchor" href="#command-line-api" aria-label="Permalink to “Параметры командной строки”">​</a></h1><p>Node.js поставляется с различными параметрами командной строки. Эти параметры предоставляют встроенные средства отладки, несколько способов выполнения скриптов и другие полезные параметры времени выполнения.</p><p>Чтобы просмотреть эту документацию в виде справочной страницы в терминале, запустите <code>man node</code>.</p><h2 id="synopsis" tabindex="-1">Краткий обзор <a class="header-anchor" href="#synopsis" aria-label="Permalink to “Краткий обзор”">​</a></h2><p><code>node [параметры] [параметры V8] [&lt;точка_входа_программы&gt; | -e &quot;скрипт&quot; | -] [--] [аргументы]</code></p><p><code>node inspect [&lt;точка_входа_программы&gt; | -e &quot;скрипт&quot; | &lt;хост&gt;:&lt;порт&gt;] …</code></p><p><code>node --v8-options</code></p><p>Выполните без аргументов, чтобы запустить <a href="/ru/nodejs/api/repl">REPL</a>.</p><p>Для получения дополнительной информации о <code>node inspect</code> см. документацию <a href="/ru/nodejs/api/debugger">отладчика</a>.</p><h2 id="program-entry-point" tabindex="-1">Точка входа программы <a class="header-anchor" href="#program-entry-point" aria-label="Permalink to “Точка входа программы”">​</a></h2><p>Точка входа программы - это строка, похожая на спецификатор. Если строка не является абсолютным путем, она разрешается как относительный путь от текущего рабочего каталога. Затем этот путь разрешается загрузчиком модулей <a href="/ru/nodejs/api/modules">CommonJS</a>. Если соответствующий файл не найден, возникает ошибка.</p><p>Если файл найден, его путь будет передан в <a href="/ru/nodejs/api/packages#modules-loaders">загрузчик модулей ES</a> при любом из следующих условий:</p><ul><li>Программа была запущена с флагом командной строки, который заставляет точку входа загружаться с помощью загрузчика модулей ECMAScript, такого как <code>--import</code>.</li><li>Файл имеет расширение <code>.mjs</code>.</li><li>Файл не имеет расширения <code>.cjs</code>, а ближайший родительский файл <code>package.json</code> содержит поле верхнего уровня <a href="/ru/nodejs/api/packages#type"><code>&quot;type&quot;</code></a> со значением <code>&quot;module&quot;</code>.</li></ul><p>В противном случае файл загружается с помощью загрузчика модулей CommonJS. Подробнее см. <a href="/ru/nodejs/api/packages#modules-loaders">Загрузчики модулей</a>.</p><h3 id="ecmascript-modules-loader-entry-point-caveat" tabindex="-1">Предостережение относительно точки входа загрузчика модулей ECMAScript <a class="header-anchor" href="#ecmascript-modules-loader-entry-point-caveat" aria-label="Permalink to “Предостережение относительно точки входа загрузчика модулей ECMAScript”">​</a></h3><p>При загрузке <a href="/ru/nodejs/api/packages#modules-loaders">загрузчиком модулей ES</a> точки входа программы команда <code>node</code> принимает в качестве входных данных только файлы с расширениями <code>.js</code>, <code>.mjs</code> или <code>.cjs</code>; и с расширениями <code>.wasm</code>, когда включен параметр <a href="/ru/nodejs/api/cli#experimental-wasm-modules"><code>--experimental-wasm-modules</code></a>.</p><h2 id="options" tabindex="-1">Параметры <a class="header-anchor" href="#options" aria-label="Permalink to “Параметры”">​</a></h2><div class="info custom-block"><p class="custom-block-title">[История]</p><table tabindex="0"><thead><tr><th>Версия</th><th>Изменения</th></tr></thead><tbody><tr><td>v10.12.0</td><td>Подчеркивания вместо тире теперь также разрешены для параметров Node.js, в дополнение к параметрам V8.</td></tr></tbody></table></div><p>Все параметры, включая параметры V8, позволяют разделять слова как тире (<code>-</code>), так и подчеркиваниями (<code>_</code>). Например, <code>--pending-deprecation</code> эквивалентно <code>--pending_deprecation</code>.</p><p>Если параметр, принимающий одно значение (например, <code>--max-http-header-size</code>), передается несколько раз, то используется последнее переданное значение. Параметры из командной строки имеют приоритет над параметрами, переданными через переменную среды <a href="/ru/nodejs/api/cli#node-optionsoptions"><code>NODE_OPTIONS</code></a>.</p><h3 id="-" tabindex="-1"><code>-</code> <a class="header-anchor" href="#-" aria-label="Permalink to “-”">​</a></h3><p><strong>Добавлено в: v8.0.0</strong></p><p>Псевдоним для stdin. Аналогично использованию <code>-</code> в других утилитах командной строки, означающее, что скрипт считывается из stdin, а остальные параметры передаются этому скрипту.</p><h3 id="--" tabindex="-1"><code>--</code> <a class="header-anchor" href="#--" aria-label="Permalink to “--”">​</a></h3><p><strong>Добавлено в: v6.11.0</strong></p><p>Указывает на конец параметров node. Передает остальные аргументы скрипту. Если до этого не указано имя файла скрипта или eval/print скрипт, то следующий аргумент используется как имя файла скрипта.</p><h3 id="--abort-on-uncaught-exception" tabindex="-1"><code>--abort-on-uncaught-exception</code> <a class="header-anchor" href="#--abort-on-uncaught-exception" aria-label="Permalink to “--abort-on-uncaught-exception”">​</a></h3><p><strong>Добавлено в: v0.10.8</strong></p><p>Прерывание вместо выхода приводит к созданию core-файла для посмертного анализа с использованием отладчика (например, <code>lldb</code>, <code>gdb</code> и <code>mdb</code>).</p><p>Если этот флаг передан, поведение все равно можно настроить так, чтобы не прерывать выполнение, с помощью <a href="/ru/nodejs/api/process#processsetuncaughtexceptioncapturecallbackfn"><code>process.setUncaughtExceptionCaptureCallback()</code></a> (и посредством использования модуля <code>node:domain</code>, который его использует).</p><h3 id="--allow-addons" tabindex="-1"><code>--allow-addons</code> <a class="header-anchor" href="#--allow-addons" aria-label="Permalink to “--allow-addons”">​</a></h3><p><strong>Добавлено в: v21.6.0, v20.12.0</strong></p><div class="warning custom-block"><p class="custom-block-title">[Стабильно: 1 - Экспериментально]</p><p><a href="/ru/nodejs/api/documentation#stability-index">Стабильно: 1</a> <a href="/ru/nodejs/api/documentation#stability-index">Стабильность: 1</a>.1 - Активная разработка</p></div><p>При использовании <a href="/ru/nodejs/api/permissions#permission-model">Модели разрешений</a> процесс не сможет использовать собственные дополнения по умолчанию. Попытки сделать это вызовут ошибку <code>ERR_DLOPEN_DISABLED</code>, если пользователь явно не передаст флаг <code>--allow-addons</code> при запуске Node.js.</p><p>Пример:</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Попытка потребовать собственное дополнение</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;nodejs-addon-example&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> node</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --permission</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --allow-fs-read=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> index.js</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">node:internal/modules/cjs/loader:1319</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> process.dlopen</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">module,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> path.toNamespacedPath</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">filename</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">));</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">                 ^</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Error:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Cannot</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> load</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> native</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> addon</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> because</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> loading</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> addons</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> is</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> disabled.</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    at</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Module._extensions..node</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (node:internal/modules/cjs/loader:1319:18)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    at</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Module.load</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (node:internal/modules/cjs/loader:1091:32)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    at</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Module._load</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (node:internal/modules/cjs/loader:938:12)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    at</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Module.require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (node:internal/modules/cjs/loader:1115:19)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    at</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (node:internal/modules/helpers:130:18)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    at</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Object.</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">anonymou</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">s</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (/home/index.js:1:15)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    at</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Module._compile</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (node:internal/modules/cjs/loader:1233:14)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    at</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Module._extensions..js</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (node:internal/modules/cjs/loader:1287:10)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    at</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Module.load</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (node:internal/modules/cjs/loader:1091:32)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    at</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Module._load</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (node:internal/modules/cjs/loader:938:12) {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  code:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;ERR_DLOPEN_DISABLED&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><h3 id="--allow-child-process" tabindex="-1"><code>--allow-child-process</code> <a class="header-anchor" href="#--allow-child-process" aria-label="Permalink to “--allow-child-process”">​</a></h3><p><strong>Добавлено в: v20.0.0</strong></p><div class="warning custom-block"><p class="custom-block-title">[Stable: 1 - Experimental]</p><p><a href="/ru/nodejs/api/documentation#stability-index">Stable: 1</a> <a href="/ru/nodejs/api/documentation#stability-index">Стабильность: 1</a>.1 - Активная разработка</p></div><p>При использовании <a href="/ru/nodejs/api/permissions#permission-model">Модели разрешений</a> процесс по умолчанию не сможет порождать дочерние процессы. Попытки сделать это приведут к выбросу <code>ERR_ACCESS_DENIED</code>, если пользователь явно не передаст флаг <code>--allow-child-process</code> при запуске Node.js.</p><p>Пример:</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> childProcess</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;node:child_process&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Попытка обойти разрешение</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">childProcess.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">spawn</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;node&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;-e&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;require(&quot;fs&quot;).writeFileSync(&quot;/new-file&quot;, &quot;example&quot;)&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> node</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --permission</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --allow-fs-read=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> index.js</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">node:internal/child_process:388</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  const</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> err</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> this._handle.spawn</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">options</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">                           ^</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Error:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Access</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> to</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> this</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> API</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> has</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> been</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> restricted</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    at</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ChildProcess.spawn</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (node:internal/child_process:388:28)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    at</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Object.spawn</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (node:child_process:723:9)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    at</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Object.</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">anonymou</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">s</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (/home/index.js:3:14)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    at</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Module._compile</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (node:internal/modules/cjs/loader:1120:14)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    at</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Module._extensions..js</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (node:internal/modules/cjs/loader:1174:10)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    at</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Module.load</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (node:internal/modules/cjs/loader:998:32)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    at</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Module._load</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (node:internal/modules/cjs/loader:839:12)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    at</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Function.executeUserEntryPoint</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [as </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">runMain]</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (node:internal/modules/run_main:81:12)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    at</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> node:internal/main/run_main_module:17:47</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  code:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;ERR_ACCESS_DENIED&#39;,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  permission:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;ChildProcess&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h3 id="--allow-fs-read" tabindex="-1"><code>--allow-fs-read</code> <a class="header-anchor" href="#--allow-fs-read" aria-label="Permalink to “--allow-fs-read”">​</a></h3><div class="info custom-block"><p class="custom-block-title">[История]</p><table tabindex="0"><thead><tr><th>Версия</th><th>Изменения</th></tr></thead><tbody><tr><td>v23.5.0</td><td>Модель разрешений и флаги --allow-fs стабильны.</td></tr><tr><td>v20.7.0</td><td>Пути, разделенные запятой (<code>,</code>), больше не допускаются.</td></tr><tr><td>v20.0.0</td><td>Добавлено в: v20.0.0</td></tr></tbody></table></div><div class="tip custom-block"><p class="custom-block-title">[Stable: 2 - Stable]</p><p><a href="/ru/nodejs/api/documentation#stability-index">Stable: 2</a> <a href="/ru/nodejs/api/documentation#stability-index">Стабильность: 2</a> - Стабильно.</p></div><p>Этот флаг настраивает разрешения на чтение файловой системы, используя <a href="/ru/nodejs/api/permissions#permission-model">Модель разрешений</a>.</p><p>Допустимые аргументы для флага <code>--allow-fs-read</code>:</p><ul><li><code>*</code> - чтобы разрешить все операции <code>FileSystemRead</code>.</li><li>Несколько путей можно разрешить, используя несколько флагов <code>--allow-fs-read</code>. Например, <code>--allow-fs-read=/folder1/ --allow-fs-read=/folder1/</code></li></ul><p>Примеры можно найти в документации по <a href="/ru/nodejs/api/permissions#file-system-permissions">Разрешениям файловой системы</a>.</p><p>Также необходимо разрешить модуль инициализатора. Рассмотрим следующий пример:</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> node</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --permission</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> index.js</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Error:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Access</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> to</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> this</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> API</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> has</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> been</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> restricted</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    at</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> node:internal/main/run_main_module:23:47</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  code:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;ERR_ACCESS_DENIED&#39;,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  permission:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;FileSystemRead&#39;,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  resource:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;/Users/rafaelgss/repos/os/node/index.js&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>Процесс должен иметь доступ к модулю <code>index.js</code>:</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">node</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --permission</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --allow-fs-read=/path/to/index.js</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> index.js</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="--allow-fs-write" tabindex="-1"><code>--allow-fs-write</code> <a class="header-anchor" href="#--allow-fs-write" aria-label="Permalink to “--allow-fs-write”">​</a></h3><div class="info custom-block"><p class="custom-block-title">[История]</p><table tabindex="0"><thead><tr><th>Версия</th><th>Изменения</th></tr></thead><tbody><tr><td>v23.5.0</td><td>Модель разрешений и флаги --allow-fs стабильны.</td></tr><tr><td>v20.7.0</td><td>Пути, разделенные запятыми (<code>,</code>), больше не разрешены.</td></tr><tr><td>v20.0.0</td><td>Добавлено в: v20.0.0</td></tr></tbody></table></div><div class="tip custom-block"><p class="custom-block-title">[Стабильно: 2 - Стабильно]</p><p><a href="/ru/nodejs/api/documentation#stability-index">Стабильно: 2</a> <a href="/ru/nodejs/api/documentation#stability-index">Стабильность: 2</a> - Стабильно.</p></div><p>Этот флаг настраивает разрешения на запись в файловую систему, используя <a href="/ru/nodejs/api/permissions#permission-model">Модель разрешений</a>.</p><p>Допустимые аргументы для флага <code>--allow-fs-write</code>:</p><ul><li><code>*</code> - чтобы разрешить все операции <code>FileSystemWrite</code>.</li><li>Несколько путей можно разрешить, используя несколько флагов <code>--allow-fs-write</code>. Пример: <code>--allow-fs-write=/folder1/ --allow-fs-write=/folder1/</code></li></ul><p>Пути, разделенные запятыми (<code>,</code>), больше не разрешены. При передаче одного флага с запятой будет отображаться предупреждение.</p><p>Примеры можно найти в документации <a href="/ru/nodejs/api/permissions#file-system-permissions">Разрешения файловой системы</a>.</p><h3 id="--allow-wasi" tabindex="-1"><code>--allow-wasi</code> <a class="header-anchor" href="#--allow-wasi" aria-label="Permalink to “--allow-wasi”">​</a></h3><p><strong>Добавлено в: v22.3.0, v20.16.0</strong></p><div class="warning custom-block"><p class="custom-block-title">[Стабильность: 1 - Экспериментально]</p><p><a href="/ru/nodejs/api/documentation#stability-index">Стабильность: 1</a> <a href="/ru/nodejs/api/documentation#stability-index">Стабильность: 1</a> - Активная разработка</p></div><p>При использовании <a href="/ru/nodejs/api/permissions#permission-model">Модели разрешений</a> процесс по умолчанию не сможет создавать экземпляры WASI. Из соображений безопасности вызов выдаст <code>ERR_ACCESS_DENIED</code>, если пользователь явно не передаст флаг <code>--allow-wasi</code> в основном процессе Node.js.</p><p>Пример:</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">WASI</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;node:wasi&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Попытка обойти разрешение</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> WASI</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  version: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;preview1&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // Попытка подключить всю файловую систему</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  preopens: {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &#39;/&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;/&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> node</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --permission</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --allow-fs-read=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> index.js</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Error:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Access</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> to</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> this</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> API</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> has</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> been</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> restricted</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    at</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> node:internal/main/run_main_module:30:49</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  code:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;ERR_ACCESS_DENIED&#39;,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  permission:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;WASI&#39;,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="--allow-worker" tabindex="-1"><code>--allow-worker</code> <a class="header-anchor" href="#--allow-worker" aria-label="Permalink to “--allow-worker”">​</a></h3><p><strong>Добавлено в: v20.0.0</strong></p><div class="warning custom-block"><p class="custom-block-title">[Стабильность: 1 - Экспериментально]</p><p><a href="/ru/nodejs/api/documentation#stability-index">Стабильность: 1</a> <a href="/ru/nodejs/api/documentation#stability-index">Стабильность: 1</a> - Активная разработка</p></div><p>При использовании <a href="/ru/nodejs/api/permissions#permission-model">Модели разрешений</a> процесс по умолчанию не сможет создавать потоки worker. Из соображений безопасности вызов выдаст <code>ERR_ACCESS_DENIED</code>, если пользователь явно не передаст флаг <code>--allow-worker</code> в основном процессе Node.js.</p><p>Пример:</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Worker</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;node:worker_threads&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Попытка обойти разрешение</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Worker</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(__filename);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> node</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --permission</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --allow-fs-read=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> index.js</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Error:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Access</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> to</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> this</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> API</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> has</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> been</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> restricted</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    at</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> node:internal/main/run_main_module:17:47</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  code:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;ERR_ACCESS_DENIED&#39;,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  permission:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;WorkerThreads&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="--build-snapshot" tabindex="-1"><code>--build-snapshot</code> <a class="header-anchor" href="#--build-snapshot" aria-label="Permalink to “--build-snapshot”">​</a></h3><p><strong>Добавлено в версии: v18.8.0</strong></p><div class="warning custom-block"><p class="custom-block-title">[Стабильность: 1 - Экспериментальное]</p><p><a href="/ru/nodejs/api/documentation#stability-index">Стабильность: 1</a> <a href="/ru/nodejs/api/documentation#stability-index">Стабильность: 1</a> - Экспериментальное</p></div><p>Генерирует блоб моментального снимка при завершении процесса и записывает его на диск, который можно загрузить позже с помощью <code>--snapshot-blob</code>.</p><p>При создании моментального снимка, если <code>--snapshot-blob</code> не указан, сгенерированный блоб будет записан по умолчанию в <code>snapshot.blob</code> в текущем рабочем каталоге. В противном случае он будет записан по пути, указанному <code>--snapshot-blob</code>.</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> echo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;globalThis.foo = &#39;I am from the snapshot&#39;&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> snapshot.js</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Запустите snapshot.js для инициализации приложения и создания моментального {#run-snapshotjs-to-initialize-the-application-and-snapshot-the}</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># снимка его состояния в snapshot.blob.</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> node</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --snapshot-blob</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> snapshot.blob</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --build-snapshot</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> snapshot.js</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> echo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;console.log(globalThis.foo)&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> index.js</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Загрузите сгенерированный моментальный снимок и запустите приложение из index.js. {#state-of-it-into-snapshotblob}</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> node</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --snapshot-blob</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> snapshot.blob</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> index.js</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">I</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> am</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> the</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> snapshot</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p><a href="/ru/nodejs/api/v8#startup-snapshot-api"><code>v8.startupSnapshot</code> API</a> можно использовать для указания точки входа во время создания моментального снимка, что позволяет избежать необходимости в дополнительном сценарии входа во время десериализации:</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> echo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;require(&#39;v8&#39;).startupSnapshot.setDeserializeMainFunction(() =&gt; console.log(&#39;I am from the snapshot&#39;))&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> snapshot.js</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> node</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --snapshot-blob</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> snapshot.blob</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --build-snapshot</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> snapshot.js</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> node</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --snapshot-blob</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> snapshot.blob</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">I</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> am</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> the</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> snapshot</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>Для получения дополнительной информации ознакомьтесь с документацией <a href="/ru/nodejs/api/v8#startup-snapshot-api"><code>v8.startupSnapshot</code> API</a>.</p><p>В настоящее время поддержка моментальных снимков во время выполнения является экспериментальной в том смысле, что:</p><h3 id="load-the-generated-snapshot-and-start-the-application-from-indexjs" tabindex="-1"><code>--build-snapshot-config</code> <a class="header-anchor" href="#load-the-generated-snapshot-and-start-the-application-from-indexjs" aria-label="Permalink to “--build-snapshot-config”">​</a></h3><p><strong>Добавлено в версии: v21.6.0, v20.12.0</strong></p><div class="warning custom-block"><p class="custom-block-title">[Стабильность: 1 - Экспериментальное]</p><p><a href="/ru/nodejs/api/documentation#stability-index">Стабильность: 1</a> <a href="/ru/nodejs/api/documentation#stability-index">Стабильность: 1</a> - Экспериментальное</p></div><p>Указывает путь к файлу конфигурации JSON, который настраивает поведение при создании моментального снимка.</p><p>В настоящее время поддерживаются следующие параметры:</p><ul><li><code>builder</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> Обязательно. Предоставляет имя скрипта, который выполняется перед созданием моментального снимка, как если бы <a href="/ru/nodejs/api/cli#build-snapshot"><code>--build-snapshot</code></a> был передан с <code>builder</code> в качестве имени основного скрипта.</li><li><code>withoutCodeCache</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" target="_blank" rel="noreferrer">&lt;boolean&gt;</a> Необязательно. Включение кеша кода сокращает время, затрачиваемое на компиляцию функций, включенных в моментальный снимок, за счет большего размера моментального снимка и потенциального нарушения переносимости моментального снимка.</li></ul><p>При использовании этого флага дополнительные файлы скриптов, предоставленные в командной строке, не будут выполняться, а будут интерпретироваться как обычные аргументы командной строки.</p><h3 id="--build-snapshot-config" tabindex="-1"><code>-c</code>, <code>--check</code> <a class="header-anchor" href="#--build-snapshot-config" aria-label="Permalink to “-c, --check”">​</a></h3><div class="info custom-block"><p class="custom-block-title">[История]</p><table tabindex="0"><thead><tr><th>Версия</th><th>Изменения</th></tr></thead><tbody><tr><td>v10.0.0</td><td>Теперь поддерживается опция <code>--require</code> при проверке файла.</td></tr><tr><td>v5.0.0, v4.2.0</td><td>Добавлено в: v5.0.0, v4.2.0</td></tr></tbody></table></div><p>Синтаксическая проверка скрипта без выполнения.</p><h3 id="-c---check" tabindex="-1"><code>--completion-bash</code> <a class="header-anchor" href="#-c---check" aria-label="Permalink to “--completion-bash”">​</a></h3><p><strong>Добавлено в: v10.12.0</strong></p><p>Вывод исходного кода сценария автодополнения bash для Node.js.</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">node</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --completion-bash</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> node_bash_completion</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">source</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> node_bash_completion</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="--completion-bash" tabindex="-1"><code>-C condition</code>, <code>--conditions=condition</code> <a class="header-anchor" href="#--completion-bash" aria-label="Permalink to “-C condition, --conditions=condition”">​</a></h3><div class="info custom-block"><p class="custom-block-title">[История]</p><table tabindex="0"><thead><tr><th>Версия</th><th>Изменения</th></tr></thead><tbody><tr><td>v22.9.0, v20.18.0</td><td>Флаг больше не является экспериментальным.</td></tr><tr><td>v14.9.0, v12.19.0</td><td>Добавлено в: v14.9.0, v12.19.0</td></tr></tbody></table></div><div class="tip custom-block"><p class="custom-block-title">[Стабильно: 2 - Стабильно]</p><p><a href="/ru/nodejs/api/documentation#stability-index">Стабильно: 2</a> <a href="/ru/nodejs/api/documentation#stability-index">Стабильность: 2</a> - Стабильно</p></div><p>Предоставляет пользовательские <a href="/ru/nodejs/api/packages#conditional-exports">условия разрешения условного экспорта</a>.</p><p>Разрешено любое количество пользовательских строковых имен условий.</p><p>Условия Node.js по умолчанию <code>&quot;node&quot;</code>, <code>&quot;default&quot;</code>, <code>&quot;import&quot;</code> и <code>&quot;require&quot;</code> всегда будут применяться в соответствии с определением.</p><p>Например, для запуска модуля с разрешениями &quot;development&quot;:</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">node</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -C</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> development</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> app.js</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="-c-condition---conditions=condition" tabindex="-1"><code>--cpu-prof</code> <a class="header-anchor" href="#-c-condition---conditions=condition" aria-label="Permalink to “--cpu-prof”">​</a></h3><div class="info custom-block"><p class="custom-block-title">[История]</p><table tabindex="0"><thead><tr><th>Версия</th><th>Изменения</th></tr></thead><tbody><tr><td>v22.4.0, v20.16.0</td><td>Флаги <code>--cpu-prof</code> теперь стабильны.</td></tr><tr><td>v12.0.0</td><td>Добавлено в: v12.0.0</td></tr></tbody></table></div><div class="tip custom-block"><p class="custom-block-title">[Стабильно: 2 - Стабильно]</p><p><a href="/ru/nodejs/api/documentation#stability-index">Стабильно: 2</a> <a href="/ru/nodejs/api/documentation#stability-index">Стабильность: 2</a> - Стабильно</p></div><p>Запускает профилировщик ЦП V8 при запуске и записывает профиль ЦП на диск перед выходом.</p><p>Если <code>--cpu-prof-dir</code> не указан, сгенерированный профиль помещается в текущий рабочий каталог.</p><p>Если <code>--cpu-prof-name</code> не указан, сгенерированный профиль называется <code>CPU.\${yyyymmdd}.\${hhmmss}.\${pid}.\${tid}.\${seq}.cpuprofile</code>.</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> node</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --cpu-prof</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> index.js</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ls</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> *</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">.cpuprofile</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">CPU.20190409.202950.15293.0.0.cpuprofile</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="--cpu-prof" tabindex="-1"><code>--cpu-prof-dir</code> <a class="header-anchor" href="#--cpu-prof" aria-label="Permalink to “--cpu-prof-dir”">​</a></h3><div class="info custom-block"><p class="custom-block-title">[История]</p><table tabindex="0"><thead><tr><th>Версия</th><th>Изменения</th></tr></thead><tbody><tr><td>v22.4.0, v20.16.0</td><td>Флаги <code>--cpu-prof</code> теперь стабильны.</td></tr><tr><td>v12.0.0</td><td>Добавлено в: v12.0.0</td></tr></tbody></table></div><div class="tip custom-block"><p class="custom-block-title">[Стабильно: 2 - Стабильно]</p><p><a href="/ru/nodejs/api/documentation#stability-index">Стабильно: 2</a> <a href="/ru/nodejs/api/documentation#stability-index">Стабильность: 2</a> - Стабильно</p></div><p>Укажите каталог, в который будут помещены профили ЦП, созданные <code>--cpu-prof</code>.</p><p>Значение по умолчанию контролируется параметром командной строки <a href="/ru/nodejs/api/cli#diagnostic-dirdirectory"><code>--diagnostic-dir</code></a>.</p><h3 id="--cpu-prof-dir" tabindex="-1"><code>--cpu-prof-interval</code> <a class="header-anchor" href="#--cpu-prof-dir" aria-label="Permalink to “--cpu-prof-interval”">​</a></h3><div class="info custom-block"><p class="custom-block-title">[История]</p><table tabindex="0"><thead><tr><th>Версия</th><th>Изменения</th></tr></thead><tbody><tr><td>v22.4.0, v20.16.0</td><td>Флаги <code>--cpu-prof</code> теперь стабильны.</td></tr><tr><td>v12.2.0</td><td>Добавлено в: v12.2.0</td></tr></tbody></table></div><div class="tip custom-block"><p class="custom-block-title">[Стабильно: 2 - Стабильно]</p><p><a href="/ru/nodejs/api/documentation#stability-index">Стабильно: 2</a> <a href="/ru/nodejs/api/documentation#stability-index">Стабильно: 2</a> - Стабильно</p></div><p>Укажите интервал выборки в микросекундах для CPU-профилей, генерируемых <code>--cpu-prof</code>. По умолчанию используется 1000 микросекунд.</p><h3 id="--cpu-prof-interval" tabindex="-1"><code>--cpu-prof-name</code> <a class="header-anchor" href="#--cpu-prof-interval" aria-label="Permalink to “--cpu-prof-name”">​</a></h3><div class="info custom-block"><p class="custom-block-title">[История]</p><table tabindex="0"><thead><tr><th>Версия</th><th>Изменения</th></tr></thead><tbody><tr><td>v22.4.0, v20.16.0</td><td>Флаги <code>--cpu-prof</code> теперь стабильны.</td></tr><tr><td>v12.0.0</td><td>Добавлено в: v12.0.0</td></tr></tbody></table></div><div class="tip custom-block"><p class="custom-block-title">[Стабильно: 2 - Стабильно]</p><p><a href="/ru/nodejs/api/documentation#stability-index">Стабильно: 2</a> <a href="/ru/nodejs/api/documentation#stability-index">Стабильно: 2</a> - Стабильно</p></div><p>Укажите имя файла для CPU-профиля, генерируемого <code>--cpu-prof</code>.</p><h3 id="--cpu-prof-name" tabindex="-1"><code>--diagnostic-dir=directory</code> <a class="header-anchor" href="#--cpu-prof-name" aria-label="Permalink to “--diagnostic-dir=directory”">​</a></h3><p>Установите каталог, в который записываются все диагностические выходные файлы. По умолчанию используется текущий рабочий каталог.</p><p>Влияет на каталог вывода по умолчанию для:</p><ul><li><a href="/ru/nodejs/api/cli#cpu-prof-dir"><code>--cpu-prof-dir</code></a></li><li><a href="/ru/nodejs/api/cli#heap-prof-dir"><code>--heap-prof-dir</code></a></li><li><a href="/ru/nodejs/api/cli#redirect-warningsfile"><code>--redirect-warnings</code></a></li></ul><h3 id="--diagnostic-dir=directory" tabindex="-1"><code>--disable-proto=mode</code> <a class="header-anchor" href="#--diagnostic-dir=directory" aria-label="Permalink to “--disable-proto=mode”">​</a></h3><p><strong>Добавлено в: v13.12.0, v12.17.0</strong></p><p>Отключить свойство <code>Object.prototype.__proto__</code>. Если <code>mode</code> имеет значение <code>delete</code>, свойство удаляется полностью. Если <code>mode</code> имеет значение <code>throw</code>, доступ к свойству вызывает исключение с кодом <code>ERR_PROTO_ACCESS</code>.</p><h3 id="--disable-proto=mode" tabindex="-1"><code>--disable-warning=code-or-type</code> <a class="header-anchor" href="#--disable-proto=mode" aria-label="Permalink to “--disable-warning=code-or-type”">​</a></h3><div class="warning custom-block"><p class="custom-block-title">[Стабильно: 1 - Экспериментально]</p><p><a href="/ru/nodejs/api/documentation#stability-index">Стабильно: 1</a> <a href="/ru/nodejs/api/documentation#stability-index">Стабильно: 1</a>.1 - Активная разработка</p></div><p><strong>Добавлено в: v21.3.0, v20.11.0</strong></p><p>Отключить определенные предупреждения процесса по <code>code</code> или <code>type</code>.</p><p>Предупреждения, испускаемые <a href="/ru/nodejs/api/process#processemitwarningwarning-options"><code>process.emitWarning()</code></a>, могут содержать <code>code</code> и <code>type</code>. Эта опция не будет испускать предупреждения, у которых есть совпадающий <code>code</code> или <code>type</code>.</p><p>Список <a href="/ru/nodejs/api/deprecations#list-of-deprecated-apis">устаревших предупреждений</a>.</p><p>Типы предупреждений ядра Node.js: <code>DeprecationWarning</code> и <code>ExperimentalWarning</code>.</p><p>Например, следующий скрипт не будет выдавать <a href="/ru/nodejs/api/deprecations#dep0025-requirenodesys">DEP0025 <code>require(&#39;node:sys&#39;)</code></a> при выполнении с <code>node --disable-warning=DEP0025</code>:</p><div class="vp-code-group"><div class="tabs"><input type="radio" name="group-754" id="tab-755" checked><label data-title="ESM" for="tab-755">ESM</label><input type="radio" name="group-754" id="tab-756"><label data-title="CJS" for="tab-756">CJS</label></div><div class="blocks"><div class="language-js active line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> sys </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;node:sys&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> sys</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;node:sys&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div></div></div><p>Например, следующий скрипт выдаст <a href="/ru/nodejs/api/deprecations#dep0025-requirenodesys">DEP0025 <code>require(&#39;node:sys&#39;)</code></a>, но не будет выдавать никаких экспериментальных предупреждений (например, <a href="/ru/nodejs/api/vm#vmmeasurememoryoptions">ExperimentalWarning: <code>vm.measureMemory</code> является экспериментальной функцией</a> в &lt;=v21) при выполнении с <code>node --disable-warning=ExperimentalWarning</code>:</p><div class="vp-code-group"><div class="tabs"><input type="radio" name="group-761" id="tab-762" checked><label data-title="ESM" for="tab-762">ESM</label><input type="radio" name="group-761" id="tab-763"><label data-title="CJS" for="tab-763">CJS</label></div><div class="blocks"><div class="language-js active line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> sys </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;node:sys&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> vm </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;node:vm&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">vm.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">measureMemory</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> sys</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;node:sys&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> vm</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;node:vm&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">vm.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">measureMemory</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></div></div><h3 id="--disable-warning=code-or-type" tabindex="-1"><code>--disable-wasm-trap-handler</code> <a class="header-anchor" href="#--disable-warning=code-or-type" aria-label="Permalink to “--disable-wasm-trap-handler”">​</a></h3><p><strong>Добавлено в: v22.2.0, v20.15.0</strong></p><p>По умолчанию Node.js включает проверки границ WebAssembly на основе обработчика ловушек. В результате V8 не нужно вставлять встроенные проверки границ в код, скомпилированный из WebAssembly, что может значительно ускорить выполнение WebAssembly, но эта оптимизация требует выделения большой клетки виртуальной памяти (в настоящее время 10 ГБ). Если процесс Node.js не имеет доступа к достаточно большому пространству виртуальной памяти из-за системных конфигураций или аппаратных ограничений, пользователи не смогут запускать какой-либо WebAssembly, который включает выделение памяти в этой клетке виртуальной памяти, и увидят ошибку нехватки памяти.</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ulimit</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -v</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 5000000</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> node</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -p</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;new WebAssembly.Memory({ initial: 10, maximum: 100 });&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[eval]:1</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">new</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> WebAssembly.Memory</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({ initial: 10, maximum: 100 });</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">^</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">RangeError:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> WebAssembly.Memory</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> не</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> удалось</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> выделить</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> память</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    at</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [eval]:1:1</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    at</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> runScriptInThisContext</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (node:internal/vm:209:10)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    at</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> node:internal/process/execution:118:14</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    at</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [eval]-wrapper:6:24</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    at</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> runScript</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (node:internal/process/execution:101:62)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    at</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> evalScript</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (node:internal/process/execution:136:3)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    at</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> node:internal/main/eval_string:49:3</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p><code>--disable-wasm-trap-handler</code> отключает эту оптимизацию, чтобы пользователи могли хотя бы запускать WebAssembly (с менее оптимальной производительностью), когда пространство виртуальной памяти, доступное для их процесса Node.js, меньше, чем требуется клетке памяти V8 WebAssembly.</p><h3 id="--disable-wasm-trap-handler" tabindex="-1"><code>--disallow-code-generation-from-strings</code> <a class="header-anchor" href="#--disable-wasm-trap-handler" aria-label="Permalink to “--disallow-code-generation-from-strings”">​</a></h3><p><strong>Добавлено в: v9.8.0</strong></p><p>Сделайте встроенные языковые функции, такие как <code>eval</code> и <code>new Function</code>, которые генерируют код из строк, вызывающими исключение вместо этого. Это не влияет на модуль Node.js <code>node:vm</code>.</p><h3 id="--disallow-code-generation-from-strings" tabindex="-1"><code>--dns-result-order=order</code> <a class="header-anchor" href="#--disallow-code-generation-from-strings" aria-label="Permalink to “--dns-result-order=order”">​</a></h3><div class="info custom-block"><p class="custom-block-title">[История]</p><table tabindex="0"><thead><tr><th>Версия</th><th>Изменения</th></tr></thead><tbody><tr><td>v22.1.0, v20.13.0</td><td>Теперь поддерживается <code>ipv6first</code>.</td></tr><tr><td>v17.0.0</td><td>Значение по умолчанию изменено на <code>verbatim</code>.</td></tr><tr><td>v16.4.0, v14.18.0</td><td>Добавлено в: v16.4.0, v14.18.0</td></tr></tbody></table></div><p>Установите значение по умолчанию для <code>order</code> в <a href="/ru/nodejs/api/dns#dnslookuphostname-options-callback"><code>dns.lookup()</code></a> и <a href="/ru/nodejs/api/dns#dnspromiseslookuphostname-options"><code>dnsPromises.lookup()</code></a>. Значение может быть:</p><ul><li><code>ipv4first</code>: устанавливает значение по умолчанию <code>order</code> в <code>ipv4first</code>.</li><li><code>ipv6first</code>: устанавливает значение по умолчанию <code>order</code> в <code>ipv6first</code>.</li><li><code>verbatim</code>: устанавливает значение по умолчанию <code>order</code> в <code>verbatim</code>.</li></ul><p>По умолчанию используется <code>verbatim</code>, и <a href="/ru/nodejs/api/dns#dnssetdefaultresultorderorder"><code>dns.setDefaultResultOrder()</code></a> имеет более высокий приоритет, чем <code>--dns-result-order</code>.</p><h3 id="--dns-result-order=order" tabindex="-1"><code>--enable-fips</code> <a class="header-anchor" href="#--dns-result-order=order" aria-label="Permalink to “--enable-fips”">​</a></h3><p><strong>Добавлено в: v6.0.0</strong></p><p>Включает криптографию, совместимую с FIPS, при запуске. (Требует, чтобы Node.js был собран с OpenSSL, совместимым с FIPS.)</p><h3 id="--enable-fips" tabindex="-1"><code>--enable-network-family-autoselection</code> <a class="header-anchor" href="#--enable-fips" aria-label="Permalink to “--enable-network-family-autoselection”">​</a></h3><p><strong>Добавлено в: v18.18.0</strong></p><p>Включает алгоритм автоматического выбора семейства, если параметры соединения явно не отключают его.</p><h3 id="--enable-network-family-autoselection" tabindex="-1"><code>--enable-source-maps</code> <a class="header-anchor" href="#--enable-network-family-autoselection" aria-label="Permalink to “--enable-source-maps”">​</a></h3><div class="info custom-block"><p class="custom-block-title">[История]</p><table tabindex="0"><thead><tr><th>Версия</th><th>Изменения</th></tr></thead><tbody><tr><td>v15.11.0, v14.18.0</td><td>Этот API больше не является экспериментальным.</td></tr><tr><td>v12.12.0</td><td>Добавлено в: v12.12.0</td></tr></tbody></table></div><p>Включает поддержку <a href="https://sourcemaps.info/spec" target="_blank" rel="noreferrer">Source Map v3</a> для трассировок стека.</p><p>При использовании транспайлера, такого как TypeScript, трассировки стека, выдаваемые приложением, ссылаются на транспилированный код, а не на исходную позицию. <code>--enable-source-maps</code> включает кэширование карт исходного кода и делает все возможное для сообщения трассировок стека относительно исходного исходного файла.</p><p>Переопределение <code>Error.prepareStackTrace</code> может помешать <code>--enable-source-maps</code> изменять трассировку стека. Вызовите и верните результаты исходного <code>Error.prepareStackTrace</code> в переопределяющей функции, чтобы изменить трассировку стека с помощью карт исходного кода.</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> originalPrepareStackTrace</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Error.prepareStackTrace;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Error.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">prepareStackTrace</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">trace</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // Измените ошибку и трассировку и отформатируйте трассировку стека с помощью</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // исходного Error.prepareStackTrace.</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> originalPrepareStackTrace</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(error, trace);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>Обратите внимание, что включение карт исходного кода может привести к задержке в вашем приложении при доступе к <code>Error.stack</code>. Если вы часто обращаетесь к <code>Error.stack</code> в своем приложении, примите во внимание последствия для производительности <code>--enable-source-maps</code>.</p><h3 id="--enable-source-maps" tabindex="-1"><code>--entry-url</code> <a class="header-anchor" href="#--enable-source-maps" aria-label="Permalink to “--entry-url”">​</a></h3><p><strong>Добавлено в: v23.0.0</strong></p><div class="warning custom-block"><p class="custom-block-title">[Стабильный: 1 - Экспериментальный]</p><p><a href="/ru/nodejs/api/documentation#stability-index">Стабильный: 1</a> <a href="/ru/nodejs/api/documentation#stability-index">Стабильность: 1</a> - Экспериментальный</p></div><p>При наличии Node.js будет интерпретировать точку входа как URL-адрес, а не как путь.</p><p>Следует правилам разрешения <a href="/ru/nodejs/api/esm#modules-ecmascript-modules">модулей ECMAScript</a>.</p><p>Любой параметр запроса или хэш в URL-адресе будет доступен через <a href="/ru/nodejs/api/esm#importmetaurl"><code>import.meta.url</code></a>.</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">node</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --entry-url</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;file:///path/to/file.js?queryparams=work#and-hashes-too&#39;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">node</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --entry-url</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --experimental-strip-types</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;file.ts?query#hash&#39;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">node</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --entry-url</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;data:text/javascript,console.log(&quot;Hello&quot;)&#39;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="--entry-url" tabindex="-1"><code>--env-file-if-exists=config</code> <a class="header-anchor" href="#--entry-url" aria-label="Permalink to “--env-file-if-exists=config”">​</a></h3><p><strong>Добавлено в: v22.9.0</strong></p><p>Поведение аналогично <a href="/ru/nodejs/api/cli#env-fileconfig"><code>--env-file</code></a>, но ошибка не возникает, если файл не существует.</p><h3 id="--env-file-if-exists=config" tabindex="-1"><code>--env-file=config</code> <a class="header-anchor" href="#--env-file-if-exists=config" aria-label="Permalink to “--env-file=config”">​</a></h3><div class="warning custom-block"><p class="custom-block-title">[Stable: 1 - Experimental]</p><p><a href="/ru/nodejs/api/documentation#stability-index">Stable: 1</a> <a href="/ru/nodejs/api/documentation#stability-index">Стабильность: 1</a>.1 - Активная разработка</p></div><div class="info custom-block"><p class="custom-block-title">[История]</p><table tabindex="0"><thead><tr><th>Версия</th><th>Изменения</th></tr></thead><tbody><tr><td>v21.7.0, v20.12.0</td><td>Добавлена поддержка многострочных значений.</td></tr><tr><td>v20.6.0</td><td>Добавлено в: v20.6.0</td></tr></tbody></table></div><p>Загружает переменные окружения из файла относительно текущего каталога, делая их доступными для приложений в <code>process.env</code>. <a href="/ru/nodejs/api/cli#environment-variables">Переменные окружения, которые настраивают Node.js</a>, такие как <code>NODE_OPTIONS</code>, анализируются и применяются. Если одна и та же переменная определена в окружении и в файле, значение из окружения имеет приоритет.</p><p>Вы можете передать несколько аргументов <code>--env-file</code>. Последующие файлы переопределяют ранее существовавшие переменные, определенные в предыдущих файлах.</p><p>Если файл не существует, выдается ошибка.</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">node</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --env-file=.env</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --env-file=.development.env</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> index.js</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>Формат файла должен быть таким: одна строка на пару ключ-значение имени переменной окружения и значения, разделенных знаком <code>=</code>:</p><div class="language-text line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">text</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>PORT=3000</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>Любой текст после <code>#</code> рассматривается как комментарий:</p><div class="language-text line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">text</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span># Это комментарий {#--env-file=config}</span></span>
<span class="line"><span>PORT=3000 # Это тоже комментарий</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>Значения могут начинаться и заканчиваться следующими кавычками: \`\`\`, <code>&quot;</code> или <code>&#39;</code>. Они опускаются из значений.</p><div class="language-text line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">text</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>USERNAME=&quot;nodejs&quot; # результатом будет \`nodejs\` в качестве значения.</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>Поддерживаются многострочные значения:</p><div class="language-text line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">text</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>MULTI_LINE=&quot;THIS IS</span></span>
<span class="line"><span>A MULTILINE&quot;</span></span>
<span class="line"><span># результатом будет \`THIS IS\\nA MULTILINE\` в качестве значения. {#this-is-a-comment}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>Ключевое слово export перед ключом игнорируется:</p><div class="language-text line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">text</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>export USERNAME=&quot;nodejs&quot; # результатом будет \`nodejs\` в качестве значения.</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>Если вы хотите загрузить переменные окружения из файла, которого может не существовать, вы можете вместо этого использовать флаг <a href="/ru/nodejs/api/cli#env-file-if-existsconfig"><code>--env-file-if-exists</code></a>.</p><h3 id="e-eval-script-will-result-in-this-is-na-multiline-as-the-value" tabindex="-1"><code>-e</code>, <code>--eval &quot;script&quot;</code> {#will-result-in-this-is\\na-multiline-as-the-value} <a class="header-anchor" href="#e-eval-script-will-result-in-this-is-na-multiline-as-the-value" aria-label="Permalink to “-e, --eval &quot;script&quot; {#will-result-in-this-is\\na-multiline-as-the-value}”">​</a></h3><div class="info custom-block"><p class="custom-block-title">[История]</p><table tabindex="0"><thead><tr><th>Версия</th><th>Изменения</th></tr></thead><tbody><tr><td>v22.6.0</td><td>Eval теперь поддерживает экспериментальное удаление типов.</td></tr><tr><td>v5.11.0</td><td>Встроенные библиотеки теперь доступны как предопределенные переменные.</td></tr><tr><td>v0.5.2</td><td>Добавлено в: v0.5.2</td></tr></tbody></table></div><p>Выполнить следующий аргумент как JavaScript. Модули, которые предопределены в REPL, также можно использовать в <code>script</code>.</p><p>В Windows, при использовании <code>cmd.exe</code>, одинарная кавычка не будет работать правильно, потому что она распознает только двойную <code>&quot;</code> для заключения в кавычки. В Powershell или Git bash можно использовать как <code>&#39;</code>, так и <code>&quot;</code> .</p><p>Можно запускать код, содержащий встроенные типы, передав <a href="/ru/nodejs/api/cli#experimental-strip-types"><code>--experimental-strip-types</code></a>.</p><h3 id="-e---eval-&quot;script&quot;" tabindex="-1"><code>--experimental-async-context-frame</code> <a class="header-anchor" href="#-e---eval-&quot;script&quot;" aria-label="Permalink to “--experimental-async-context-frame”">​</a></h3><p><strong>Добавлено в: v22.7.0</strong></p><div class="warning custom-block"><p class="custom-block-title">[Стабильность: 1 - Экспериментальная]</p><p><a href="/ru/nodejs/api/documentation#stability-index">Стабильность: 1</a> <a href="/ru/nodejs/api/documentation#stability-index">Стабильность: 1</a> - Экспериментальная</p></div><p>Включает использование <a href="/ru/nodejs/api/async_context#class-asynclocalstorage"><code>AsyncLocalStorage</code></a>, поддерживаемого <code>AsyncContextFrame</code>, а не реализации по умолчанию, которая основана на async_hooks. Эта новая модель реализована совершенно иначе и, следовательно, может иметь различия в том, как данные контекста передаются внутри приложения. В связи с этим в настоящее время рекомендуется убедиться, что на поведение вашего приложения не влияет это изменение, прежде чем использовать его в production.</p><h3 id="--experimental-async-context-frame" tabindex="-1"><code>--experimental-eventsource</code> <a class="header-anchor" href="#--experimental-async-context-frame" aria-label="Permalink to “--experimental-eventsource”">​</a></h3><p><strong>Добавлено в: v22.3.0, v20.18.0</strong></p><p>Включить предоставление <a href="https://html.spec.whatwg.org/multipage/server-sent-events#server-sent-events" target="_blank" rel="noreferrer">EventSource Web API</a> в глобальной области видимости.</p><h3 id="--experimental-eventsource" tabindex="-1"><code>--experimental-import-meta-resolve</code> <a class="header-anchor" href="#--experimental-eventsource" aria-label="Permalink to “--experimental-import-meta-resolve”">​</a></h3><div class="info custom-block"><p class="custom-block-title">[История]</p><table tabindex="0"><thead><tr><th>Версия</th><th>Изменения</th></tr></thead><tbody><tr><td>v20.6.0, v18.19.0</td><td>синхронный import.meta.resolve доступен по умолчанию, с сохранением флага для включения экспериментального второго аргумента, как поддерживалось ранее.</td></tr><tr><td>v13.9.0, v12.16.2</td><td>Добавлено в: v13.9.0, v12.16.2</td></tr></tbody></table></div><p>Включить экспериментальную поддержку родительского URL-адреса <code>import.meta.resolve()</code>, которая позволяет передавать второй аргумент <code>parentURL</code> для контекстной привязки.</p><p>Ранее ограничивало всю функциональность <code>import.meta.resolve</code>.</p><h3 id="--experimental-import-meta-resolve" tabindex="-1"><code>--experimental-loader=module</code> <a class="header-anchor" href="#--experimental-import-meta-resolve" aria-label="Permalink to “--experimental-loader=module”">​</a></h3><div class="info custom-block"><p class="custom-block-title">[История]</p><table tabindex="0"><thead><tr><th>Версия</th><th>Изменения</th></tr></thead><tbody><tr><td>v12.11.1</td><td>Этот флаг был переименован из <code>--loader</code> в <code>--experimental-loader</code>.</td></tr><tr><td>v8.8.0</td><td>Добавлено в: v8.8.0</td></tr></tbody></table></div><p>Укажите <code>module</code>, содержащий экспортированные <a href="/ru/nodejs/api/module#customization-hooks">хуки для настройки модулей</a>. <code>module</code> может быть любой строкой, принимаемой в качестве <a href="/ru/nodejs/api/esm#import-specifiers">спецификатора <code>import</code></a>.</p><h3 id="--experimental-loader=module" tabindex="-1"><code>--experimental-network-inspection</code> <a class="header-anchor" href="#--experimental-loader=module" aria-label="Permalink to “--experimental-network-inspection”">​</a></h3><p><strong>Добавлено в: v22.6.0, v20.18.0</strong></p><div class="warning custom-block"><p class="custom-block-title">[Стабильность: 1 - Экспериментальная]</p><p><a href="/ru/nodejs/api/documentation#stability-index">Стабильность: 1</a> <a href="/ru/nodejs/api/documentation#stability-index">Стабильность: 1</a> - Экспериментальная</p></div><p>Включить экспериментальную поддержку инспекции сети с помощью Chrome DevTools.</p><h3 id="--experimental-network-inspection" tabindex="-1"><code>--experimental-print-required-tla</code> <a class="header-anchor" href="#--experimental-network-inspection" aria-label="Permalink to “--experimental-print-required-tla”">​</a></h3><p><strong>Добавлено в: v22.0.0, v20.17.0</strong></p><p>Если ES-модуль, используемый с помощью <code>require()</code>, содержит <code>await</code> верхнего уровня, этот флаг позволяет Node.js оценить модуль, попытаться найти <code>await</code> верхнего уровня и распечатать их местоположение, чтобы помочь пользователям найти их.</p><h3 id="--experimental-print-required-tla" tabindex="-1"><code>--experimental-require-module</code> <a class="header-anchor" href="#--experimental-print-required-tla" aria-label="Permalink to “--experimental-require-module”">​</a></h3><div class="info custom-block"><p class="custom-block-title">[История]</p><table tabindex="0"><thead><tr><th>Версия</th><th>Изменения</th></tr></thead><tbody><tr><td>v23.0.0</td><td>Теперь значение по умолчанию - true.</td></tr><tr><td>v22.0.0, v20.17.0</td><td>Добавлено в: v22.0.0, v20.17.0</td></tr></tbody></table></div><div class="warning custom-block"><p class="custom-block-title">[Стабильность: 1 - Экспериментальная]</p><p><a href="/ru/nodejs/api/documentation#stability-index">Стабильность: 1</a> <a href="/ru/nodejs/api/documentation#stability-index">Стабильность: 1</a>.1 - Активная разработка</p></div><p>Поддерживает загрузку синхронного графа ES-модулей в <code>require()</code>.</p><p>См. <a href="/ru/nodejs/api/modules#loading-ecmascript-modules-using-require">Загрузка модулей ECMAScript с помощью <code>require()</code></a>.</p><h3 id="--experimental-require-module" tabindex="-1"><code>--experimental-sea-config</code> <a class="header-anchor" href="#--experimental-require-module" aria-label="Permalink to “--experimental-sea-config”">​</a></h3><p><strong>Добавлено в: v20.0.0</strong></p><div class="warning custom-block"><p class="custom-block-title">[Стабильность: 1 - Экспериментальная]</p><p><a href="/ru/nodejs/api/documentation#stability-index">Стабильность: 1</a> <a href="/ru/nodejs/api/documentation#stability-index">Стабильность: 1</a> - Экспериментальная</p></div><p>Используйте этот флаг для создания блоба, который можно внедрить в бинарный файл Node.js для создания <a href="/ru/nodejs/api/single-executable-applications">одиночного исполняемого приложения</a>. См. документацию об <a href="/ru/nodejs/api/single-executable-applications#generating-single-executable-preparation-blobs">этой конфигурации</a> для получения подробной информации.</p><h3 id="--experimental-sea-config" tabindex="-1"><code>--experimental-shadow-realm</code> <a class="header-anchor" href="#--experimental-sea-config" aria-label="Permalink to “--experimental-shadow-realm”">​</a></h3><p><strong>Добавлено в: v19.0.0, v18.13.0</strong></p><p>Используйте этот флаг для включения поддержки <a href="https://github.com/tc39/proposal-shadowrealm" target="_blank" rel="noreferrer">ShadowRealm</a>.</p><h3 id="--experimental-shadow-realm" tabindex="-1"><code>--experimental-strip-types</code> <a class="header-anchor" href="#--experimental-shadow-realm" aria-label="Permalink to “--experimental-strip-types”">​</a></h3><p><strong>Добавлено в: v22.6.0</strong></p><div class="warning custom-block"><p class="custom-block-title">[Stable: 1 - Experimental]</p><p><a href="/ru/nodejs/api/documentation#stability-index">Stable: 1</a> <a href="/ru/nodejs/api/documentation#stability-index">Стабильность: 1</a>.1 - Активная разработка</p></div><p>Включает экспериментальное удаление типов для файлов TypeScript. Для получения дополнительной информации см. документацию по <a href="/ru/nodejs/api/typescript#type-stripping">удалению типов TypeScript</a>.</p><h3 id="--experimental-strip-types" tabindex="-1"><code>--experimental-test-coverage</code> <a class="header-anchor" href="#--experimental-strip-types" aria-label="Permalink to “--experimental-test-coverage”">​</a></h3><div class="info custom-block"><p class="custom-block-title">[История]</p><table tabindex="0"><thead><tr><th>Версия</th><th>Изменения</th></tr></thead><tbody><tr><td>v20.1.0, v18.17.0</td><td>Эта опция может использоваться с <code>--test</code>.</td></tr><tr><td>v19.7.0, v18.15.0</td><td>Добавлено в: v19.7.0, v18.15.0</td></tr></tbody></table></div><p>При использовании вместе с модулем <code>node:test</code>, отчёт о покрытии кода генерируется как часть вывода запуска тестов. Если тесты не запущены, отчёт о покрытии не генерируется. Подробнее см. в документации по <a href="/ru/nodejs/api/test#collecting-code-coverage">сбору покрытия кода из тестов</a>.</p><h3 id="--experimental-test-coverage" tabindex="-1"><code>--experimental-test-isolation=mode</code> <a class="header-anchor" href="#--experimental-test-coverage" aria-label="Permalink to “--experimental-test-isolation=mode”">​</a></h3><p><strong>Добавлено в: v22.8.0</strong></p><div class="warning custom-block"><p class="custom-block-title">[Stable: 1 - Experimental]</p><p><a href="/ru/nodejs/api/documentation#stability-index">Stable: 1</a> <a href="/ru/nodejs/api/documentation#stability-index">Стабильность: 1</a>.0 - Ранняя разработка</p></div><p>Настраивает тип изоляции тестов, используемой в тест-раннере. Когда <code>mode</code> имеет значение <code>&#39;process&#39;</code>, каждый тестовый файл запускается в отдельном дочернем процессе. Когда <code>mode</code> имеет значение <code>&#39;none&#39;</code>, все тестовые файлы запускаются в том же процессе, что и тест-раннер. Режим изоляции по умолчанию — <code>&#39;process&#39;</code>. Этот флаг игнорируется, если отсутствует флаг <code>--test</code>. Подробнее см. в разделе <a href="/ru/nodejs/api/test#test-runner-execution-model">модель выполнения тест-раннера</a>.</p><h3 id="--experimental-test-isolation=mode" tabindex="-1"><code>--experimental-test-module-mocks</code> <a class="header-anchor" href="#--experimental-test-isolation=mode" aria-label="Permalink to “--experimental-test-module-mocks”">​</a></h3><p><strong>Добавлено в: v22.3.0, v20.18.0</strong></p><div class="warning custom-block"><p class="custom-block-title">[Stable: 1 - Experimental]</p><p><a href="/ru/nodejs/api/documentation#stability-index">Stable: 1</a> <a href="/ru/nodejs/api/documentation#stability-index">Стабильность: 1</a>.0 - Ранняя разработка</p></div><p>Включает моки модулей в тест-раннере.</p><h3 id="--experimental-test-module-mocks" tabindex="-1"><code>--experimental-transform-types</code> <a class="header-anchor" href="#--experimental-test-module-mocks" aria-label="Permalink to “--experimental-transform-types”">​</a></h3><p><strong>Добавлено в: v22.7.0</strong></p><div class="warning custom-block"><p class="custom-block-title">[Стабильность: 1 - Экспериментальная]</p><p><a href="/ru/nodejs/api/documentation#stability-index">Стабильность: 1</a> <a href="/ru/nodejs/api/documentation#stability-index">Стабильность: 1</a>.1 - Активная разработка</p></div><p>Включает преобразование синтаксиса, специфичного для TypeScript, в код JavaScript. Подразумевает <code>--experimental-strip-types</code> и <code>--enable-source-maps</code>.</p><h3 id="--experimental-transform-types" tabindex="-1"><code>--experimental-vm-modules</code> <a class="header-anchor" href="#--experimental-transform-types" aria-label="Permalink to “--experimental-vm-modules”">​</a></h3><p><strong>Добавлено в: v9.6.0</strong></p><p>Включает экспериментальную поддержку ES Module в модуле <code>node:vm</code>.</p><h3 id="--experimental-vm-modules" tabindex="-1"><code>--experimental-wasi-unstable-preview1</code> <a class="header-anchor" href="#--experimental-vm-modules" aria-label="Permalink to “--experimental-wasi-unstable-preview1”">​</a></h3><div class="info custom-block"><p class="custom-block-title">[История]</p><table tabindex="0"><thead><tr><th>Версия</th><th>Изменения</th></tr></thead><tbody><tr><td>v20.0.0, v18.17.0</td><td>Эта опция больше не требуется, так как WASI включен по умолчанию, но ее все еще можно передать.</td></tr><tr><td>v13.6.0</td><td>изменено с <code>--experimental-wasi-unstable-preview0</code> на <code>--experimental-wasi-unstable-preview1</code>.</td></tr><tr><td>v13.3.0, v12.16.0</td><td>Добавлено в: v13.3.0, v12.16.0</td></tr></tbody></table></div><p>Включает экспериментальную поддержку WebAssembly System Interface (WASI).</p><h3 id="--experimental-wasi-unstable-preview1" tabindex="-1"><code>--experimental-wasm-modules</code> <a class="header-anchor" href="#--experimental-wasi-unstable-preview1" aria-label="Permalink to “--experimental-wasm-modules”">​</a></h3><p><strong>Добавлено в: v12.3.0</strong></p><p>Включает экспериментальную поддержку модулей WebAssembly.</p><h3 id="--experimental-wasm-modules" tabindex="-1"><code>--experimental-webstorage</code> <a class="header-anchor" href="#--experimental-wasm-modules" aria-label="Permalink to “--experimental-webstorage”">​</a></h3><p><strong>Добавлено в: v22.4.0</strong></p><p>Включает экспериментальную поддержку <a href="https://developer.mozilla.org/en-US/docs/Web/API/Web_Storage_API" target="_blank" rel="noreferrer"><code>Web Storage</code></a>.</p><h3 id="--experimental-webstorage" tabindex="-1"><code>--expose-gc</code> <a class="header-anchor" href="#--experimental-webstorage" aria-label="Permalink to “--expose-gc”">​</a></h3><p><strong>Добавлено в: v22.3.0, v20.18.0</strong></p><div class="warning custom-block"><p class="custom-block-title">[Стабильность: 1 - Экспериментальная]</p><p><a href="/ru/nodejs/api/documentation#stability-index">Стабильность: 1</a> <a href="/ru/nodejs/api/documentation#stability-index">Стабильность: 1</a> - Экспериментальная. Этот флаг унаследован от V8 и может быть изменен выше по потоку.</p></div><p>Этот флаг откроет расширение gc из V8.</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (globalThis.gc) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  globalThis.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">gc</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="--expose-gc" tabindex="-1"><code>--force-context-aware</code> <a class="header-anchor" href="#--expose-gc" aria-label="Permalink to “--force-context-aware”">​</a></h3><p><strong>Добавлено в: v12.12.0</strong></p><p>Отключает загрузку нативных дополнений, не поддерживающих <a href="/ru/nodejs/api/addons#context-aware-addons">контекстно-зависимые</a> дополнения.</p><h3 id="--force-context-aware" tabindex="-1"><code>--force-fips</code> <a class="header-anchor" href="#--force-context-aware" aria-label="Permalink to “--force-fips”">​</a></h3><p><strong>Добавлено в: v6.0.0</strong></p><p>Принудительное использование криптографии, совместимой с FIPS, при запуске. (Не может быть отключено из кода скрипта.) (Те же требования, что и <code>--enable-fips</code>.)</p><h3 id="--force-fips" tabindex="-1"><code>--force-node-api-uncaught-exceptions-policy</code> <a class="header-anchor" href="#--force-fips" aria-label="Permalink to “--force-node-api-uncaught-exceptions-policy”">​</a></h3><p><strong>Добавлено в: v18.3.0, v16.17.0</strong></p><p>Принудительно применяет событие <code>uncaughtException</code> в асинхронных обратных вызовах Node-API.</p><p>Чтобы предотвратить сбой процесса из-за существующего дополнения, этот флаг не включен по умолчанию. В будущем этот флаг будет включен по умолчанию для обеспечения правильного поведения.</p><h3 id="--force-node-api-uncaught-exceptions-policy" tabindex="-1"><code>--frozen-intrinsics</code> <a class="header-anchor" href="#--force-node-api-uncaught-exceptions-policy" aria-label="Permalink to “--frozen-intrinsics”">​</a></h3><p><strong>Добавлено в: v11.12.0</strong></p><div class="warning custom-block"><p class="custom-block-title">[Stable: 1 - Experimental]</p><p><a href="/ru/nodejs/api/documentation#stability-index">Stable: 1</a> <a href="/ru/nodejs/api/documentation#stability-index">Стабильность: 1</a> - Экспериментально</p></div><p>Включает экспериментальную заморозку встроенных объектов, таких как <code>Array</code> и <code>Object</code>.</p><p>Поддерживается только корневой контекст. Нет гарантии, что <code>globalThis.Array</code> действительно является ссылкой на встроенный объект по умолчанию. Код может сломаться при использовании этого флага.</p><p>Чтобы разрешить добавление полифиллов, <a href="/ru/nodejs/api/cli#r-require-module"><code>--require</code></a> и <a href="/ru/nodejs/api/cli#importmodule"><code>--import</code></a> запускаются до заморозки встроенных объектов.</p><h3 id="--frozen-intrinsics" tabindex="-1"><code>--heap-prof</code> <a class="header-anchor" href="#--frozen-intrinsics" aria-label="Permalink to “--heap-prof”">​</a></h3><div class="info custom-block"><p class="custom-block-title">[История]</p><table tabindex="0"><thead><tr><th>Версия</th><th>Изменения</th></tr></thead><tbody><tr><td>v22.4.0, v20.16.0</td><td>Флаги <code>--heap-prof</code> теперь стабильны.</td></tr><tr><td>v12.4.0</td><td>Добавлено в: v12.4.0</td></tr></tbody></table></div><div class="tip custom-block"><p class="custom-block-title">[Stable: 2 - Stable]</p><p><a href="/ru/nodejs/api/documentation#stability-index">Stable: 2</a> <a href="/ru/nodejs/api/documentation#stability-index">Стабильность: 2</a> - Стабильно</p></div><p>Запускает профилировщик кучи V8 при запуске и записывает профиль кучи на диск перед выходом.</p><p>Если <code>--heap-prof-dir</code> не указан, сгенерированный профиль помещается в текущий рабочий каталог.</p><p>Если <code>--heap-prof-name</code> не указан, сгенерированный профиль называется <code>Heap.\${yyyymmdd}.\${hhmmss}.\${pid}.\${tid}.\${seq}.heapprofile</code>.</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> node</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --heap-prof</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> index.js</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ls</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> *</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">.heapprofile</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Heap.20190409.202950.15293.0.001.heapprofile</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="--heap-prof" tabindex="-1"><code>--heap-prof-dir</code> <a class="header-anchor" href="#--heap-prof" aria-label="Permalink to “--heap-prof-dir”">​</a></h3><div class="info custom-block"><p class="custom-block-title">[История]</p><table tabindex="0"><thead><tr><th>Версия</th><th>Изменения</th></tr></thead><tbody><tr><td>v22.4.0, v20.16.0</td><td>Флаги <code>--heap-prof</code> теперь стабильны.</td></tr><tr><td>v12.4.0</td><td>Добавлено в: v12.4.0</td></tr></tbody></table></div><div class="tip custom-block"><p class="custom-block-title">[Stable: 2 - Stable]</p><p><a href="/ru/nodejs/api/documentation#stability-index">Stable: 2</a> <a href="/ru/nodejs/api/documentation#stability-index">Стабильность: 2</a> - Стабильно</p></div><p>Укажите каталог, в который будут помещаться профили кучи, сгенерированные с помощью <code>--heap-prof</code>.</p><p>Значение по умолчанию контролируется параметром командной строки <a href="/ru/nodejs/api/cli#diagnostic-dirdirectory"><code>--diagnostic-dir</code></a>.</p><h3 id="--heap-prof-dir" tabindex="-1"><code>--heap-prof-interval</code> <a class="header-anchor" href="#--heap-prof-dir" aria-label="Permalink to “--heap-prof-interval”">​</a></h3><div class="info custom-block"><p class="custom-block-title">[История]</p><table tabindex="0"><thead><tr><th>Версия</th><th>Изменения</th></tr></thead><tbody><tr><td>v22.4.0, v20.16.0</td><td>Флаги <code>--heap-prof</code> теперь стабильны.</td></tr><tr><td>v12.4.0</td><td>Добавлено в: v12.4.0</td></tr></tbody></table></div><div class="tip custom-block"><p class="custom-block-title">[Stable: 2 - Stable]</p><p><a href="/ru/nodejs/api/documentation#stability-index">Stable: 2</a> <a href="/ru/nodejs/api/documentation#stability-index">Стабильность: 2</a> - Стабильно</p></div><p>Укажите средний интервал выборки в байтах для профилей кучи, сгенерированных с помощью <code>--heap-prof</code>. По умолчанию используется 512 * 1024 байт.</p><h3 id="--heap-prof-interval" tabindex="-1"><code>--heap-prof-name</code> <a class="header-anchor" href="#--heap-prof-interval" aria-label="Permalink to “--heap-prof-name”">​</a></h3><div class="info custom-block"><p class="custom-block-title">[История]</p><table tabindex="0"><thead><tr><th>Версия</th><th>Изменения</th></tr></thead><tbody><tr><td>v22.4.0, v20.16.0</td><td>Флаги <code>--heap-prof</code> теперь стабильны.</td></tr><tr><td>v12.4.0</td><td>Добавлено в: v12.4.0</td></tr></tbody></table></div><div class="tip custom-block"><p class="custom-block-title">[Стабильно: 2 - Стабильно]</p><p><a href="/ru/nodejs/api/documentation#stability-index">Стабильно: 2</a> <a href="/ru/nodejs/api/documentation#stability-index">Стабильность: 2</a> - Стабильно</p></div><p>Укажите имя файла профиля кучи, сгенерированного с помощью <code>--heap-prof</code>.</p><h3 id="--heap-prof-name" tabindex="-1"><code>--heapsnapshot-near-heap-limit=max_count</code> <a class="header-anchor" href="#--heap-prof-name" aria-label="Permalink to “--heapsnapshot-near-heap-limit=max_count”">​</a></h3><p><strong>Добавлено в: v15.1.0, v14.18.0</strong></p><div class="warning custom-block"><p class="custom-block-title">[Стабильно: 1 - Экспериментально]</p><p><a href="/ru/nodejs/api/documentation#stability-index">Стабильно: 1</a> <a href="/ru/nodejs/api/documentation#stability-index">Стабильность: 1</a> - Экспериментально</p></div><p>Записывает снимок кучи V8 на диск, когда использование кучи V8 приближается к пределу кучи. <code>count</code> должно быть неотрицательным целым числом (в этом случае Node.js запишет на диск не более <code>max_count</code> снимков).</p><p>При создании снимков может быть запущена сборка мусора, что приведет к снижению использования кучи. Поэтому несколько снимков могут быть записаны на диск, прежде чем у экземпляра Node.js окончательно закончится память. Эти снимки кучи можно сравнить, чтобы определить, какие объекты выделяются во время последовательных снимков. Не гарантируется, что Node.js запишет ровно <code>max_count</code> снимков на диск, но он сделает все возможное, чтобы сгенерировать хотя бы один и до <code>max_count</code> снимков, прежде чем у экземпляра Node.js закончится память, если <code>max_count</code> больше <code>0</code>.</p><p>Создание снимков V8 требует времени и памяти (как памяти, управляемой кучей V8, так и собственной памяти вне кучи V8). Чем больше куча, тем больше ресурсов ей требуется. Node.js скорректирует кучу V8, чтобы учесть дополнительные накладные расходы памяти кучи V8, и сделает все возможное, чтобы избежать использования всей памяти, доступной процессу. Когда процесс использует больше памяти, чем система считает уместным, процесс может быть внезапно завершен системой, в зависимости от конфигурации системы.</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> node</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --max-old-space-size=100</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --heapsnapshot-near-heap-limit=3</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> index.js</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Wrote</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> snapshot</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> to</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Heap.20200430.100036.49580.0.001.heapsnapshot</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Wrote</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> snapshot</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> to</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Heap.20200430.100037.49580.0.002.heapsnapshot</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Wrote</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> snapshot</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> to</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Heap.20200430.100038.49580.0.003.heapsnapshot</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">--- Last few GCs ---</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[49580:0x110000000]     4826 ms: Mark-sweep 130.6 (</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">147.8</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) -</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> 130.5 (</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">147.8</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) MB, 27.4 / 0.0 ms  (</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">average</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mu</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 0.126,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> current</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mu</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0.034</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) allocation failure scavenge might not succeed</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[49580:0x110000000]     4845 ms: Mark-sweep 130.6 (</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">147.8</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) -</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> 130.6 (</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">147.8</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) MB, 18.8 / 0.0 ms  (</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">average</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mu</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 0.088,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> current</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mu</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0.031</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) allocation failure scavenge might not succeed</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">--- JS stacktrace ---</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">FATAL</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ERROR:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Ineffective</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mark-compacts</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> near</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> heap</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> limit</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Allocation</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> failed</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> -</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> JavaScript</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> heap</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> out</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> of</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> memory</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">....</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h3 id="--heapsnapshot-near-heap-limit=max_count" tabindex="-1"><code>--heapsnapshot-signal=signal</code> <a class="header-anchor" href="#--heapsnapshot-near-heap-limit=max_count" aria-label="Permalink to “--heapsnapshot-signal=signal”">​</a></h3><p><strong>Добавлено в: v12.0.0</strong></p><p>Включает обработчик сигналов, который заставляет процесс Node.js записывать дамп кучи при получении указанного сигнала. <code>signal</code> должен быть допустимым именем сигнала. Отключено по умолчанию.</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> node</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --heapsnapshot-signal=SIGUSR2</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> index.js</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> &amp;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ps</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> aux</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">USER</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">       PID</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> %CPU</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> %MEM</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    VSZ</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">   RSS</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> TTY</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">      STAT</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> START</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">   TIME</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> COMMAND</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">node</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">         1</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  5.5</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  6.1</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 787252</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 247004</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ?</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">       Ssl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  16:43</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">   0:02</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> node</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --heapsnapshot-signal=SIGUSR2</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> index.js</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> kill</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -USR2</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ls</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Heap.20190718.133405.15554.0.001.heapsnapshot</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="--heapsnapshot-signal=signal" tabindex="-1"><code>-h</code>, <code>--help</code> <a class="header-anchor" href="#--heapsnapshot-signal=signal" aria-label="Permalink to “-h, --help”">​</a></h3><p><strong>Добавлено в: v0.1.3</strong></p><p>Выводит параметры командной строки Node.js. Вывод этой опции менее подробен, чем этот документ.</p><h3 id="-h---help" tabindex="-1"><code>--icu-data-dir=file</code> <a class="header-anchor" href="#-h---help" aria-label="Permalink to “--icu-data-dir=file”">​</a></h3><p><strong>Добавлено в: v0.11.15</strong></p><p>Указывает путь загрузки данных ICU. (Переопределяет <code>NODE_ICU_DATA</code>.)</p><h3 id="--icu-data-dir=file" tabindex="-1"><code>--import=module</code> <a class="header-anchor" href="#--icu-data-dir=file" aria-label="Permalink to “--import=module”">​</a></h3><p><strong>Добавлено в: v19.0.0, v18.18.0</strong></p><div class="warning custom-block"><p class="custom-block-title">[Стабильно: 1 - Экспериментально]</p><p><a href="/ru/nodejs/api/documentation#stability-index">Стабильно: 1</a> <a href="/ru/nodejs/api/documentation#stability-index">Стабильность: 1</a> - Экспериментально</p></div><p>Предварительно загружает указанный модуль при запуске. Если флаг указан несколько раз, каждый модуль будет выполняться последовательно в том порядке, в котором они появляются, начиная с тех, которые указаны в <a href="/ru/nodejs/api/cli#node-optionsoptions"><code>NODE_OPTIONS</code></a>.</p><p>Следует правилам разрешения <a href="/ru/nodejs/api/esm#modules-ecmascript-modules">модулей ECMAScript</a>. Используйте <a href="/ru/nodejs/api/cli#r-require-module"><code>--require</code></a> для загрузки <a href="/ru/nodejs/api/modules">модуля CommonJS</a>. Модули, предварительно загруженные с помощью <code>--require</code>, будут выполняться перед модулями, предварительно загруженными с помощью <code>--import</code>.</p><p>Модули предварительно загружаются в основной поток, а также в любые рабочие потоки, форкнутые процессы или кластерные процессы.</p><h3 id="--import=module" tabindex="-1"><code>--input-type=type</code> <a class="header-anchor" href="#--import=module" aria-label="Permalink to “--input-type=type”">​</a></h3><p><strong>Добавлено в: v12.0.0</strong></p><p>Это настраивает Node.js для интерпретации ввода <code>--eval</code> или <code>STDIN</code> как CommonJS или как ES-модуль. Допустимые значения: <code>&quot;commonjs&quot;</code> или <code>&quot;module&quot;</code>. Значение по умолчанию - <code>&quot;commonjs&quot;</code>.</p><p>REPL не поддерживает эту опцию. Использование <code>--input-type=module</code> с <a href="/ru/nodejs/api/cli#p-print-script"><code>--print</code></a> вызовет ошибку, так как <code>--print</code> не поддерживает синтаксис ES-модулей.</p><h3 id="--input-type=type" tabindex="-1"><code>--insecure-http-parser</code> <a class="header-anchor" href="#--input-type=type" aria-label="Permalink to “--insecure-http-parser”">​</a></h3><p><strong>Добавлено в: v13.4.0, v12.15.0, v10.19.0</strong></p><p>Включить флаги нестрогого разбора HTTP. Это может обеспечить совместимость с HTTP-реализациями, не соответствующими стандартам.</p><p>При включении анализатор будет принимать следующее:</p><ul><li>Недопустимые значения заголовков HTTP.</li><li>Недопустимые версии HTTP.</li><li>Разрешать сообщения, содержащие заголовки <code>Transfer-Encoding</code> и <code>Content-Length</code>.</li><li>Разрешать дополнительные данные после сообщения при наличии <code>Connection: close</code>.</li><li>Разрешать дополнительные кодировки передачи после предоставления <code>chunked</code>.</li><li>Разрешать использование <code>\\n</code> в качестве разделителя токенов вместо <code>\\r\\n</code>.</li><li>Разрешать отсутствие <code>\\r\\n</code> после фрагмента.</li><li>Разрешать пробелы после размера фрагмента и перед <code>\\r\\n</code>.</li></ul><p>Все вышеперечисленное подвергнет ваше приложение атакам, связанным с контрабандой или отравлением запросов. Избегайте использования этой опции.</p><h4 id="--insecure-http-parser" tabindex="-1">Предупреждение: привязка инспектора к общедоступной комбинации IP:порт небезопасна <a class="header-anchor" href="#--insecure-http-parser" aria-label="Permalink to “Предупреждение: привязка инспектора к общедоступной комбинации IP:порт небезопасна”">​</a></h4><p>Привязка инспектора к общедоступному IP-адресу (включая <code>0.0.0.0</code>) с открытым портом небезопасна, поскольку позволяет внешним хостам подключаться к инспектору и выполнять <a href="https://www.owasp.org/index.php/Code_Injection" target="_blank" rel="noreferrer">атаку удаленного выполнения кода</a>.</p><p>При указании хоста убедитесь, что:</p><ul><li>Хост недоступен из общедоступных сетей.</li><li>Брандмауэр блокирует нежелательные соединения на порту.</li></ul><p><strong>В частности, <code>--inspect=0.0.0.0</code> небезопасен, если порт (<code>9229</code> по умолчанию) не защищен брандмауэром.</strong></p><p>Дополнительную информацию см. в разделе <a href="https://nodejs.org/en/docs/guides/debugging-getting-started/#security-implications" target="_blank" rel="noreferrer">последствия для безопасности отладки</a>.</p><h3 id="warning-binding-inspector-to-a-public-ipport-combination-is-insecure" tabindex="-1"><code>--inspect-brk[=[host:]port]</code> <a class="header-anchor" href="#warning-binding-inspector-to-a-public-ipport-combination-is-insecure" aria-label="Permalink to “--inspect-brk[=[host:]port]”">​</a></h3><p><strong>Добавлено в: v7.6.0</strong></p><p>Активировать инспектор на <code>host:port</code> и прервать выполнение в начале пользовательского скрипта. Значение <code>host:port</code> по умолчанию — <code>127.0.0.1:9229</code>. Если указан порт <code>0</code>, будет использован случайный доступный порт.</p><p>Дополнительные сведения об отладчике Node.js см. в разделе <a href="/ru/nodejs/api/debugger#v8-inspector-integration-for-nodejs">Интеграция V8 Inspector для Node.js</a>.</p><h3 id="--inspect-brk=hostport" tabindex="-1"><code>--inspect-port=[host:]port</code> <a class="header-anchor" href="#--inspect-brk=hostport" aria-label="Permalink to “--inspect-port=[host:]port”">​</a></h3><p><strong>Добавлено в: v7.6.0</strong></p><p>Установить <code>host:port</code> для использования при активации инспектора. Полезно при активации инспектора отправкой сигнала <code>SIGUSR1</code>.</p><p>Хост по умолчанию — <code>127.0.0.1</code>. Если указан порт <code>0</code>, будет использован случайный доступный порт.</p><p>См. <a href="/ru/nodejs/api/cli#warning-binding-inspector-to-a-public-ipport-combination-is-insecure">предупреждение о безопасности</a> ниже относительно использования параметра <code>host</code>.</p><h3 id="--inspect-port=hostport" tabindex="-1"><code>--inspect-publish-uid=stderr,http</code> <a class="header-anchor" href="#--inspect-port=hostport" aria-label="Permalink to “--inspect-publish-uid=stderr,http”">​</a></h3><p>Указывает способы предоставления URL веб-сокета инспектора.</p><p>По умолчанию URL веб-сокета инспектора доступен в stderr и по адресу <code>/json/list</code> в <code>http://host:port/json/list</code>.</p><h3 id="--inspect-publish-uid=stderrhttp" tabindex="-1"><code>--inspect-wait[=[host:]port]</code> <a class="header-anchor" href="#--inspect-publish-uid=stderrhttp" aria-label="Permalink to “--inspect-wait[=[host:]port]”">​</a></h3><p><strong>Добавлено в: v22.2.0, v20.15.0</strong></p><p>Активирует инспектор на <code>host:port</code> и ожидает подключения отладчика. Значение по умолчанию для <code>host:port</code> — <code>127.0.0.1:9229</code>. Если указан порт <code>0</code>, будет использован случайный доступный порт.</p><p>См. <a href="/ru/nodejs/api/debugger#v8-inspector-integration-for-nodejs">Интеграция V8 Inspector для Node.js</a> для дальнейшего объяснения отладчика Node.js.</p><h3 id="--inspect-wait=hostport" tabindex="-1"><code>--inspect[=[host:]port]</code> <a class="header-anchor" href="#--inspect-wait=hostport" aria-label="Permalink to “--inspect[=[host:]port]”">​</a></h3><p><strong>Добавлено в: v6.3.0</strong></p><p>Активирует инспектор на <code>host:port</code>. По умолчанию используется <code>127.0.0.1:9229</code>. Если указан порт <code>0</code>, будет использован случайный доступный порт.</p><p>Интеграция V8 inspector позволяет инструментам, таким как Chrome DevTools и IDE, отлаживать и профилировать экземпляры Node.js. Инструменты подключаются к экземплярам Node.js через TCP-порт и взаимодействуют с использованием <a href="https://chromedevtools.github.io/devtools-protocol/" target="_blank" rel="noreferrer">Протокола Chrome DevTools</a>. См. <a href="/ru/nodejs/api/debugger#v8-inspector-integration-for-nodejs">Интеграция V8 Inspector для Node.js</a> для дальнейшего объяснения отладчика Node.js.</p><h3 id="--inspect=hostport" tabindex="-1"><code>-i</code>, <code>--interactive</code> <a class="header-anchor" href="#--inspect=hostport" aria-label="Permalink to “-i, --interactive”">​</a></h3><p><strong>Добавлено в: v0.7.7</strong></p><p>Открывает REPL, даже если stdin не является терминалом.</p><h3 id="-i---interactive" tabindex="-1"><code>--jitless</code> <a class="header-anchor" href="#-i---interactive" aria-label="Permalink to “--jitless”">​</a></h3><p><strong>Добавлено в: v12.0.0</strong></p><div class="warning custom-block"><p class="custom-block-title">[Стабильный: 1 - Экспериментальный]</p><p><a href="/ru/nodejs/api/documentation#stability-index">Стабильный: 1</a> <a href="/ru/nodejs/api/documentation#stability-index">Стабильность: 1</a> - Экспериментальный. Этот флаг унаследован от V8 и может быть изменен в вышестоящем репозитории.</p></div><p>Отключает <a href="https://v8.dev/blog/jitless" target="_blank" rel="noreferrer">динамическое выделение исполняемой памяти</a>. Это может потребоваться на некоторых платформах по соображениям безопасности. Это также может уменьшить поверхность атаки на других платформах, но влияние на производительность может быть серьезным.</p><h3 id="--jitless" tabindex="-1"><code>--localstorage-file=file</code> <a class="header-anchor" href="#--jitless" aria-label="Permalink to “--localstorage-file=file”">​</a></h3><p><strong>Добавлено в: v22.4.0</strong></p><p>Файл, используемый для хранения данных <code>localStorage</code>. Если файл не существует, он создается при первом обращении к <code>localStorage</code>. Один и тот же файл может использоваться несколькими процессами Node.js одновременно. Этот флаг не имеет эффекта, если Node.js запущен без флага <code>--experimental-webstorage</code>.</p><h3 id="--localstorage-file=file" tabindex="-1"><code>--max-http-header-size=size</code> <a class="header-anchor" href="#--localstorage-file=file" aria-label="Permalink to “--max-http-header-size=size”">​</a></h3><div class="info custom-block"><p class="custom-block-title">[История]</p><table tabindex="0"><thead><tr><th>Версия</th><th>Изменения</th></tr></thead><tbody><tr><td>v13.13.0</td><td>Изменен максимальный размер HTTP-заголовков по умолчанию с 8 КиБ до 16 КиБ.</td></tr><tr><td>v11.6.0, v10.15.0</td><td>Добавлено в: v11.6.0, v10.15.0</td></tr></tbody></table></div><p>Указывает максимальный размер HTTP-заголовков в байтах. По умолчанию 16 КиБ.</p><h3 id="--max-http-header-size=size" tabindex="-1"><code>--napi-modules</code> <a class="header-anchor" href="#--max-http-header-size=size" aria-label="Permalink to “--napi-modules”">​</a></h3><p><strong>Добавлено в: v7.10.0</strong></p><p>Эта опция не имеет эффекта. Она сохранена для совместимости.</p><h3 id="--napi-modules" tabindex="-1"><code>--network-family-autoselection-attempt-timeout</code> <a class="header-anchor" href="#--napi-modules" aria-label="Permalink to “--network-family-autoselection-attempt-timeout”">​</a></h3><p><strong>Добавлено в: v22.1.0, v20.13.0</strong></p><p>Устанавливает значение по умолчанию для времени ожидания попытки автоматического выбора семейства сетей. Для получения дополнительной информации см. <a href="/ru/nodejs/api/net#netgetdefaultautoselectfamilyattempttimeout"><code>net.getDefaultAutoSelectFamilyAttemptTimeout()</code></a>.</p><h3 id="--network-family-autoselection-attempt-timeout" tabindex="-1"><code>--no-addons</code> <a class="header-anchor" href="#--network-family-autoselection-attempt-timeout" aria-label="Permalink to “--no-addons”">​</a></h3><p><strong>Добавлено в: v16.10.0, v14.19.0</strong></p><p>Отключает условие экспорта <code>node-addons</code>, а также отключает загрузку собственных дополнений. Если указан параметр <code>--no-addons</code>, вызов <code>process.dlopen</code> или требование собственного дополнения C++ завершится неудачей и вызовет исключение.</p><h3 id="--no-addons" tabindex="-1"><code>--no-deprecation</code> <a class="header-anchor" href="#--no-addons" aria-label="Permalink to “--no-deprecation”">​</a></h3><p><strong>Добавлено в: v0.8.0</strong></p><p>Отключает предупреждения об устаревании.</p><h3 id="--no-deprecation" tabindex="-1"><code>--no-experimental-detect-module</code> <a class="header-anchor" href="#--no-deprecation" aria-label="Permalink to “--no-experimental-detect-module”">​</a></h3><div class="info custom-block"><p class="custom-block-title">[История]</p><table tabindex="0"><thead><tr><th>Версия</th><th>Изменения</th></tr></thead><tbody><tr><td>v22.7.0</td><td>Обнаружение синтаксиса включено по умолчанию.</td></tr><tr><td>v21.1.0, v20.10.0</td><td>Добавлено в: v21.1.0, v20.10.0</td></tr></tbody></table></div><p>Отключает использование <a href="/ru/nodejs/api/packages#syntax-detection">обнаружения синтаксиса</a> для определения типа модуля.</p><h3 id="--no-experimental-detect-module" tabindex="-1"><code>--no-experimental-global-navigator</code> <a class="header-anchor" href="#--no-experimental-detect-module" aria-label="Permalink to “--no-experimental-global-navigator”">​</a></h3><p><strong>Добавлено в: v21.2.0</strong></p><div class="warning custom-block"><p class="custom-block-title">[Стабильно: 1 - Экспериментально]</p><p><a href="/ru/nodejs/api/documentation#stability-index">Стабильно: 1</a> <a href="/ru/nodejs/api/documentation#stability-index">Стабильность: 1</a> - Экспериментально</p></div><p>Отключает предоставление <a href="/ru/nodejs/api/globals#navigator">Navigator API</a> в глобальной области видимости.</p><h3 id="--no-experimental-global-navigator" tabindex="-1"><code>--no-experimental-repl-await</code> <a class="header-anchor" href="#--no-experimental-global-navigator" aria-label="Permalink to “--no-experimental-repl-await”">​</a></h3><p><strong>Добавлено в: v16.6.0</strong></p><p>Используйте этот флаг, чтобы отключить await верхнего уровня в REPL.</p><h3 id="--no-experimental-repl-await" tabindex="-1"><code>--no-experimental-require-module</code> <a class="header-anchor" href="#--no-experimental-repl-await" aria-label="Permalink to “--no-experimental-require-module”">​</a></h3><div class="info custom-block"><p class="custom-block-title">[История]</p><table tabindex="0"><thead><tr><th>Версия</th><th>Изменения</th></tr></thead><tbody><tr><td>v23.0.0</td><td>Теперь по умолчанию false.</td></tr><tr><td>v22.0.0, v20.17.0</td><td>Добавлено в: v22.0.0, v20.17.0</td></tr></tbody></table></div><div class="warning custom-block"><p class="custom-block-title">[Стабильно: 1 - Экспериментально]</p><p><a href="/ru/nodejs/api/documentation#stability-index">Стабильно: 1</a> <a href="/ru/nodejs/api/documentation#stability-index">Стабильность: 1</a>.1 - Активная разработка</p></div><p>Отключает поддержку загрузки синхронного графа ES-модулей в <code>require()</code>.</p><p>См. <a href="/ru/nodejs/api/modules#loading-ecmascript-modules-using-require">Загрузка модулей ECMAScript с использованием <code>require()</code></a>.</p><h3 id="--no-experimental-require-module" tabindex="-1"><code>--no-experimental-sqlite</code> <a class="header-anchor" href="#--no-experimental-require-module" aria-label="Permalink to “--no-experimental-sqlite”">​</a></h3><div class="info custom-block"><p class="custom-block-title">[История]</p><table tabindex="0"><thead><tr><th>Версия</th><th>Изменения</th></tr></thead><tbody><tr><td>v23.4.0</td><td>SQLite больше не помечен как экспериментальный, но все еще находится в стадии разработки.</td></tr><tr><td>v22.5.0</td><td>Добавлено в: v22.5.0</td></tr></tbody></table></div><p>Отключает экспериментальный модуль <a href="/ru/nodejs/api/sqlite"><code>node:sqlite</code></a>.</p><h3 id="--no-experimental-sqlite" tabindex="-1"><code>--no-experimental-websocket</code> <a class="header-anchor" href="#--no-experimental-sqlite" aria-label="Permalink to “--no-experimental-websocket”">​</a></h3><p><strong>Добавлено в: v22.0.0</strong></p><p>Отключает предоставление <a href="https://developer.mozilla.org/en-US/docs/Web/API/WebSocket" target="_blank" rel="noreferrer"><code>WebSocket</code></a> в глобальной области видимости.</p><h3 id="--no-experimental-websocket" tabindex="-1"><code>--no-extra-info-on-fatal-exception</code> <a class="header-anchor" href="#--no-experimental-websocket" aria-label="Permalink to “--no-extra-info-on-fatal-exception”">​</a></h3><p><strong>Добавлено в: v17.0.0</strong></p><p>Скрыть дополнительную информацию о фатальном исключении, которое приводит к выходу.</p><h3 id="--no-extra-info-on-fatal-exception" tabindex="-1"><code>--no-force-async-hooks-checks</code> <a class="header-anchor" href="#--no-extra-info-on-fatal-exception" aria-label="Permalink to “--no-force-async-hooks-checks”">​</a></h3><p><strong>Добавлено в: v9.0.0</strong></p><p>Отключает проверки времени выполнения для <code>async_hooks</code>. Они по-прежнему будут динамически включаться, когда включен <code>async_hooks</code>.</p><h3 id="--no-force-async-hooks-checks" tabindex="-1"><code>--no-global-search-paths</code> <a class="header-anchor" href="#--no-force-async-hooks-checks" aria-label="Permalink to “--no-global-search-paths”">​</a></h3><p><strong>Добавлено в: v16.10.0</strong></p><p>Не искать модули по глобальным путям, таким как <code>$HOME/.node_modules</code> и <code>$NODE_PATH</code>.</p><h3 id="--no-global-search-paths" tabindex="-1"><code>--no-network-family-autoselection</code> <a class="header-anchor" href="#--no-global-search-paths" aria-label="Permalink to “--no-network-family-autoselection”">​</a></h3><div class="info custom-block"><p class="custom-block-title">[История]</p><table tabindex="0"><thead><tr><th>Версия</th><th>Изменения</th></tr></thead><tbody><tr><td>v20.0.0</td><td>Флаг был переименован из <code>--no-enable-network-family-autoselection</code> в <code>--no-network-family-autoselection</code>. Старое название все еще может работать как псевдоним.</td></tr><tr><td>v19.4.0</td><td>Добавлено в: v19.4.0</td></tr></tbody></table></div><p>Отключает алгоритм автоматического выбора семейства, если параметры подключения явно не включают его.</p><h3 id="--no-network-family-autoselection" tabindex="-1"><code>--no-warnings</code> <a class="header-anchor" href="#--no-network-family-autoselection" aria-label="Permalink to “--no-warnings”">​</a></h3><p><strong>Добавлено в: v6.0.0</strong></p><p>Отключает все предупреждения процесса (включая устаревшие).</p><h3 id="--no-warnings" tabindex="-1"><code>--node-memory-debug</code> <a class="header-anchor" href="#--no-warnings" aria-label="Permalink to “--node-memory-debug”">​</a></h3><p><strong>Добавлено в: v15.0.0, v14.18.0</strong></p><p>Включает дополнительные отладочные проверки на утечки памяти во внутренних компонентах Node.js. Обычно это полезно только разработчикам, отлаживающим сам Node.js.</p><h3 id="--node-memory-debug" tabindex="-1"><code>--openssl-config=file</code> <a class="header-anchor" href="#--node-memory-debug" aria-label="Permalink to “--openssl-config=file”">​</a></h3><p><strong>Добавлено в: v6.9.0</strong></p><p>Загружает файл конфигурации OpenSSL при запуске. Помимо прочего, это можно использовать для включения криптографии, совместимой с FIPS, если Node.js собран с поддержкой FIPS-совместимой OpenSSL.</p><h3 id="--openssl-config=file" tabindex="-1"><code>--openssl-legacy-provider</code> <a class="header-anchor" href="#--openssl-config=file" aria-label="Permalink to “--openssl-legacy-provider”">​</a></h3><p><strong>Добавлено в: v17.0.0, v16.17.0</strong></p><p>Включает устаревший провайдер OpenSSL 3.0. Дополнительные сведения см. в разделе <a href="https://www.openssl.org/docs/man3.0/man7/OSSL_PROVIDER-legacy" target="_blank" rel="noreferrer">OSSL_PROVIDER-legacy</a>.</p><h3 id="--openssl-legacy-provider" tabindex="-1"><code>--openssl-shared-config</code> <a class="header-anchor" href="#--openssl-legacy-provider" aria-label="Permalink to “--openssl-shared-config”">​</a></h3><p><strong>Добавлено в: v18.5.0, v16.17.0, v14.21.0</strong></p><p>Включает раздел конфигурации OpenSSL по умолчанию, <code>openssl_conf</code>, для чтения из файла конфигурации OpenSSL. Файл конфигурации по умолчанию называется <code>openssl.cnf</code>, но это можно изменить с помощью переменной среды <code>OPENSSL_CONF</code> или с помощью параметра командной строки <code>--openssl-config</code>. Расположение файла конфигурации OpenSSL по умолчанию зависит от того, как OpenSSL связан с Node.js. Совместное использование конфигурации OpenSSL может иметь нежелательные последствия, и рекомендуется использовать раздел конфигурации, специфичный для Node.js, который называется <code>nodejs_conf</code> и используется по умолчанию, если этот параметр не используется.</p><h3 id="--openssl-shared-config" tabindex="-1"><code>--pending-deprecation</code> <a class="header-anchor" href="#--openssl-shared-config" aria-label="Permalink to “--pending-deprecation”">​</a></h3><p><strong>Добавлено в: v8.0.0</strong></p><p>Выдавать предупреждения об ожидаемом устаревании.</p><p>Ожидаемые устаревания обычно идентичны устареваниям времени выполнения, за заметным исключением: они <em>отключены</em> по умолчанию и не будут выдаваться, если не установлен флаг командной строки <code>--pending-deprecation</code> или переменная окружения <code>NODE_PENDING_DEPRECATION=1</code>. Ожидаемые устаревания используются для предоставления своего рода избирательного механизма &quot;раннего предупреждения&quot;, который разработчики могут использовать для обнаружения использования устаревшего API.</p><h3 id="--pending-deprecation" tabindex="-1"><code>--permission</code> <a class="header-anchor" href="#--pending-deprecation" aria-label="Permalink to “--permission”">​</a></h3><div class="info custom-block"><p class="custom-block-title">[История]</p><table tabindex="0"><thead><tr><th>Версия</th><th>Изменения</th></tr></thead><tbody><tr><td>v23.5.0</td><td>Модель разрешений теперь стабильна.</td></tr><tr><td>v20.0.0</td><td>Добавлено в: v20.0.0</td></tr></tbody></table></div><div class="tip custom-block"><p class="custom-block-title">[Стабильно: 2 - Стабильно]</p><p><a href="/ru/nodejs/api/documentation#stability-index">Стабильно: 2</a> <a href="/ru/nodejs/api/documentation#stability-index">Стабильность: 2</a> - Стабильно.</p></div><p>Включить модель разрешений для текущего процесса. При включении ограничиваются следующие разрешения:</p><ul><li>Файловая система - управляется флагами <a href="/ru/nodejs/api/cli#allow-fs-read"><code>--allow-fs-read</code></a>, <a href="/ru/nodejs/api/cli#allow-fs-write"><code>--allow-fs-write</code></a></li><li>Дочерний процесс - управляется флагом <a href="/ru/nodejs/api/cli#allow-child-process"><code>--allow-child-process</code></a></li><li>Рабочие потоки - управляется флагом <a href="/ru/nodejs/api/cli#allow-worker"><code>--allow-worker</code></a></li><li>WASI - управляется флагом <a href="/ru/nodejs/api/cli#allow-wasi"><code>--allow-wasi</code></a></li><li>Аддоны - управляется флагом <a href="/ru/nodejs/api/cli#allow-addons"><code>--allow-addons</code></a></li></ul><h3 id="--permission" tabindex="-1"><code>--preserve-symlinks</code> <a class="header-anchor" href="#--permission" aria-label="Permalink to “--preserve-symlinks”">​</a></h3><p><strong>Добавлено в: v6.3.0</strong></p><p>Указывает загрузчику модулей сохранять символические ссылки при разрешении и кэшировании модулей.</p><p>По умолчанию, когда Node.js загружает модуль из пути, который символически связан с другим местоположением на диске, Node.js разыменовывает ссылку и использует фактический &quot;реальный путь&quot; модуля на диске как идентификатор и как корневой путь для поиска других зависимых модулей. В большинстве случаев это поведение по умолчанию является приемлемым. Однако при использовании символически связанных одноранговых зависимостей, как показано в примере ниже, поведение по умолчанию вызывает исключение, если <code>moduleA</code> пытается потребовать <code>moduleB</code> как одноранговую зависимость:</p><div class="language-text line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">text</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>{appDir}</span></span>
<span class="line"><span> ├── app</span></span>
<span class="line"><span> │   ├── index.js</span></span>
<span class="line"><span> │   └── node_modules</span></span>
<span class="line"><span> │       ├── moduleA -&gt; {appDir}/moduleA</span></span>
<span class="line"><span> │       └── moduleB</span></span>
<span class="line"><span> │           ├── index.js</span></span>
<span class="line"><span> │           └── package.json</span></span>
<span class="line"><span> └── moduleA</span></span>
<span class="line"><span>     ├── index.js</span></span>
<span class="line"><span>     └── package.json</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>Флаг командной строки <code>--preserve-symlinks</code> указывает Node.js использовать путь символической ссылки для модулей, а не реальный путь, позволяя находить символически связанные одноранговые зависимости.</p><p>Обратите внимание, однако, что использование <code>--preserve-symlinks</code> может иметь другие побочные эффекты. В частности, символически связанные <em>нативные</em> модули могут не загрузиться, если они связаны из нескольких мест в дереве зависимостей (Node.js будет рассматривать их как два отдельных модуля и попытается загрузить модуль несколько раз, вызывая исключение).</p><p>Флаг <code>--preserve-symlinks</code> не применяется к основному модулю, что позволяет работать <code>node --preserve-symlinks node_module/.bin/\\&lt;foo\\&gt;</code>. Чтобы применить такое же поведение для основного модуля, также используйте <code>--preserve-symlinks-main</code>.</p><h3 id="--preserve-symlinks" tabindex="-1"><code>--preserve-symlinks-main</code> <a class="header-anchor" href="#--preserve-symlinks" aria-label="Permalink to “--preserve-symlinks-main”">​</a></h3><p><strong>Добавлено в версии: v10.2.0</strong></p><p>Указывает загрузчику модулей сохранять символические ссылки при разрешении и кэшировании основного модуля (<code>require.main</code>).</p><p>Этот флаг существует для того, чтобы основной модуль можно было включить в то же поведение, которое <code>--preserve-symlinks</code> предоставляет всем остальным импортам; однако это отдельные флаги для обратной совместимости со старыми версиями Node.js.</p><p><code>--preserve-symlinks-main</code> не подразумевает <code>--preserve-symlinks</code>; используйте <code>--preserve-symlinks-main</code> в дополнение к <code>--preserve-symlinks</code>, если нежелательно переходить по символическим ссылкам перед разрешением относительных путей.</p><p>См. <a href="/ru/nodejs/api/cli#preserve-symlinks"><code>--preserve-symlinks</code></a> для получения дополнительной информации.</p><h3 id="--preserve-symlinks-main" tabindex="-1"><code>-p</code>, <code>--print &quot;script&quot;</code> <a class="header-anchor" href="#--preserve-symlinks-main" aria-label="Permalink to “-p, --print &quot;script&quot;”">​</a></h3><div class="info custom-block"><p class="custom-block-title">[История]</p><table tabindex="0"><thead><tr><th>Версия</th><th>Изменения</th></tr></thead><tbody><tr><td>v5.11.0</td><td>Встроенные библиотеки теперь доступны как предопределенные переменные.</td></tr><tr><td>v0.6.4</td><td>Добавлено в версии: v0.6.4</td></tr></tbody></table></div><p>Идентичен <code>-e</code>, но печатает результат.</p><h3 id="-p---print-&quot;script&quot;" tabindex="-1"><code>--prof</code> <a class="header-anchor" href="#-p---print-&quot;script&quot;" aria-label="Permalink to “--prof”">​</a></h3><p><strong>Добавлено в версии: v2.0.0</strong></p><p>Создать вывод профилировщика V8.</p><h3 id="--prof" tabindex="-1"><code>--prof-process</code> <a class="header-anchor" href="#--prof" aria-label="Permalink to “--prof-process”">​</a></h3><p><strong>Добавлено в версии: v5.2.0</strong></p><p>Обработать вывод профилировщика V8, сгенерированный с помощью опции V8 <code>--prof</code>.</p><h3 id="--prof-process" tabindex="-1"><code>--redirect-warnings=file</code> <a class="header-anchor" href="#--prof-process" aria-label="Permalink to “--redirect-warnings=file”">​</a></h3><p><strong>Добавлено в версии: v8.0.0</strong></p><p>Записывать предупреждения процесса в указанный файл вместо вывода в stderr. Файл будет создан, если он не существует, и будет добавлен в конец, если существует. Если при попытке записи предупреждения в файл произойдет ошибка, предупреждение будет записано в stderr.</p><p><code>file</code> может быть абсолютным путем. Если это не так, каталог по умолчанию, в который он будет записан, контролируется параметром командной строки <a href="/ru/nodejs/api/cli#diagnostic-dirdirectory"><code>--diagnostic-dir</code></a>.</p><h3 id="--redirect-warnings=file" tabindex="-1"><code>--report-compact</code> <a class="header-anchor" href="#--redirect-warnings=file" aria-label="Permalink to “--report-compact”">​</a></h3><p><strong>Добавлено в версии: v13.12.0, v12.17.0</strong></p><p>Записывать отчеты в компактном формате, однострочный JSON, который легче потребляется системами обработки журналов, чем многострочный формат по умолчанию, предназначенный для использования человеком.</p><h3 id="--report-compact" tabindex="-1"><code>--report-dir=directory</code>, <code>report-directory=directory</code> <a class="header-anchor" href="#--report-compact" aria-label="Permalink to “--report-dir=directory, report-directory=directory”">​</a></h3><div class="info custom-block"><p class="custom-block-title">[История]</p><table tabindex="0"><thead><tr><th>Версия</th><th>Изменения</th></tr></thead><tbody><tr><td>v13.12.0, v12.17.0</td><td>Эта опция больше не является экспериментальной.</td></tr><tr><td>v12.0.0</td><td>Переименовано с <code>--diagnostic-report-directory</code> на <code>--report-directory</code>.</td></tr><tr><td>v11.8.0</td><td>Добавлено в версии: v11.8.0</td></tr></tbody></table></div><p>Место, где будет создан отчет.</p><h3 id="--report-dir=directory-report-directory=directory" tabindex="-1"><code>--report-exclude-env</code> <a class="header-anchor" href="#--report-dir=directory-report-directory=directory" aria-label="Permalink to “--report-exclude-env”">​</a></h3><p><strong>Добавлено в: v23.3.0</strong></p><p>Если передать аргумент <code>--report-exclude-env</code>, сгенерированный диагностический отчёт не будет содержать данные <code>environmentVariables</code>.</p><h3 id="--report-exclude-env" tabindex="-1"><code>--report-exclude-network</code> <a class="header-anchor" href="#--report-exclude-env" aria-label="Permalink to “--report-exclude-network”">​</a></h3><p><strong>Добавлено в: v22.0.0, v20.13.0</strong></p><p>Исключает <code>header.networkInterfaces</code> из диагностического отчёта. По умолчанию это не задано, и сетевые интерфейсы включаются.</p><h3 id="--report-exclude-network" tabindex="-1"><code>--report-filename=filename</code> <a class="header-anchor" href="#--report-exclude-network" aria-label="Permalink to “--report-filename=filename”">​</a></h3><div class="info custom-block"><p class="custom-block-title">[История]</p><table tabindex="0"><thead><tr><th>Версия</th><th>Изменения</th></tr></thead><tbody><tr><td>v13.12.0, v12.17.0</td><td>Этот параметр больше не является экспериментальным.</td></tr><tr><td>v12.0.0</td><td>Переименовано из <code>--diagnostic-report-filename</code> в <code>--report-filename</code>.</td></tr><tr><td>v11.8.0</td><td>Добавлено в: v11.8.0</td></tr></tbody></table></div><p>Имя файла, в который будет записан отчёт.</p><p>Если в качестве имени файла установлено <code>&#39;stdout&#39;</code> или <code>&#39;stderr&#39;</code>, отчёт будет записан в стандартный вывод или стандартный вывод ошибок процесса соответственно.</p><h3 id="--report-filename=filename" tabindex="-1"><code>--report-on-fatalerror</code> <a class="header-anchor" href="#--report-filename=filename" aria-label="Permalink to “--report-on-fatalerror”">​</a></h3><div class="info custom-block"><p class="custom-block-title">[История]</p><table tabindex="0"><thead><tr><th>Версия</th><th>Изменения</th></tr></thead><tbody><tr><td>v14.0.0, v13.14.0, v12.17.0</td><td>Этот параметр больше не является экспериментальным.</td></tr><tr><td>v12.0.0</td><td>Переименовано из <code>--diagnostic-report-on-fatalerror</code> в <code>--report-on-fatalerror</code>.</td></tr><tr><td>v11.8.0</td><td>Добавлено в: v11.8.0</td></tr></tbody></table></div><p>Включает создание отчёта при возникновении фатальных ошибок (внутренних ошибок в среде выполнения Node.js, таких как нехватка памяти), приводящих к завершению работы приложения. Полезно для изучения различных диагностических элементов данных, таких как куча, стек, состояние цикла событий, потребление ресурсов и т. д., чтобы понять причину фатальной ошибки.</p><h3 id="--report-on-fatalerror" tabindex="-1"><code>--report-on-signal</code> <a class="header-anchor" href="#--report-on-fatalerror" aria-label="Permalink to “--report-on-signal”">​</a></h3><div class="info custom-block"><p class="custom-block-title">[История]</p><table tabindex="0"><thead><tr><th>Версия</th><th>Изменения</th></tr></thead><tbody><tr><td>v13.12.0, v12.17.0</td><td>Этот параметр больше не является экспериментальным.</td></tr><tr><td>v12.0.0</td><td>Переименовано из <code>--diagnostic-report-on-signal</code> в <code>--report-on-signal</code>.</td></tr><tr><td>v11.8.0</td><td>Добавлено в: v11.8.0</td></tr></tbody></table></div><p>Включает создание отчёта при получении указанного (или предопределённого) сигнала процессом Node.js. Сигнал для запуска отчёта указывается через <code>--report-signal</code>.</p><h3 id="--report-on-signal" tabindex="-1"><code>--report-signal=signal</code> <a class="header-anchor" href="#--report-on-signal" aria-label="Permalink to “--report-signal=signal”">​</a></h3><div class="info custom-block"><p class="custom-block-title">[История]</p><table tabindex="0"><thead><tr><th>Версия</th><th>Изменения</th></tr></thead><tbody><tr><td>v13.12.0, v12.17.0</td><td>Этот параметр больше не является экспериментальным.</td></tr><tr><td>v12.0.0</td><td>Переименовано из <code>--diagnostic-report-signal</code> в <code>--report-signal</code>.</td></tr><tr><td>v11.8.0</td><td>Добавлено в: v11.8.0</td></tr></tbody></table></div><p>Устанавливает или сбрасывает сигнал для генерации отчёта (не поддерживается в Windows). Сигнал по умолчанию — <code>SIGUSR2</code>.</p><h3 id="--report-signal=signal" tabindex="-1"><code>--report-uncaught-exception</code> <a class="header-anchor" href="#--report-signal=signal" aria-label="Permalink to “--report-uncaught-exception”">​</a></h3><div class="info custom-block"><p class="custom-block-title">[История]</p><table tabindex="0"><thead><tr><th>Версия</th><th>Изменения</th></tr></thead><tbody><tr><td>v18.8.0, v16.18.0</td><td>Отчет не генерируется, если необработанное исключение было обработано.</td></tr><tr><td>v13.12.0, v12.17.0</td><td>Эта опция больше не является экспериментальной.</td></tr><tr><td>v12.0.0</td><td>изменено с <code>--diagnostic-report-uncaught-exception</code> на <code>--report-uncaught-exception</code>.</td></tr><tr><td>v11.8.0</td><td>Добавлено в: v11.8.0</td></tr></tbody></table></div><p>Включает генерацию отчета, когда процесс завершается из-за необработанного исключения. Полезно при изучении JavaScript стека в сочетании с нативным стеком и другими данными среды выполнения.</p><h3 id="--report-uncaught-exception" tabindex="-1"><code>-r</code>, <code>--require module</code> <a class="header-anchor" href="#--report-uncaught-exception" aria-label="Permalink to “-r, --require module”">​</a></h3><p><strong>Добавлено в: v1.6.0</strong></p><p>Предварительная загрузка указанного модуля при запуске.</p><p>Следует правилам разрешения модуля <code>require()</code>. <code>module</code> может быть либо путем к файлу, либо именем node модуля.</p><p>Поддерживаются только CommonJS модули. Используйте <a href="/ru/nodejs/api/cli#importmodule"><code>--import</code></a> для предварительной загрузки <a href="/ru/nodejs/api/esm#modules-ecmascript-modules">модуля ECMAScript</a>. Модули, предварительно загруженные с помощью <code>--require</code>, будут запущены до модулей, предварительно загруженных с помощью <code>--import</code>.</p><p>Модули предварительно загружаются в основной поток, а также в любые рабочие потоки, форкнутые процессы или кластеризованные процессы.</p><h3 id="-r---require-module" tabindex="-1"><code>--run</code> <a class="header-anchor" href="#-r---require-module" aria-label="Permalink to “--run”">​</a></h3><div class="info custom-block"><p class="custom-block-title">[История]</p><table tabindex="0"><thead><tr><th>Версия</th><th>Изменения</th></tr></thead><tbody><tr><td>v22.3.0</td><td>Добавлена переменная окружения NODE_RUN_SCRIPT_NAME.</td></tr><tr><td>v22.3.0</td><td>Добавлена переменная окружения NODE_RUN_PACKAGE_JSON_PATH.</td></tr><tr><td>v22.3.0</td><td>Выполняет обход до корневого каталога и находит файл <code>package.json</code> для запуска команды, и соответственно обновляет переменную окружения <code>PATH</code>.</td></tr><tr><td>v22.0.0</td><td>Добавлено в: v22.0.0</td></tr></tbody></table></div><div class="tip custom-block"><p class="custom-block-title">[Стабильно: 2 - Стабильно]</p><p><a href="/ru/nodejs/api/documentation#stability-index">Стабильно: 2</a> <a href="/ru/nodejs/api/documentation#stability-index">Стабильность: 2</a> - Стабильно</p></div><p>Запускает указанную команду из объекта <code>&quot;scripts&quot;</code> файла package.json. Если предоставлена отсутствующая <code>&quot;command&quot;</code>, он перечислит доступные скрипты.</p><p><code>--run</code> будет переходить вверх до корневого каталога и найдет файл <code>package.json</code>, из которого нужно запустить команду.</p><p><code>--run</code> добавляет <code>./node_modules/.bin</code> для каждого предка текущего каталога в <code>PATH</code>, чтобы выполнять двоичные файлы из разных папок, где присутствуют несколько каталогов <code>node_modules</code>, если <code>ancestor-folder/node_modules/.bin</code> является каталогом.</p><p><code>--run</code> выполняет команду в каталоге, содержащем связанный <code>package.json</code>.</p><p>Например, следующая команда запустит скрипт <code>test</code> из <code>package.json</code> в текущей папке:</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> node</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --run</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> test</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>Вы также можете передать аргументы команде. Любой аргумент после <code>--</code> будет добавлен к скрипту:</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> node</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --run</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> test</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --verbose</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h4 id="--run" tabindex="-1">Намеренные ограничения <a class="header-anchor" href="#--run" aria-label="Permalink to “Намеренные ограничения”">​</a></h4><p><code>node --run</code> не предназначен для соответствия поведению <code>npm run</code> или командам <code>run</code> других менеджеров пакетов. Реализация Node.js намеренно более ограничена, чтобы сосредоточиться на максимальной производительности для наиболее распространенных случаев использования. Некоторые функции других реализаций <code>run</code>, которые намеренно исключены:</p><ul><li>Запуск скриптов <code>pre</code> или <code>post</code> в дополнение к указанному скрипту.</li><li>Определение переменных окружения, специфичных для менеджера пакетов.</li></ul><h4 id="intentional-limitations" tabindex="-1">Переменные окружения <a class="header-anchor" href="#intentional-limitations" aria-label="Permalink to “Переменные окружения”">​</a></h4><p>Следующие переменные окружения устанавливаются при запуске скрипта с помощью <code>--run</code>:</p><ul><li><code>NODE_RUN_SCRIPT_NAME</code>: Имя запускаемого скрипта. Например, если <code>--run</code> используется для запуска <code>test</code>, значением этой переменной будет <code>test</code>.</li><li><code>NODE_RUN_PACKAGE_JSON_PATH</code>: Путь к <code>package.json</code>, который обрабатывается.</li></ul><h3 id="environment-variables" tabindex="-1"><code>--secure-heap-min=n</code> <a class="header-anchor" href="#environment-variables" aria-label="Permalink to “--secure-heap-min=n”">​</a></h3><p><strong>Добавлено в: v15.6.0</strong></p><p>При использовании <code>--secure-heap</code> флаг <code>--secure-heap-min</code> определяет минимальный объем памяти, выделяемый из безопасной кучи. Минимальное значение - <code>2</code>. Максимальное значение - меньшее из <code>--secure-heap</code> или <code>2147483647</code>. Заданное значение должно быть степенью двойки.</p><h3 id="--secure-heap-min=n" tabindex="-1"><code>--secure-heap=n</code> <a class="header-anchor" href="#--secure-heap-min=n" aria-label="Permalink to “--secure-heap=n”">​</a></h3><p><strong>Добавлено в: v15.6.0</strong></p><p>Инициализирует безопасную кучу OpenSSL размером <code>n</code> байт. После инициализации безопасная куча используется для определенных типов выделений памяти в OpenSSL во время генерации ключей и других операций. Это полезно, например, для предотвращения утечки конфиденциальной информации из-за переполнения или недополнения указателя.</p><p>Безопасная куча имеет фиксированный размер и не может быть изменена во время выполнения, поэтому, если она используется, важно выбрать достаточно большую кучу, чтобы покрыть все случаи использования приложения.</p><p>Размер кучи должен быть степенью двойки. Любое значение меньше 2 отключит безопасную кучу.</p><p>Безопасная куча отключена по умолчанию.</p><p>Безопасная куча недоступна в Windows.</p><p>См. <a href="https://www.openssl.org/docs/man3.0/man3/CRYPTO_secure_malloc_init" target="_blank" rel="noreferrer"><code>CRYPTO_secure_malloc_init</code></a> для получения более подробной информации.</p><h3 id="--secure-heap=n" tabindex="-1"><code>--snapshot-blob=path</code> <a class="header-anchor" href="#--secure-heap=n" aria-label="Permalink to “--snapshot-blob=path”">​</a></h3><p><strong>Добавлено в: v18.8.0</strong></p><div class="warning custom-block"><p class="custom-block-title">[Стабильный: 1 - Экспериментальный]</p><p><a href="/ru/nodejs/api/documentation#stability-index">Стабильный: 1</a> <a href="/ru/nodejs/api/documentation#stability-index">Стабильность: 1</a> - Экспериментальный</p></div><p>При использовании с <code>--build-snapshot</code> <code>--snapshot-blob</code> указывает путь, по которому записывается сгенерированный blob-объект snapshot. Если не указано, сгенерированный blob-объект записывается в <code>snapshot.blob</code> в текущем рабочем каталоге.</p><p>При использовании без <code>--build-snapshot</code> <code>--snapshot-blob</code> указывает путь к blob-объекту, который используется для восстановления состояния приложения.</p><p>При загрузке snapshot Node.js проверяет, что:</p><p>Если они не совпадают, Node.js отказывается загружать snapshot и завершает работу с кодом состояния 1.</p><h3 id="--snapshot-blob=path" tabindex="-1"><code>--test</code> <a class="header-anchor" href="#--snapshot-blob=path" aria-label="Permalink to “--test”">​</a></h3><div class="info custom-block"><p class="custom-block-title">[История]</p><table tabindex="0"><thead><tr><th>Версия</th><th>Изменения</th></tr></thead><tbody><tr><td>v20.0.0</td><td>Тестовый движок теперь стабилен.</td></tr><tr><td>v19.2.0, v18.13.0</td><td>Тестовый движок теперь поддерживает запуск в режиме отслеживания.</td></tr><tr><td>v18.1.0, v16.17.0</td><td>Добавлено в: v18.1.0, v16.17.0</td></tr></tbody></table></div><p>Запускает тестовый движок командной строки Node.js. Этот флаг нельзя комбинировать с <code>--watch-path</code>, <code>--check</code>, <code>--eval</code>, <code>--interactive</code> или отладчиком. Подробности смотрите в документации о <a href="/ru/nodejs/api/test#running-tests-from-the-command-line">запуске тестов из командной строки</a>.</p><h3 id="--test" tabindex="-1"><code>--test-concurrency</code> <a class="header-anchor" href="#--test" aria-label="Permalink to “--test-concurrency”">​</a></h3><p><strong>Добавлено в: v21.0.0, v20.10.0, v18.19.0</strong></p><p>Максимальное количество тестовых файлов, которое CLI тестового движка будет выполнять одновременно. Если <code>--experimental-test-isolation</code> установлено в <code>&#39;none&#39;</code>, этот флаг игнорируется, и параллелизм равен одному. В противном случае, по умолчанию параллелизм равен <code>os.availableParallelism() - 1</code>.</p><h3 id="--test-concurrency" tabindex="-1"><code>--test-coverage-branches=threshold</code> <a class="header-anchor" href="#--test-concurrency" aria-label="Permalink to “--test-coverage-branches=threshold”">​</a></h3><p><strong>Добавлено в: v22.8.0</strong></p><div class="warning custom-block"><p class="custom-block-title">[Стабильность: 1 - Экспериментальный]</p><p><a href="/ru/nodejs/api/documentation#stability-index">Стабильность: 1</a> <a href="/ru/nodejs/api/documentation#stability-index">Стабильность: 1</a> - Экспериментальный</p></div><p>Требует минимальный процент покрытых ветвей. Если покрытие кода не достигает указанного порога, процесс завершится с кодом <code>1</code>.</p><h3 id="--test-coverage-branches=threshold" tabindex="-1"><code>--test-coverage-exclude</code> <a class="header-anchor" href="#--test-coverage-branches=threshold" aria-label="Permalink to “--test-coverage-exclude”">​</a></h3><p><strong>Добавлено в: v22.5.0</strong></p><div class="warning custom-block"><p class="custom-block-title">[Стабильность: 1 - Экспериментальный]</p><p><a href="/ru/nodejs/api/documentation#stability-index">Стабильность: 1</a> <a href="/ru/nodejs/api/documentation#stability-index">Стабильность: 1</a> - Экспериментальный</p></div><p>Исключает определенные файлы из покрытия кода, используя шаблон glob, который может соответствовать как абсолютным, так и относительным путям к файлам.</p><p>Этот параметр можно указать несколько раз, чтобы исключить несколько шаблонов glob.</p><p>Если предоставлены и <code>--test-coverage-exclude</code>, и <code>--test-coverage-include</code>, файлы должны соответствовать <strong>обоим</strong> критериям, чтобы быть включенными в отчет о покрытии.</p><p>По умолчанию все соответствующие тестовые файлы исключаются из отчета о покрытии. Указание этого параметра переопределит поведение по умолчанию.</p><h3 id="--test-coverage-exclude" tabindex="-1"><code>--test-coverage-functions=threshold</code> <a class="header-anchor" href="#--test-coverage-exclude" aria-label="Permalink to “--test-coverage-functions=threshold”">​</a></h3><p><strong>Добавлено в: v22.8.0</strong></p><div class="warning custom-block"><p class="custom-block-title">[Стабильность: 1 - Экспериментальный]</p><p><a href="/ru/nodejs/api/documentation#stability-index">Стабильность: 1</a> <a href="/ru/nodejs/api/documentation#stability-index">Стабильность: 1</a> - Экспериментальный</p></div><p>Требует минимальный процент покрытых функций. Если покрытие кода не достигает указанного порога, процесс завершится с кодом <code>1</code>.</p><h3 id="--test-coverage-functions=threshold" tabindex="-1"><code>--test-coverage-include</code> <a class="header-anchor" href="#--test-coverage-functions=threshold" aria-label="Permalink to “--test-coverage-include”">​</a></h3><p><strong>Добавлено в: v22.5.0</strong></p><div class="warning custom-block"><p class="custom-block-title">[Stable: 1 - Experimental]</p><p><a href="/ru/nodejs/api/documentation#stability-index">Stable: 1</a> <a href="/ru/nodejs/api/documentation#stability-index">Стабильность: 1</a> - Экспериментально</p></div><p>Включает определенные файлы в покрытие кода, используя шаблон glob, который может соответствовать как абсолютным, так и относительным путям к файлам.</p><p>Этот параметр можно указать несколько раз, чтобы включить несколько шаблонов glob.</p><p>Если указаны как <code>--test-coverage-exclude</code>, так и <code>--test-coverage-include</code>, файлы должны соответствовать <strong>обоим</strong> критериям, чтобы быть включенными в отчет о покрытии.</p><h3 id="--test-coverage-include" tabindex="-1"><code>--test-coverage-lines=threshold</code> <a class="header-anchor" href="#--test-coverage-include" aria-label="Permalink to “--test-coverage-lines=threshold”">​</a></h3><p><strong>Добавлено в: v22.8.0</strong></p><div class="warning custom-block"><p class="custom-block-title">[Stable: 1 - Experimental]</p><p><a href="/ru/nodejs/api/documentation#stability-index">Stable: 1</a> <a href="/ru/nodejs/api/documentation#stability-index">Стабильность: 1</a> - Экспериментально</p></div><p>Требует минимальный процент покрытых строк. Если покрытие кода не достигает указанного порога, процесс завершится с кодом <code>1</code>.</p><h3 id="--test-coverage-lines=threshold" tabindex="-1"><code>--test-force-exit</code> <a class="header-anchor" href="#--test-coverage-lines=threshold" aria-label="Permalink to “--test-force-exit”">​</a></h3><p><strong>Добавлено в: v22.0.0, v20.14.0</strong></p><p>Настраивает средство запуска тестов для завершения процесса после завершения выполнения всех известных тестов, даже если цикл событий в противном случае останется активным.</p><h3 id="--test-force-exit" tabindex="-1"><code>--test-name-pattern</code> <a class="header-anchor" href="#--test-force-exit" aria-label="Permalink to “--test-name-pattern”">​</a></h3><div class="info custom-block"><p class="custom-block-title">[История]</p><table tabindex="0"><thead><tr><th>Версия</th><th>Изменения</th></tr></thead><tbody><tr><td>v20.0.0</td><td>Средство запуска тестов теперь стабильно.</td></tr><tr><td>v18.11.0</td><td>Добавлено в: v18.11.0</td></tr></tbody></table></div><p>Регулярное выражение, которое настраивает средство запуска тестов для выполнения только тех тестов, имя которых соответствует предоставленному шаблону. Дополнительные сведения см. в документации по <a href="/ru/nodejs/api/test#filtering-tests-by-name">фильтрации тестов по имени</a>.</p><p>Если указаны как <code>--test-name-pattern</code>, так и <code>--test-skip-pattern</code>, тесты должны удовлетворять <strong>обоим</strong> требованиям, чтобы быть выполненными.</p><h3 id="--test-name-pattern" tabindex="-1"><code>--test-only</code> <a class="header-anchor" href="#--test-name-pattern" aria-label="Permalink to “--test-only”">​</a></h3><div class="info custom-block"><p class="custom-block-title">[История]</p><table tabindex="0"><thead><tr><th>Версия</th><th>Изменения</th></tr></thead><tbody><tr><td>v20.0.0</td><td>Средство запуска тестов теперь стабильно.</td></tr><tr><td>v18.0.0, v16.17.0</td><td>Добавлено в: v18.0.0, v16.17.0</td></tr></tbody></table></div><p>Настраивает средство запуска тестов для выполнения только тестов верхнего уровня, для которых установлен параметр <code>only</code>. Этот флаг не требуется, когда изоляция тестов отключена.</p><h3 id="--test-only" tabindex="-1"><code>--test-reporter</code> <a class="header-anchor" href="#--test-only" aria-label="Permalink to “--test-reporter”">​</a></h3><div class="info custom-block"><p class="custom-block-title">[История]</p><table tabindex="0"><thead><tr><th>Версия</th><th>Изменения</th></tr></thead><tbody><tr><td>v20.0.0</td><td>Средство запуска тестов теперь стабильно.</td></tr><tr><td>v19.6.0, v18.15.0</td><td>Добавлено в: v19.6.0, v18.15.0</td></tr></tbody></table></div><p>Репортер тестов, который будет использоваться при выполнении тестов. Дополнительные сведения см. в документации по <a href="/ru/nodejs/api/test#test-reporters">репортерам тестов</a>.</p><h3 id="--test-reporter" tabindex="-1"><code>--test-reporter-destination</code> <a class="header-anchor" href="#--test-reporter" aria-label="Permalink to “--test-reporter-destination”">​</a></h3><div class="info custom-block"><p class="custom-block-title">[История]</p><table tabindex="0"><thead><tr><th>Версия</th><th>Изменения</th></tr></thead><tbody><tr><td>v20.0.0</td><td>Тестовый движок теперь стабилен.</td></tr><tr><td>v19.6.0, v18.15.0</td><td>Добавлено в: v19.6.0, v18.15.0</td></tr></tbody></table></div><p>Назначение для соответствующего репортера тестов. Подробности смотрите в документации по <a href="/ru/nodejs/api/test#test-reporters">репортерам тестов</a>.</p><h3 id="--test-reporter-destination" tabindex="-1"><code>--test-shard</code> <a class="header-anchor" href="#--test-reporter-destination" aria-label="Permalink to “--test-shard”">​</a></h3><p><strong>Добавлено в: v20.5.0, v18.19.0</strong></p><p>Сегмент набора тестов для выполнения в формате <code>\\&lt;index\\&gt;/\\&lt;total\\&gt;</code>, где</p><p><code>index</code> — положительное целое число, индекс разделенных частей; <code>total</code> — положительное целое число, общее количество разделенных частей. Эта команда разделит все файлы тестов на <code>total</code> равных частей и запустит только те, которые находятся в части <code>index</code>.</p><p>Например, чтобы разделить набор тестов на три части, используйте следующее:</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">node</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --test</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --test-shard=1/3</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">node</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --test</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --test-shard=2/3</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">node</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --test</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --test-shard=3/3</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="--test-shard" tabindex="-1"><code>--test-skip-pattern</code> <a class="header-anchor" href="#--test-shard" aria-label="Permalink to “--test-skip-pattern”">​</a></h3><p><strong>Добавлено в: v22.1.0</strong></p><p>Регулярное выражение, которое настраивает тестовый движок для пропуска тестов, имя которых соответствует предоставленному шаблону. Подробности смотрите в документации по <a href="/ru/nodejs/api/test#filtering-tests-by-name">фильтрации тестов по имени</a>.</p><p>Если предоставлены и <code>--test-name-pattern</code>, и <code>--test-skip-pattern</code>, тесты должны удовлетворять <strong>обоим</strong> требованиям, чтобы быть выполненными.</p><h3 id="--test-skip-pattern" tabindex="-1"><code>--test-timeout</code> <a class="header-anchor" href="#--test-skip-pattern" aria-label="Permalink to “--test-timeout”">​</a></h3><p><strong>Добавлено в: v21.2.0, v20.11.0</strong></p><p>Количество миллисекунд, после которого выполнение теста завершится с ошибкой. Если не указано, подтесты наследуют это значение от своего родителя. Значение по умолчанию — <code>Infinity</code>.</p><h3 id="--test-timeout" tabindex="-1"><code>--test-update-snapshots</code> <a class="header-anchor" href="#--test-timeout" aria-label="Permalink to “--test-update-snapshots”">​</a></h3><div class="info custom-block"><p class="custom-block-title">[История]</p><table tabindex="0"><thead><tr><th>Версия</th><th>Изменения</th></tr></thead><tbody><tr><td>v23.4.0</td><td>Тестирование снимков больше не является экспериментальным.</td></tr><tr><td>v22.3.0</td><td>Добавлено в: v22.3.0</td></tr></tbody></table></div><p>Генерирует заново файлы снимков, используемые тестовым движком для <a href="/ru/nodejs/api/test#snapshot-testing">тестирования снимков</a>.</p><h3 id="--test-update-snapshots" tabindex="-1"><code>--throw-deprecation</code> <a class="header-anchor" href="#--test-update-snapshots" aria-label="Permalink to “--throw-deprecation”">​</a></h3><p><strong>Добавлено в: v0.11.14</strong></p><p>Выдавать ошибки для устареваний.</p><h3 id="--throw-deprecation" tabindex="-1"><code>--title=title</code> <a class="header-anchor" href="#--throw-deprecation" aria-label="Permalink to “--title=title”">​</a></h3><p><strong>Добавлено в: v10.7.0</strong></p><p>Установить <code>process.title</code> при запуске.</p><h3 id="--title=title" tabindex="-1"><code>--tls-cipher-list=list</code> <a class="header-anchor" href="#--title=title" aria-label="Permalink to “--tls-cipher-list=list”">​</a></h3><p><strong>Добавлено в: v4.0.0</strong></p><p>Укажите альтернативный список шифров TLS по умолчанию. Требуется, чтобы Node.js был собран с поддержкой криптографии (по умолчанию).</p><h3 id="--tls-cipher-list=list" tabindex="-1"><code>--tls-keylog=file</code> <a class="header-anchor" href="#--tls-cipher-list=list" aria-label="Permalink to “--tls-keylog=file”">​</a></h3><p><strong>Добавлено в: v13.2.0, v12.16.0</strong></p><p>Регистрирует ключевой материал TLS в файл. Ключевой материал имеет формат NSS <code>SSLKEYLOGFILE</code> и может использоваться программным обеспечением (например, Wireshark) для расшифровки трафика TLS.</p><h3 id="--tls-keylog=file" tabindex="-1"><code>--tls-max-v1.2</code> <a class="header-anchor" href="#--tls-keylog=file" aria-label="Permalink to “--tls-max-v1.2”">​</a></h3><p><strong>Добавлено в: v12.0.0, v10.20.0</strong></p><p>Устанавливает для <a href="/ru/nodejs/api/tls#tlsdefault-max-version"><code>tls.DEFAULT_MAX_VERSION</code></a> значение &#39;TLSv1.2&#39;. Используется для отключения поддержки TLSv1.3.</p><h3 id="--tls-max-v12" tabindex="-1"><code>--tls-max-v1.3</code> <a class="header-anchor" href="#--tls-max-v12" aria-label="Permalink to “--tls-max-v1.3”">​</a></h3><p><strong>Добавлено в: v12.0.0</strong></p><p>Устанавливает для <a href="/ru/nodejs/api/tls#tlsdefault-max-version"><code>tls.DEFAULT_MAX_VERSION</code></a> значение &#39;TLSv1.3&#39;. Используется для включения поддержки TLSv1.3.</p><h3 id="--tls-max-v13" tabindex="-1"><code>--tls-min-v1.0</code> <a class="header-anchor" href="#--tls-max-v13" aria-label="Permalink to “--tls-min-v1.0”">​</a></h3><p><strong>Добавлено в: v12.0.0, v10.20.0</strong></p><p>Устанавливает для <a href="/ru/nodejs/api/tls#tlsdefault-min-version"><code>tls.DEFAULT_MIN_VERSION</code></a> значение &#39;TLSv1&#39;. Используется для совместимости со старыми клиентами или серверами TLS.</p><h3 id="--tls-min-v10" tabindex="-1"><code>--tls-min-v1.1</code> <a class="header-anchor" href="#--tls-min-v10" aria-label="Permalink to “--tls-min-v1.1”">​</a></h3><p><strong>Добавлено в: v12.0.0, v10.20.0</strong></p><p>Устанавливает для <a href="/ru/nodejs/api/tls#tlsdefault-min-version"><code>tls.DEFAULT_MIN_VERSION</code></a> значение &#39;TLSv1.1&#39;. Используется для совместимости со старыми клиентами или серверами TLS.</p><h3 id="--tls-min-v11" tabindex="-1"><code>--tls-min-v1.2</code> <a class="header-anchor" href="#--tls-min-v11" aria-label="Permalink to “--tls-min-v1.2”">​</a></h3><p><strong>Добавлено в: v12.2.0, v10.20.0</strong></p><p>Устанавливает для <a href="/ru/nodejs/api/tls#tlsdefault-min-version"><code>tls.DEFAULT_MIN_VERSION</code></a> значение &#39;TLSv1.2&#39;. Это значение по умолчанию для 12.x и более поздних версий, но эта опция поддерживается для совместимости со старыми версиями Node.js.</p><h3 id="--tls-min-v12" tabindex="-1"><code>--tls-min-v1.3</code> <a class="header-anchor" href="#--tls-min-v12" aria-label="Permalink to “--tls-min-v1.3”">​</a></h3><p><strong>Добавлено в: v12.0.0</strong></p><p>Устанавливает для <a href="/ru/nodejs/api/tls#tlsdefault-min-version"><code>tls.DEFAULT_MIN_VERSION</code></a> значение &#39;TLSv1.3&#39;. Используется для отключения поддержки TLSv1.2, который не так безопасен, как TLSv1.3.</p><h3 id="--tls-min-v13" tabindex="-1"><code>--trace-deprecation</code> <a class="header-anchor" href="#--tls-min-v13" aria-label="Permalink to “--trace-deprecation”">​</a></h3><p><strong>Добавлено в: v0.8.0</strong></p><p>Выводит трассировку стека для устаревших функций.</p><h3 id="--trace-deprecation" tabindex="-1"><code>--trace-env</code> <a class="header-anchor" href="#--trace-deprecation" aria-label="Permalink to “--trace-env”">​</a></h3><p><strong>Добавлено в: v23.4.0</strong></p><p>Выводит в stderr информацию о любом доступе к переменным окружения, выполняемом в текущем экземпляре Node.js, в том числе:</p><ul><li>Чтения переменных окружения, которые Node.js выполняет внутренне.</li><li>Записи в форме <code>process.env.KEY = &quot;SOME VALUE&quot;</code>.</li><li>Чтения в форме <code>process.env.KEY</code>.</li><li>Определения в форме <code>Object.defineProperty(process.env, &#39;KEY&#39;, {...})</code>.</li><li>Запросы в форме <code>Object.hasOwn(process.env, &#39;KEY&#39;)</code>, <code>process.env.hasOwnProperty(&#39;KEY&#39;)</code> или <code>&#39;KEY&#39; in process.env</code>.</li><li>Удаления в форме <code>delete process.env.KEY</code>.</li><li>Перечисления в форме <code>...process.env</code> или <code>Object.keys(process.env)</code>.</li></ul><p>Выводятся только имена переменных окружения, к которым осуществляется доступ. Значения не выводятся.</p><p>Чтобы вывести трассировку стека доступа, используйте <code>--trace-env-js-stack</code> и/или <code>--trace-env-native-stack</code>.</p><h3 id="--trace-env" tabindex="-1"><code>--trace-env-js-stack</code> <a class="header-anchor" href="#--trace-env" aria-label="Permalink to “--trace-env-js-stack”">​</a></h3><p><strong>Добавлено в: v23.4.0</strong></p><p>В дополнение к тому, что делает <code>--trace-env</code>, это печатает трассировку стека JavaScript для доступа.</p><h3 id="--trace-env-js-stack" tabindex="-1"><code>--trace-env-native-stack</code> <a class="header-anchor" href="#--trace-env-js-stack" aria-label="Permalink to “--trace-env-native-stack”">​</a></h3><p><strong>Добавлено в: v23.4.0</strong></p><p>В дополнение к тому, что делает <code>--trace-env</code>, это печатает трассировку стека нативном коде для доступа.</p><h3 id="--trace-env-native-stack" tabindex="-1"><code>--trace-event-categories</code> <a class="header-anchor" href="#--trace-env-native-stack" aria-label="Permalink to “--trace-event-categories”">​</a></h3><p><strong>Добавлено в: v7.7.0</strong></p><p>Разделенный запятыми список категорий, которые должны быть отслежены, когда отслеживание событий трассировки включено с помощью <code>--trace-events-enabled</code>.</p><h3 id="--trace-event-categories" tabindex="-1"><code>--trace-event-file-pattern</code> <a class="header-anchor" href="#--trace-event-categories" aria-label="Permalink to “--trace-event-file-pattern”">​</a></h3><p><strong>Добавлено в: v9.8.0</strong></p><p>Строка шаблона, указывающая путь к файлу для данных событий трассировки, поддерживает <code>\${rotation}</code> и <code>\${pid}</code>.</p><h3 id="--trace-event-file-pattern" tabindex="-1"><code>--trace-events-enabled</code> <a class="header-anchor" href="#--trace-event-file-pattern" aria-label="Permalink to “--trace-events-enabled”">​</a></h3><p><strong>Добавлено в: v7.7.0</strong></p><p>Включает сбор информации о трассировке событий трассировки.</p><h3 id="--trace-events-enabled" tabindex="-1"><code>--trace-exit</code> <a class="header-anchor" href="#--trace-events-enabled" aria-label="Permalink to “--trace-exit”">​</a></h3><p><strong>Добавлено в: v13.5.0, v12.16.0</strong></p><p>Печатает трассировку стека всякий раз, когда среда завершается проактивно, т.е. вызывается <code>process.exit()</code>.</p><h3 id="--trace-exit" tabindex="-1"><code>--trace-require-module=mode</code> <a class="header-anchor" href="#--trace-exit" aria-label="Permalink to “--trace-require-module=mode”">​</a></h3><p><strong>Добавлено в: v23.5.0</strong></p><p>Печатает информацию об использовании <a href="/ru/nodejs/api/modules#loading-ecmascript-modules-using-require">Загрузка модулей ECMAScript с использованием <code>require()</code></a>.</p><p>Когда <code>mode</code> имеет значение <code>all</code>, печатается все использование. Когда <code>mode</code> имеет значение <code>no-node-modules</code>, использование из папки <code>node_modules</code> исключается.</p><h3 id="--trace-require-module=mode" tabindex="-1"><code>--trace-sigint</code> <a class="header-anchor" href="#--trace-require-module=mode" aria-label="Permalink to “--trace-sigint”">​</a></h3><p><strong>Добавлено в: v13.9.0, v12.17.0</strong></p><p>Печатает трассировку стека при SIGINT.</p><h3 id="--trace-sigint" tabindex="-1"><code>--trace-sync-io</code> <a class="header-anchor" href="#--trace-sigint" aria-label="Permalink to “--trace-sync-io”">​</a></h3><p><strong>Добавлено в: v2.1.0</strong></p><p>Печатает трассировку стека всякий раз, когда обнаруживается синхронный ввод-вывод после первого оборота цикла событий.</p><h3 id="--trace-sync-io" tabindex="-1"><code>--trace-tls</code> <a class="header-anchor" href="#--trace-sync-io" aria-label="Permalink to “--trace-tls”">​</a></h3><p><strong>Добавлено в: v12.2.0</strong></p><p>Печатает информацию о трассировке пакетов TLS в <code>stderr</code>. Это можно использовать для отладки проблем с подключением TLS.</p><h3 id="--trace-tls" tabindex="-1"><code>--trace-uncaught</code> <a class="header-anchor" href="#--trace-tls" aria-label="Permalink to “--trace-uncaught”">​</a></h3><p><strong>Добавлено в: v13.1.0</strong></p><p>Печатать трассировки стека для необработанных исключений; обычно печатается трассировка стека, связанная с созданием <code>Error</code>, тогда как это заставляет Node.js также печатать трассировку стека, связанную с выбрасыванием значения (которое не обязательно должно быть экземпляром <code>Error</code>).</p><p>Включение этой опции может негативно повлиять на поведение сборщика мусора.</p><h3 id="--trace-uncaught" tabindex="-1"><code>--trace-warnings</code> <a class="header-anchor" href="#--trace-uncaught" aria-label="Permalink to “--trace-warnings”">​</a></h3><p><strong>Добавлено в: v6.0.0</strong></p><p>Печатать трассировки стека для предупреждений процесса (включая устаревания).</p><h3 id="--trace-warnings" tabindex="-1"><code>--track-heap-objects</code> <a class="header-anchor" href="#--trace-warnings" aria-label="Permalink to “--track-heap-objects”">​</a></h3><p><strong>Добавлено в: v2.4.0</strong></p><p>Отслеживает выделение объектов в куче для создания моментальных снимков кучи.</p><h3 id="--track-heap-objects" tabindex="-1"><code>--unhandled-rejections=mode</code> <a class="header-anchor" href="#--track-heap-objects" aria-label="Permalink to “--unhandled-rejections=mode”">​</a></h3><div class="info custom-block"><p class="custom-block-title">[История]</p><table tabindex="0"><thead><tr><th>Версия</th><th>Изменения</th></tr></thead><tbody><tr><td>v15.0.0</td><td>Режим по умолчанию изменен на <code>throw</code>. Ранее выводилось предупреждение.</td></tr><tr><td>v12.0.0, v10.17.0</td><td>Добавлено в: v12.0.0, v10.17.0</td></tr></tbody></table></div><p>Этот флаг позволяет изменить поведение при возникновении необработанного отклонения (unhandled rejection). Можно выбрать один из следующих режимов:</p><ul><li><code>throw</code>: Генерирует событие <a href="/ru/nodejs/api/process#event-unhandledrejection"><code>unhandledRejection</code></a>. Если этот обработчик не установлен, необработанное отклонение выбрасывается как неперехваченное исключение. Это поведение по умолчанию.</li><li><code>strict</code>: Выбрасывает необработанное отклонение как неперехваченное исключение. Если исключение обработано, генерируется событие <a href="/ru/nodejs/api/process#event-unhandledrejection"><code>unhandledRejection</code></a>.</li><li><code>warn</code>: Всегда вызывает предупреждение, независимо от того, установлен ли обработчик <a href="/ru/nodejs/api/process#event-unhandledrejection"><code>unhandledRejection</code></a>, но не выводит предупреждение об устаревании.</li><li><code>warn-with-error-code</code>: Генерирует событие <a href="/ru/nodejs/api/process#event-unhandledrejection"><code>unhandledRejection</code></a>. Если этот обработчик не установлен, выводит предупреждение и устанавливает код выхода процесса равным 1.</li><li><code>none</code>: Отключает все предупреждения.</li></ul><p>Если отклонение происходит во время фазы статической загрузки ES-модуля командной строки, оно всегда будет выброшено как неперехваченное исключение.</p><h3 id="--unhandled-rejections=mode" tabindex="-1"><code>--use-bundled-ca</code>, <code>--use-openssl-ca</code> <a class="header-anchor" href="#--unhandled-rejections=mode" aria-label="Permalink to “--use-bundled-ca, --use-openssl-ca”">​</a></h3><p><strong>Добавлено в: v6.11.0</strong></p><p>Использовать встроенное хранилище CA Mozilla, поставляемое текущей версией Node.js, или использовать хранилище CA OpenSSL по умолчанию. Хранилище по умолчанию выбирается во время сборки.</p><p>Встроенное хранилище CA, поставляемое Node.js, представляет собой снимок хранилища CA Mozilla, зафиксированный на момент выпуска. Он идентичен на всех поддерживаемых платформах.</p><p>Использование хранилища OpenSSL позволяет вносить внешние изменения в хранилище. Для большинства дистрибутивов Linux и BSD это хранилище поддерживается сопровождающими дистрибутива и системными администраторами. Расположение хранилища CA OpenSSL зависит от конфигурации библиотеки OpenSSL, но это можно изменить во время выполнения с помощью переменных среды.</p><p>См. <code>SSL_CERT_DIR</code> и <code>SSL_CERT_FILE</code>.</p><h3 id="--use-bundled-ca---use-openssl-ca" tabindex="-1"><code>--use-largepages=mode</code> <a class="header-anchor" href="#--use-bundled-ca---use-openssl-ca" aria-label="Permalink to “--use-largepages=mode”">​</a></h3><p><strong>Добавлено в версии: v13.6.0, v12.17.0</strong></p><p>Переназначить статический код Node.js на страницы памяти большого размера при запуске. Если поддерживается целевой системой, это приведет к перемещению статического кода Node.js на страницы размером 2 МиБ вместо страниц размером 4 КиБ.</p><p>Для <code>mode</code> допустимы следующие значения:</p><ul><li><code>off</code>: Попытка сопоставления не будет предпринята. Это значение по умолчанию.</li><li><code>on</code>: Если поддерживается ОС, будет предпринята попытка сопоставления. Ошибка сопоставления будет проигнорирована, и сообщение будет напечатано в стандартную ошибку.</li><li><code>silent</code>: Если поддерживается ОС, будет предпринята попытка сопоставления. Ошибка сопоставления будет проигнорирована и не будет сообщена.</li></ul><h3 id="--use-largepages=mode" tabindex="-1"><code>--v8-options</code> <a class="header-anchor" href="#--use-largepages=mode" aria-label="Permalink to “--v8-options”">​</a></h3><p><strong>Добавлено в версии: v0.1.3</strong></p><p>Вывести параметры командной строки V8.</p><h3 id="--v8-options" tabindex="-1"><code>--v8-pool-size=num</code> <a class="header-anchor" href="#--v8-options" aria-label="Permalink to “--v8-pool-size=num”">​</a></h3><p><strong>Добавлено в версии: v5.10.0</strong></p><p>Установите размер пула потоков V8, который будет использоваться для распределения фоновых задач.</p><p>Если установлено значение <code>0</code>, Node.js выберет подходящий размер пула потоков, основываясь на оценке степени параллелизма.</p><p>Степень параллелизма относится к количеству вычислений, которые могут выполняться одновременно на данной машине. В общем случае, это то же самое, что и количество ЦП, но может отличаться в таких средах, как виртуальные машины или контейнеры.</p><h3 id="--v8-pool-size=num" tabindex="-1"><code>-v</code>, <code>--version</code> <a class="header-anchor" href="#--v8-pool-size=num" aria-label="Permalink to “-v, --version”">​</a></h3><p><strong>Добавлено в версии: v0.1.3</strong></p><p>Вывести версию Node.js.</p><h3 id="-v---version" tabindex="-1"><code>--watch</code> <a class="header-anchor" href="#-v---version" aria-label="Permalink to “--watch”">​</a></h3><div class="info custom-block"><p class="custom-block-title">[История]</p><table tabindex="0"><thead><tr><th>Версия</th><th>Изменения</th></tr></thead><tbody><tr><td>v22.0.0, v20.13.0</td><td>Режим наблюдения теперь стабилен.</td></tr><tr><td>v19.2.0, v18.13.0</td><td>Тестовый прогонщик теперь поддерживает запуск в режиме наблюдения.</td></tr><tr><td>v18.11.0, v16.19.0</td><td>Добавлено в версии: v18.11.0, v16.19.0</td></tr></tbody></table></div><div class="tip custom-block"><p class="custom-block-title">[Stable: 2 - Stable]</p><p><a href="/ru/nodejs/api/documentation#stability-index">Stable: 2</a> <a href="/ru/nodejs/api/documentation#stability-index">Стабильность: 2</a> - Стабильно</p></div><p>Запускает Node.js в режиме наблюдения. В режиме наблюдения изменения в отслеживаемых файлах приводят к перезапуску процесса Node.js. По умолчанию режим наблюдения будет отслеживать точку входа и любой требуемый или импортированный модуль. Используйте <code>--watch-path</code>, чтобы указать, какие пути отслеживать.</p><p>Этот флаг нельзя комбинировать с <code>--check</code>, <code>--eval</code>, <code>--interactive</code> или REPL.</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">node</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --watch</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> index.js</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="--watch" tabindex="-1"><code>--watch-path</code> <a class="header-anchor" href="#--watch" aria-label="Permalink to “--watch-path”">​</a></h3><div class="info custom-block"><p class="custom-block-title">[История]</p><table tabindex="0"><thead><tr><th>Версия</th><th>Изменения</th></tr></thead><tbody><tr><td>v22.0.0, v20.13.0</td><td>Режим наблюдения теперь стабилен.</td></tr><tr><td>v18.11.0, v16.19.0</td><td>Добавлено в: v18.11.0, v16.19.0</td></tr></tbody></table></div><div class="tip custom-block"><p class="custom-block-title">[Стабильно: 2 - Стабильно]</p><p><a href="/ru/nodejs/api/documentation#stability-index">Стабильно: 2</a> <a href="/ru/nodejs/api/documentation#stability-index">Стабильность: 2</a> - Стабильно</p></div><p>Запускает Node.js в режиме наблюдения и указывает, за какими путями следить. В режиме наблюдения изменения в отслеживаемых путях приводят к перезапуску процесса Node.js. Это отключит наблюдение за необходимыми или импортированными модулями, даже при использовании в сочетании с <code>--watch</code>.</p><p>Этот флаг нельзя комбинировать с <code>--check</code>, <code>--eval</code>, <code>--interactive</code>, <code>--test</code> или REPL.</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">node</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --watch-path=./src</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --watch-path=./tests</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> index.js</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>Этот параметр поддерживается только в macOS и Windows. Исключение <code>ERR_FEATURE_UNAVAILABLE_ON_PLATFORM</code> будет выдано, если этот параметр используется на платформе, которая его не поддерживает.</p><h3 id="--watch-path" tabindex="-1"><code>--watch-preserve-output</code> <a class="header-anchor" href="#--watch-path" aria-label="Permalink to “--watch-preserve-output”">​</a></h3><p><strong>Добавлено в: v19.3.0, v18.13.0</strong></p><p>Отключает очистку консоли при перезапуске процесса в режиме наблюдения.</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">node</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --watch</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --watch-preserve-output</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> test.js</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="--watch-preserve-output" tabindex="-1"><code>--zero-fill-buffers</code> <a class="header-anchor" href="#--watch-preserve-output" aria-label="Permalink to “--zero-fill-buffers”">​</a></h3><p><strong>Добавлено в: v6.0.0</strong></p><p>Автоматически заполняет нулями все новые экземпляры <a href="/ru/nodejs/api/buffer#class-buffer"><code>Buffer</code></a> и <a href="/ru/nodejs/api/buffer#class-slowbuffer"><code>SlowBuffer</code></a>.</p><h2 id="--zero-fill-buffers" tabindex="-1">Переменные окружения <a class="header-anchor" href="#--zero-fill-buffers" aria-label="Permalink to “Переменные окружения”">​</a></h2><h3 id="environment-variables_1" tabindex="-1"><code>FORCE_COLOR=[1, 2, 3]</code> <a class="header-anchor" href="#environment-variables_1" aria-label="Permalink to “FORCE_COLOR=[1, 2, 3]”">​</a></h3><p>Переменная окружения <code>FORCE_COLOR</code> используется для включения ANSI-окрашенного вывода. Значение может быть:</p><ul><li><code>1</code>, <code>true</code> или пустая строка <code>&#39;&#39;</code> указывают на поддержку 16 цветов,</li><li><code>2</code> указывает на поддержку 256 цветов, или</li><li><code>3</code> указывает на поддержку 16 миллионов цветов.</li></ul><p>Когда используется <code>FORCE_COLOR</code> и установлено поддерживаемое значение, обе переменные окружения <code>NO_COLOR</code> и <code>NODE_DISABLE_COLORS</code> игнорируются.</p><p>Любое другое значение приведет к отключению цветного вывода.</p><h3 id="force_color=1-2-3" tabindex="-1"><code>NODE_COMPILE_CACHE=dir</code> <a class="header-anchor" href="#force_color=1-2-3" aria-label="Permalink to “NODE_COMPILE_CACHE=dir”">​</a></h3><p><strong>Добавлено в: v22.1.0</strong></p><div class="warning custom-block"><p class="custom-block-title">[Стабильно: 1 - Экспериментально]</p><p><a href="/ru/nodejs/api/documentation#stability-index">Стабильно: 1</a> <a href="/ru/nodejs/api/documentation#stability-index">Стабильность: 1</a>.1 - Активная разработка</p></div><p>Включите <a href="/ru/nodejs/api/module#module-compile-cache">кеш компиляции модулей</a> для экземпляра Node.js. Подробности смотрите в документации по <a href="/ru/nodejs/api/module#module-compile-cache">кешу компиляции модулей</a>.</p><h3 id="node_compile_cache=dir" tabindex="-1"><code>NODE_DEBUG=module[,…]</code> <a class="header-anchor" href="#node_compile_cache=dir" aria-label="Permalink to “NODE_DEBUG=module[,…]”">​</a></h3><p><strong>Добавлено в: v0.1.32</strong></p><p>Список основных модулей, разделенных символом <code>&#39;,&#39;</code>, для которых должна выводиться отладочная информация.</p><h3 id="node_debug=module" tabindex="-1"><code>NODE_DEBUG_NATIVE=module[,…]</code> <a class="header-anchor" href="#node_debug=module" aria-label="Permalink to “NODE_DEBUG_NATIVE=module[,…]”">​</a></h3><p>Список основных C++ модулей, разделенных символом <code>&#39;,&#39;</code>, для которых должна выводиться отладочная информация.</p><h3 id="node_debug_native=module" tabindex="-1"><code>NODE_DISABLE_COLORS=1</code> <a class="header-anchor" href="#node_debug_native=module" aria-label="Permalink to “NODE_DISABLE_COLORS=1”">​</a></h3><p><strong>Добавлено в: v0.3.0</strong></p><p>Если установлено, цвета не будут использоваться в REPL.</p><h3 id="node_disable_colors=1" tabindex="-1"><code>NODE_DISABLE_COMPILE_CACHE=1</code> <a class="header-anchor" href="#node_disable_colors=1" aria-label="Permalink to “NODE_DISABLE_COMPILE_CACHE=1”">​</a></h3><p><strong>Добавлено в: v22.8.0</strong></p><div class="warning custom-block"><p class="custom-block-title">[Стабильно: 1 - Экспериментально]</p><p><a href="/ru/nodejs/api/documentation#stability-index">Стабильно: 1</a> <a href="/ru/nodejs/api/documentation#stability-index">Стабильность: 1</a>.1 - Активная разработка</p></div><p>Отключить <a href="/ru/nodejs/api/module#module-compile-cache">кэш компиляции модулей</a> для экземпляра Node.js. См. документацию по <a href="/ru/nodejs/api/module#module-compile-cache">кэшу компиляции модулей</a> для получения подробной информации.</p><h3 id="node_disable_compile_cache=1" tabindex="-1"><code>NODE_EXTRA_CA_CERTS=file</code> <a class="header-anchor" href="#node_disable_compile_cache=1" aria-label="Permalink to “NODE_EXTRA_CA_CERTS=file”">​</a></h3><p><strong>Добавлено в: v7.3.0</strong></p><p>Если установлено, общеизвестные &quot;корневые&quot; ЦС (например, VeriSign) будут расширены дополнительными сертификатами из <code>file</code>. Файл должен содержать один или несколько доверенных сертификатов в формате PEM. Если файл отсутствует или имеет неправильный формат, будет (один раз) отправлено сообщение с помощью <a href="/ru/nodejs/api/process#processemitwarningwarning-options"><code>process.emitWarning()</code></a>, но любые другие ошибки игнорируются.</p><p>Ни общеизвестные, ни дополнительные сертификаты не используются, если свойство <code>ca</code> явно указано для TLS или HTTPS клиента или сервера.</p><p>Эта переменная окружения игнорируется, когда <code>node</code> запускается как setuid root или имеет установленные возможности файла Linux.</p><p>Переменная окружения <code>NODE_EXTRA_CA_CERTS</code> считывается только при первом запуске процесса Node.js. Изменение значения во время выполнения с помощью <code>process.env.NODE_EXTRA_CA_CERTS</code> не оказывает никакого влияния на текущий процесс.</p><h3 id="node_extra_ca_certs=file" tabindex="-1"><code>NODE_ICU_DATA=file</code> <a class="header-anchor" href="#node_extra_ca_certs=file" aria-label="Permalink to “NODE_ICU_DATA=file”">​</a></h3><p><strong>Добавлено в: v0.11.15</strong></p><p>Путь к данным ICU (объекта <code>Intl</code>). Расширит встроенные данные при компиляции с поддержкой small-icu.</p><h3 id="node_icu_data=file" tabindex="-1"><code>NODE_NO_WARNINGS=1</code> <a class="header-anchor" href="#node_icu_data=file" aria-label="Permalink to “NODE_NO_WARNINGS=1”">​</a></h3><p><strong>Добавлено в: v6.11.0</strong></p><p>Если установлено значение <code>1</code>, предупреждения процесса подавляются.</p><h3 id="node_no_warnings=1" tabindex="-1"><code>NODE_OPTIONS=options...</code> <a class="header-anchor" href="#node_no_warnings=1" aria-label="Permalink to “NODE_OPTIONS=options...”">​</a></h3><p><strong>Добавлено в: v8.0.0</strong></p><p>Список параметров командной строки, разделенных пробелами. <code>options...</code> интерпретируются до параметров командной строки, поэтому параметры командной строки будут переопределять или дополнять все, что находится в <code>options...</code>. Node.js завершит работу с ошибкой, если используется параметр, который не разрешен в среде, такой как <code>-p</code> или файл сценария.</p><p>Если значение параметра содержит пробел, его можно экранировать с помощью двойных кавычек:</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">NODE_OPTIONS</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;--require &quot;./my path/file.js&quot;&#39;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>Одиночный флаг, переданный в качестве параметра командной строки, переопределит тот же флаг, переданный в <code>NODE_OPTIONS</code>:</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Инспектор будет доступен на порту 5555 {#node_options=options}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">NODE_OPTIONS</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;--inspect=localhost:4444&#39;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> node</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --inspect=localhost:5555</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>Флаг, который можно передать несколько раз, будет обрабатываться так, как если бы его экземпляры <code>NODE_OPTIONS</code> были переданы первыми, а затем его экземпляры командной строки:</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">NODE_OPTIONS</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;--require &quot;./a.js&quot;&#39;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> node</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --require</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;./b.js&quot;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># эквивалентно: {#the-inspector-will-be-available-on-port-5555}</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">node</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --require</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;./a.js&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --require</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;./b.js&quot;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>Разрешенные параметры Node.js находятся в следующем списке. Если параметр поддерживает варианты --XX и --no-XX, они оба поддерживаются, но в список включен только один.</p><ul><li><code>--allow-addons</code></li><li><code>--allow-child-process</code></li><li><code>--allow-fs-read</code></li><li><code>--allow-fs-write</code></li><li><code>--allow-wasi</code></li><li><code>--allow-worker</code></li><li><code>--conditions</code>, <code>-C</code></li><li><code>--diagnostic-dir</code></li><li><code>--disable-proto</code></li><li><code>--disable-warning</code></li><li><code>--disable-wasm-trap-handler</code></li><li><code>--dns-result-order</code></li><li><code>--enable-fips</code></li><li><code>--enable-network-family-autoselection</code></li><li><code>--enable-source-maps</code></li><li><code>--entry-url</code></li><li><code>--experimental-abortcontroller</code></li><li><code>--experimental-async-context-frame</code></li><li><code>--experimental-detect-module</code></li><li><code>--experimental-eventsource</code></li><li><code>--experimental-import-meta-resolve</code></li><li><code>--experimental-json-modules</code></li><li><code>--experimental-loader</code></li><li><code>--experimental-modules</code></li><li><code>--experimental-permission</code></li><li><code>--experimental-print-required-tla</code></li><li><code>--experimental-require-module</code></li><li><code>--experimental-shadow-realm</code></li><li><code>--experimental-specifier-resolution</code></li><li><code>--experimental-strip-types</code></li><li><code>--experimental-top-level-await</code></li><li><code>--experimental-transform-types</code></li><li><code>--experimental-vm-modules</code></li><li><code>--experimental-wasi-unstable-preview1</code></li><li><code>--experimental-wasm-modules</code></li><li><code>--experimental-webstorage</code></li><li><code>--force-context-aware</code></li><li><code>--force-fips</code></li><li><code>--force-node-api-uncaught-exceptions-policy</code></li><li><code>--frozen-intrinsics</code></li><li><code>--heap-prof-dir</code></li><li><code>--heap-prof-interval</code></li><li><code>--heap-prof-name</code></li><li><code>--heap-prof</code></li><li><code>--heapsnapshot-near-heap-limit</code></li><li><code>--heapsnapshot-signal</code></li><li><code>--http-parser</code></li><li><code>--icu-data-dir</code></li><li><code>--import</code></li><li><code>--input-type</code></li><li><code>--insecure-http-parser</code></li><li><code>--inspect-brk</code></li><li><code>--inspect-port</code>, <code>--debug-port</code></li><li><code>--inspect-publish-uid</code></li><li><code>--inspect-wait</code></li><li><code>--inspect</code></li><li><code>--localstorage-file</code></li><li><code>--max-http-header-size</code></li><li><code>--napi-modules</code></li><li><code>--network-family-autoselection-attempt-timeout</code></li><li><code>--no-addons</code></li><li><code>--no-deprecation</code></li><li><code>--no-experimental-global-navigator</code></li><li><code>--no-experimental-repl-await</code></li><li><code>--no-experimental-sqlite</code></li><li><code>--no-experimental-websocket</code></li><li><code>--no-extra-info-on-fatal-exception</code></li><li><code>--no-force-async-hooks-checks</code></li><li><code>--no-global-search-paths</code></li><li><code>--no-network-family-autoselection</code></li><li><code>--no-warnings</code></li><li><code>--node-memory-debug</code></li><li><code>--openssl-config</code></li><li><code>--openssl-legacy-provider</code></li><li><code>--openssl-shared-config</code></li><li><code>--pending-deprecation</code></li><li><code>--permission</code></li><li><code>--preserve-symlinks-main</code></li><li><code>--preserve-symlinks</code></li><li><code>--prof-process</code></li><li><code>--redirect-warnings</code></li><li><code>--report-compact</code></li><li><code>--report-dir</code>, <code>--report-directory</code></li><li><code>--report-exclude-env</code></li><li><code>--report-exclude-network</code></li><li><code>--report-filename</code></li><li><code>--report-on-fatalerror</code></li><li><code>--report-on-signal</code></li><li><code>--report-signal</code></li><li><code>--report-uncaught-exception</code></li><li><code>--require</code>, <code>-r</code></li><li><code>--secure-heap-min</code></li><li><code>--secure-heap</code></li><li><code>--snapshot-blob</code></li><li><code>--test-coverage-branches</code></li><li><code>--test-coverage-exclude</code></li><li><code>--test-coverage-functions</code></li><li><code>--test-coverage-include</code></li><li><code>--test-coverage-lines</code></li><li><code>--test-name-pattern</code></li><li><code>--test-only</code></li><li><code>--test-reporter-destination</code></li><li><code>--test-reporter</code></li><li><code>--test-shard</code></li><li><code>--test-skip-pattern</code></li><li><code>--throw-deprecation</code></li><li><code>--title</code></li><li><code>--tls-cipher-list</code></li><li><code>--tls-keylog</code></li><li><code>--tls-max-v1.2</code></li><li><code>--tls-max-v1.3</code></li><li><code>--tls-min-v1.0</code></li><li><code>--tls-min-v1.1</code></li><li><code>--tls-min-v1.2</code></li><li><code>--tls-min-v1.3</code></li><li><code>--trace-deprecation</code></li><li><code>--trace-env-js-stack</code></li><li><code>--trace-env-native-stack</code></li><li><code>--trace-env</code></li><li><code>--trace-event-categories</code></li><li><code>--trace-event-file-pattern</code></li><li><code>--trace-events-enabled</code></li><li><code>--trace-exit</code></li><li><code>--trace-require-module</code></li><li><code>--trace-sigint</code></li><li><code>--trace-sync-io</code></li><li><code>--trace-tls</code></li><li><code>--trace-uncaught</code></li><li><code>--trace-warnings</code></li><li><code>--track-heap-objects</code></li><li><code>--unhandled-rejections</code></li><li><code>--use-bundled-ca</code></li><li><code>--use-largepages</code></li><li><code>--use-openssl-ca</code></li><li><code>--v8-pool-size</code></li><li><code>--watch-path</code></li><li><code>--watch-preserve-output</code></li><li><code>--watch</code></li><li><code>--zero-fill-buffers</code></li></ul><p>Разрешенные параметры V8:</p><ul><li><code>--abort-on-uncaught-exception</code></li><li><code>--disallow-code-generation-from-strings</code></li><li><code>--enable-etw-stack-walking</code></li><li><code>--expose-gc</code></li><li><code>--interpreted-frames-native-stack</code></li><li><code>--jitless</code></li><li><code>--max-old-space-size</code></li><li><code>--max-semi-space-size</code></li><li><code>--perf-basic-prof-only-functions</code></li><li><code>--perf-basic-prof</code></li><li><code>--perf-prof-unwinding-info</code></li><li><code>--perf-prof</code></li><li><code>--stack-trace-limit</code></li></ul><p><code>--perf-basic-prof-only-functions</code>, <code>--perf-basic-prof</code>, <code>--perf-prof-unwinding-info</code> и <code>--perf-prof</code> доступны только в Linux.</p><p><code>--enable-etw-stack-walking</code> доступен только в Windows.</p><h3 id="is-equivalent-to" tabindex="-1"><code>NODE_PATH=path[:…]</code> <a class="header-anchor" href="#is-equivalent-to" aria-label="Permalink to “NODE_PATH=path[:…]”">​</a></h3><p><strong>Добавлено в: v0.1.32</strong></p><p>Список разделенных символом <code>&#39;:&#39;</code> директорий, которые добавляются к пути поиска модулей.</p><p>В Windows вместо этого используется список, разделенный символом <code>&#39;;&#39;</code>.</p><h3 id="node_path=path" tabindex="-1"><code>NODE_PENDING_DEPRECATION=1</code> <a class="header-anchor" href="#node_path=path" aria-label="Permalink to “NODE_PENDING_DEPRECATION=1”">​</a></h3><p><strong>Добавлено в: v8.0.0</strong></p><p>Если установлено значение <code>1</code>, выдавать предупреждения об отложенной отмене.</p><p>Отложенные отмены обычно идентичны отмене во время выполнения, за исключением того, что они <em>отключены</em> по умолчанию и не будут выдаваться, если не установлен флаг командной строки <code>--pending-deprecation</code> или переменная среды <code>NODE_PENDING_DEPRECATION=1</code>. Отложенные отмены используются для предоставления своего рода селективного механизма &quot;раннего предупреждения&quot;, который разработчики могут использовать для обнаружения использования устаревшего API.</p><h3 id="node_pending_deprecation=1" tabindex="-1"><code>NODE_PENDING_PIPE_INSTANCES=instances</code> <a class="header-anchor" href="#node_pending_deprecation=1" aria-label="Permalink to “NODE_PENDING_PIPE_INSTANCES=instances”">​</a></h3><p>Установите количество ожидающих дескрипторов экземпляров каналов, когда сервер каналов ожидает подключения. Этот параметр применяется только к Windows.</p><h3 id="node_pending_pipe_instances=instances" tabindex="-1"><code>NODE_PRESERVE_SYMLINKS=1</code> <a class="header-anchor" href="#node_pending_pipe_instances=instances" aria-label="Permalink to “NODE_PRESERVE_SYMLINKS=1”">​</a></h3><p><strong>Добавлено в: v7.1.0</strong></p><p>Если установлено значение <code>1</code>, предписывает загрузчику модулей сохранять символические ссылки при разрешении и кэшировании модулей.</p><h3 id="node_preserve_symlinks=1" tabindex="-1"><code>NODE_REDIRECT_WARNINGS=file</code> <a class="header-anchor" href="#node_preserve_symlinks=1" aria-label="Permalink to “NODE_REDIRECT_WARNINGS=file”">​</a></h3><p><strong>Добавлено в: v8.0.0</strong></p><p>Если установлено, предупреждения процесса будут выдаваться в указанный файл вместо печати в stderr. Файл будет создан, если он не существует, и будет добавлен, если он существует. Если при попытке записи предупреждения в файл произошла ошибка, предупреждение будет записано в stderr. Это эквивалентно использованию флага командной строки <code>--redirect-warnings=file</code>.</p><h3 id="node_redirect_warnings=file" tabindex="-1"><code>NODE_REPL_EXTERNAL_MODULE=file</code> <a class="header-anchor" href="#node_redirect_warnings=file" aria-label="Permalink to “NODE_REPL_EXTERNAL_MODULE=file”">​</a></h3><div class="info custom-block"><p class="custom-block-title">[История]</p><table tabindex="0"><thead><tr><th>Версия</th><th>Изменения</th></tr></thead><tbody><tr><td>v22.3.0, v20.16.0</td><td>Удалена возможность использования этой переменной среды с kDisableNodeOptionsEnv для встраиваемых систем.</td></tr><tr><td>v13.0.0, v12.16.0</td><td>Добавлено в: v13.0.0, v12.16.0</td></tr></tbody></table></div><p>Путь к модулю Node.js, который будет загружен вместо встроенного REPL. Переопределение этого значения на пустую строку (<code>&#39;&#39;</code>) приведет к использованию встроенного REPL.</p><h3 id="node_repl_external_module=file" tabindex="-1"><code>NODE_REPL_HISTORY=file</code> <a class="header-anchor" href="#node_repl_external_module=file" aria-label="Permalink to “NODE_REPL_HISTORY=file”">​</a></h3><p><strong>Добавлено в: v3.0.0</strong></p><p>Путь к файлу, используемому для хранения постоянной истории REPL. Путь по умолчанию — <code>~/.node_repl_history</code>, который переопределяется этой переменной. Установка значения в пустую строку (<code>&#39;&#39;</code> или <code>&#39; &#39;</code>) отключает постоянную историю REPL.</p><h3 id="node_repl_history=file" tabindex="-1"><code>NODE_SKIP_PLATFORM_CHECK=value</code> <a class="header-anchor" href="#node_repl_history=file" aria-label="Permalink to “NODE_SKIP_PLATFORM_CHECK=value”">​</a></h3><p><strong>Добавлено в: v14.5.0</strong></p><p>Если <code>value</code> равно <code>&#39;1&#39;</code>, проверка поддерживаемой платформы пропускается во время запуска Node.js. Node.js может работать некорректно. Любые проблемы, возникающие на неподдерживаемых платформах, не будут исправлены.</p><h3 id="node_skip_platform_check=value" tabindex="-1"><code>NODE_TEST_CONTEXT=value</code> <a class="header-anchor" href="#node_skip_platform_check=value" aria-label="Permalink to “NODE_TEST_CONTEXT=value”">​</a></h3><p>Если <code>value</code> равно <code>&#39;child&#39;</code>, параметры средства создания отчетов о тестировании будут переопределены, и выходные данные теста будут отправлены в stdout в формате TAP. Если указано какое-либо другое значение, Node.js не дает никаких гарантий относительно используемого формата средства создания отчетов или его стабильности.</p><h3 id="node_test_context=value" tabindex="-1"><code>NODE_TLS_REJECT_UNAUTHORIZED=value</code> <a class="header-anchor" href="#node_test_context=value" aria-label="Permalink to “NODE_TLS_REJECT_UNAUTHORIZED=value”">​</a></h3><p>Если <code>value</code> равно <code>&#39;0&#39;</code>, проверка сертификатов отключена для TLS-соединений. Это делает TLS и HTTPS в частности небезопасными. Использование этой переменной среды настоятельно не рекомендуется.</p><h3 id="node_tls_reject_unauthorized=value" tabindex="-1"><code>NODE_V8_COVERAGE=dir</code> <a class="header-anchor" href="#node_tls_reject_unauthorized=value" aria-label="Permalink to “NODE_V8_COVERAGE=dir”">​</a></h3><p>При установке Node.js начнет выводить <a href="https://v8project.blogspot.com/2017/12/javascript-code-coverage" target="_blank" rel="noreferrer">покрытие кода JavaScript V8</a> и данные <a href="https://sourcemaps.info/spec" target="_blank" rel="noreferrer">карты исходного кода</a> в каталог, указанный в качестве аргумента (информация о покрытии записывается в виде JSON в файлы с префиксом <code>coverage</code>).</p><p><code>NODE_V8_COVERAGE</code> будет автоматически распространяться на подпроцессы, что упрощает инструментирование приложений, вызывающих семейство функций <code>child_process.spawn()</code>. <code>NODE_V8_COVERAGE</code> можно установить в пустую строку, чтобы предотвратить распространение.</p><h3 id="node_v8_coverage=dir" tabindex="-1"><code>NO_COLOR=&amp;lt;any&amp;gt;</code> <a class="header-anchor" href="#node_v8_coverage=dir" aria-label="Permalink to “NO_COLOR=&amp;lt;any&amp;gt;”">​</a></h3><p><a href="https://no-color.org/" target="_blank" rel="noreferrer"><code>NO_COLOR</code></a> — это псевдоним для <code>NODE_DISABLE_COLORS</code>. Значение переменной среды произвольно.</p><h4 id="вывод-покрытия-no-color-lt-any-gt" tabindex="-1">Вывод покрытия {#no_color=&lt;any&gt;} <a class="header-anchor" href="#вывод-покрытия-no-color-lt-any-gt" aria-label="Permalink to “Вывод покрытия {#no_color=&amp;lt;any&amp;gt;}”">​</a></h4><p>Покрытие выводится как массив объектов <a href="https://chromedevtools.github.io/devtools-protocol/tot/Profiler#type-ScriptCoverage" target="_blank" rel="noreferrer">ScriptCoverage</a> по ключу верхнего уровня <code>result</code>:</p><div class="language-json line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;result&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;scriptId&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;67&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;url&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;internal/tty.js&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;functions&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: []</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  ]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h4 id="coverage-output" tabindex="-1">Кэш карт исходного кода <a class="header-anchor" href="#coverage-output" aria-label="Permalink to “Кэш карт исходного кода”">​</a></h4><div class="warning custom-block"><p class="custom-block-title">[Stable: 1 - Experimental]</p><p><a href="/ru/nodejs/api/documentation#stability-index">Stable: 1</a> <a href="/ru/nodejs/api/documentation#stability-index">Стабильность: 1</a> - Экспериментальная</p></div><p>Если найдено, данные карты исходного кода добавляются к ключу верхнего уровня <code>source-map-cache</code> в объекте покрытия JSON.</p><p><code>source-map-cache</code> — это объект с ключами, представляющими файлы, из которых были извлечены карты исходного кода, и значениями, которые включают необработанный URL-адрес карты исходного кода (в ключе <code>url</code>), проанализированную информацию Source Map v3 (в ключе <code>data</code>) и длины строк исходного файла (в ключе <code>lineLengths</code>).</p><div class="language-json line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;result&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;scriptId&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;68&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;url&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;file:///absolute/path/to/source.js&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;functions&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: []</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  ],</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;source-map-cache&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;file:///absolute/path/to/source.js&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;url&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;./path-to-map.json&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;data&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        &quot;version&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        &quot;sources&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">          &quot;file:///absolute/path/to/original.js&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        ],</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        &quot;names&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">          &quot;Foo&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">          &quot;console&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">          &quot;info&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        ],</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        &quot;mappings&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;MAAMA,IACJC,YAAaC&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        &quot;sourceRoot&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;./&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      },</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;lineLengths&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        13</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        62</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        38</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        27</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      ]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br></div></div><h3 id="source-map-cache" tabindex="-1"><code>OPENSSL_CONF=file</code> <a class="header-anchor" href="#source-map-cache" aria-label="Permalink to “OPENSSL_CONF=file”">​</a></h3><p><strong>Добавлено в: v6.11.0</strong></p><p>Загружает файл конфигурации OpenSSL при запуске. Помимо прочего, это можно использовать для включения криптографии, совместимой с FIPS, если Node.js собран с <code>./configure --openssl-fips</code>.</p><p>Если используется параметр командной строки <a href="/ru/nodejs/api/cli#openssl-configfile"><code>--openssl-config</code></a>, переменная среды игнорируется.</p><h3 id="openssl_conf=file" tabindex="-1"><code>SSL_CERT_DIR=dir</code> <a class="header-anchor" href="#openssl_conf=file" aria-label="Permalink to “SSL_CERT_DIR=dir”">​</a></h3><p><strong>Добавлено в: v7.7.0</strong></p><p>Если включен <code>--use-openssl-ca</code>, это переопределяет и устанавливает каталог OpenSSL, содержащий доверенные сертификаты.</p><p>Имейте в виду, что если дочерняя среда не задана явно, эта переменная среды будет унаследована любыми дочерними процессами, и если они используют OpenSSL, это может привести к тому, что они будут доверять тем же CA, что и node.</p><h3 id="ssl_cert_dir=dir" tabindex="-1"><code>SSL_CERT_FILE=file</code> <a class="header-anchor" href="#ssl_cert_dir=dir" aria-label="Permalink to “SSL_CERT_FILE=file”">​</a></h3><p><strong>Добавлено в: v7.7.0</strong></p><p>Если включен <code>--use-openssl-ca</code>, это переопределяет и устанавливает файл OpenSSL, содержащий доверенные сертификаты.</p><p>Имейте в виду, что если дочерняя среда не задана явно, эта переменная среды будет унаследована любыми дочерними процессами, и если они используют OpenSSL, это может привести к тому, что они будут доверять тем же CA, что и node.</p><h3 id="ssl_cert_file=file" tabindex="-1"><code>TZ</code> <a class="header-anchor" href="#ssl_cert_file=file" aria-label="Permalink to “TZ”">​</a></h3><div class="info custom-block"><p class="custom-block-title">[История]</p><table tabindex="0"><thead><tr><th>Версия</th><th>Изменения</th></tr></thead><tbody><tr><td>v16.2.0</td><td>Изменение переменной TZ с помощью process.env.TZ = также изменяет часовой пояс в Windows.</td></tr><tr><td>v13.0.0</td><td>Изменение переменной TZ с помощью process.env.TZ = изменяет часовой пояс в системах POSIX.</td></tr><tr><td>v0.0.1</td><td>Добавлено в: v0.0.1</td></tr></tbody></table></div><p>Переменная среды <code>TZ</code> используется для указания конфигурации часового пояса.</p><p>Хотя Node.js не поддерживает все различные <a href="https://www.gnu.org/software/libc/manual/html_node/TZ-Variable" target="_blank" rel="noreferrer">способы обработки <code>TZ</code> в других средах</a>, он поддерживает основные <a href="https://en.wikipedia.org/wiki/List_of_tz_database_time_zones" target="_blank" rel="noreferrer">идентификаторы часовых поясов</a> (например, <code>&#39;Etc/UTC&#39;</code>, <code>&#39;Europe/Paris&#39;</code> или <code>&#39;America/New_York&#39;</code>). Он может поддерживать несколько других сокращений или псевдонимов, но они настоятельно не рекомендуются и не гарантируются.</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> TZ=Europe/Dublin</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> node</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -pe</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;new Date().toString()&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Wed</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> May</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 12</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2021</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 20:30:48</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> GMT+0100</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (Irish </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">Standard</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Time</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="tz" tabindex="-1"><code>UV_THREADPOOL_SIZE=size</code> <a class="header-anchor" href="#tz" aria-label="Permalink to “UV_THREADPOOL_SIZE=size”">​</a></h3><p>Устанавливает количество потоков, используемых в пуле потоков libuv, равным <code>size</code> потокам.</p><p>Асинхронные системные API используются Node.js, когда это возможно, но там, где их нет, пул потоков libuv используется для создания асинхронных Node API на основе синхронных системных API. Node.js API, которые используют пул потоков:</p><ul><li>все API <code>fs</code>, кроме API наблюдателя за файлами и тех, которые явно синхронны</li><li>асинхронные крипто API, такие как <code>crypto.pbkdf2()</code>, <code>crypto.scrypt()</code>, <code>crypto.randomBytes()</code>, <code>crypto.randomFill()</code>, <code>crypto.generateKeyPair()</code></li><li><code>dns.lookup()</code></li><li>все API <code>zlib</code>, кроме тех, которые явно синхронны</li></ul><p>Поскольку пул потоков libuv имеет фиксированный размер, это означает, что если по какой-либо причине любой из этих API занимает много времени, другие (казалось бы, не связанные) API, которые работают в пуле потоков libuv, будут испытывать снижение производительности. Чтобы смягчить эту проблему, одним из возможных решений является увеличение размера пула потоков libuv, установив для переменной среды <code>&#39;UV_THREADPOOL_SIZE&#39;</code> значение больше <code>4</code> (ее текущее значение по умолчанию). Однако установка этого значения внутри процесса с помощью <code>process.env.UV_THREADPOOL_SIZE=size</code> не гарантированно сработает, поскольку пул потоков был бы создан как часть инициализации среды выполнения задолго до запуска пользовательского кода. Для получения дополнительной информации см. <a href="https://docs.libuv.org/en/latest/threadpool" target="_blank" rel="noreferrer">документацию по пулу потоков libuv</a>.</p><h2 id="uv_threadpool_size=size" tabindex="-1">Полезные опции V8 <a class="header-anchor" href="#uv_threadpool_size=size" aria-label="Permalink to “Полезные опции V8”">​</a></h2><p>V8 имеет свой собственный набор опций командной строки. Любая опция V8 CLI, предоставленная <code>node</code>, будет передана V8 для обработки. Опции V8 <em>не имеют гарантии стабильности</em>. Команда V8 сама не считает их частью своего формального API и оставляет за собой право изменять их в любое время. Аналогично, они не подпадают под гарантии стабильности Node.js. Многие из опций V8 представляют интерес только для разработчиков V8. Несмотря на это, существует небольшой набор опций V8, которые широко применимы к Node.js, и они задокументированы здесь:</p><h3 id="useful-v8-options" tabindex="-1"><code>--abort-on-uncaught-exception</code> <a class="header-anchor" href="#useful-v8-options" aria-label="Permalink to “--abort-on-uncaught-exception”">​</a></h3><h3 id="--abort-on-uncaught-exception_1" tabindex="-1"><code>--disallow-code-generation-from-strings</code> <a class="header-anchor" href="#--abort-on-uncaught-exception_1" aria-label="Permalink to “--disallow-code-generation-from-strings”">​</a></h3><h3 id="--disallow-code-generation-from-strings_1" tabindex="-1"><code>--enable-etw-stack-walking</code> <a class="header-anchor" href="#--disallow-code-generation-from-strings_1" aria-label="Permalink to “--enable-etw-stack-walking”">​</a></h3><h3 id="--enable-etw-stack-walking" tabindex="-1"><code>--expose-gc</code> <a class="header-anchor" href="#--enable-etw-stack-walking" aria-label="Permalink to “--expose-gc”">​</a></h3><h3 id="--expose-gc_1" tabindex="-1"><code>--harmony-shadow-realm</code> <a class="header-anchor" href="#--expose-gc_1" aria-label="Permalink to “--harmony-shadow-realm”">​</a></h3><h3 id="--harmony-shadow-realm" tabindex="-1"><code>--interpreted-frames-native-stack</code> <a class="header-anchor" href="#--harmony-shadow-realm" aria-label="Permalink to “--interpreted-frames-native-stack”">​</a></h3><h3 id="--interpreted-frames-native-stack" tabindex="-1"><code>--jitless</code> <a class="header-anchor" href="#--interpreted-frames-native-stack" aria-label="Permalink to “--jitless”">​</a></h3><h3 id="--jitless_1" tabindex="-1"><code>--max-old-space-size=SIZE</code> (в МиБ) <a class="header-anchor" href="#--jitless_1" aria-label="Permalink to “--max-old-space-size=SIZE (в МиБ)”">​</a></h3><p>Устанавливает максимальный размер памяти для старого сегмента памяти V8. По мере приближения потребления памяти к лимиту, V8 будет тратить больше времени на сборку мусора, чтобы освободить неиспользуемую память.</p><p>На машине с 2 ГиБ памяти, рекомендуется установить значение в 1536 (1.5 ГиБ), чтобы оставить немного памяти для других целей и избежать своппинга.</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">node</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --max-old-space-size=1536</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> index.js</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="--max-old-space-size=size-in-mib" tabindex="-1"><code>--max-semi-space-size=SIZE</code> (в МиБ) <a class="header-anchor" href="#--max-old-space-size=size-in-mib" aria-label="Permalink to “--max-semi-space-size=SIZE (в МиБ)”">​</a></h3><p>Устанавливает максимальный размер <a href="https://www.memorymanagement.org/glossary/s#semi.space" target="_blank" rel="noreferrer">полупространства</a> для <a href="https://v8.dev/blog/orinoco-parallel-scavenger" target="_blank" rel="noreferrer">scavenge garbage collector</a> V8 в МиБ (мебибайтах). Увеличение максимального размера полупространства может повысить пропускную способность для Node.js ценой большего потребления памяти.</p><p>Поскольку размер молодого поколения кучи V8 в три раза больше (см. <a href="https://chromium.googlesource.com/v8/v8.git/+/refs/tags/10.3.129/src/heap/heap.cc#328" target="_blank" rel="noreferrer"><code>YoungGenerationSizeFromSemiSpaceSize</code></a> в V8) размера полупространства, увеличение на 1 МиБ для полупространства применяется к каждому из трех отдельных полупространств и приводит к увеличению размера кучи на 3 МиБ. Улучшение пропускной способности зависит от вашей рабочей нагрузки (см. <a href="https://github.com/nodejs/node/issues/42511" target="_blank" rel="noreferrer">#42511</a>).</p><p>Значение по умолчанию зависит от лимита памяти. Например, в 64-битных системах с лимитом памяти 512 МиБ, максимальный размер полупространства по умолчанию составляет 1 МиБ. Для лимитов памяти до 2 ГиБ включительно, максимальный размер полупространства по умолчанию будет меньше 16 МиБ в 64-битных системах.</p><p>Чтобы получить наилучшую конфигурацию для вашего приложения, вам следует попробовать различные значения max-semi-space-size при запуске бенчмарков для вашего приложения.</p><p>Например, бенчмарк в 64-битных системах:</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> MiB </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">in</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 16</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 32</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 64</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 128</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">do</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    node</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --max-semi-space-size=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$MiB</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> index.js</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">done</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="--max-semi-space-size=size-in-mib" tabindex="-1"><code>--perf-basic-prof</code> <a class="header-anchor" href="#--max-semi-space-size=size-in-mib" aria-label="Permalink to “--perf-basic-prof”">​</a></h3><h3 id="--perf-basic-prof" tabindex="-1"><code>--perf-basic-prof-only-functions</code> <a class="header-anchor" href="#--perf-basic-prof" aria-label="Permalink to “--perf-basic-prof-only-functions”">​</a></h3><h3 id="--perf-basic-prof-only-functions" tabindex="-1"><code>--perf-prof</code> <a class="header-anchor" href="#--perf-basic-prof-only-functions" aria-label="Permalink to “--perf-prof”">​</a></h3><h3 id="--perf-prof" tabindex="-1"><code>--perf-prof-unwinding-info</code> <a class="header-anchor" href="#--perf-prof" aria-label="Permalink to “--perf-prof-unwinding-info”">​</a></h3><h3 id="--perf-prof-unwinding-info" tabindex="-1"><code>--prof</code> <a class="header-anchor" href="#--perf-prof-unwinding-info" aria-label="Permalink to “--prof”">​</a></h3><h3 id="--prof_1" tabindex="-1"><code>--security-revert</code> <a class="header-anchor" href="#--prof_1" aria-label="Permalink to “--security-revert”">​</a></h3><h3 id="--security-revert" tabindex="-1"><code>--stack-trace-limit=limit</code> <a class="header-anchor" href="#--security-revert" aria-label="Permalink to “--stack-trace-limit=limit”">​</a></h3><p>Максимальное количество кадров стека для сбора в трассировке стека ошибки. Установка значения 0 отключает сбор трассировки стека. Значение по умолчанию - 10.</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">node</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --stack-trace-limit=12</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -p</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -e</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;Error.stackTraceLimit&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # выводит 12</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div>`,880)])}var s=e(a,[[`render`,o]]);export{i as __pageData,s as default};