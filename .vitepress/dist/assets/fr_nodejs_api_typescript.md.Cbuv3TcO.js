import{__plugin_vue_export_helper_default as e,createElementBlock as t,createStaticVNode as n,openBlock as r}from"./chunks/plugin-vue_export-helper.Bts1mPc7.js";const i=JSON.parse(`{"title":"Support de TypeScript dans Node.js","description":"Découvrez comment utiliser TypeScript avec Node.js, y compris l'installation, la configuration et les meilleures pratiques pour intégrer TypeScript dans vos projets Node.js.","frontmatter":{"title":"Support de TypeScript dans Node.js","description":"Découvrez comment utiliser TypeScript avec Node.js, y compris l'installation, la configuration et les meilleures pratiques pour intégrer TypeScript dans vos projets Node.js.","head":[["meta",{"name":"og:title","content":"Support de TypeScript dans Node.js | Node.js - iDoc.dev"}],["meta",{"name":"og:description","content":"Découvrez comment utiliser TypeScript avec Node.js, y compris l'installation, la configuration et les meilleures pratiques pour intégrer TypeScript dans vos projets Node.js."}],["meta",{"name":"twitter:title","content":"Support de TypeScript dans Node.js | Node.js - iDoc.dev"}],["meta",{"name":"twitter:description","content":"Découvrez comment utiliser TypeScript avec Node.js, y compris l'installation, la configuration et les meilleures pratiques pour intégrer TypeScript dans vos projets Node.js."}],["link",{"rel":"canonical","href":"https://idoc.dev/fr/nodejs/api/typescript"}],["meta",{"property":"og:url","content":"https://idoc.dev/fr/nodejs/api/typescript"}]]},"headers":[],"relativePath":"fr/nodejs/api/typescript.md","filePath":"fr/nodejs/api/typescript.md","lastUpdated":null}`),a={name:`fr/nodejs/api/typescript.md`};function o(e,i,a,o,s,c){return r(),t(`div`,null,i[0]||=[n(`<h1 id="modules-typescript" tabindex="-1">Modules: TypeScript <a class="header-anchor" href="#modules-typescript" aria-label="Permalink to “Modules: TypeScript”">​</a></h1><div class="info custom-block"><p class="custom-block-title">[Historique]</p><table tabindex="0"><thead><tr><th>Version</th><th>Modifications</th></tr></thead><tbody><tr><td>v22.7.0</td><td>Ajout du flag <code>--experimental-transform-types</code>.</td></tr></tbody></table></div><div class="warning custom-block"><p class="custom-block-title">[Stable: 1 - Expérimental]</p><p><a href="/fr/nodejs/api/documentation#stability-index">Stable: 1</a> <a href="/fr/nodejs/api/documentation#stability-index">Stabilité: 1</a>.1 - Développement actif</p></div><h2 id="enabling" tabindex="-1">Activation <a class="header-anchor" href="#enabling" aria-label="Permalink to “Activation”">​</a></h2><p>Il existe deux façons d&#39;activer le support de TypeScript au runtime dans Node.js\xA0:</p><h2 id="full-typescript-support" tabindex="-1">Support complet de TypeScript <a class="header-anchor" href="#full-typescript-support" aria-label="Permalink to “Support complet de TypeScript”">​</a></h2><p>Pour utiliser TypeScript avec un support complet de toutes les fonctionnalités de TypeScript, y compris <code>tsconfig.json</code>, vous pouvez utiliser un paquet tiers. Ces instructions utilisent <a href="https://tsx.is/" target="_blank" rel="noreferrer"><code>tsx</code></a> comme exemple, mais il existe de nombreuses autres bibliothèques similaires disponibles.</p><h2 id="type-stripping" tabindex="-1">Suppression des types <a class="header-anchor" href="#type-stripping" aria-label="Permalink to “Suppression des types”">​</a></h2><p><strong>Ajouté dans\xA0: v22.6.0</strong></p><div class="warning custom-block"><p class="custom-block-title">[Stable: 1 - Expérimental]</p><p><a href="/fr/nodejs/api/documentation#stability-index">Stable: 1</a> <a href="/fr/nodejs/api/documentation#stability-index">Stabilité: 1</a>.1 - Développement actif</p></div><p>Le flag <a href="/fr/nodejs/api/cli#experimental-strip-types"><code>--experimental-strip-types</code></a> permet à Node.js d&#39;exécuter des fichiers TypeScript. Par défaut, Node.js exécutera uniquement les fichiers qui ne contiennent pas de fonctionnalités TypeScript nécessitant une transformation, telles que les enums ou les namespaces. Node.js remplacera les annotations de type en ligne par des espaces blancs, et aucune vérification de type n&#39;est effectuée. Pour activer la transformation de telles fonctionnalités, utilisez le flag <a href="/fr/nodejs/api/cli#experimental-transform-types"><code>--experimental-transform-types</code></a>. Les fonctionnalités TypeScript qui dépendent des paramètres dans <code>tsconfig.json</code>, tels que les chemins ou la conversion d&#39;une syntaxe JavaScript plus récente en normes plus anciennes, ne sont intentionnellement pas prises en charge. Pour obtenir un support complet de TypeScript, consultez <a href="/fr/nodejs/api/typescript#full-typescript-support">Support complet de TypeScript</a>.</p><p>La fonctionnalité de suppression de types est conçue pour être légère. En ne prenant intentionnellement pas en charge les syntaxes qui nécessitent la génération de code JavaScript, et en remplaçant les types en ligne par des espaces blancs, Node.js peut exécuter du code TypeScript sans avoir besoin de source maps.</p><p>La suppression de types fonctionne avec la plupart des versions de TypeScript, mais nous recommandons la version\xA05.7 ou plus récente avec les paramètres <code>tsconfig.json</code> suivants\xA0:</p><div class="language-json line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;compilerOptions&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">     &quot;target&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;esnext&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">     &quot;module&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;nodenext&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">     &quot;allowImportingTsExtensions&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">     &quot;rewriteRelativeImportExtensions&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">     &quot;verbatimModuleSyntax&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="determining-module-system" tabindex="-1">Détermination du système de modules <a class="header-anchor" href="#determining-module-system" aria-label="Permalink to “Détermination du système de modules”">​</a></h3><p>Node.js prend en charge à la fois la syntaxe <a href="/fr/nodejs/api/modules">CommonJS</a> et <a href="/fr/nodejs/api/esm">ES Modules</a> dans les fichiers TypeScript. Node.js ne convertira pas d&#39;un système de modules à un autre ; si vous souhaitez que votre code s&#39;exécute en tant que module ES, vous devez utiliser la syntaxe <code>import</code> et <code>export</code>, et si vous souhaitez que votre code s&#39;exécute en tant que CommonJS, vous devez utiliser <code>require</code> et <code>module.exports</code>.</p><ul><li>Les fichiers <code>.ts</code> auront leur système de modules déterminé <a href="/fr/nodejs/api/packages#determining-module-system">de la même manière que les fichiers <code>.js</code>.</a> Pour utiliser la syntaxe <code>import</code> et <code>export</code>, ajoutez <code>&quot;type&quot;: &quot;module&quot;</code> au <code>package.json</code> parent le plus proche.</li><li>Les fichiers <code>.mts</code> seront toujours exécutés en tant que modules ES, de manière similaire aux fichiers <code>.mjs</code>.</li><li>Les fichiers <code>.cts</code> seront toujours exécutés en tant que modules CommonJS, de manière similaire aux fichiers <code>.cjs</code>.</li><li>Les fichiers <code>.tsx</code> ne sont pas pris en charge.</li></ul><p>Comme dans les fichiers JavaScript, <a href="/fr/nodejs/api/esm#mandatory-file-extensions">les extensions de fichiers sont obligatoires</a> dans les instructions <code>import</code> et les expressions <code>import()</code> : <code>import &#39;./file.ts&#39;</code>, pas <code>import &#39;./file&#39;</code>. En raison de la rétrocompatibilité, les extensions de fichiers sont également obligatoires dans les appels <code>require()</code> : <code>require(&#39;./file.ts&#39;)</code>, pas <code>require(&#39;./file&#39;)</code>, de la même manière que l&#39;extension <code>.cjs</code> est obligatoire dans les appels <code>require</code> dans les fichiers CommonJS.</p><p>L&#39;option <code>tsconfig.json</code> <code>allowImportingTsExtensions</code> permettra au compilateur TypeScript <code>tsc</code> de vérifier le typage des fichiers avec des spécificateurs <code>import</code> qui incluent l&#39;extension <code>.ts</code>.</p><h3 id="typescript-features" tabindex="-1">Fonctionnalités TypeScript <a class="header-anchor" href="#typescript-features" aria-label="Permalink to “Fonctionnalités TypeScript”">​</a></h3><p>Étant donné que Node.js supprime uniquement les types en ligne, toute fonctionnalité TypeScript impliquant le <em>remplacement</em> de la syntaxe TypeScript par une nouvelle syntaxe JavaScript entraînera une erreur, à moins que l&#39;indicateur <a href="/fr/nodejs/api/cli#experimental-transform-types"><code>--experimental-transform-types</code></a> ne soit passé.</p><p>Les fonctionnalités les plus importantes qui nécessitent une transformation sont :</p><ul><li><code>Enum</code></li><li><code>namespaces</code></li><li><code>legacy module</code></li><li>propriétés des paramètres</li></ul><p>Étant donné que les décorateurs sont actuellement une <a href="https://github.com/tc39/proposal-decorators" target="_blank" rel="noreferrer">proposition TC39 de l&#39;étape 3</a> et seront bientôt pris en charge par le moteur JavaScript, ils ne sont pas transformés et entraîneront une erreur d&#39;analyse. Il s&#39;agit d&#39;une limitation temporaire qui sera résolue à l&#39;avenir.</p><p>De plus, Node.js ne lit pas les fichiers <code>tsconfig.json</code> et ne prend pas en charge les fonctionnalités qui dépendent des paramètres de <code>tsconfig.json</code>, telles que les chemins ou la conversion d&#39;une syntaxe JavaScript plus récente en normes plus anciennes.</p><h3 id="importing-types-without-type-keyword" tabindex="-1">Importer des types sans le mot-clé <code>type</code> <a class="header-anchor" href="#importing-types-without-type-keyword" aria-label="Permalink to “Importer des types sans le mot-clé type”">​</a></h3><p>En raison de la nature de la suppression des types, le mot-clé <code>type</code> est nécessaire pour supprimer correctement les importations de types. Sans le mot-clé <code>type</code>, Node.js traitera l&#39;importation comme une importation de valeur, ce qui entraînera une erreur d&#39;exécution. L&#39;option <a href="https://www.typescriptlang.org/tsconfig/#verbatimModuleSyntax" target="_blank" rel="noreferrer"><code>verbatimModuleSyntax</code></a> de tsconfig peut être utilisée pour correspondre à ce comportement.</p><p>Cet exemple fonctionnera correctement\xA0:</p><div class="language-ts line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> type</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { Type1, Type2 } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;./module.ts&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { fn, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">type</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> FnParams } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;./fn.ts&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>Ceci entraînera une erreur d&#39;exécution\xA0:</p><div class="language-ts line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { Type1, Type2 } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;./module.ts&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { fn, FnParams } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;./fn.ts&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="non-file-forms-of-input" tabindex="-1">Formes d&#39;entrée autres que les fichiers <a class="header-anchor" href="#non-file-forms-of-input" aria-label="Permalink to “Formes d&#39;entrée autres que les fichiers”">​</a></h3><p>La suppression de type peut être activée pour <code>--eval</code>. Le système de modules sera déterminé par <code>--input-type</code>, comme pour JavaScript.</p><p>La syntaxe TypeScript n&#39;est pas prise en charge dans le REPL, l&#39;entrée STDIN, <code>--print</code>, <code>--check</code> et <code>inspect</code>.</p><h3 id="source-maps" tabindex="-1">Cartes de sources <a class="header-anchor" href="#source-maps" aria-label="Permalink to “Cartes de sources”">​</a></h3><p>Étant donné que les types en ligne sont remplacés par des espaces blancs, les cartes de sources ne sont pas nécessaires pour des numéros de ligne corrects dans les traces de pile\xA0; et Node.js ne les génère pas. Lorsque <a href="/fr/nodejs/api/cli#experimental-transform-types"><code>--experimental-transform-types</code></a> est activé, les cartes de sources sont activées par défaut.</p><h3 id="type-stripping-in-dependencies" tabindex="-1">Suppression de type dans les dépendances <a class="header-anchor" href="#type-stripping-in-dependencies" aria-label="Permalink to “Suppression de type dans les dépendances”">​</a></h3><p>Afin de décourager les auteurs de packages de publier des packages écrits en TypeScript, Node.js refusera par défaut de traiter les fichiers TypeScript dans les dossiers situés sous un chemin <code>node_modules</code>.</p><h3 id="paths-aliases" tabindex="-1">Alias de chemins <a class="header-anchor" href="#paths-aliases" aria-label="Permalink to “Alias de chemins”">​</a></h3><p>Les &quot;chemins&quot; <a href="https://www.typescriptlang.org/tsconfig/#paths" target="_blank" rel="noreferrer"><code>tsconfig</code></a> ne seront pas transformés et produiront donc une erreur. La fonctionnalité la plus proche disponible est <a href="/fr/nodejs/api/packages#subpath-imports">les importations de sous-chemins</a> avec la limitation qu&#39;elles doivent commencer par <code>#</code>.</p>`,40)])}var s=e(a,[[`render`,o]]);export{i as __pageData,s as default};