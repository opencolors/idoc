import{__plugin_vue_export_helper_default as e,createElementBlock as t,createStaticVNode as n,openBlock as r}from"./chunks/plugin-vue_export-helper.Bts1mPc7.js";const i=JSON.parse(`{"title":"Documentación de Node.js - Módulos","description":"Explora la documentación de Node.js sobre módulos, incluyendo CommonJS, módulos ES y cómo gestionar dependencias y resolución de módulos.","frontmatter":{"title":"Documentación de Node.js - Módulos","description":"Explora la documentación de Node.js sobre módulos, incluyendo CommonJS, módulos ES y cómo gestionar dependencias y resolución de módulos.","head":[["meta",{"name":"og:title","content":"Documentación de Node.js - Módulos | Node.js - iDoc.dev"}],["meta",{"name":"og:description","content":"Explora la documentación de Node.js sobre módulos, incluyendo CommonJS, módulos ES y cómo gestionar dependencias y resolución de módulos."}],["meta",{"name":"twitter:title","content":"Documentación de Node.js - Módulos | Node.js - iDoc.dev"}],["meta",{"name":"twitter:description","content":"Explora la documentación de Node.js sobre módulos, incluyendo CommonJS, módulos ES y cómo gestionar dependencias y resolución de módulos."}],["link",{"rel":"canonical","href":"https://idoc.dev/es/nodejs/api/modules"}],["meta",{"property":"og:url","content":"https://idoc.dev/es/nodejs/api/modules"}]]},"headers":[],"relativePath":"es/nodejs/api/modules.md","filePath":"es/nodejs/api/modules.md","lastUpdated":null}`),a={name:`es/nodejs/api/modules.md`};function o(e,i,a,o,s,c){return r(),t(`div`,null,i[0]||=[n(`<h1 id="modules-commonjs-modules" tabindex="-1">Módulos: Módulos CommonJS <a class="header-anchor" href="#modules-commonjs-modules" aria-label="Permalink to “Módulos: Módulos CommonJS”">​</a></h1><div class="tip custom-block"><p class="custom-block-title">[Estable: 2 - Estable]</p><p><a href="/es/nodejs/api/documentation#stability-index">Estable: 2</a> <a href="/es/nodejs/api/documentation#stability-index">Estabilidad: 2</a> - Estable</p></div><p>Los módulos CommonJS son la forma original de empaquetar código JavaScript para Node.js. Node.js también es compatible con el estándar de <a href="/es/nodejs/api/esm">módulos ECMAScript</a> utilizado por los navegadores y otros entornos de ejecución de JavaScript.</p><p>En Node.js, cada archivo se trata como un módulo separado. Por ejemplo, considera un archivo llamado <code>foo.js</code>:</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> circle</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;./circle.js&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">\`El área de un círculo de radio 4 es \${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">circle</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">area</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">4</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">)</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}\`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>En la primera línea, <code>foo.js</code> carga el módulo <code>circle.js</code> que está en el mismo directorio que <code>foo.js</code>.</p><p>Aquí están los contenidos de <code>circle.js</code>:</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">PI</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Math;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">exports</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">area</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">r</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> PI</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> *</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> r </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">**</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">exports</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">circumference</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">r</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> *</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> PI</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> *</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> r;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>El módulo <code>circle.js</code> ha exportado las funciones <code>area()</code> y <code>circumference()</code>. Las funciones y los objetos se añaden a la raíz de un módulo especificando propiedades adicionales en el objeto especial <code>exports</code>.</p><p>Las variables locales al módulo serán privadas, porque el módulo está envuelto en una función por Node.js (véase <a href="/es/nodejs/api/modules#the-module-wrapper">envoltura de módulo</a>). En este ejemplo, la variable <code>PI</code> es privada para <code>circle.js</code>.</p><p>La propiedad <code>module.exports</code> puede asignarse a un nuevo valor (como una función u objeto).</p><p>En el siguiente código, <code>bar.js</code> utiliza el módulo <code>square</code>, que exporta una clase Square:</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> Square</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;./square.js&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> mySquare</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Square</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">\`El área de miSquare es \${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">mySquare</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">area</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">()</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}\`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>El módulo <code>square</code> se define en <code>square.js</code>:</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Asignar a exports no modificará el módulo, se debe usar module.exports</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">module</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">exports</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Square</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  constructor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">width</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.width </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> width;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  area</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.width </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">**</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>El sistema de módulos CommonJS está implementado en el <a href="/es/nodejs/api/module"><code>module</code> módulo central</a>.</p><h2 id="enabling" tabindex="-1">Habilitación <a class="header-anchor" href="#enabling" aria-label="Permalink to “Habilitación”">​</a></h2><p>Node.js tiene dos sistemas de módulos: módulos CommonJS y <a href="/es/nodejs/api/esm">módulos ECMAScript</a>.</p><p>Por defecto, Node.js tratará lo siguiente como módulos CommonJS:</p><ul><li>Archivos con una extensión <code>.cjs</code>;</li><li>Archivos con una extensión <code>.js</code> cuando el archivo <code>package.json</code> padre más cercano contiene un campo de nivel superior <a href="/es/nodejs/api/packages#type"><code>&quot;type&quot;</code></a> con un valor de <code>&quot;commonjs&quot;</code>.</li><li>Archivos con una extensión <code>.js</code> o sin extensión, cuando el archivo <code>package.json</code> padre más cercano no contiene un campo de nivel superior <a href="/es/nodejs/api/packages#type"><code>&quot;type&quot;</code></a> o no hay <code>package.json</code> en ninguna carpeta padre; a menos que el archivo contenga sintaxis que produzca errores a menos que se evalúe como un módulo ES. Los autores del paquete deben incluir el campo <a href="/es/nodejs/api/packages#type"><code>&quot;type&quot;</code></a>, incluso en paquetes donde todas las fuentes son CommonJS. Ser explícito sobre el <code>type</code> del paquete facilitará que las herramientas de construcción y los cargadores determinen cómo se deben interpretar los archivos del paquete.</li><li>Archivos con una extensión que no sea <code>.mjs</code>, <code>.cjs</code>, <code>.json</code>, <code>.node</code> o <code>.js</code> (cuando el archivo <code>package.json</code> padre más cercano contiene un campo de nivel superior <a href="/es/nodejs/api/packages#type"><code>&quot;type&quot;</code></a> con un valor de <code>&quot;module&quot;</code>, esos archivos se reconocerán como módulos CommonJS solo si se incluyen a través de <code>require()</code>, no cuando se utilizan como el punto de entrada de la línea de comandos del programa).</li></ul><p>Consulta <a href="/es/nodejs/api/packages#determining-module-system">Determinación del sistema de módulos</a> para obtener más detalles.</p><p>Llamar a <code>require()</code> siempre usa el cargador de módulos CommonJS. Llamar a <code>import()</code> siempre usa el cargador de módulos ECMAScript.</p><h2 id="accessing-the-main-module" tabindex="-1">Acceder al módulo principal <a class="header-anchor" href="#accessing-the-main-module" aria-label="Permalink to “Acceder al módulo principal”">​</a></h2><p>Cuando un archivo se ejecuta directamente desde Node.js, <code>require.main</code> se establece a su <code>module</code>. Eso significa que es posible determinar si un archivo ha sido ejecutado directamente comprobando <code>require.main === module</code>.</p><p>Para un archivo <code>foo.js</code>, esto será <code>true</code> si se ejecuta a través de <code>node foo.js</code>, pero <code>false</code> si se ejecuta mediante <code>require(&#39;./foo&#39;)</code>.</p><p>Cuando el punto de entrada no es un módulo CommonJS, <code>require.main</code> es <code>undefined</code>, y el módulo principal está fuera de alcance.</p><h2 id="package-manager-tips" tabindex="-1">Consejos para administradores de paquetes <a class="header-anchor" href="#package-manager-tips" aria-label="Permalink to “Consejos para administradores de paquetes”">​</a></h2><p>La semántica de la función <code>require()</code> de Node.js fue diseñada para ser lo suficientemente general como para admitir estructuras de directorio razonables. Los programas de administración de paquetes como <code>dpkg</code>, <code>rpm</code> y <code>npm</code> esperemos que encuentren posible construir paquetes nativos desde módulos Node.js sin modificación.</p><p>A continuación, damos una estructura de directorio sugerida que podría funcionar:</p><p>Digamos que queremos que la carpeta en <code>/usr/lib/node/\\&lt;algun-paquete\\&gt;/\\&lt;alguna-version\\&gt;</code> contenga el contenido de una versión específica de un paquete.</p><p>Los paquetes pueden depender unos de otros. Para instalar el paquete <code>foo</code>, puede ser necesario instalar una versión específica del paquete <code>bar</code>. El paquete <code>bar</code> puede tener dependencias propias, y en algunos casos, estas pueden incluso chocar o formar dependencias cíclicas.</p><p>Debido a que Node.js busca el <code>realpath</code> de cualquier módulo que carga (es decir, resuelve enlaces simbólicos) y luego <a href="/es/nodejs/api/modules#loading-from-node-modules-folders">busca sus dependencias en las carpetas <code>node_modules</code></a>, esta situación se puede resolver con la siguiente arquitectura:</p><ul><li><code>/usr/lib/node/foo/1.2.3/</code>: Contenido del paquete <code>foo</code>, versión 1.2.3.</li><li><code>/usr/lib/node/bar/4.3.2/</code>: Contenido del paquete <code>bar</code> del que depende <code>foo</code>.</li><li><code>/usr/lib/node/foo/1.2.3/node_modules/bar</code>: Enlace simbólico a <code>/usr/lib/node/bar/4.3.2/</code>.</li><li><code>/usr/lib/node/bar/4.3.2/node_modules/*</code>: Enlaces simbólicos a los paquetes de los que depende <code>bar</code>.</li></ul><p>Por lo tanto, incluso si se encuentra un ciclo, o si hay conflictos de dependencia, cada módulo podrá obtener una versión de su dependencia que pueda usar.</p><p>Cuando el código en el paquete <code>foo</code> hace <code>require(&#39;bar&#39;)</code>, obtendrá la versión que está enlazada simbólicamente en <code>/usr/lib/node/foo/1.2.3/node_modules/bar</code>. Luego, cuando el código en el paquete <code>bar</code> llama a <code>require(&#39;quux&#39;)</code>, obtendrá la versión que está enlazada simbólicamente en <code>/usr/lib/node/bar/4.3.2/node_modules/quux</code>.</p><p>Además, para hacer que el proceso de búsqueda de módulos sea aún más óptimo, en lugar de colocar los paquetes directamente en <code>/usr/lib/node</code>, podríamos colocarlos en <code>/usr/lib/node_modules/\\&lt;nombre\\&gt;/\\&lt;version\\&gt;</code>. Entonces Node.js no se molestará en buscar dependencias faltantes en <code>/usr/node_modules</code> o <code>/node_modules</code>.</p><p>Para que los módulos estén disponibles para el REPL de Node.js, podría ser útil también agregar la carpeta <code>/usr/lib/node_modules</code> a la variable de entorno <code>$NODE_PATH</code>. Dado que las búsquedas de módulos usando carpetas <code>node_modules</code> son todas relativas, y basadas en la ruta real de los archivos que hacen las llamadas a <code>require()</code>, los paquetes en sí mismos pueden estar en cualquier lugar.</p><h2 id="loading-ecmascript-modules-using-require" tabindex="-1">Cargando módulos ECMAScript usando <code>require()</code> <a class="header-anchor" href="#loading-ecmascript-modules-using-require" aria-label="Permalink to “Cargando módulos ECMAScript usando require()”">​</a></h2><div class="info custom-block"><p class="custom-block-title">[Historial]</p><table tabindex="0"><thead><tr><th>Versión</th><th>Cambios</th></tr></thead><tbody><tr><td>v23.5.0</td><td>Esta característica ya no emite una advertencia experimental por defecto, aunque la advertencia aún se puede emitir con --trace-require-module.</td></tr><tr><td>v23.0.0</td><td>Esta característica ya no está detrás del indicador de la CLI <code>--experimental-require-module</code>.</td></tr><tr><td>v23.0.0</td><td>Soporte para la interoperabilidad de exportación <code>&#39;module.exports&#39;</code> en <code>require(esm)</code>.</td></tr><tr><td>v22.0.0, v20.17.0</td><td>Añadido en: v22.0.0, v20.17.0</td></tr></tbody></table></div><div class="warning custom-block"><p class="custom-block-title">[Estable: 1 - Experimental]</p><p><a href="/es/nodejs/api/documentation#stability-index">Estable: 1</a> <a href="/es/nodejs/api/documentation#stability-index">Estabilidad: 1</a>.2 - Candidato a lanzamiento</p></div><p>La extensión <code>.mjs</code> está reservada para <a href="/es/nodejs/api/esm">Módulos ECMAScript</a>. Consulte la sección <a href="/es/nodejs/api/packages#determining-module-system">Determinación del sistema de módulos</a> para obtener más información sobre qué archivos se analizan como módulos ECMAScript.</p><p><code>require()</code> solo admite la carga de módulos ECMAScript que cumplan con los siguientes requisitos:</p><ul><li>El módulo es totalmente sincrónico (no contiene <code>await</code> de nivel superior); y</li><li>Se cumple una de estas condiciones:</li></ul><p>Si el módulo ES que se está cargando cumple con los requisitos, <code>require()</code> puede cargarlo y devolver el objeto de espacio de nombres del módulo. En este caso, es similar a <code>import()</code> dinámico, pero se ejecuta sincrónicamente y devuelve el objeto de espacio de nombres directamente.</p><p>Con los siguientes módulos ES:</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// distance.mjs</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> distance</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">a</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">b</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) { </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (b.x </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> a.x) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">**</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (b.y </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> a.y) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">**</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; }</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// point.mjs</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> default</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Point</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  constructor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">x</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">y</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.x </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> x; </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.y </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> y; }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>Un módulo CommonJS puede cargarlos con <code>require()</code>:</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> distance</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;./distance.mjs&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(distance);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// [Module: null prototype] {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//   distance: [Function: distance]</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> point</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;./point.mjs&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(point);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// [Module: null prototype] {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//   default: [class Point],</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//   __esModule: true,</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// }</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>Para la interoperabilidad con las herramientas existentes que convierten los módulos ES en CommonJS, que luego podrían cargar módulos ES reales a través de <code>require()</code>, el espacio de nombres devuelto contendría una propiedad <code>__esModule: true</code> si tiene una exportación <code>default</code> para que el código de consumo generado por las herramientas pueda reconocer las exportaciones predeterminadas en los módulos ES reales. Si el espacio de nombres ya define <code>__esModule</code>, esto no se agregará. Esta propiedad es experimental y puede cambiar en el futuro. Solo debe ser utilizada por herramientas que convierten módulos ES en módulos CommonJS, siguiendo las convenciones del ecosistema existentes. El código creado directamente en CommonJS debe evitar depender de él.</p><p>Cuando un módulo ES contiene tanto exportaciones con nombre como una exportación predeterminada, el resultado devuelto por <code>require()</code> es el objeto de espacio de nombres del módulo, que coloca la exportación predeterminada en la propiedad <code>.default</code>, similar a los resultados devueltos por <code>import()</code>. Para personalizar lo que debe devolver <code>require(esm)</code> directamente, el módulo ES puede exportar el valor deseado utilizando el nombre de cadena <code>&quot;module.exports&quot;</code>.</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// point.mjs</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> default</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Point</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  constructor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">x</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">y</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.x </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> x; </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.y </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> y; }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// \`distance\` se pierde para los consumidores de CommonJS de este módulo, a menos que se</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// agregue a \`Point\` como una propiedad estática.</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> distance</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">a</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">b</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) { </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (b.x </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> a.x) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">**</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (b.y </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> a.y) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">**</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { Point </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">as</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;module.exports&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> Point</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;./point.mjs&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Point); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// [class Point]</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Las exportaciones con nombre se pierden cuando se usa &#39;module.exports&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">distance</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;./point.mjs&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(distance); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// undefined</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>Observe en el ejemplo anterior que cuando se utiliza el nombre de exportación <code>module.exports</code>, las exportaciones con nombre se perderán para los consumidores de CommonJS. Para permitir que los consumidores de CommonJS sigan accediendo a las exportaciones con nombre, el módulo puede asegurarse de que la exportación predeterminada sea un objeto con las exportaciones con nombre adjuntas como propiedades. Por ejemplo, con el ejemplo anterior, <code>distance</code> se puede adjuntar a la exportación predeterminada, la clase <code>Point</code>, como un método estático.</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> distance</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">a</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">b</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) { </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (b.x </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> a.x) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">**</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (b.y </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> a.y) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">**</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> default</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Point</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  constructor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">x</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">y</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.x </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> x; </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.y </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> y; }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  static</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;"> distance</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> distance;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { Point </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">as</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;module.exports&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> Point</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;./point.mjs&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Point); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// [class Point]</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">distance</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;./point.mjs&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(distance); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// [Function: distance]</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>Si el módulo que se está <code>require()</code>&#39;d contiene <code>await</code> de nivel superior, o el gráfico de módulos que <code>import</code> contiene <code>await</code> de nivel superior, se lanzará <a href="/es/nodejs/api/errors#err-require-async-module"><code>ERR_REQUIRE_ASYNC_MODULE</code></a>. En este caso, los usuarios deben cargar el módulo asíncrono utilizando <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/import" target="_blank" rel="noreferrer"><code>import()</code></a>.</p><p>Si <code>--experimental-print-required-tla</code> está habilitado, en lugar de lanzar <code>ERR_REQUIRE_ASYNC_MODULE</code> antes de la evaluación, Node.js evaluará el módulo, intentará localizar los awaits de nivel superior e imprimirá su ubicación para ayudar a los usuarios a corregirlos.</p><p>El soporte para la carga de módulos ES utilizando <code>require()</code> es actualmente experimental y se puede desactivar utilizando <code>--no-experimental-require-module</code>. Para imprimir dónde se utiliza esta característica, utilice <a href="/es/nodejs/api/cli#trace-require-modulemode"><code>--trace-require-module</code></a>.</p><p>Esta característica se puede detectar comprobando si <a href="/es/nodejs/api/process#processfeaturesrequire-module"><code>process.features.require_module</code></a> es <code>true</code>.</p><h2 id="all-together" tabindex="-1">En conjunto <a class="header-anchor" href="#all-together" aria-label="Permalink to “En conjunto”">​</a></h2><p>Para obtener el nombre de archivo exacto que se cargará cuando se llame a <code>require()</code>, utilice la función <code>require.resolve()</code>.</p><p>Reuniendo todo lo anterior, aquí está el algoritmo de alto nivel en pseudocódigo de lo que hace <code>require()</code>:</p><div class="language-text line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">text</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>require(X) desde el módulo en la ruta Y</span></span>
<span class="line"><span>1. Si X es un módulo central,</span></span>
<span class="line"><span>   a. devuelve el módulo central</span></span>
<span class="line"><span>   b. DETENER</span></span>
<span class="line"><span>2. Si X comienza con &#39;/&#39;</span></span>
<span class="line"><span>   a. establece Y como la raíz del sistema de archivos</span></span>
<span class="line"><span>3. Si X comienza con &#39;./&#39; o &#39;/&#39; o &#39;../&#39;</span></span>
<span class="line"><span>   a. LOAD_AS_FILE(Y + X)</span></span>
<span class="line"><span>   b. LOAD_AS_DIRECTORY(Y + X)</span></span>
<span class="line"><span>   c. LANZA &quot;no encontrado&quot;</span></span>
<span class="line"><span>4. Si X comienza con &#39;#&#39;</span></span>
<span class="line"><span>   a. LOAD_PACKAGE_IMPORTS(X, dirname(Y))</span></span>
<span class="line"><span>5. LOAD_PACKAGE_SELF(X, dirname(Y))</span></span>
<span class="line"><span>6. LOAD_NODE_MODULES(X, dirname(Y))</span></span>
<span class="line"><span>7. LANZA &quot;no encontrado&quot;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>MAYBE_DETECT_AND_LOAD(X)</span></span>
<span class="line"><span>1. Si X se analiza como un módulo CommonJS, carga X como un módulo CommonJS. DETENER.</span></span>
<span class="line"><span>2. De lo contrario, si el código fuente de X se puede analizar como un módulo ECMAScript usando</span></span>
<span class="line"><span>  &lt;a href=&quot;esm.md#resolver-algorithm-specification&quot;&gt;DETECT_MODULE_SYNTAX definido en</span></span>
<span class="line"><span>  el resolvedor ESM&lt;/a&gt;,</span></span>
<span class="line"><span>  a. Carga X como un módulo ECMAScript. DETENER.</span></span>
<span class="line"><span>3. LANZA el SyntaxError al intentar analizar X como CommonJS en 1. DETENER.</span></span>
<span class="line"><span></span></span>
<span class="line"><span>LOAD_AS_FILE(X)</span></span>
<span class="line"><span>1. Si X es un archivo, carga X como su formato de extensión de archivo. DETENER</span></span>
<span class="line"><span>2. Si X.js es un archivo,</span></span>
<span class="line"><span>    a. Encuentra el ámbito de paquete SCOPE más cercano a X.</span></span>
<span class="line"><span>    b. Si no se encuentra ningún ámbito</span></span>
<span class="line"><span>      1. MAYBE_DETECT_AND_LOAD(X.js)</span></span>
<span class="line"><span>    c. Si el SCOPE/package.json contiene el campo &quot;type&quot;,</span></span>
<span class="line"><span>      1. Si el campo &quot;type&quot; es &quot;module&quot;, carga X.js como un módulo ECMAScript. DETENER.</span></span>
<span class="line"><span>      2. Si el campo &quot;type&quot; es &quot;commonjs&quot;, carga X.js como un módulo CommonJS. DETENER.</span></span>
<span class="line"><span>    d. MAYBE_DETECT_AND_LOAD(X.js)</span></span>
<span class="line"><span>3. Si X.json es un archivo, carga X.json a un objeto JavaScript. DETENER</span></span>
<span class="line"><span>4. Si X.node es un archivo, carga X.node como complemento binario. DETENER</span></span>
<span class="line"><span></span></span>
<span class="line"><span>LOAD_INDEX(X)</span></span>
<span class="line"><span>1. Si X/index.js es un archivo</span></span>
<span class="line"><span>    a. Encuentra el ámbito de paquete SCOPE más cercano a X.</span></span>
<span class="line"><span>    b. Si no se encuentra ningún ámbito, carga X/index.js como un módulo CommonJS. DETENER.</span></span>
<span class="line"><span>    c. Si el SCOPE/package.json contiene el campo &quot;type&quot;,</span></span>
<span class="line"><span>      1. Si el campo &quot;type&quot; es &quot;module&quot;, carga X/index.js como un módulo ECMAScript. DETENER.</span></span>
<span class="line"><span>      2. De lo contrario, carga X/index.js como un módulo CommonJS. DETENER.</span></span>
<span class="line"><span>2. Si X/index.json es un archivo, analiza X/index.json en un objeto JavaScript. DETENER</span></span>
<span class="line"><span>3. Si X/index.node es un archivo, carga X/index.node como complemento binario. DETENER</span></span>
<span class="line"><span></span></span>
<span class="line"><span>LOAD_AS_DIRECTORY(X)</span></span>
<span class="line"><span>1. Si X/package.json es un archivo,</span></span>
<span class="line"><span>   a. Analiza X/package.json y busca el campo &quot;main&quot;.</span></span>
<span class="line"><span>   b. Si &quot;main&quot; es un valor falso, VE A 2.</span></span>
<span class="line"><span>   c. sea M = X + (campo principal json)</span></span>
<span class="line"><span>   d. LOAD_AS_FILE(M)</span></span>
<span class="line"><span>   e. LOAD_INDEX(M)</span></span>
<span class="line"><span>   f. LOAD_INDEX(X) OBsoleto</span></span>
<span class="line"><span>   g. LANZA &quot;no encontrado&quot;</span></span>
<span class="line"><span>2. LOAD_INDEX(X)</span></span>
<span class="line"><span></span></span>
<span class="line"><span>LOAD_NODE_MODULES(X, START)</span></span>
<span class="line"><span>1. sea DIRS = NODE_MODULES_PATHS(START)</span></span>
<span class="line"><span>2. para cada DIR en DIRS:</span></span>
<span class="line"><span>   a. LOAD_PACKAGE_EXPORTS(X, DIR)</span></span>
<span class="line"><span>   b. LOAD_AS_FILE(DIR/X)</span></span>
<span class="line"><span>   c. LOAD_AS_DIRECTORY(DIR/X)</span></span>
<span class="line"><span></span></span>
<span class="line"><span>NODE_MODULES_PATHS(START)</span></span>
<span class="line"><span>1. sea PARTS = ruta split(START)</span></span>
<span class="line"><span>2. sea I = recuento de PARTS - 1</span></span>
<span class="line"><span>3. sea DIRS = []</span></span>
<span class="line"><span>4. mientras I &gt;= 0,</span></span>
<span class="line"><span>   a. si PARTS[I] = &quot;node_modules&quot;, VE A d.</span></span>
<span class="line"><span>   b. DIR = ruta join(PARTS[0 .. I] + &quot;node_modules&quot;)</span></span>
<span class="line"><span>   c. DIRS = DIR + DIRS</span></span>
<span class="line"><span>   d. sea I = I - 1</span></span>
<span class="line"><span>5. devuelve DIRS + GLOBAL_FOLDERS</span></span>
<span class="line"><span></span></span>
<span class="line"><span>LOAD_PACKAGE_IMPORTS(X, DIR)</span></span>
<span class="line"><span>1. Encuentra el ámbito de paquete SCOPE más cercano a DIR.</span></span>
<span class="line"><span>2. Si no se encuentra ningún ámbito, regresa.</span></span>
<span class="line"><span>3. Si el &quot;imports&quot; de SCOPE/package.json es nulo o indefinido, regresa.</span></span>
<span class="line"><span>4. Si \`--experimental-require-module\` está habilitado</span></span>
<span class="line"><span>  a. sea CONDITIONS = [&quot;node&quot;, &quot;require&quot;, &quot;module-sync&quot;]</span></span>
<span class="line"><span>  b. De lo contrario, sea CONDITIONS = [&quot;node&quot;, &quot;require&quot;]</span></span>
<span class="line"><span>5. sea MATCH = PACKAGE_IMPORTS_RESOLVE(X, pathToFileURL(SCOPE),</span></span>
<span class="line"><span>  CONDITIONS) &lt;a href=&quot;esm.md#resolver-algorithm-specification&quot;&gt;definido en el resolvedor ESM&lt;/a&gt;.</span></span>
<span class="line"><span>6. RESOLVE_ESM_MATCH(MATCH).</span></span>
<span class="line"><span></span></span>
<span class="line"><span>LOAD_PACKAGE_EXPORTS(X, DIR)</span></span>
<span class="line"><span>1. Intenta interpretar X como una combinación de NAME y SUBPATH donde el nombre</span></span>
<span class="line"><span>   puede tener un prefijo @scope/ y la subruta comienza con una barra inclinada (\`/\`).</span></span>
<span class="line"><span>2. Si X no coincide con este patrón o DIR/NAME/package.json no es un archivo,</span></span>
<span class="line"><span>   regresa.</span></span>
<span class="line"><span>3. Analiza DIR/NAME/package.json y busca el campo &quot;exports&quot;.</span></span>
<span class="line"><span>4. Si &quot;exports&quot; es nulo o indefinido, regresa.</span></span>
<span class="line"><span>5. Si \`--experimental-require-module\` está habilitado</span></span>
<span class="line"><span>  a. sea CONDITIONS = [&quot;node&quot;, &quot;require&quot;, &quot;module-sync&quot;]</span></span>
<span class="line"><span>  b. De lo contrario, sea CONDITIONS = [&quot;node&quot;, &quot;require&quot;]</span></span>
<span class="line"><span>6. sea MATCH = PACKAGE_EXPORTS_RESOLVE(pathToFileURL(DIR/NAME), &quot;.&quot; + SUBPATH,</span></span>
<span class="line"><span>   \`package.json\` &quot;exports&quot;, CONDITIONS) &lt;a href=&quot;esm.md#resolver-algorithm-specification&quot;&gt;definido en el resolvedor ESM&lt;/a&gt;.</span></span>
<span class="line"><span>7. RESOLVE_ESM_MATCH(MATCH)</span></span>
<span class="line"><span></span></span>
<span class="line"><span>LOAD_PACKAGE_SELF(X, DIR)</span></span>
<span class="line"><span>1. Encuentra el ámbito de paquete SCOPE más cercano a DIR.</span></span>
<span class="line"><span>2. Si no se encuentra ningún ámbito, regresa.</span></span>
<span class="line"><span>3. Si el &quot;exports&quot; de SCOPE/package.json es nulo o indefinido, regresa.</span></span>
<span class="line"><span>4. Si el &quot;name&quot; de SCOPE/package.json no es el primer segmento de X, regresa.</span></span>
<span class="line"><span>5. sea MATCH = PACKAGE_EXPORTS_RESOLVE(pathToFileURL(SCOPE),</span></span>
<span class="line"><span>   &quot;.&quot; + X.slice(&quot;name&quot;.length), \`package.json\` &quot;exports&quot;, [&quot;node&quot;, &quot;require&quot;])</span></span>
<span class="line"><span>   &lt;a href=&quot;esm.md#resolver-algorithm-specification&quot;&gt;definido en el resolvedor ESM&lt;/a&gt;.</span></span>
<span class="line"><span>6. RESOLVE_ESM_MATCH(MATCH)</span></span>
<span class="line"><span></span></span>
<span class="line"><span>RESOLVE_ESM_MATCH(MATCH)</span></span>
<span class="line"><span>1. sea RESOLVED_PATH = fileURLToPath(MATCH)</span></span>
<span class="line"><span>2. Si el archivo en RESOLVED_PATH existe, carga RESOLVED_PATH como su extensión</span></span>
<span class="line"><span>   formato. DETENER</span></span>
<span class="line"><span>3. LANZA &quot;no encontrado&quot;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br><span class="line-number">115</span><br><span class="line-number">116</span><br></div></div><h2 id="caching" tabindex="-1">Almacenamiento en caché <a class="header-anchor" href="#caching" aria-label="Permalink to “Almacenamiento en caché”">​</a></h2><p>Los módulos se almacenan en caché después de cargarse por primera vez. Esto significa (entre otras cosas) que cada llamada a <code>require(&#39;foo&#39;)</code> obtendrá exactamente el mismo objeto, si se resolviera al mismo archivo.</p><p>Siempre que no se modifique <code>require.cache</code>, varias llamadas a <code>require(&#39;foo&#39;)</code> no harán que el código del módulo se ejecute varias veces. Esta es una característica importante. Con ella, se pueden devolver objetos &quot;parcialmente hechos&quot;, lo que permite cargar dependencias transitivas incluso cuando causarían ciclos.</p><p>Para que un módulo ejecute código varias veces, exporte una función y llame a esa función.</p><h3 id="module-caching-caveats" tabindex="-1">Advertencias sobre el almacenamiento en caché de módulos <a class="header-anchor" href="#module-caching-caveats" aria-label="Permalink to “Advertencias sobre el almacenamiento en caché de módulos”">​</a></h3><p>Los módulos se almacenan en caché en función de su nombre de archivo resuelto. Dado que los módulos pueden resolverse a un nombre de archivo diferente según la ubicación del módulo que llama (cargando desde las carpetas <code>node_modules</code>), no es una <em>garantía</em> que <code>require(&#39;foo&#39;)</code> siempre devuelva exactamente el mismo objeto, si se resolviera a archivos diferentes.</p><p>Además, en sistemas de archivos o sistemas operativos que no distinguen entre mayúsculas y minúsculas, diferentes nombres de archivo resueltos pueden apuntar al mismo archivo, pero la caché aún los tratará como módulos diferentes y volverá a cargar el archivo varias veces. Por ejemplo, <code>require(&#39;./foo&#39;)</code> y <code>require(&#39;./FOO&#39;)</code> devuelven dos objetos diferentes, independientemente de si <code>./foo</code> y <code>./FOO</code> son el mismo archivo o no.</p><h2 id="built-in-modules" tabindex="-1">Módulos integrados <a class="header-anchor" href="#built-in-modules" aria-label="Permalink to “Módulos integrados”">​</a></h2><div class="info custom-block"><p class="custom-block-title">[Historia]</p><table tabindex="0"><thead><tr><th>Versión</th><th>Cambios</th></tr></thead><tbody><tr><td>v16.0.0, v14.18.0</td><td>Se agregó soporte para la importación <code>node:</code> a <code>require(...)</code>.</td></tr></tbody></table></div><p>Node.js tiene varios módulos compilados en el binario. Estos módulos se describen con mayor detalle en otras partes de esta documentación.</p><p>Los módulos integrados se definen dentro de la fuente de Node.js y se encuentran en la carpeta <code>lib/</code>.</p><p>Los módulos integrados se pueden identificar utilizando el prefijo <code>node:</code>, en cuyo caso omite la caché de <code>require</code>. Por ejemplo, <code>require(&#39;node:http&#39;)</code> siempre devolverá el módulo HTTP integrado, incluso si existe una entrada <code>require.cache</code> con ese nombre.</p><p>Algunos módulos integrados siempre se cargan preferentemente si su identificador se pasa a <code>require()</code>. Por ejemplo, <code>require(&#39;http&#39;)</code> siempre devolverá el módulo HTTP integrado, incluso si hay un archivo con ese nombre. La lista de módulos integrados que se pueden cargar sin usar el prefijo <code>node:</code> se expone en <a href="/es/nodejs/api/module#modulebuiltinmodules"><code>module.builtinModules</code></a>, enumerados sin el prefijo.</p><h3 id="built-in-modules-with-mandatory-node-prefix" tabindex="-1">Módulos incorporados con el prefijo <code>node:</code> obligatorio <a class="header-anchor" href="#built-in-modules-with-mandatory-node-prefix" aria-label="Permalink to “Módulos incorporados con el prefijo node: obligatorio”">​</a></h3><p>Cuando se cargan con <code>require()</code>, algunos módulos incorporados deben solicitarse con el prefijo <code>node:</code>. Este requisito existe para evitar que los módulos incorporados introducidos recientemente tengan un conflicto con los paquetes de dominio del usuario que ya han tomado el nombre. Actualmente, los módulos incorporados que requieren el prefijo <code>node:</code> son:</p><ul><li><a href="/es/nodejs/api/single-executable-applications#single-executable-application-api"><code>node:sea</code></a></li><li><a href="/es/nodejs/api/sqlite"><code>node:sqlite</code></a></li><li><a href="/es/nodejs/api/test"><code>node:test</code></a></li><li><a href="/es/nodejs/api/test#test-reporters"><code>node:test/reporters</code></a></li></ul><p>La lista de estos módulos se expone en <a href="/es/nodejs/api/module#modulebuiltinmodules"><code>module.builtinModules</code></a>, incluyendo el prefijo.</p><h2 id="cycles" tabindex="-1">Ciclos <a class="header-anchor" href="#cycles" aria-label="Permalink to “Ciclos”">​</a></h2><p>Cuando hay llamadas circulares a <code>require()</code>, es posible que un módulo no haya terminado de ejecutarse cuando se devuelve.</p><p>Considere esta situación:</p><p><code>a.js</code>:</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;a empezando&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">exports</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.done </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> b</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;./b.js&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;en a, b.done = %j&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, b.done);</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">exports</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.done </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;a terminado&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p><code>b.js</code>:</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;b empezando&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">exports</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.done </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> a</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;./a.js&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;en b, a.done = %j&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, a.done);</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">exports</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.done </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;b terminado&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p><code>main.js</code>:</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;main empezando&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> a</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;./a.js&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> b</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;./b.js&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;en main, a.done = %j, b.done = %j&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, a.done, b.done);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>Cuando <code>main.js</code> carga <code>a.js</code>, entonces <code>a.js</code> a su vez carga <code>b.js</code>. En ese punto, <code>b.js</code> intenta cargar <code>a.js</code>. Para evitar un bucle infinito, se devuelve una <strong>copia incompleta</strong> del objeto de exportaciones de <code>a.js</code> al módulo <code>b.js</code>. Entonces <code>b.js</code> termina de cargarse, y su objeto <code>exports</code> se proporciona al módulo <code>a.js</code>.</p><p>Para cuando <code>main.js</code> ha cargado ambos módulos, ambos han terminado. La salida de este programa sería por lo tanto:</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> node</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> main.js</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">main</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> empezando</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">a</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> empezando</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">b</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> empezando</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">en</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> b,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> a.done</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> false</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">b</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> terminado</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">en</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> a,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> b.done</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> true</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">a</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> terminado</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">en</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> main,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> a.done</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> true</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> b.done</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> true</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>Se requiere una planificación cuidadosa para permitir que las dependencias de módulos cíclicas funcionen correctamente dentro de una aplicación.</p><h2 id="file-modules" tabindex="-1">Módulos de archivo <a class="header-anchor" href="#file-modules" aria-label="Permalink to “Módulos de archivo”">​</a></h2><p>Si no se encuentra el nombre de archivo exacto, Node.js intentará cargar el nombre de archivo requerido con las extensiones añadidas: <code>.js</code>, <code>.json</code> y, finalmente, <code>.node</code>. Al cargar un archivo que tiene una extensión diferente (por ejemplo, <code>.cjs</code>), su nombre completo debe pasarse a <code>require()</code>, incluida su extensión de archivo (por ejemplo, <code>require(&#39;./file.cjs&#39;)</code>).</p><p>Los archivos <code>.json</code> se analizan como archivos de texto JSON, los archivos <code>.node</code> se interpretan como módulos de complementos compilados cargados con <code>process.dlopen()</code>. Los archivos que utilizan cualquier otra extensión (o ninguna extensión) se analizan como archivos de texto JavaScript. Consulte la sección <a href="/es/nodejs/api/packages#determining-module-system">Determinación del sistema de módulos</a> para comprender qué objetivo de análisis se utilizará.</p><p>Un módulo requerido con el prefijo <code>&#39;/&#39;</code> es una ruta absoluta al archivo. Por ejemplo, <code>require(&#39;/home/marco/foo.js&#39;)</code> cargará el archivo en <code>/home/marco/foo.js</code>.</p><p>Un módulo requerido con el prefijo <code>&#39;./&#39;</code> es relativo al archivo que llama a <code>require()</code>. Es decir, <code>circle.js</code> debe estar en el mismo directorio que <code>foo.js</code> para que <code>require(&#39;./circle&#39;)</code> lo encuentre.</p><p>Sin un prefijo <code>&#39;/&#39;</code>, <code>&#39;./&#39;</code> o <code>&#39;../&#39;</code> para indicar un archivo, el módulo debe ser un módulo central o se carga desde una carpeta <code>node_modules</code>.</p><p>Si la ruta dada no existe, <code>require()</code> lanzará un error <a href="/es/nodejs/api/errors#module-not-found"><code>MODULE_NOT_FOUND</code></a>.</p><h2 id="folders-as-modules" tabindex="-1">Carpetas como módulos <a class="header-anchor" href="#folders-as-modules" aria-label="Permalink to “Carpetas como módulos”">​</a></h2><div class="info custom-block"><p class="custom-block-title">[Estable: 3 - Legado]</p><p><a href="/es/nodejs/api/documentation#stability-index">Estable: 3</a> <a href="/es/nodejs/api/documentation#stability-index">Estabilidad: 3</a> - Legado: Utilice <a href="/es/nodejs/api/packages#subpath-exports">exportaciones de subruta</a> o <a href="/es/nodejs/api/packages#subpath-imports">importaciones de subruta</a> en su lugar.</p></div><p>Hay tres formas en que una carpeta se puede pasar a <code>require()</code> como argumento.</p><p>La primera es crear un archivo <a href="/es/nodejs/api/packages#nodejs-packagejson-field-definitions"><code>package.json</code></a> en la raíz de la carpeta, que especifique un módulo <code>main</code>. Un ejemplo de archivo <a href="/es/nodejs/api/packages#nodejs-packagejson-field-definitions"><code>package.json</code></a> podría verse así:</p><div class="language-json line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{ </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> : </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;some-library&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;main&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> : </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;./lib/some-library.js&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>Si esto estuviera en una carpeta en <code>./some-library</code>, entonces <code>require(&#39;./some-library&#39;)</code> intentaría cargar <code>./some-library/lib/some-library.js</code>.</p><p>Si no hay ningún archivo <a href="/es/nodejs/api/packages#nodejs-packagejson-field-definitions"><code>package.json</code></a> presente en el directorio, o si la entrada <a href="/es/nodejs/api/packages#main"><code>&quot;main&quot;</code></a> falta o no se puede resolver, entonces Node.js intentará cargar un archivo <code>index.js</code> o <code>index.node</code> fuera de ese directorio. Por ejemplo, si no hubiera ningún archivo <a href="/es/nodejs/api/packages#nodejs-packagejson-field-definitions"><code>package.json</code></a> en el ejemplo anterior, entonces <code>require(&#39;./some-library&#39;)</code> intentaría cargar:</p><ul><li><code>./some-library/index.js</code></li><li><code>./some-library/index.node</code></li></ul><p>Si estos intentos fallan, entonces Node.js informará que falta todo el módulo con el error predeterminado:</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Error:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Cannot</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> find</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> module</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;some-library&#39;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>En los tres casos anteriores, una llamada a <code>import(&#39;./some-library&#39;)</code> resultaría en un error <a href="/es/nodejs/api/errors#err-unsupported-dir-import"><code>ERR_UNSUPPORTED_DIR_IMPORT</code></a>. El uso de <a href="/es/nodejs/api/packages#subpath-exports">exportaciones de subruta</a> o <a href="/es/nodejs/api/packages#subpath-imports">importaciones de subruta</a> del paquete puede proporcionar los mismos beneficios de organización de contención que las carpetas como módulos, y funciona tanto para <code>require</code> como para <code>import</code>.</p><h2 id="loading-from-node_modules-folders" tabindex="-1">Cargando desde las carpetas <code>node_modules</code> <a class="header-anchor" href="#loading-from-node_modules-folders" aria-label="Permalink to “Cargando desde las carpetas node_modules”">​</a></h2><p>Si el identificador del módulo pasado a <code>require()</code> no es un módulo <a href="/es/nodejs/api/modules#built-in-modules">incorporado</a>, y no comienza con <code>&#39;/&#39;</code>, <code>&#39;../&#39;</code> o <code>&#39;./&#39;</code>, entonces Node.js comienza en el directorio del módulo actual, y agrega <code>/node_modules</code>, e intenta cargar el módulo desde esa ubicación. Node.js no añadirá <code>node_modules</code> a una ruta que ya termine en <code>node_modules</code>.</p><p>Si no se encuentra allí, entonces se mueve al directorio principal, y así sucesivamente, hasta que se alcanza la raíz del sistema de archivos.</p><p>Por ejemplo, si el archivo en <code>&#39;/home/ry/projects/foo.js&#39;</code> llama a <code>require(&#39;bar.js&#39;)</code>, entonces Node.js buscaría en las siguientes ubicaciones, en este orden:</p><ul><li><code>/home/ry/projects/node_modules/bar.js</code></li><li><code>/home/ry/node_modules/bar.js</code></li><li><code>/home/node_modules/bar.js</code></li><li><code>/node_modules/bar.js</code></li></ul><p>Esto permite a los programas localizar sus dependencias, para que no choquen.</p><p>Es posible requerir archivos específicos o submódulos distribuidos con un módulo incluyendo un sufijo de ruta después del nombre del módulo. Por ejemplo, <code>require(&#39;example-module/path/to/file&#39;)</code> resolvería <code>path/to/file</code> en relación con donde se encuentra <code>example-module</code>. La ruta con sufijo sigue la misma semántica de resolución de módulos.</p><h2 id="loading-from-the-global-folders" tabindex="-1">Cargando desde las carpetas globales <a class="header-anchor" href="#loading-from-the-global-folders" aria-label="Permalink to “Cargando desde las carpetas globales”">​</a></h2><p>Si la variable de entorno <code>NODE_PATH</code> está configurada con una lista de rutas absolutas delimitadas por dos puntos, entonces Node.js buscará en esas rutas los módulos si no se encuentran en otro lugar.</p><p>En Windows, <code>NODE_PATH</code> está delimitado por punto y coma (<code>;</code>) en lugar de dos puntos.</p><p><code>NODE_PATH</code> se creó originalmente para admitir la carga de módulos desde rutas variables antes de que se definiera el algoritmo actual de <a href="/es/nodejs/api/modules#all-together">resolución de módulos</a>.</p><p><code>NODE_PATH</code> todavía es compatible, pero es menos necesario ahora que el ecosistema de Node.js se ha establecido en una convención para localizar módulos dependientes. A veces, las implementaciones que dependen de <code>NODE_PATH</code> muestran un comportamiento sorprendente cuando las personas no saben que <code>NODE_PATH</code> debe configurarse. A veces, las dependencias de un módulo cambian, lo que provoca que se cargue una versión diferente (o incluso un módulo diferente) a medida que se busca en <code>NODE_PATH</code>.</p><p>Además, Node.js buscará en la siguiente lista de GLOBAL_FOLDERS:</p><ul><li>1: <code>$HOME/.node_modules</code></li><li>2: <code>$HOME/.node_libraries</code></li><li>3: <code>$PREFIX/lib/node</code></li></ul><p>Donde <code>$HOME</code> es el directorio de inicio del usuario y <code>$PREFIX</code> es el <code>node_prefix</code> configurado de Node.js.</p><p>Estos son principalmente por razones históricas.</p><p>Se recomienda encarecidamente colocar las dependencias en la carpeta local <code>node_modules</code>. Estos se cargarán más rápido y con mayor fiabilidad.</p><h2 id="the-module-wrapper" tabindex="-1">El envoltorio del módulo <a class="header-anchor" href="#the-module-wrapper" aria-label="Permalink to “El envoltorio del módulo”">​</a></h2><p>Antes de que se ejecute el código de un módulo, Node.js lo envolverá con un envoltorio de función que se ve así:</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">exports</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">module</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">__filename</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">__dirname</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// El código del módulo realmente vive aquí</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>Al hacer esto, Node.js logra varias cosas:</p><ul><li>Mantiene las variables de nivel superior (definidas con <code>var</code>, <code>const</code> o <code>let</code>) dentro del alcance del módulo en lugar del objeto global.</li><li>Ayuda a proporcionar algunas variables de apariencia global que en realidad son específicas del módulo, tales como: <ul><li>Los objetos <code>module</code> y <code>exports</code> que el implementador puede usar para exportar valores desde el módulo.</li><li>Las variables de conveniencia <code>__filename</code> y <code>__dirname</code>, que contienen el nombre de archivo absoluto y la ruta del directorio del módulo.</li></ul></li></ul><h2 id="the-module-scope" tabindex="-1">El alcance del módulo <a class="header-anchor" href="#the-module-scope" aria-label="Permalink to “El alcance del módulo”">​</a></h2><h3 id="__dirname" tabindex="-1"><code>__dirname</code> <a class="header-anchor" href="#__dirname" aria-label="Permalink to “__dirname”">​</a></h3><p><strong>Añadido en: v0.1.27</strong></p><ul><li><a href="https://developer.mozilla.org/es/docs/Web/JavaScript/Reference/Global_Objects/String" target="_blank" rel="noreferrer">&lt;string&gt;</a></li></ul><p>El nombre del directorio del módulo actual. Esto es lo mismo que <a href="/es/nodejs/api/path#pathdirnamepath"><code>path.dirname()</code></a> de <a href="/es/nodejs/api/modules#filename"><code>__filename</code></a>.</p><p>Ejemplo: ejecutar <code>node example.js</code> desde <code>/Users/mjr</code></p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(__dirname);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Imprime: /Users/mjr</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(path.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">dirname</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(__filename));</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Imprime: /Users/mjr</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="__filename" tabindex="-1"><code>__filename</code> <a class="header-anchor" href="#__filename" aria-label="Permalink to “__filename”">​</a></h3><p><strong>Añadido en: v0.0.1</strong></p><ul><li><a href="https://developer.mozilla.org/es/docs/Web/JavaScript/Reference/Global_Objects/String" target="_blank" rel="noreferrer">&lt;string&gt;</a></li></ul><p>El nombre del archivo del módulo actual. Esta es la ruta absoluta del archivo del módulo actual con los enlaces simbólicos resueltos.</p><p>Para un programa principal, esto no es necesariamente lo mismo que el nombre de archivo utilizado en la línea de comando.</p><p>Consulte <a href="/es/nodejs/api/modules#dirname"><code>__dirname</code></a> para obtener el nombre del directorio del módulo actual.</p><p>Ejemplos:</p><p>Ejecutar <code>node example.js</code> desde <code>/Users/mjr</code></p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(__filename);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Imprime: /Users/mjr/example.js</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(__dirname);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Imprime: /Users/mjr</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>Dados dos módulos: <code>a</code> y <code>b</code>, donde <code>b</code> es una dependencia de <code>a</code> y existe una estructura de directorios de:</p><ul><li><code>/Users/mjr/app/a.js</code></li><li><code>/Users/mjr/app/node_modules/b/b.js</code></li></ul><p>Las referencias a <code>__filename</code> dentro de <code>b.js</code> devolverán <code>/Users/mjr/app/node_modules/b/b.js</code> mientras que las referencias a <code>__filename</code> dentro de <code>a.js</code> devolverán <code>/Users/mjr/app/a.js</code>.</p><h3 id="exports" tabindex="-1"><code>exports</code> <a class="header-anchor" href="#exports" aria-label="Permalink to “exports”">​</a></h3><p><strong>Añadido en: v0.1.12</strong></p><ul><li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noreferrer">&lt;Objeto&gt;</a></li></ul><p>Una referencia a <code>module.exports</code> que es más corta de escribir. Consulte la sección sobre el <a href="/es/nodejs/api/modules#exports-shortcut">atajo exports</a> para obtener detalles sobre cuándo usar <code>exports</code> y cuándo usar <code>module.exports</code>.</p><h3 id="module" tabindex="-1"><code>module</code> <a class="header-anchor" href="#module" aria-label="Permalink to “module”">​</a></h3><p><strong>Añadido en: v0.1.16</strong></p><ul><li><a href="/es/nodejs/api/modules#the-module-object">&lt;módulo&gt;</a></li></ul><p>Una referencia al módulo actual, consulte la sección sobre el objeto <a href="/es/nodejs/api/modules#the-module-object"><code>module</code></a>. En particular, <code>module.exports</code> se utiliza para definir lo que un módulo exporta y pone a disposición a través de <code>require()</code>.</p><h3 id="requireid" tabindex="-1"><code>require(id)</code> <a class="header-anchor" href="#requireid" aria-label="Permalink to “require(id)”">​</a></h3><p><strong>Añadido en: v0.1.13</strong></p><ul><li><code>id</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> nombre o ruta del módulo</li><li>Devuelve: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Data_types" target="_blank" rel="noreferrer">&lt;any&gt;</a> contenido del módulo exportado</li></ul><p>Se utiliza para importar módulos, <code>JSON</code> y archivos locales. Los módulos se pueden importar desde <code>node_modules</code>. Los módulos locales y los archivos JSON se pueden importar utilizando una ruta relativa (por ejemplo, <code>./</code>, <code>./foo</code>, <code>./bar/baz</code>, <code>../foo</code>) que se resolverá con respecto al directorio nombrado por <a href="/es/nodejs/api/modules#dirname"><code>__dirname</code></a> (si se define) o el directorio de trabajo actual. Las rutas relativas de estilo POSIX se resuelven de forma independiente del sistema operativo, lo que significa que los ejemplos anteriores funcionarán en Windows de la misma manera que lo harían en los sistemas Unix.</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Importando un módulo local con una ruta relativa al \`__dirname\` o al</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// directorio de trabajo actual. (En Windows, esto se resolvería en .\\path\\myLocalModule.)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> myLocalModule</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;./path/myLocalModule&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Importando un archivo JSON:</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> jsonData</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;./path/filename.json&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Importando un módulo de node_modules o un módulo integrado de Node.js:</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> crypto</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;node:crypto&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h4 id="requirecache" tabindex="-1"><code>require.cache</code> <a class="header-anchor" href="#requirecache" aria-label="Permalink to “require.cache”">​</a></h4><p><strong>Añadido en: v0.3.0</strong></p><ul><li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noreferrer">&lt;Objeto&gt;</a></li></ul><p>Los módulos se almacenan en caché en este objeto cuando se requieren. Al eliminar un valor clave de este objeto, el siguiente <code>require</code> volverá a cargar el módulo. Esto no se aplica a los <a href="/es/nodejs/api/addons">complementos nativos</a>, para los que la recarga provocará un error.</p><p>También es posible agregar o reemplazar entradas. Esta caché se comprueba antes que los módulos integrados y si se agrega a la caché un nombre que coincida con un módulo integrado, solo las llamadas <code>require</code> con el prefijo <code>node:</code> recibirán el módulo integrado. ¡Úselo con cuidado!</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> assert</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;node:assert&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> realFs</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;node:fs&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> fakeFs</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {};</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">require.cache.fs </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { exports: fakeFs };</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">assert.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">strictEqual</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;fs&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">), fakeFs);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">assert.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">strictEqual</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;node:fs&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">), realFs);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h4 id="requireextensions" tabindex="-1"><code>require.extensions</code> <a class="header-anchor" href="#requireextensions" aria-label="Permalink to “require.extensions”">​</a></h4><p><strong>Agregado en: v0.3.0</strong></p><p><strong>Obsoleto desde: v0.10.6</strong></p><div class="danger custom-block"><p class="custom-block-title">[Estable: 0 - Obsoleto]</p><p><a href="/es/nodejs/api/documentation#stability-index">Estable: 0</a> <a href="/es/nodejs/api/documentation#stability-index">Estabilidad: 0</a> - Obsoleto</p></div><ul><li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noreferrer">&lt;Object&gt;</a></li></ul><p>Instruye a <code>require</code> sobre cómo manejar ciertas extensiones de archivo.</p><p>Procesa archivos con la extensión <code>.sjs</code> como <code>.js</code>:</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">require.extensions[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;.sjs&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> require.extensions[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;.js&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">];</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><strong>Obsoleto.</strong> En el pasado, esta lista se ha utilizado para cargar módulos que no son de JavaScript en Node.js compilándolos bajo demanda. Sin embargo, en la práctica, hay formas mucho mejores de hacer esto, como cargar módulos a través de algún otro programa de Node.js o compilarlos a JavaScript con anticipación.</p><p>Evita usar <code>require.extensions</code>. Su uso podría causar errores sutiles y la resolución de las extensiones se vuelve más lenta con cada extensión registrada.</p><h4 id="requiremain" tabindex="-1"><code>require.main</code> <a class="header-anchor" href="#requiremain" aria-label="Permalink to “require.main”">​</a></h4><p><strong>Agregado en: v0.1.17</strong></p><ul><li><a href="/es/nodejs/api/modules#the-module-object">&lt;module&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Undefined_type" target="_blank" rel="noreferrer">&lt;undefined&gt;</a></li></ul><p>El objeto <code>Module</code> que representa el script de entrada cargado cuando se inició el proceso de Node.js, o <code>undefined</code> si el punto de entrada del programa no es un módulo CommonJS. Véase <a href="/es/nodejs/api/modules#accessing-the-main-module">&quot;Acceder al módulo principal&quot;</a>.</p><p>En el script <code>entry.js</code>:</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(require.main);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">node</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> entry.js</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Module {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  id</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;.&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  path</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;/absolute/path/to&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  exports</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {},</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  filename</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;/absolute/path/to/entry.js&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  loaded</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  children</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [],</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  paths</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">   [ </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;/absolute/path/to/node_modules&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">     &#39;/absolute/path/node_modules&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">     &#39;/absolute/node_modules&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">     &#39;/node_modules&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ] }</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h4 id="requireresolverequest-options" tabindex="-1"><code>require.resolve(request[, options])</code> <a class="header-anchor" href="#requireresolverequest-options" aria-label="Permalink to “require.resolve(request[, options])”">​</a></h4><div class="info custom-block"><p class="custom-block-title">[Historial]</p><table tabindex="0"><thead><tr><th>Versión</th><th>Cambios</th></tr></thead><tbody><tr><td>v8.9.0</td><td>Ahora se soporta la opción <code>paths</code>.</td></tr><tr><td>v0.3.0</td><td>Agregado en: v0.3.0</td></tr></tbody></table></div><ul><li><p><code>request</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> La ruta del módulo a resolver.</p></li><li><p><code>options</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noreferrer">&lt;Object&gt;</a></p><ul><li><code>paths</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string[]&gt;</a> Rutas desde donde resolver la ubicación del módulo. Si está presente, estas rutas se utilizan en lugar de las rutas de resolución predeterminadas, con la excepción de <a href="/es/nodejs/api/modules#loading-from-the-global-folders">GLOBAL_FOLDERS</a> como <code>$HOME/.node_modules</code>, que siempre se incluyen. Cada una de estas rutas se utiliza como punto de partida para el algoritmo de resolución de módulos, lo que significa que la jerarquía <code>node_modules</code> se comprueba desde esta ubicación.</li></ul></li><li><p>Devuelve: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a></p></li></ul><p>Usa la maquinaria interna <code>require()</code> para buscar la ubicación de un módulo, pero en lugar de cargar el módulo, simplemente devuelve el nombre de archivo resuelto.</p><p>Si no se puede encontrar el módulo, se lanza un error <code>MODULE_NOT_FOUND</code>.</p><h5 id="requireresolvepathsrequest" tabindex="-1"><code>require.resolve.paths(request)</code> <a class="header-anchor" href="#requireresolvepathsrequest" aria-label="Permalink to “require.resolve.paths(request)”">​</a></h5><p><strong>Agregado en: v8.9.0</strong></p><ul><li><code>request</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> La ruta del módulo cuyas rutas de búsqueda se están recuperando.</li><li>Devuelve: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string[]&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Null_type" target="_blank" rel="noreferrer">&lt;null&gt;</a></li></ul><p>Devuelve un array que contiene las rutas buscadas durante la resolución de <code>request</code> o <code>null</code> si la cadena <code>request</code> hace referencia a un módulo principal, por ejemplo, <code>http</code> o <code>fs</code>.</p><h2 id="the-module-object" tabindex="-1">El objeto <code>module</code> <a class="header-anchor" href="#the-module-object" aria-label="Permalink to “El objeto module”">​</a></h2><p><strong>Agregado en: v0.1.16</strong></p><ul><li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noreferrer">&lt;Object&gt;</a></li></ul><p>En cada módulo, la variable libre <code>module</code> es una referencia al objeto que representa el módulo actual. Para mayor comodidad, se puede acceder a <code>module.exports</code> a través del módulo global <code>exports</code>. <code>module</code> no es realmente global, sino local a cada módulo.</p><h3 id="modulechildren" tabindex="-1"><code>module.children</code> <a class="header-anchor" href="#modulechildren" aria-label="Permalink to “module.children”">​</a></h3><p><strong>Agregado en: v0.1.16</strong></p><ul><li><a href="/es/nodejs/api/modules#the-module-object">&lt;module[]&gt;</a></li></ul><p>Los objetos de módulo requeridos por primera vez por este.</p><h3 id="moduleexports" tabindex="-1"><code>module.exports</code> <a class="header-anchor" href="#moduleexports" aria-label="Permalink to “module.exports”">​</a></h3><p><strong>Agregado en: v0.1.16</strong></p><ul><li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noreferrer">&lt;Object&gt;</a></li></ul><p>El objeto <code>module.exports</code> es creado por el sistema <code>Module</code>. A veces esto no es aceptable; muchos quieren que su módulo sea una instancia de alguna clase. Para hacer esto, asigne el objeto de exportación deseado a <code>module.exports</code>. Asignar el objeto deseado a <code>exports</code> simplemente volverá a enlazar la variable local <code>exports</code>, que probablemente no sea lo que se desea.</p><p>Por ejemplo, supongamos que estamos creando un módulo llamado <code>a.js</code>:</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> EventEmitter</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;node:events&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">module</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">exports</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> EventEmitter</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Do some work, and after some time emit</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// the &#39;ready&#39; event from the module itself.</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setTimeout</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  module</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">exports</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">emit</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;ready&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1000</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>Entonces, en otro archivo podríamos hacer:</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> a</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;./a&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">a.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">on</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;ready&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;module &quot;a&quot; is ready&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>La asignación a <code>module.exports</code> debe hacerse inmediatamente. No se puede hacer en ningún callback. Esto no funciona:</p><p><code>x.js</code>:</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setTimeout</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  module</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">exports</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { a: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;hello&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> };</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><code>y.js</code>:</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> x</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;./x&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(x.a);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h4 id="exports-shortcut" tabindex="-1">Atajo <code>exports</code> <a class="header-anchor" href="#exports-shortcut" aria-label="Permalink to “Atajo exports”">​</a></h4><p><strong>Agregado en: v0.1.16</strong></p><p>La variable <code>exports</code> está disponible dentro del alcance de nivel de archivo de un módulo y se le asigna el valor de <code>module.exports</code> antes de que se evalúe el módulo.</p><p>Permite un atajo, de modo que <code>module.exports.f = ...</code> se puede escribir de manera más sucinta como <code>exports.f = ...</code>. Sin embargo, tenga en cuenta que, como cualquier variable, si se asigna un nuevo valor a <code>exports</code>, ya no está ligado a <code>module.exports</code>:</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">module</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">exports</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.hello </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Exportado desde require del módulo</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">exports</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { hello: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> };  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// No exportado, solo disponible en el módulo</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>Cuando la propiedad <code>module.exports</code> se reemplaza por completo por un nuevo objeto, es común también reasignar <code>exports</code>:</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">module</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">exports</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> exports</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Constructor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // ... etc.</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>Para ilustrar el comportamiento, imagine esta implementación hipotética de <code>require()</code>, que es bastante similar a lo que realmente hace <code>require()</code>:</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/* ... */</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> module</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { exports: {} };</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  ((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">module</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">exports</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // Código del módulo aquí. En este ejemplo, define una función.</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> someFunc</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {}</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    exports</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> someFunc;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // En este punto, exports ya no es un atajo a module.exports, y</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // este módulo aún exportará un objeto predeterminado vacío.</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    module</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">exports</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> someFunc;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // En este punto, el módulo ahora exportará someFunc, en lugar del</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // objeto predeterminado.</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  })(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">module</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">module</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">exports</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> module</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">exports</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h3 id="modulefilename" tabindex="-1"><code>module.filename</code> <a class="header-anchor" href="#modulefilename" aria-label="Permalink to “module.filename”">​</a></h3><p><strong>Agregado en: v0.1.16</strong></p><ul><li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a></li></ul><p>El nombre de archivo completamente resuelto del módulo.</p><h3 id="moduleid" tabindex="-1"><code>module.id</code> <a class="header-anchor" href="#moduleid" aria-label="Permalink to “module.id”">​</a></h3><p><strong>Agregado en: v0.1.16</strong></p><ul><li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a></li></ul><p>El identificador del módulo. Por lo general, este es el nombre de archivo completamente resuelto.</p><h3 id="moduleispreloading" tabindex="-1"><code>module.isPreloading</code> <a class="header-anchor" href="#moduleispreloading" aria-label="Permalink to “module.isPreloading”">​</a></h3><p><strong>Agregado en: v15.4.0, v14.17.0</strong></p><ul><li>Tipo: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" target="_blank" rel="noreferrer">&lt;boolean&gt;</a> <code>true</code> si el módulo se está ejecutando durante la fase de precarga de Node.js.</li></ul><h3 id="moduleloaded" tabindex="-1"><code>module.loaded</code> <a class="header-anchor" href="#moduleloaded" aria-label="Permalink to “module.loaded”">​</a></h3><p><strong>Agregado en: v0.1.16</strong></p><ul><li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" target="_blank" rel="noreferrer">&lt;boolean&gt;</a></li></ul><p>Indica si el módulo ha terminado de cargarse, o si está en proceso de carga.</p><h3 id="moduleparent" tabindex="-1"><code>module.parent</code> <a class="header-anchor" href="#moduleparent" aria-label="Permalink to “module.parent”">​</a></h3><p><strong>Agregado en: v0.1.16</strong></p><p><strong>Obsoleto desde: v14.6.0, v12.19.0</strong></p><div class="danger custom-block"><p class="custom-block-title">[Estable: 0 - Obsoleto]</p><p><a href="/es/nodejs/api/documentation#stability-index">Estable: 0</a> <a href="/es/nodejs/api/documentation#stability-index">Estabilidad: 0</a> - Obsoleto: Utilice <a href="/es/nodejs/api/modules#requiremain"><code>require.main</code></a> y <a href="/es/nodejs/api/modules#modulechildren"><code>module.children</code></a> en su lugar.</p></div><ul><li><a href="/es/nodejs/api/modules#the-module-object">&lt;module&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Null_type" target="_blank" rel="noreferrer">&lt;null&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Undefined_type" target="_blank" rel="noreferrer">&lt;undefined&gt;</a></li></ul><p>El módulo que requirió primero este, o <code>null</code> si el módulo actual es el punto de entrada del proceso actual, o <code>undefined</code> si el módulo fue cargado por algo que no es un módulo CommonJS (E.G.: REPL o <code>import</code>).</p><h3 id="modulepath" tabindex="-1"><code>module.path</code> <a class="header-anchor" href="#modulepath" aria-label="Permalink to “module.path”">​</a></h3><p><strong>Agregado en: v11.14.0</strong></p><ul><li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a></li></ul><p>El nombre del directorio del módulo. Esto suele ser lo mismo que el <a href="/es/nodejs/api/path#pathdirnamepath"><code>path.dirname()</code></a> del <a href="/es/nodejs/api/modules#moduleid"><code>module.id</code></a>.</p><h3 id="modulepaths" tabindex="-1"><code>module.paths</code> <a class="header-anchor" href="#modulepaths" aria-label="Permalink to “module.paths”">​</a></h3><p><strong>Agregado en: v0.4.0</strong></p><ul><li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string[]&gt;</a></li></ul><p>Las rutas de búsqueda para el módulo.</p><h3 id="modulerequireid" tabindex="-1"><code>module.require(id)</code> <a class="header-anchor" href="#modulerequireid" aria-label="Permalink to “module.require(id)”">​</a></h3><p><strong>Agregado en: v0.5.1</strong></p><ul><li><code>id</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a></li><li>Devuelve: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Data_types" target="_blank" rel="noreferrer">&lt;any&gt;</a> contenido del módulo exportado</li></ul><p>El método <code>module.require()</code> proporciona una forma de cargar un módulo como si se llamara a <code>require()</code> desde el módulo original.</p><p>Para hacer esto, es necesario obtener una referencia al objeto <code>module</code>. Dado que <code>require()</code> devuelve <code>module.exports</code>, y el <code>module</code> normalmente <em>solo</em> está disponible dentro del código de un módulo específico, debe exportarse explícitamente para poder utilizarse.</p><h2 id="the-module-object_1" tabindex="-1">El objeto <code>Module</code> <a class="header-anchor" href="#the-module-object_1" aria-label="Permalink to “El objeto Module”">​</a></h2><p>Esta sección se movió a <a href="/es/nodejs/api/module#the-module-object">Módulos: módulo central <code>module</code></a>.</p><ul><li><a href="/es/nodejs/api/module#modulebuiltinmodules"><code>module.builtinModules</code></a></li><li><a href="/es/nodejs/api/module#modulecreaterequirefilename"><code>module.createRequire(filename)</code></a></li><li><a href="/es/nodejs/api/module#modulesyncbuiltinesmexports"><code>module.syncBuiltinESMExports()</code></a></li></ul><h2 id="source-map-v3-support" tabindex="-1">Soporte para mapas de origen v3 <a class="header-anchor" href="#source-map-v3-support" aria-label="Permalink to “Soporte para mapas de origen v3”">​</a></h2><p>Esta sección se movió a <a href="/es/nodejs/api/module#source-map-v3-support">Módulos: módulo central <code>module</code></a>.</p><ul><li><a href="/es/nodejs/api/module#modulefindsourcemappath"><code>module.findSourceMap(path)</code></a></li><li><a href="/es/nodejs/api/module#class-modulesourcemap">Clase: <code>module.SourceMap</code></a><ul><li><a href="/es/nodejs/api/module#new-sourcemappayload"><code>new SourceMap(payload)</code></a></li><li><a href="/es/nodejs/api/module#sourcemappayload"><code>sourceMap.payload</code></a></li><li><a href="/es/nodejs/api/module#sourcemapfindentrylinenumber-columnnumber"><code>sourceMap.findEntry(lineNumber, columnNumber)</code></a></li></ul></li></ul>`,269)])}var s=e(a,[[`render`,o]]);export{i as __pageData,s as default};