import{__plugin_vue_export_helper_default as e,createElementBlock as t,createStaticVNode as n,openBlock as r}from"./chunks/plugin-vue_export-helper.Bts1mPc7.js";const i=JSON.parse(`{"title":"وحدات ECMAScript في Node.js","description":"توفر هذه الصفحة توثيقًا مفصلًا حول كيفية استخدام وحدات ECMAScript (ESM) في Node.js، بما في ذلك حل الوحدات، وصيغة الاستيراد والتصدير، والتوافق مع CommonJS.","frontmatter":{"title":"وحدات ECMAScript في Node.js","description":"توفر هذه الصفحة توثيقًا مفصلًا حول كيفية استخدام وحدات ECMAScript (ESM) في Node.js، بما في ذلك حل الوحدات، وصيغة الاستيراد والتصدير، والتوافق مع CommonJS.","head":[["meta",{"name":"og:title","content":"وحدات ECMAScript في Node.js | Node.js - iDoc.dev"}],["meta",{"name":"og:description","content":"توفر هذه الصفحة توثيقًا مفصلًا حول كيفية استخدام وحدات ECMAScript (ESM) في Node.js، بما في ذلك حل الوحدات، وصيغة الاستيراد والتصدير، والتوافق مع CommonJS."}],["meta",{"name":"twitter:title","content":"وحدات ECMAScript في Node.js | Node.js - iDoc.dev"}],["meta",{"name":"twitter:description","content":"توفر هذه الصفحة توثيقًا مفصلًا حول كيفية استخدام وحدات ECMAScript (ESM) في Node.js، بما في ذلك حل الوحدات، وصيغة الاستيراد والتصدير، والتوافق مع CommonJS."}],["link",{"rel":"canonical","href":"https://idoc.dev/ar/nodejs/api/esm"}],["meta",{"property":"og:url","content":"https://idoc.dev/ar/nodejs/api/esm"}]]},"headers":[],"relativePath":"ar/nodejs/api/esm.md","filePath":"ar/nodejs/api/esm.md","lastUpdated":1749464498000}`),a={name:`ar/nodejs/api/esm.md`};function o(e,i,a,o,s,c){return r(),t(`div`,null,i[0]||=[n(`<h1 id="modules-ecmascript-modules" tabindex="-1">الوحدات: وحدات ECMAScript <a class="header-anchor" href="#modules-ecmascript-modules" aria-label="Permalink to “الوحدات: وحدات ECMAScript”">​</a></h1><div class="info custom-block"><p class="custom-block-title">[السجل]</p><table tabindex="0"><thead><tr><th>الإصدار</th><th>التغييرات</th></tr></thead><tbody><tr><td>v23.1.0</td><td>لم تعد سمات الاستيراد تجريبية.</td></tr><tr><td>v22.0.0</td><td>إسقاط دعم تأكيدات الاستيراد.</td></tr><tr><td>v21.0.0, v20.10.0, v18.20.0</td><td>إضافة دعم تجريبي لسمات الاستيراد.</td></tr><tr><td>v20.0.0, v18.19.0</td><td>يتم تنفيذ خطافات تخصيص الوحدة خارج الخيط الرئيسي.</td></tr><tr><td>v18.6.0, v16.17.0</td><td>إضافة دعم لتسلسل خطافات تخصيص الوحدة.</td></tr><tr><td>v17.1.0, v16.14.0</td><td>إضافة دعم تجريبي لتأكيدات الاستيراد.</td></tr><tr><td>v17.0.0, v16.12.0</td><td>دمج خطافات التخصيص، إزالة خطافات <code>getFormat</code> و <code>getSource</code> و <code>transformSource</code> و <code>getGlobalPreloadCode</code> تمت إضافة خطافات <code>load</code> و <code>globalPreload</code> سمحت بإرجاع <code>format</code> من أي من خطافات <code>resolve</code> أو <code>load</code>.</td></tr><tr><td>v14.8.0</td><td>إلغاء علامة انتظار المستوى الأعلى.</td></tr><tr><td>v15.3.0, v14.17.0, v12.22.0</td><td>تثبيت تنفيذ الوحدات.</td></tr><tr><td>v14.13.0, v12.20.0</td><td>دعم اكتشاف صادرات CommonJS المسماة.</td></tr><tr><td>v14.0.0, v13.14.0, v12.20.0</td><td>إزالة تحذير الوحدات التجريبية.</td></tr><tr><td>v13.2.0, v12.17.0</td><td>لم يعد تحميل وحدات ECMAScript يتطلب علامة سطر الأوامر.</td></tr><tr><td>v12.0.0</td><td>إضافة دعم لوحدات ES باستخدام ملحق الملف <code>.js</code> عبر حقل <code>&quot;type&quot;</code> في <code>package.json</code>.</td></tr><tr><td>v8.5.0</td><td>تمت الإضافة في: v8.5.0</td></tr></tbody></table></div><div class="tip custom-block"><p class="custom-block-title">[مستقر: 2 - مستقر]</p><p><a href="/ar/nodejs/api/documentation#stability-index">مستقر: 2</a> <a href="/ar/nodejs/api/documentation#stability-index">الاستقرار: 2</a> - مستقر</p></div><h2 id="introduction" tabindex="-1">مقدمة <a class="header-anchor" href="#introduction" aria-label="Permalink to “مقدمة”">​</a></h2><p>وحدات ECMAScript هي <a href="https://tc39.github.io/ecma262/#sec-modules" target="_blank" rel="noreferrer">التنسيق القياسي الرسمي</a> لحزم كود JavaScript لإعادة استخدامه. يتم تعريف الوحدات باستخدام مجموعة متنوعة من عبارات <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/import" target="_blank" rel="noreferrer"><code>import</code></a> و <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/export" target="_blank" rel="noreferrer"><code>export</code></a>.</p><p>يوضح المثال التالي لوحدة ES تصدير دالة:</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// addTwo.mjs</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> addTwo</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">num</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> num </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { addTwo };</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>يوضح المثال التالي لوحدة ES استيراد الدالة من <code>addTwo.mjs</code>:</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// app.mjs</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { addTwo } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;./addTwo.mjs&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// يطبع: 6</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">addTwo</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">4</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">));</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>يدعم Node.js وحدات ECMAScript بشكل كامل كما هو محدد حاليًا ويوفر إمكانية التشغيل البيني بينها وبين تنسيق الوحدة الأصلي الخاص به، <a href="/ar/nodejs/api/modules">CommonJS</a>.</p><h2 id="enabling" tabindex="-1">تفعيل <a class="header-anchor" href="#enabling" aria-label="Permalink to “تفعيل”">​</a></h2><p>يحتوي Node.js على نظامين للوحدات النمطية: وحدات <a href="/ar/nodejs/api/modules">CommonJS</a> ووحدات ECMAScript.</p><p>يمكن للمؤلفين إخبار Node.js بتفسير JavaScript كوحدة نمطية ES عبر امتداد الملف <code>.mjs</code>، أو حقل <a href="/ar/nodejs/api/packages#type"><code>&quot;type&quot;</code></a> في <code>package.json</code> بقيمة <code>&quot;module&quot;</code>، أو علامة <a href="/ar/nodejs/api/cli#input-typetype"><code>--input-type</code></a> بقيمة <code>&quot;module&quot;</code>. هذه علامات صريحة على أن التعليمات البرمجية تهدف إلى التشغيل كوحدة نمطية ES.</p><p>بالمقابل، يمكن للمؤلفين إخبار Node.js بشكل صريح بتفسير JavaScript كـ CommonJS عبر امتداد الملف <code>.cjs</code>، أو حقل <a href="/ar/nodejs/api/packages#type"><code>&quot;type&quot;</code></a> في <code>package.json</code> بقيمة <code>&quot;commonjs&quot;</code>، أو علامة <a href="/ar/nodejs/api/cli#input-typetype"><code>--input-type</code></a> بقيمة <code>&quot;commonjs&quot;</code>.</p><p>عندما تفتقر التعليمات البرمجية إلى علامات صريحة لأي من نظامي الوحدات النمطية، سيقوم Node.js بفحص التعليمات البرمجية المصدر للوحدة النمطية للبحث عن بناء جملة الوحدة النمطية ES. إذا تم العثور على مثل هذا البناء، فسيقوم Node.js بتشغيل التعليمات البرمجية كوحدة نمطية ES؛ وإلا فإنه سيقوم بتشغيل الوحدة النمطية كـ CommonJS. راجع <a href="/ar/nodejs/api/packages#determining-module-system">تحديد نظام الوحدة النمطية</a> لمزيد من التفاصيل.</p><h2 id="packages" tabindex="-1">الحزم <a class="header-anchor" href="#packages" aria-label="Permalink to “الحزم”">​</a></h2><p>تم نقل هذا القسم إلى <a href="/ar/nodejs/api/packages">الوحدات النمطية: الحزم</a>.</p><h2 id="import-specifiers" tabindex="-1">مُعرّفات <code>import</code> <a class="header-anchor" href="#import-specifiers" aria-label="Permalink to “مُعرّفات import”">​</a></h2><h3 id="terminology" tabindex="-1">المصطلحات <a class="header-anchor" href="#terminology" aria-label="Permalink to “المصطلحات”">​</a></h3><p><em>المُعرّف</em> لعبارة <code>import</code> هو السلسلة بعد الكلمة الأساسية <code>from</code>، على سبيل المثال <code>&#39;node:path&#39;</code> في <code>import { sep } from &#39;node:path&#39;</code>. تُستخدم المُعرّفات أيضًا في عبارات <code>export from</code>، وكوسيطة للتعبير <code>import()</code>.</p><p>هناك ثلاثة أنواع من المُعرّفات:</p><ul><li><em>المُعرّفات النسبية</em> مثل <code>&#39;./startup.js&#39;</code> أو <code>&#39;../config.mjs&#39;</code>. تشير إلى مسار نسبي لموقع الملف الذي يتم الاستيراد منه. <em>امتداد الملف ضروري دائمًا لهذه.</em></li><li><em>المُعرّفات المجردة</em> مثل <code>&#39;some-package&#39;</code> أو <code>&#39;some-package/shuffle&#39;</code>. يمكن أن تشير إلى نقطة الدخول الرئيسية لحزمة باسم الحزمة، أو وحدة نمطية مميزة محددة داخل حزمة مسبوقة باسم الحزمة وفقًا للأمثلة على التوالي. <em>يجب تضمين امتداد الملف فقط للحزم بدون حقل <a href="packages.html#exports"><code>&quot;exports&quot;</code></a>.</em></li><li><em>المُعرّفات المطلقة</em> مثل <code>&#39;file:///opt/nodejs/config.js&#39;</code>. تشير مباشرة وصراحة إلى مسار كامل.</li></ul><p>تتم معالجة حلول المُعرّفات المجردة بواسطة <a href="/ar/nodejs/api/esm#resolution-algorithm-specification">خوارزمية حل وتحميل الوحدة النمطية Node.js</a>. يتم دائمًا حل جميع حلول المُعرّفات الأخرى فقط باستخدام الدلالات القياسية للحل النسبي <a href="https://url.spec.whatwg.org/" target="_blank" rel="noreferrer">URL</a>.</p><p>كما هو الحال في CommonJS، يمكن الوصول إلى ملفات الوحدة النمطية داخل الحزم عن طريق إلحاق مسار باسم الحزمة ما لم يكن <a href="/ar/nodejs/api/packages#nodejs-packagejson-field-definitions"><code>package.json</code></a> الخاص بالحزمة يحتوي على حقل <a href="/ar/nodejs/api/packages#exports"><code>&quot;exports&quot;</code></a>، وفي هذه الحالة لا يمكن الوصول إلى الملفات داخل الحزم إلا عبر المسارات المحددة في <a href="/ar/nodejs/api/packages#exports"><code>&quot;exports&quot;</code></a>.</p><p>للحصول على تفاصيل حول قواعد حل الحزم هذه التي تنطبق على المُعرّفات المجردة في حل الوحدة النمطية Node.js، راجع <a href="/ar/nodejs/api/packages">وثائق الحزم</a>.</p><h3 id="mandatory-file-extensions" tabindex="-1">امتدادات الملفات الإلزامية <a class="header-anchor" href="#mandatory-file-extensions" aria-label="Permalink to “امتدادات الملفات الإلزامية”">​</a></h3><p>يجب توفير امتداد ملف عند استخدام الكلمة الأساسية <code>import</code> لحل المحددات النسبية أو المطلقة. يجب أيضًا تحديد فهارس الدليل بالكامل (مثل <code>&#39;./startup/index.js&#39;</code>).</p><p>يتطابق هذا السلوك مع كيفية عمل <code>import</code> في بيئات المتصفح، بافتراض وجود خادم تم تكوينه بشكل نموذجي.</p><h3 id="urls" tabindex="-1">عناوين URL <a class="header-anchor" href="#urls" aria-label="Permalink to “عناوين URL”">​</a></h3><p>يتم حل وحدات ES النمطية وتخزينها مؤقتًا كعناوين URL. هذا يعني أنه يجب <a href="/ar/nodejs/api/url#percent-encoding-in-urls">تشفير الأحرف الخاصة بالنسبة المئوية</a>، مثل <code>#</code> مع <code>%23</code> و <code>؟</code> مع <code>%3F</code>.</p><p>يتم دعم مخططات عناوين URL <code>file:</code> و <code>node:</code> و <code>data:</code>. المحدد مثل <code>&#39;https://example.com/app.js&#39;</code> غير مدعوم أصليًا في Node.js ما لم يتم استخدام <a href="/ar/nodejs/api/module#import-from-https">محمل HTTPS مخصص</a>.</p><h4 id="file-urls" tabindex="-1">عناوين URL <code>file:</code> <a class="header-anchor" href="#file-urls" aria-label="Permalink to “عناوين URL file:”">​</a></h4><p>يتم تحميل الوحدات النمطية عدة مرات إذا كان لمحدد <code>import</code> المستخدم لحلها استعلام أو جزء مختلف.</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;./foo.mjs?query=1&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// يقوم بتحميل ./foo.mjs مع الاستعلام &quot;?query=1&quot;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;./foo.mjs?query=2&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// يقوم بتحميل ./foo.mjs مع الاستعلام &quot;?query=2&quot;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>يمكن الإشارة إلى جذر وحدة التخزين عبر <code>/</code> أو <code>//</code> أو <code>file:///</code>. نظرًا للاختلافات بين <a href="https://url.spec.whatwg.org/" target="_blank" rel="noreferrer">URL</a> وحل المسار (مثل تفاصيل ترميز النسبة المئوية)، يوصى باستخدام <a href="/ar/nodejs/api/url#urlpathtofileurlpath-options">url.pathToFileURL</a> عند استيراد مسار.</p><h4 id="data-imports" tabindex="-1">عمليات استيراد <code>data:</code> <a class="header-anchor" href="#data-imports" aria-label="Permalink to “عمليات استيراد data:”">​</a></h4><p><strong>تمت الإضافة في: v12.10.0</strong></p><p>يتم دعم <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/Data_URIs" target="_blank" rel="noreferrer">عناوين URL لـ <code>data:</code>‎</a> للاستيراد مع أنواع MIME التالية:</p><ul><li><code>text/javascript</code> لوحدات ES النمطية</li><li><code>application/json</code> لـ JSON</li><li><code>application/wasm</code> لـ Wasm</li></ul><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;data:text/javascript,console.log(&quot;hello!&quot;);&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> _ </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;data:application/json,&quot;world!&quot;&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> with</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { type: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;json&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> };</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>تحل عناوين URL لـ <code>data:</code> <a href="/ar/nodejs/api/esm#terminology">المحددات المجردة</a> فقط للوحدات النمطية المضمنة و <a href="/ar/nodejs/api/esm#terminology">المحددات المطلقة</a>. حل <a href="/ar/nodejs/api/esm#terminology">المحددات النسبية</a> لا يعمل لأن <code>data:</code> ليس <a href="https://url.spec.whatwg.org/#special-scheme" target="_blank" rel="noreferrer">مخططًا خاصًا</a>. على سبيل المثال، محاولة تحميل <code>./foo</code> من <code>data:text/javascript,import &quot;./foo&quot;;</code> تفشل في الحل لأنه لا يوجد مفهوم للحل النسبي لعناوين URL لـ <code>data:</code>.</p><h4 id="node-imports" tabindex="-1"><code>node:</code> استيراد <a class="header-anchor" href="#node-imports" aria-label="Permalink to “node: استيراد”">​</a></h4><div class="info custom-block"><p class="custom-block-title">[تاريخ]</p><table tabindex="0"><thead><tr><th>الإصدار</th><th>التغييرات</th></tr></thead><tbody><tr><td>v16.0.0, v14.18.0</td><td>تمت إضافة دعم استيراد <code>node:</code> إلى <code>require(...)</code>.</td></tr><tr><td>v14.13.1, v12.20.0</td><td>تمت الإضافة في: v14.13.1, v12.20.0</td></tr></tbody></table></div><p>يتم دعم عناوين URL <code>node:</code> كوسيلة بديلة لتحميل وحدات Node.js المدمجة. يسمح مخطط عنوان URL هذا بالإشارة إلى الوحدات المدمجة بواسطة سلاسل URL مطلقة صالحة.</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> fs </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;node:fs/promises&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h2 id="import-attributes" tabindex="-1">سمات الاستيراد <a class="header-anchor" href="#import-attributes" aria-label="Permalink to “سمات الاستيراد”">​</a></h2><div class="info custom-block"><p class="custom-block-title">[تاريخ]</p><table tabindex="0"><thead><tr><th>الإصدار</th><th>التغييرات</th></tr></thead><tbody><tr><td>v21.0.0, v20.10.0, v18.20.0</td><td>التبديل من تأكيدات الاستيراد إلى سمات الاستيراد.</td></tr><tr><td>v17.1.0, v16.14.0</td><td>تمت الإضافة في: v17.1.0, v16.14.0</td></tr></tbody></table></div><div class="tip custom-block"><p class="custom-block-title">[مستقر: 2 - مستقر]</p><p><a href="/ar/nodejs/api/documentation#stability-index">مستقر: 2</a> <a href="/ar/nodejs/api/documentation#stability-index">الاستقرار: 2</a> - مستقر</p></div><p><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/import/with" target="_blank" rel="noreferrer">سمات الاستيراد</a> هي صيغة مضمنة لعبارات استيراد الوحدة لتمرير المزيد من المعلومات جنبًا إلى جنب مع محدد الوحدة النمطية.</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> fooData </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;./foo.json&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> with</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { type: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;json&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> };</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">default</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">barData</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  await</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;./bar.json&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, { with: { type: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;json&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> } });</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>يدعم Node.js سمة <code>type</code> فقط، والتي يدعم القيم التالية لها:</p><table tabindex="0"><thead><tr><th>السمة <code>type</code></th><th>مطلوب لـ</th></tr></thead><tbody><tr><td><code>&#39;json&#39;</code></td><td><a href="/ar/nodejs/api/esm#json-modules">وحدات JSON</a></td></tr><tr><td>سمة <code>type: &#39;json&#39;</code> إلزامية عند استيراد وحدات JSON.</td><td></td></tr></tbody></table><h2 id="built-in-modules" tabindex="-1">الوحدات المدمجة <a class="header-anchor" href="#built-in-modules" aria-label="Permalink to “الوحدات المدمجة”">​</a></h2><p><a href="/ar/nodejs/api/modules#built-in-modules">الوحدات المدمجة</a> توفر تصديرات مسماة لواجهة برمجة التطبيقات العامة الخاصة بها. يتم توفير تصدير افتراضي أيضًا وهو قيمة تصديرات CommonJS. يمكن استخدام التصدير الافتراضي، من بين أمور أخرى، لتعديل التصديرات المسماة. يتم تحديث التصديرات المسماة للوحدات المدمجة فقط عن طريق استدعاء <a href="/ar/nodejs/api/module#modulesyncbuiltinesmexports"><code>module.syncBuiltinESMExports()</code></a>.</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> EventEmitter </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;node:events&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> e</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> EventEmitter</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { readFile } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;node:fs&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">readFile</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;./foo.txt&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">err</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">source</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (err) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(err);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">else</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(source);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> fs, { readFileSync } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;node:fs&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { syncBuiltinESMExports } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;node:module&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { Buffer } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;node:buffer&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">fs.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">readFileSync</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Buffer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;Hello, ESM&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">syncBuiltinESMExports</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">fs.readFileSync </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">===</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> readFileSync;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h2 id="import-expressions" tabindex="-1">تعبيرات <code>import()</code> <a class="header-anchor" href="#import-expressions" aria-label="Permalink to “تعبيرات import()”">​</a></h2><p>يتم دعم <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/import" target="_blank" rel="noreferrer"><code>import()</code></a> الديناميكي في كل من وحدات CommonJS ووحدات ES. في وحدات CommonJS، يمكن استخدامه لتحميل وحدات ES.</p><h2 id="importmeta" tabindex="-1"><code>import.meta</code> <a class="header-anchor" href="#importmeta" aria-label="Permalink to “import.meta”">​</a></h2><ul><li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noreferrer">&lt;Object&gt;</a></li></ul><p>خاصية التعريف الوصفي <code>import.meta</code> هي <code>Object</code> تحتوي على الخصائص التالية. وهي مدعومة فقط في وحدات ES.</p><h3 id="importmetadirname" tabindex="-1"><code>import.meta.dirname</code> <a class="header-anchor" href="#importmetadirname" aria-label="Permalink to “import.meta.dirname”">​</a></h3><p><strong>أضيف في: v21.2.0، v20.11.0</strong></p><div class="warning custom-block"><p class="custom-block-title">[مستقر: 1 - تجريبي]</p><p><a href="/ar/nodejs/api/documentation#stability-index">مستقر: 1</a> <a href="/ar/nodejs/api/documentation#stability-index">الاستقرار: 1</a>.2 - مرشح إصدار</p></div><ul><li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> اسم الدليل للوحدة النمطية الحالية. هذا هو نفسه <a href="/ar/nodejs/api/path#pathdirnamepath"><code>path.dirname()</code></a> الخاص بـ <a href="/ar/nodejs/api/esm#importmetafilename"><code>import.meta.filename</code></a>.</li></ul><h3 id="importmetafilename" tabindex="-1"><code>import.meta.filename</code> <a class="header-anchor" href="#importmetafilename" aria-label="Permalink to “import.meta.filename”">​</a></h3><p><strong>أضيف في: v21.2.0، v20.11.0</strong></p><div class="warning custom-block"><p class="custom-block-title">[مستقر: 1 - تجريبي]</p><p><a href="/ar/nodejs/api/documentation#stability-index">مستقر: 1</a> <a href="/ar/nodejs/api/documentation#stability-index">الاستقرار: 1</a>.2 - مرشح إصدار</p></div><ul><li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> المسار المطلق الكامل واسم الملف للوحدة النمطية الحالية، مع حل الروابط الرمزية.</li><li>هذا هو نفسه <a href="/ar/nodejs/api/url#urlfileurltopathurl-options"><code>url.fileURLToPath()</code></a> الخاص بـ <a href="/ar/nodejs/api/esm#importmetaurl"><code>import.meta.url</code></a>.</li></ul><h3 id="importmetaurl" tabindex="-1"><code>import.meta.url</code> <a class="header-anchor" href="#importmetaurl" aria-label="Permalink to “import.meta.url”">​</a></h3><ul><li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> عنوان URL المطلق <code>file:</code> للوحدة النمطية.</li></ul><p>يتم تعريف هذا تمامًا كما هو الحال في المتصفحات التي توفر عنوان URL لملف الوحدة النمطية الحالي.</p><p>يمكّن هذا أنماطًا مفيدة مثل تحميل الملفات النسبية:</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { readFileSync } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;node:fs&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> buffer</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> readFileSync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> URL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;./data.proto&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">meta</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.url));</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="importmetaresolvespecifier" tabindex="-1"><code>import.meta.resolve(specifier)</code> <a class="header-anchor" href="#importmetaresolvespecifier" aria-label="Permalink to “import.meta.resolve(specifier)”">​</a></h3><div class="info custom-block"><p class="custom-block-title">[السجل]</p><table tabindex="0"><thead><tr><th>الإصدار</th><th>التغييرات</th></tr></thead><tbody><tr><td>v20.6.0, v18.19.0</td><td>لم يعد خلف علامة CLI <code>--experimental-import-meta-resolve</code>، باستثناء المعلمة <code>parentURL</code> غير القياسية.</td></tr><tr><td>v20.6.0, v18.19.0</td><td>لم تعد واجهة برمجة التطبيقات هذه تطرح خطأً عند استهداف عناوين URL لـ <code>file:</code> التي لا ترتبط بملف موجود على نظام الملفات المحلي.</td></tr><tr><td>v20.0.0, v18.19.0</td><td>تُرجع واجهة برمجة التطبيقات هذه الآن سلسلة بشكل متزامن بدلاً من وعد.</td></tr><tr><td>v16.2.0, v14.18.0</td><td>إضافة دعم لكائن WHATWG <code>URL</code> إلى المعلمة <code>parentURL</code>.</td></tr><tr><td>v13.9.0, v12.16.2</td><td>أضيف في: v13.9.0, v12.16.2</td></tr></tbody></table></div><div class="warning custom-block"><p class="custom-block-title">[مستقر: 1 - تجريبي]</p><p><a href="/ar/nodejs/api/documentation#stability-index">مستقر: 1</a> <a href="/ar/nodejs/api/documentation#stability-index">الاستقرار: 1</a>.2 - مرشح إصدار</p></div><ul><li><code>specifier</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> محدد الوحدة النمطية لحلها بالنسبة إلى الوحدة النمطية الحالية.</li><li>Returns: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> سلسلة عنوان URL المطلق التي سيتم حل المحدد إليها.</li></ul><p><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/import.meta/resolve" target="_blank" rel="noreferrer"><code>import.meta.resolve</code></a> هي دالة حل نسبي للوحدة النمطية محصورة في كل وحدة نمطية، وتعيد سلسلة عنوان URL.</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> dependencyAsset</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">meta</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">resolve</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;component-lib/asset.css&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// file:///app/node_modules/component-lib/asset.css</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">meta</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">resolve</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;./dep.js&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// file:///app/dep.js</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>يتم دعم جميع ميزات حل الوحدة النمطية Node.js. تخضع عمليات حل التبعيات لعمليات حل الصادرات المسموح بها داخل الحزمة.</p><p><strong>محاذير</strong>:</p><ul><li>يمكن أن يؤدي هذا إلى عمليات نظام ملفات متزامنة، والتي يمكن أن تؤثر على الأداء بشكل مشابه لـ <code>require.resolve</code>.</li><li>هذه الميزة غير متوفرة داخل أدوات التحميل المخصصة (ستؤدي إلى طريق مسدود).</li></ul><p><strong>واجهة برمجة تطبيقات غير قياسية</strong>:</p><p>عند استخدام علامة <code>--experimental-import-meta-resolve</code>، تقبل هذه الدالة وسيطة ثانية:</p><ul><li><code>parent</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="/ar/nodejs/api/url#the-whatwg-url-api">&lt;URL&gt;</a> عنوان URL اختياري للوحدة النمطية الأصلية المطلقة للحل منه. <strong>افتراضي:</strong> <code>import.meta.url</code></li></ul><h2 id="interoperability-with-commonjs" tabindex="-1">التوافق التشغيلي مع CommonJS <a class="header-anchor" href="#interoperability-with-commonjs" aria-label="Permalink to “التوافق التشغيلي مع CommonJS”">​</a></h2><h3 id="import-statements" tabindex="-1">عبارات <code>import</code> <a class="header-anchor" href="#import-statements" aria-label="Permalink to “عبارات import”">​</a></h3><p>يمكن لعبارة <code>import</code> أن تشير إلى وحدة ES أو وحدة CommonJS. عبارات <code>import</code> مسموح بها فقط في وحدات ES، ولكن تعابير <a href="/ar/nodejs/api/esm#import-expressions"><code>import()</code></a> الديناميكية مدعومة في CommonJS لتحميل وحدات ES.</p><p>عند استيراد <a href="/ar/nodejs/api/esm#commonjs-namespaces">وحدات CommonJS</a>، يتم توفير كائن <code>module.exports</code> كتصدير افتراضي. قد تكون التصديرات المسماة متاحة، ويتم توفيرها عن طريق التحليل الثابت كراحة لتحسين التوافق مع النظام البيئي.</p><h3 id="require" tabindex="-1"><code>require</code> <a class="header-anchor" href="#require" aria-label="Permalink to “require”">​</a></h3><p>وحدة CommonJS <code>require</code> تدعم حاليًا فقط تحميل وحدات ES المتزامنة (أي وحدات ES التي لا تستخدم <code>await</code> على المستوى الأعلى).</p><p>راجع <a href="/ar/nodejs/api/modules#loading-ecmascript-modules-using-require">تحميل وحدات ECMAScript باستخدام <code>require()</code></a> للحصول على التفاصيل.</p><h3 id="commonjs-namespaces" tabindex="-1">مساحات أسماء CommonJS <a class="header-anchor" href="#commonjs-namespaces" aria-label="Permalink to “مساحات أسماء CommonJS”">​</a></h3><div class="info custom-block"><p class="custom-block-title">[تاريخ]</p><table tabindex="0"><thead><tr><th>الإصدار</th><th>التغييرات</th></tr></thead><tbody><tr><td>v23.0.0</td><td>تمت إضافة علامة تصدير <code>&#39;module.exports&#39;</code> إلى مساحات أسماء CJS.</td></tr><tr><td>v14.13.0</td><td>تمت الإضافة في: v14.13.0</td></tr></tbody></table></div><p>تتكون وحدات CommonJS من كائن <code>module.exports</code> يمكن أن يكون من أي نوع.</p><p>لدعم ذلك، عند استيراد CommonJS من وحدة ECMAScript، يتم إنشاء غلاف مساحة اسم لوحدة CommonJS، والذي يوفر دائمًا مفتاح تصدير <code>default</code> يشير إلى قيمة <code>module.exports</code> في CommonJS.</p><p>بالإضافة إلى ذلك، يتم إجراء تحليل ثابت استرشادي على نص المصدر لوحدة CommonJS للحصول على أفضل قائمة ثابتة ممكنة للتصديرات لتقديمها في مساحة الاسم من القيم الموجودة في <code>module.exports</code>. هذا ضروري لأن مساحات الأسماء هذه يجب أن يتم إنشاؤها قبل تقييم وحدة CJS.</p><p>توفر كائنات مساحة اسم CommonJS هذه أيضًا تصدير <code>default</code> كتصدير مسمى <code>&#39;module.exports&#39;</code>، للإشارة بشكل لا لبس فيه إلى أن تمثيلها في CommonJS يستخدم هذه القيمة، وليس قيمة مساحة الاسم. هذا يعكس دلالات معالجة اسم التصدير <code>&#39;module.exports&#39;</code> في دعم التوافق التشغيلي <a href="/ar/nodejs/api/modules#loading-ecmascript-modules-using-require"><code>require(esm)</code></a>.</p><p>عند استيراد وحدة CommonJS، يمكن استيرادها بشكل موثوق باستخدام استيراد ES module الافتراضي أو صيغة السكر المقابلة لها:</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">default</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> as</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> cjs } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;cjs&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// مطابق لما ورد أعلاه</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> cjsSugar </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;cjs&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(cjs);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(cjs </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">===</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> cjsSugar);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// يطبع:</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//   &lt;module.exports&gt;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//   true</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>يمكن ملاحظة كائن مساحة اسم الوحدة الغريبة هذا مباشرةً إما عند استخدام <code>import * as m from &#39;cjs&#39;</code> أو استيراد ديناميكي:</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> *</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> as</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> m </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;cjs&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(m);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(m </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">===</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;cjs&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">));</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// يطبع:</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//   [Module] { default: &lt;module.exports&gt;, &#39;module.exports&#39;: &lt;module.exports&gt; }</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//   true</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>لتحسين التوافق مع الاستخدام الحالي في النظام البيئي JS، تحاول Node.js بالإضافة إلى ذلك تحديد التصديرات المسماة CommonJS لكل وحدة CommonJS مستوردة لتوفيرها كتصديرات ES module منفصلة باستخدام عملية تحليل ثابت.</p><p>على سبيل المثال، ضع في اعتبارك وحدة CommonJS مكتوبة:</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// cjs.cjs</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">exports</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.name </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;exported&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>تدعم الوحدة النمطية السابقة عمليات الاستيراد المسماة في وحدات ES:</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { name } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;./cjs.cjs&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(name);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// يطبع: &#39;exported&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> cjs </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;./cjs.cjs&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(cjs);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// يطبع: { name: &#39;exported&#39; }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> *</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> as</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> m </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;./cjs.cjs&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(m);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// يطبع:</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//   [Module] {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//     default: { name: &#39;exported&#39; },</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//     &#39;module.exports&#39;: { name: &#39;exported&#39; },</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//     name: &#39;exported&#39;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//   }</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p>كما يمكن أن نرى من المثال الأخير لكائن مساحة اسم الوحدة النمطية الغريبة الذي يتم تسجيله، يتم نسخ تصدير <code>name</code> من كائن <code>module.exports</code> ويتم تعيينه مباشرةً في مساحة اسم ES module عند استيراد الوحدة النمطية.</p><p>لا يتم الكشف عن تحديثات الربط المباشر أو التصديرات الجديدة المضافة إلى <code>module.exports</code> لهذه التصديرات المسماة.</p><p>يعتمد اكتشاف التصديرات المسماة على أنماط بناء الجملة الشائعة ولكنه لا يكتشف دائمًا التصديرات المسماة بشكل صحيح. في هذه الحالات، يمكن أن يكون استخدام نموذج الاستيراد الافتراضي الموضح أعلاه خيارًا أفضل.</p><p>يغطي الكشف عن التصديرات المسماة العديد من أنماط التصدير الشائعة وأنماط إعادة التصدير ومخرجات أدوات البناء والمترجمات. راجع <a href="https://github.com/nodejs/cjs-module-lexer/tree/1.2.2" target="_blank" rel="noreferrer">cjs-module-lexer</a> للحصول على الدلالات الدقيقة التي تم تنفيذها.</p><h3 id="differences-between-es-modules-and-commonjs" tabindex="-1">الاختلافات بين وحدات ES و CommonJS <a class="header-anchor" href="#differences-between-es-modules-and-commonjs" aria-label="Permalink to “الاختلافات بين وحدات ES و CommonJS”">​</a></h3><h4 id="no-require-exports-or-moduleexports" tabindex="-1">لا يوجد <code>require</code> أو <code>exports</code> أو <code>module.exports</code> <a class="header-anchor" href="#no-require-exports-or-moduleexports" aria-label="Permalink to “لا يوجد require أو exports أو module.exports”">​</a></h4><p>في معظم الحالات، يمكن استخدام <code>import</code> لوحدة ES لتحميل وحدات CommonJS.</p><p>إذا لزم الأمر، يمكن إنشاء دالة <code>require</code> داخل وحدة ES باستخدام <a href="/ar/nodejs/api/module#modulecreaterequirefilename"><code>module.createRequire()</code></a>.</p><h4 id="no-__filename-or-__dirname" tabindex="-1">لا يوجد <code>__filename</code> أو <code>__dirname</code> <a class="header-anchor" href="#no-__filename-or-__dirname" aria-label="Permalink to “لا يوجد __filename أو __dirname”">​</a></h4><p>هذه المتغيرات CommonJS غير متوفرة في وحدات ES.</p><p>يمكن تكرار حالات استخدام <code>__filename</code> و <code>__dirname</code> عبر <a href="/ar/nodejs/api/esm#importmetafilename"><code>import.meta.filename</code></a> و <a href="/ar/nodejs/api/esm#importmetadirname"><code>import.meta.dirname</code></a>.</p><h4 id="no-addon-loading" tabindex="-1">لا يوجد تحميل للملحقات <a class="header-anchor" href="#no-addon-loading" aria-label="Permalink to “لا يوجد تحميل للملحقات”">​</a></h4><p><a href="/ar/nodejs/api/addons">الملحقات</a> غير مدعومة حاليًا مع استيراد وحدات ES.</p><p>يمكن بدلاً من ذلك تحميلها باستخدام <a href="/ar/nodejs/api/module#modulecreaterequirefilename"><code>module.createRequire()</code></a> أو <a href="/ar/nodejs/api/process#processdlopenmodule-filename-flags"><code>process.dlopen</code></a>.</p><h4 id="no-requireresolve" tabindex="-1">لا يوجد <code>require.resolve</code> <a class="header-anchor" href="#no-requireresolve" aria-label="Permalink to “لا يوجد require.resolve”">​</a></h4><p>يمكن التعامل مع الدقة النسبية عبر <code>new URL(&#39;./local&#39;, import.meta.url)</code>.</p><p>للحصول على بديل كامل لـ <code>require.resolve</code>، يوجد واجهة برمجة التطبيقات <a href="/ar/nodejs/api/esm#importmetaresolvespecifier">import.meta.resolve</a>.</p><p>بدلاً من ذلك، يمكن استخدام <code>module.createRequire()</code>.</p><h4 id="no-node_path" tabindex="-1">لا يوجد <code>NODE_PATH</code> <a class="header-anchor" href="#no-node_path" aria-label="Permalink to “لا يوجد NODE_PATH”">​</a></h4><p><code>NODE_PATH</code> ليس جزءًا من حل محددات <code>import</code>. يرجى استخدام الروابط الرمزية إذا كانت هذه السلوكيات مطلوبة.</p><h4 id="no-requireextensions" tabindex="-1">لا يوجد <code>require.extensions</code> <a class="header-anchor" href="#no-requireextensions" aria-label="Permalink to “لا يوجد require.extensions”">​</a></h4><p><code>require.extensions</code> لا يتم استخدامه بواسطة <code>import</code>. يمكن لخطافات تخصيص الوحدة النمطية توفير بديل.</p><h4 id="no-requirecache" tabindex="-1">لا يوجد <code>require.cache</code> <a class="header-anchor" href="#no-requirecache" aria-label="Permalink to “لا يوجد require.cache”">​</a></h4><p><code>require.cache</code> لا يتم استخدامه بواسطة <code>import</code> لأن محمل وحدة ES لديه ذاكرة تخزين مؤقت منفصلة خاصة به.</p><h2 id="json-modules" tabindex="-1">وحدات JSON <a class="header-anchor" href="#json-modules" aria-label="Permalink to “وحدات JSON”">​</a></h2><div class="info custom-block"><p class="custom-block-title">[التاريخ]</p><table tabindex="0"><thead><tr><th>الإصدار</th><th>التغييرات</th></tr></thead><tbody><tr><td>v23.1.0</td><td>وحدات JSON لم تعد تجريبية.</td></tr></tbody></table></div><div class="tip custom-block"><p class="custom-block-title">[مستقر: 2 - مستقر]</p><p><a href="/ar/nodejs/api/documentation#stability-index">مستقر: 2</a> <a href="/ar/nodejs/api/documentation#stability-index">الاستقرار: 2</a> - مستقر</p></div><p>يمكن الإشارة إلى ملفات JSON بواسطة <code>import</code>:</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> packageConfig </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;./package.json&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> with</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { type: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;json&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> };</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>بناء الجملة <code>with { type: &#39;json&#39; }</code> إلزامي؛ راجع <a href="/ar/nodejs/api/esm#import-attributes">سمات الاستيراد</a>.</p><p>يعرض JSON المستورد فقط تصدير <code>default</code>. لا يوجد دعم للتصديرات المسماة. يتم إنشاء إدخال ذاكرة تخزين مؤقت في ذاكرة التخزين المؤقت CommonJS لتجنب الازدواجية. يتم إرجاع نفس الكائن في CommonJS إذا تم بالفعل استيراد وحدة JSON من نفس المسار.</p><h2 id="wasm-modules" tabindex="-1">وحدات Wasm <a class="header-anchor" href="#wasm-modules" aria-label="Permalink to “وحدات Wasm”">​</a></h2><div class="warning custom-block"><p class="custom-block-title">[مستقر: 1 - تجريبي]</p><p><a href="/ar/nodejs/api/documentation#stability-index">مستقر: 1</a> <a href="/ar/nodejs/api/documentation#stability-index">الاستقرار: 1</a> - تجريبي</p></div><p>يتم دعم استيراد وحدات WebAssembly تحت علامة <code>--experimental-wasm-modules</code>، مما يسمح باستيراد أي ملفات <code>.wasm</code> كوحدات نمطية عادية مع دعم أيضًا عمليات استيراد الوحدات الخاصة بها.</p><p>يتماشى هذا التكامل مع <a href="https://github.com/webassembly/esm-integration" target="_blank" rel="noreferrer">اقتراح تكامل وحدة ES لـ WebAssembly</a>.</p><p>على سبيل المثال، يحتوي <code>index.mjs</code> على:</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> *</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> as</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> M </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;./module.wasm&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">M</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>يتم تنفيذه تحت:</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">node</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --experimental-wasm-modules</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> index.mjs</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>سيوفر واجهة التصدير لإنشاء <code>module.wasm</code>.</p><h2 id="top-level-await" tabindex="-1">المستوى الأعلى <code>await</code> <a class="header-anchor" href="#top-level-await" aria-label="Permalink to “المستوى الأعلى await”">​</a></h2><p><strong>أُضيف في: الإصدار 14.8.0</strong></p><p>يمكن استخدام الكلمة المفتاحية <code>await</code> في نص المستوى الأعلى لوحدة ECMAScript.</p><p>بافتراض وجود <code>a.mjs</code> مع</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> five</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> Promise</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">resolve</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">5</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>و <code>b.mjs</code> مع</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { five } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;./a.mjs&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(five); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// يسجل \`5\`</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">node</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> b.mjs</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # يعمل</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>إذا لم يتم حل تعبير <code>await</code> ذي المستوى الأعلى أبدًا، فستخرج عملية <code>node</code> برمز <a href="/ar/nodejs/api/process#exit-codes">حالة الخروج</a> <code>13</code>.</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { spawn } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;node:child_process&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { execPath } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;node:process&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">spawn</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(execPath, [</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  &#39;--input-type=module&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  &#39;--eval&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // وعد لا يتم حله أبدًا:</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  &#39;await new Promise(() =&gt; {})&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">once</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;exit&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">code</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(code); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// يسجل \`13\`</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h2 id="loaders" tabindex="-1">أدوات التحميل <a class="header-anchor" href="#loaders" aria-label="Permalink to “أدوات التحميل”">​</a></h2><p>توجد الآن وثائق أدوات التحميل السابقة في <a href="/ar/nodejs/api/module#customization-hooks">الوحدات: خطافات التخصيص</a>.</p><h2 id="resolution-and-loading-algorithm" tabindex="-1">خوارزمية التحليل والتحميل <a class="header-anchor" href="#resolution-and-loading-algorithm" aria-label="Permalink to “خوارزمية التحليل والتحميل”">​</a></h2><h3 id="features" tabindex="-1">الميزات <a class="header-anchor" href="#features" aria-label="Permalink to “الميزات”">​</a></h3><p>يحتوي المحلل الافتراضي على الخصائص التالية:</p><ul><li>التحليل المستند إلى FileURL كما هو مستخدم من قبل وحدات ES النمطية</li><li>تحليل URL النسبي والمطلق</li><li>لا توجد امتدادات افتراضية</li><li>لا توجد مجلدات رئيسية</li><li>البحث عن تحليل حزمة المحدد العارية من خلال node_modules</li><li>لا يفشل في الامتدادات أو البروتوكولات غير المعروفة</li><li>يمكنه اختياريًا توفير تلميح لتنسيق مرحلة التحميل</li></ul><p>تحتوي أداة التحميل الافتراضية على الخصائص التالية</p><ul><li>دعم تحميل الوحدات النمطية المضمنة عبر عناوين URL <code>node:</code></li><li>دعم تحميل الوحدة النمطية &quot;المضمنة&quot; عبر عناوين URL <code>data:</code></li><li>دعم تحميل الوحدة النمطية <code>file:</code></li><li>يفشل في أي بروتوكول URL آخر</li><li>يفشل في الامتدادات غير المعروفة لتحميل <code>file:</code> (يدعم فقط <code>.cjs</code> و <code>.js</code> و <code>.mjs</code>)</li></ul><h3 id="resolution-algorithm" tabindex="-1">خوارزمية التحليل <a class="header-anchor" href="#resolution-algorithm" aria-label="Permalink to “خوارزمية التحليل”">​</a></h3><p>يتم توفير خوارزمية تحميل مُعرّف وحدة ES من خلال طريقة <strong>ESM_RESOLVE</strong> الموضحة أدناه. وهي تُرجع عنوان URL الذي تم تحليله لمُعرّف الوحدة بالنسبة إلى parentURL.</p><p>تحدد خوارزمية التحليل عنوان URL الكامل الذي تم تحليله لتحميل الوحدة، بالإضافة إلى تنسيق الوحدة المقترح. لا تحدد خوارزمية التحليل ما إذا كان يمكن تحميل بروتوكول عنوان URL الذي تم تحليله، أو ما إذا كانت امتدادات الملفات مسموحًا بها، وبدلاً من ذلك، يتم تطبيق هذه التحققات بواسطة Node.js أثناء مرحلة التحميل (على سبيل المثال، إذا طُلب منها تحميل عنوان URL يحتوي على بروتوكول ليس <code>file:</code> أو <code>data:</code> أو <code>node:</code>).</p><p>تحاول الخوارزمية أيضًا تحديد تنسيق الملف بناءً على الامتداد (راجع خوارزمية <code>ESM_FILE_FORMAT</code> أدناه). إذا لم تتعرف على امتداد الملف (على سبيل المثال، إذا لم يكن <code>.mjs</code> أو <code>.cjs</code> أو <code>.json</code>)، فسيتم إرجاع تنسيق <code>undefined</code>، والذي سيؤدي إلى حدوث خطأ أثناء مرحلة التحميل.</p><p>يتم توفير خوارزمية تحديد تنسيق وحدة عنوان URL الذي تم تحليله بواسطة <strong>ESM_FILE_FORMAT</strong>، والتي تُرجع تنسيق الوحدة الفريد لأي ملف. يتم إرجاع تنسيق <em>&quot;module&quot;</em> لوحدة ECMAScript، بينما يتم استخدام تنسيق <em>&quot;commonjs&quot;</em> للإشارة إلى التحميل من خلال أداة تحميل CommonJS القديمة. يمكن توسيع التنسيقات الإضافية مثل <em>&quot;addon&quot;</em> في التحديثات المستقبلية.</p><p>في الخوارزميات التالية، يتم نشر جميع أخطاء الروتينات الفرعية كأخطاء في هذه الروتينات ذات المستوى الأعلى ما لم يُذكر خلاف ذلك.</p><p><em>defaultConditions</em> هي مصفوفة اسم البيئة الشرطية، <code>[&quot;node&quot;, &quot;import&quot;]</code>.</p><p>يمكن أن تُظهر أداة التحليل الأخطاء التالية:</p><ul><li><em>مُعرّف وحدة غير صالح</em>: مُعرّف الوحدة هو عنوان URL غير صالح، أو اسم حزمة أو مُعرّف مسار فرعي للحزمة.</li><li><em>تكوين حزمة غير صالح</em>: تكوين package.json غير صالح أو يحتوي على تكوين غير صالح.</li><li><em>هدف حزمة غير صالح</em>: تحدد صادرات الحزمة أو عمليات الاستيراد الخاصة بها وحدة هدف للحزمة وهي نوع غير صالح أو هدف سلسلة.</li><li><em>مسار الحزمة غير مُصدَّر</em>: لا تحدد صادرات الحزمة أو تسمح بمسار فرعي مستهدف في الحزمة للوحدة المحددة.</li><li><em>استيراد الحزمة غير مُعرَّف</em>: لا تحدد عمليات استيراد الحزمة المُعرّف.</li><li><em>الوحدة غير موجودة</em>: الحزمة أو الوحدة المطلوبة غير موجودة.</li><li><em>استيراد دليل غير مدعوم</em>: يتوافق المسار الذي تم تحليله مع دليل، وهو ليس هدفًا مدعومًا لعمليات استيراد الوحدات.</li></ul><h3 id="resolution-algorithm-specification" tabindex="-1">مواصفات خوارزمية التحليل <a class="header-anchor" href="#resolution-algorithm-specification" aria-label="Permalink to “مواصفات خوارزمية التحليل”">​</a></h3><p><strong>ESM_RESOLVE</strong>(<em>المحدد</em>, <em>عنوان URL الأصلي</em>)</p><p><strong>PACKAGE_RESOLVE</strong>(<em>محدد الحزمة</em>, <em>عنوان URL الأصلي</em>)</p><p><strong>PACKAGE_SELF_RESOLVE</strong>(<em>اسم الحزمة</em>, <em>المسار الفرعي للحزمة</em>, <em>عنوان URL الأصلي</em>)</p><p><strong>PACKAGE_EXPORTS_RESOLVE</strong>(<em>عنوان URL للحزمة</em>, <em>المسار الفرعي</em>, <em>الصادرات</em>, <em>الشروط</em>)</p><p><strong>PACKAGE_IMPORTS_RESOLVE</strong>(<em>المحدد</em>, <em>عنوان URL الأصلي</em>, <em>الشروط</em>)</p><p><strong>PACKAGE_IMPORTS_EXPORTS_RESOLVE</strong>(<em>مفتاح التطابق</em>, <em>كائن التطابق</em>, <em>عنوان URL للحزمة</em>, <em>هل هو استيراد</em>, <em>الشروط</em>)</p><p><strong>PATTERN_KEY_COMPARE</strong>(<em>المفتاح أ</em>, <em>المفتاح ب</em>)</p><p><strong>PACKAGE_TARGET_RESOLVE</strong>(<em>عنوان URL للحزمة</em>, <em>الهدف</em>, <em>تطابق النمط</em>, <em>هل هو استيراد</em>, <em>الشروط</em>)</p><p><strong>ESM_FILE_FORMAT</strong>(<em>عنوان URL</em>)</p><p><strong>LOOKUP_PACKAGE_SCOPE</strong>(<em>عنوان URL</em>)</p><p><strong>READ_PACKAGE_JSON</strong>(<em>عنوان URL للحزمة</em>)</p><p><strong>DETECT_MODULE_SYNTAX</strong>(<em>المصدر</em>)</p><h3 id="customizing-esm-specifier-resolution-algorithm" tabindex="-1">تخصيص خوارزمية تحليل محددات ESM <a class="header-anchor" href="#customizing-esm-specifier-resolution-algorithm" aria-label="Permalink to “تخصيص خوارزمية تحليل محددات ESM”">​</a></h3><p>توفر <a href="/ar/nodejs/api/module#customization-hooks">خطافات تخصيص الوحدة النمطية</a> آلية لتخصيص خوارزمية تحليل محددات ESM. مثال يوفر تحليلًا بنمط CommonJS لمحددات ESM هو <a href="https://github.com/nodejs/loaders-test/tree/main/commonjs-extension-resolution-loader" target="_blank" rel="noreferrer">commonjs-extension-resolution-loader</a>.</p>`,191)])}var s=e(a,[[`render`,o]]);export{i as __pageData,s as default};