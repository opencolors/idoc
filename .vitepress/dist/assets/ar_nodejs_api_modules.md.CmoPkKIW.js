import{__plugin_vue_export_helper_default as e,createElementBlock as t,createStaticVNode as n,openBlock as r}from"./chunks/plugin-vue_export-helper.Bts1mPc7.js";const i=JSON.parse(`{"title":"توثيق Node.js - الوحدات","description":"استكشف توثيق Node.js حول الوحدات، بما في ذلك CommonJS و ES modules، وكيفية إدارة التبعيات وحل الوحدات.","frontmatter":{"title":"توثيق Node.js - الوحدات","description":"استكشف توثيق Node.js حول الوحدات، بما في ذلك CommonJS و ES modules، وكيفية إدارة التبعيات وحل الوحدات.","head":[["meta",{"name":"og:title","content":"توثيق Node.js - الوحدات | Node.js - iDoc.dev"}],["meta",{"name":"og:description","content":"استكشف توثيق Node.js حول الوحدات، بما في ذلك CommonJS و ES modules، وكيفية إدارة التبعيات وحل الوحدات."}],["meta",{"name":"twitter:title","content":"توثيق Node.js - الوحدات | Node.js - iDoc.dev"}],["meta",{"name":"twitter:description","content":"استكشف توثيق Node.js حول الوحدات، بما في ذلك CommonJS و ES modules، وكيفية إدارة التبعيات وحل الوحدات."}],["link",{"rel":"canonical","href":"https://idoc.dev/ar/nodejs/api/modules"}],["meta",{"property":"og:url","content":"https://idoc.dev/ar/nodejs/api/modules"}]]},"headers":[],"relativePath":"ar/nodejs/api/modules.md","filePath":"ar/nodejs/api/modules.md","lastUpdated":1749464498000}`),a={name:`ar/nodejs/api/modules.md`};function o(e,i,a,o,s,c){return r(),t(`div`,null,i[0]||=[n(`<h1 id="modules-commonjs-modules" tabindex="-1">الوحدات: وحدات CommonJS <a class="header-anchor" href="#modules-commonjs-modules" aria-label="Permalink to “الوحدات: وحدات CommonJS”">​</a></h1><div class="tip custom-block"><p class="custom-block-title">[مستقرة: 2 - مستقرة]</p><p><a href="/ar/nodejs/api/documentation#stability-index">مستقرة: 2</a> <a href="/ar/nodejs/api/documentation#stability-index">الاستقرار: 2</a> - مستقرة</p></div><p>وحدات CommonJS هي الطريقة الأصلية لتغليف كود JavaScript لـ Node.js. يدعم Node.js أيضًا معيار <a href="/ar/nodejs/api/esm">وحدات ECMAScript</a> المستخدم من قبل المتصفحات وبيئات تشغيل JavaScript الأخرى.</p><p>في Node.js، يتم التعامل مع كل ملف كوحدة منفصلة. على سبيل المثال، ضع في اعتبارك ملفًا باسم <code>foo.js</code>:</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> circle</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;./circle.js&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">\`مساحة دائرة نصف قطرها 4 هي \${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">circle</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">area</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">4</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">)</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}\`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>في السطر الأول، يقوم <code>foo.js</code> بتحميل الوحدة <code>circle.js</code> الموجودة في نفس الدليل الذي يوجد فيه <code>foo.js</code>.</p><p>إليك محتويات <code>circle.js</code>:</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">PI</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Math;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">exports</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">area</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">r</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> PI</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> *</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> r </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">**</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">exports</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">circumference</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">r</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> *</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> PI</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> *</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> r;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>قامت الوحدة <code>circle.js</code> بتصدير الدالتين <code>area()</code> و <code>circumference()</code>. تتم إضافة الدوال والكائنات إلى جذر الوحدة عن طريق تحديد خصائص إضافية على الكائن الخاص <code>exports</code>.</p><p>ستكون المتغيرات المحلية للوحدة خاصة، لأن الوحدة ملفوفة في دالة بواسطة Node.js (انظر <a href="/ar/nodejs/api/modules#the-module-wrapper">غلاف الوحدة</a>). في هذا المثال، المتغير <code>PI</code> خاص بـ <code>circle.js</code>.</p><p>يمكن تعيين قيمة جديدة للخاصية <code>module.exports</code> (مثل دالة أو كائن).</p><p>في الكود التالي، يستخدم <code>bar.js</code> الوحدة <code>square</code>، التي تصدر فئة Square:</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> Square</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;./square.js&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> mySquare</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Square</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">\`مساحة mySquare هي \${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">mySquare</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">area</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">()</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}\`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>تم تعريف الوحدة <code>square</code> في <code>square.js</code>:</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// لن يؤدي التعيين إلى exports إلى تعديل الوحدة، يجب استخدام module.exports</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">module</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">exports</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Square</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  constructor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">width</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.width </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> width;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  area</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.width </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">**</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>يتم تنفيذ نظام وحدات CommonJS في <a href="/ar/nodejs/api/module">الوحدة الأساسية <code>module</code></a>.</p><h2 id="enabling" tabindex="-1">التمكين <a class="header-anchor" href="#enabling" aria-label="Permalink to “التمكين”">​</a></h2><p>لدى Node.js نظامان للوحدات: وحدات CommonJS و <a href="/ar/nodejs/api/esm">وحدات ECMAScript</a>.</p><p>بشكل افتراضي، سيعامل Node.js ما يلي كوحدات CommonJS:</p><ul><li>الملفات بامتداد <code>.cjs</code>؛</li><li>الملفات بامتداد <code>.js</code> عندما يحتوي ملف <code>package.json</code> الأقرب على حقل <a href="/ar/nodejs/api/packages#type">&quot;type&quot;</a> ذي المستوى الأعلى بقيمة <code>&quot;commonjs&quot;</code>؛</li><li>الملفات بامتداد <code>.js</code> أو بدون امتداد، عندما لا يحتوي ملف <code>package.json</code> الأقرب على حقل <a href="/ar/nodejs/api/packages#type">&quot;type&quot;</a> ذي المستوى الأعلى أو لا يوجد <code>package.json</code> في أي مجلد أصلي؛ ما لم يحتوي الملف على بناء نحوي يسبب خطأ ما لم يتم تقييمه كوحدة ES. يجب على مؤلفي الحزمة تضمين الحقل <a href="/ar/nodejs/api/packages#type">&quot;type&quot;</a>، حتى في الحزم التي تكون فيها جميع المصادر CommonJS. إن كونك صريحًا بشأن <code>type</code> الحزمة سيجعل الأمور أسهل بالنسبة لأدوات الإنشاء والمحملات لتحديد كيفية تفسير الملفات في الحزمة.</li><li>الملفات ذات الامتداد الذي ليس <code>.mjs</code> أو <code>.cjs</code> أو <code>.json</code> أو <code>.node</code> أو <code>.js</code> (عندما يحتوي ملف <code>package.json</code> الأقرب على حقل <a href="/ar/nodejs/api/packages#type">&quot;type&quot;</a> ذي المستوى الأعلى بقيمة <code>&quot;module&quot;</code>، سيتم التعرف على هذه الملفات كوحدات CommonJS فقط إذا تم تضمينها عبر <code>require()</code>، وليس عند استخدامها كنقطة دخول سطر الأوامر للبرنامج).</li></ul><p>راجع <a href="/ar/nodejs/api/packages#determining-module-system">تحديد نظام الوحدة</a> لمزيد من التفاصيل.</p><p>يستخدم استدعاء <code>require()</code> دائمًا محمل وحدات CommonJS. يستخدم استدعاء <code>import()</code> دائمًا محمل وحدات ECMAScript.</p><h2 id="accessing-the-main-module" tabindex="-1">الوصول إلى الوحدة الرئيسية <a class="header-anchor" href="#accessing-the-main-module" aria-label="Permalink to “الوصول إلى الوحدة الرئيسية”">​</a></h2><p>عند تشغيل ملف مباشرة من Node.js، يتم تعيين <code>require.main</code> إلى <code>module</code> الخاص به. هذا يعني أنه من الممكن تحديد ما إذا كان قد تم تشغيل ملف مباشرة عن طريق اختبار <code>require.main === module</code>.</p><p>بالنسبة للملف <code>foo.js</code>، سيكون هذا <code>true</code> إذا تم تشغيله عبر <code>node foo.js</code>، ولكن <code>false</code> إذا تم تشغيله بواسطة <code>require(&#39;./foo&#39;)</code>.</p><p>عندما لا تكون نقطة الدخول وحدة نمطية CommonJS، يكون <code>require.main</code> هو <code>undefined</code>، والوحدة الرئيسية خارج نطاق الوصول.</p><h2 id="package-manager-tips" tabindex="-1">نصائح مدير الحزم <a class="header-anchor" href="#package-manager-tips" aria-label="Permalink to “نصائح مدير الحزم”">​</a></h2><p>تم تصميم دلالات دالة <code>require()</code> الخاصة بـ Node.js لتكون عامة بما يكفي لدعم هياكل الدليل المعقولة. نأمل أن تجد برامج إدارة الحزم مثل <code>dpkg</code> و <code>rpm</code> و <code>npm</code> أنه من الممكن إنشاء حزم أصلية من وحدات Node.js النمطية دون تعديل.</p><p>فيما يلي، نقدم هيكل دليل مقترحًا يمكن أن ينجح:</p><p>لنفترض أننا أردنا أن يحتوي المجلد الموجود في <code>/usr/lib/node/\\&lt;some-package\\&gt;/\\&lt;some-version\\&gt;</code> على محتويات إصدار معين من حزمة.</p><p>يمكن أن تعتمد الحزم على بعضها البعض. لتثبيت الحزمة <code>foo</code>، قد يكون من الضروري تثبيت إصدار معين من الحزمة <code>bar</code>. قد يكون للحزمة <code>bar</code> نفسها تبعيات، وفي بعض الحالات، قد تتصادم هذه التبعيات أو تشكل تبعيات دورية.</p><p>نظرًا لأن Node.js يبحث عن <code>realpath</code> لأي وحدات نمطية يقوم بتحميلها (أي أنه يحل الروابط الرمزية) ثم <a href="/ar/nodejs/api/modules#loading-from-node-modules-folders">يبحث عن تبعياتها في مجلدات <code>node_modules</code></a>، يمكن حل هذا الموقف باستخدام البنية التالية:</p><ul><li><code>/usr/lib/node/foo/1.2.3/</code>: محتويات الحزمة <code>foo</code>، الإصدار 1.2.3.</li><li><code>/usr/lib/node/bar/4.3.2/</code>: محتويات الحزمة <code>bar</code> التي تعتمد عليها <code>foo</code>.</li><li><code>/usr/lib/node/foo/1.2.3/node_modules/bar</code>: رابط رمزي إلى <code>/usr/lib/node/bar/4.3.2/</code>.</li><li><code>/usr/lib/node/bar/4.3.2/node_modules/*</code>: روابط رمزية إلى الحزم التي تعتمد عليها <code>bar</code>.</li></ul><p>وبالتالي، حتى إذا تمت مصادفة دورة، أو إذا كانت هناك تعارضات في التبعية، فستتمكن كل وحدة نمطية من الحصول على إصدار من التبعية الخاصة بها يمكنها استخدامه.</p><p>عندما يقوم الكود الموجود في الحزمة <code>foo</code> بتنفيذ <code>require(&#39;bar&#39;)</code>، فإنه سيحصل على الإصدار المرتبط رمزيًا بـ <code>/usr/lib/node/foo/1.2.3/node_modules/bar</code>. ثم، عندما يستدعي الكود الموجود في الحزمة <code>bar</code> الدالة <code>require(&#39;quux&#39;)</code>، فإنه سيحصل على الإصدار المرتبط رمزيًا بـ <code>/usr/lib/node/bar/4.3.2/node_modules/quux</code>.</p><p>علاوة على ذلك، لجعل عملية البحث عن الوحدة النمطية أكثر مثالية، بدلاً من وضع الحزم مباشرة في <code>/usr/lib/node</code>، يمكننا وضعها في <code>/usr/lib/node_modules/\\&lt;name\\&gt;/\\&lt;version\\&gt;</code>. ثم لن يكلف Node.js نفسه عناء البحث عن التبعيات المفقودة في <code>/usr/node_modules</code> أو <code>/node_modules</code>.</p><p>لجعل الوحدات النمطية متاحة لـ Node.js REPL، قد يكون من المفيد أيضًا إضافة المجلد <code>/usr/lib/node_modules</code> إلى متغير البيئة <code>$NODE_PATH</code>. نظرًا لأن عمليات البحث عن الوحدة النمطية باستخدام مجلدات <code>node_modules</code> كلها نسبية، وتستند إلى المسار الحقيقي للملفات التي تجري استدعاءات لـ <code>require()</code>، فيمكن أن تكون الحزم نفسها في أي مكان.</p><h2 id="loading-ecmascript-modules-using-require" tabindex="-1">تحميل وحدات ECMAScript باستخدام <code>require()</code> <a class="header-anchor" href="#loading-ecmascript-modules-using-require" aria-label="Permalink to “تحميل وحدات ECMAScript باستخدام require()”">​</a></h2><div class="info custom-block"><p class="custom-block-title">[التاريخ]</p><table tabindex="0"><thead><tr><th>الإصدار</th><th>التغييرات</th></tr></thead><tbody><tr><td>v23.5.0</td><td>لم تعد هذه الميزة تصدر تحذيرًا تجريبيًا بشكل افتراضي، على الرغم من أنه لا يزال من الممكن إصدار التحذير بواسطة ‎--trace-require-module‎.</td></tr><tr><td>v23.0.0</td><td>لم تعد هذه الميزة خلف علامة CLI ‏‎--experimental-require-module‎.</td></tr><tr><td>v23.0.0</td><td>دعم تصدير التفاعل <code>&#39;module.exports&#39;</code> في <code>require(esm)</code>.</td></tr><tr><td>v22.0.0, v20.17.0</td><td>تمت الإضافة في: v22.0.0، v20.17.0</td></tr></tbody></table></div><div class="warning custom-block"><p class="custom-block-title">[مستقر: 1 - تجريبي]</p><p><a href="/ar/nodejs/api/documentation#stability-index">مستقر: 1</a> <a href="/ar/nodejs/api/documentation#stability-index">الاستقرار: 1</a>.2 - مرشح الإصدار</p></div><p>الامتداد ‎<code>.mjs</code>‎ مخصص لـ <a href="/ar/nodejs/api/esm">وحدات ECMAScript</a>. راجع قسم <a href="/ar/nodejs/api/packages#determining-module-system">تحديد نظام الوحدة</a> للحصول على مزيد من المعلومات حول الملفات التي يتم تحليلها كوحدات ECMAScript.</p><p>تدعم <code>require()</code> فقط تحميل وحدات ECMAScript التي تستوفي المتطلبات التالية:</p><ul><li>الوحدة متزامنة بالكامل (لا تحتوي على <code>await</code> ذي المستوى الأعلى)؛ و</li><li>يتم استيفاء أحد هذه الشروط:</li></ul><p>إذا كانت وحدة ES التي يتم تحميلها تستوفي المتطلبات، يمكن لـ <code>require()</code> تحميلها وإرجاع كائن مساحة اسم الوحدة. في هذه الحالة، يشبه الأمر <code>import()</code> الديناميكي ولكنه يعمل بشكل متزامن ويعيد كائن مساحة الاسم مباشرة.</p><p>مع وحدات ES التالية:</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// distance.mjs</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> distance</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">a</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">b</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) { </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (b.x </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> a.x) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">**</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (b.y </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> a.y) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">**</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; }</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// point.mjs</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> default</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Point</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  constructor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">x</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">y</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.x </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> x; </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.y </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> y; }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>يمكن لوحدة CommonJS تحميلها باستخدام <code>require()</code>:</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> distance</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;./distance.mjs&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(distance);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// [Module: null prototype] {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//   distance: [Function: distance]</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> point</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;./point.mjs&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(point);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// [Module: null prototype] {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//   default: [class Point],</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//   __esModule: true,</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// }</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>للتوافق مع الأدوات الحالية التي تحول وحدات ES إلى CommonJS، والتي يمكنها بعد ذلك تحميل وحدات ES حقيقية من خلال <code>require()</code>، ستحتوي مساحة الاسم التي تم إرجاعها على خاصية <code>__esModule: true</code> إذا كان لديها تصدير <code>default</code> بحيث يمكن للتعليمات البرمجية المستهلكة التي تم إنشاؤها بواسطة الأدوات التعرف على عمليات التصدير الافتراضية في وحدات ES الحقيقية. إذا كانت مساحة الاسم تحدد بالفعل <code>__esModule</code>، فلن تتم إضافة ذلك. هذه الخاصية تجريبية ويمكن أن تتغير في المستقبل. يجب أن تستخدمها فقط الأدوات التي تحول وحدات ES إلى وحدات CommonJS، باتباع اصطلاحات النظام البيئي الحالية. يجب على التعليمات البرمجية التي تم إنشاؤها مباشرة في CommonJS تجنب الاعتماد عليها.</p><p>عندما تحتوي وحدة ES على كل من عمليات التصدير المسماة وتصدير افتراضي، فإن النتيجة التي يتم إرجاعها بواسطة <code>require()</code> هي كائن مساحة اسم الوحدة، الذي يضع التصدير الافتراضي في الخاصية ‎<code>.default</code>‎، على غرار النتائج التي يتم إرجاعها بواسطة <code>import()</code>. لتخصيص ما يجب إرجاعه بواسطة <code>require(esm)</code> مباشرة، يمكن لوحدة ES تصدير القيمة المطلوبة باستخدام اسم السلسلة <code>&quot;module.exports&quot;</code>.</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// point.mjs</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> default</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Point</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  constructor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">x</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">y</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.x </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> x; </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.y </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> y; }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// \`distance\` is lost to CommonJS consumers of this module, unless it&#39;s</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// added to \`Point\` as a static property.</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> distance</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">a</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">b</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) { </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (b.x </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> a.x) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">**</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (b.y </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> a.y) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">**</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { Point </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">as</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;module.exports&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> Point</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;./point.mjs&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Point); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// [class Point]</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Named exports are lost when &#39;module.exports&#39; is used</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">distance</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;./point.mjs&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(distance); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// undefined</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>لاحظ في المثال أعلاه، عند استخدام اسم التصدير <code>module.exports</code>، ستفقد عمليات التصدير المسماة لمستهلكي CommonJS. للسماح لمستهلكي CommonJS بالاستمرار في الوصول إلى عمليات التصدير المسماة، يمكن للوحدة التأكد من أن التصدير الافتراضي هو كائن مع عمليات التصدير المسماة المرفقة به كخصائص. على سبيل المثال، مع المثال أعلاه، يمكن إرفاق <code>distance</code> بالتصدير الافتراضي، فئة <code>Point</code>، كطريقة ثابتة.</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> distance</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">a</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">b</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) { </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (b.x </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> a.x) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">**</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (b.y </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> a.y) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">**</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> default</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Point</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  constructor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">x</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">y</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.x </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> x; </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.y </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> y; }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  static</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;"> distance</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> distance;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { Point </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">as</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;module.exports&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> Point</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;./point.mjs&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Point); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// [class Point]</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">distance</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;./point.mjs&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(distance); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// [Function: distance]</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>إذا كانت الوحدة التي يتم <code>require()</code>&#39;d تحتوي على <code>await</code> ذي المستوى الأعلى، أو كان الرسم البياني للوحدة الذي <code>import</code>&#39;s يحتوي على <code>await</code> ذي المستوى الأعلى، فسيتم طرح <a href="/ar/nodejs/api/errors#err-require-async-module"><code>ERR_REQUIRE_ASYNC_MODULE</code></a>. في هذه الحالة، يجب على المستخدمين تحميل الوحدة غير المتزامنة باستخدام <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/import" target="_blank" rel="noreferrer"><code>import()</code></a>.</p><p>إذا تم تمكين ‎<code>--experimental-print-required-tla</code>‎، فبدلاً من طرح ‎<code>ERR_REQUIRE_ASYNC_MODULE</code>‎ قبل التقييم، سيقوم Node.js بتقييم الوحدة ومحاولة تحديد مواقع عمليات الانتظار ذات المستوى الأعلى وطباعة موقعها لمساعدة المستخدمين على إصلاحها.</p><p>دعم تحميل وحدات ES باستخدام <code>require()</code> تجريبي حاليًا ويمكن تعطيله باستخدام ‎<code>--no-experimental-require-module</code>‎. لطباعة مكان استخدام هذه الميزة، استخدم <a href="/ar/nodejs/api/cli#trace-require-modulemode"><code>--trace-require-module</code></a>.</p><p>يمكن الكشف عن هذه الميزة عن طريق التحقق مما إذا كان <a href="/ar/nodejs/api/process#processfeaturesrequire-module"><code>process.features.require_module</code></a> هو <code>true</code>.</p><h2 id="all-together" tabindex="-1">الكل معا <a class="header-anchor" href="#all-together" aria-label="Permalink to “الكل معا”">​</a></h2><p>للحصول على اسم الملف الدقيق الذي سيتم تحميله عند استدعاء <code>require()</code>، استخدم الدالة <code>require.resolve()</code>.</p><p>بوضع كل ما سبق معا، إليك الخوارزمية عالية المستوى في الشفرة الزائفة لما تفعله <code>require()</code>:</p><div class="language-text line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">text</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>require(X) من وحدة نمطية في المسار Y</span></span>
<span class="line"><span>1. إذا كان X وحدة نمطية أساسية،</span></span>
<span class="line"><span>   أ. أرجع الوحدة النمطية الأساسية</span></span>
<span class="line"><span>   ب. توقف</span></span>
<span class="line"><span>2. إذا كان X يبدأ بـ &#39;/&#39;</span></span>
<span class="line"><span>   أ. اضبط Y لتكون جذر نظام الملفات</span></span>
<span class="line"><span>3. إذا كان X يبدأ بـ &#39;./&#39; أو &#39;/&#39; أو &#39;../&#39;</span></span>
<span class="line"><span>   أ. LOAD_AS_FILE(Y + X)</span></span>
<span class="line"><span>   ب. LOAD_AS_DIRECTORY(Y + X)</span></span>
<span class="line"><span>   ج. ألقِ &quot;لم يتم العثور عليه&quot;</span></span>
<span class="line"><span>4. إذا كان X يبدأ بـ &#39;#&#39;</span></span>
<span class="line"><span>   أ. LOAD_PACKAGE_IMPORTS(X, dirname(Y))</span></span>
<span class="line"><span>5. LOAD_PACKAGE_SELF(X, dirname(Y))</span></span>
<span class="line"><span>6. LOAD_NODE_MODULES(X, dirname(Y))</span></span>
<span class="line"><span>7. ألقِ &quot;لم يتم العثور عليه&quot;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>MAYBE_DETECT_AND_LOAD(X)</span></span>
<span class="line"><span>1. إذا تم تحليل X كوحدة نمطية CommonJS، فقم بتحميل X كوحدة نمطية CommonJS. توقف.</span></span>
<span class="line"><span>2. وإلا، إذا كان يمكن تحليل التعليمات البرمجية المصدر لـ X كوحدة نمطية ECMAScript باستخدام</span></span>
<span class="line"><span>  &lt;a href=&quot;esm.md#resolver-algorithm-specification&quot;&gt;DETECT_MODULE_SYNTAX المحدد في</span></span>
<span class="line"><span>  محلل ESM&lt;/a&gt;،</span></span>
<span class="line"><span>  أ. قم بتحميل X كوحدة نمطية ECMAScript. توقف.</span></span>
<span class="line"><span>3. ألقِ SyntaxError من محاولة تحليل X كـ CommonJS في 1. توقف.</span></span>
<span class="line"><span></span></span>
<span class="line"><span>LOAD_AS_FILE(X)</span></span>
<span class="line"><span>1. إذا كان X ملفا، فقم بتحميل X بتنسيق امتداد الملف الخاص به. توقف</span></span>
<span class="line"><span>2. إذا كان X.js ملفا،</span></span>
<span class="line"><span>    أ. ابحث عن أقرب نطاق حزمة SCOPE إلى X.</span></span>
<span class="line"><span>    ب. إذا لم يتم العثور على أي نطاق</span></span>
<span class="line"><span>      1. MAYBE_DETECT_AND_LOAD(X.js)</span></span>
<span class="line"><span>    ج. إذا كان SCOPE/package.json يحتوي على حقل &quot;type&quot;،</span></span>
<span class="line"><span>      1. إذا كان حقل &quot;type&quot; هو &quot;module&quot;، فقم بتحميل X.js كوحدة نمطية ECMAScript. توقف.</span></span>
<span class="line"><span>      2. إذا كان حقل &quot;type&quot; هو &quot;commonjs&quot;، فقم بتحميل X.js كوحدة نمطية CommonJS. توقف.</span></span>
<span class="line"><span>    د. MAYBE_DETECT_AND_LOAD(X.js)</span></span>
<span class="line"><span>3. إذا كان X.json ملفا، فقم بتحميل X.json إلى كائن JavaScript. توقف</span></span>
<span class="line"><span>4. إذا كان X.node ملفا، فقم بتحميل X.node كملحق ثنائي. توقف</span></span>
<span class="line"><span></span></span>
<span class="line"><span>LOAD_INDEX(X)</span></span>
<span class="line"><span>1. إذا كان X/index.js ملفا</span></span>
<span class="line"><span>    أ. ابحث عن أقرب نطاق حزمة SCOPE إلى X.</span></span>
<span class="line"><span>    ب. إذا لم يتم العثور على أي نطاق، فقم بتحميل X/index.js كوحدة نمطية CommonJS. توقف.</span></span>
<span class="line"><span>    ج. إذا كان SCOPE/package.json يحتوي على حقل &quot;type&quot;،</span></span>
<span class="line"><span>      1. إذا كان حقل &quot;type&quot; هو &quot;module&quot;، فقم بتحميل X/index.js كوحدة نمطية ECMAScript. توقف.</span></span>
<span class="line"><span>      2. وإلا، فقم بتحميل X/index.js كوحدة نمطية CommonJS. توقف.</span></span>
<span class="line"><span>2. إذا كان X/index.json ملفا، فقم بتحليل X/index.json إلى كائن JavaScript. توقف</span></span>
<span class="line"><span>3. إذا كان X/index.node ملفا، فقم بتحميل X/index.node كملحق ثنائي. توقف</span></span>
<span class="line"><span></span></span>
<span class="line"><span>LOAD_AS_DIRECTORY(X)</span></span>
<span class="line"><span>1. إذا كان X/package.json ملفا،</span></span>
<span class="line"><span>   أ. قم بتحليل X/package.json، وابحث عن حقل &quot;main&quot;.</span></span>
<span class="line"><span>   ب. إذا كانت قيمة &quot;main&quot; خاطئة، فانتقل إلى 2.</span></span>
<span class="line"><span>   ج. ليكن M = X + (حقل json الرئيسي)</span></span>
<span class="line"><span>   د. LOAD_AS_FILE(M)</span></span>
<span class="line"><span>   ه. LOAD_INDEX(M)</span></span>
<span class="line"><span>   و. LOAD_INDEX(X) مهمل</span></span>
<span class="line"><span>   ز. ألقِ &quot;لم يتم العثور عليه&quot;</span></span>
<span class="line"><span>2. LOAD_INDEX(X)</span></span>
<span class="line"><span></span></span>
<span class="line"><span>LOAD_NODE_MODULES(X, START)</span></span>
<span class="line"><span>1. ليكن DIRS = NODE_MODULES_PATHS(START)</span></span>
<span class="line"><span>2. لكل DIR في DIRS:</span></span>
<span class="line"><span>   أ. LOAD_PACKAGE_EXPORTS(X, DIR)</span></span>
<span class="line"><span>   ب. LOAD_AS_FILE(DIR/X)</span></span>
<span class="line"><span>   ج. LOAD_AS_DIRECTORY(DIR/X)</span></span>
<span class="line"><span></span></span>
<span class="line"><span>NODE_MODULES_PATHS(START)</span></span>
<span class="line"><span>1. ليكن PARTS = مسار split(START)</span></span>
<span class="line"><span>2. ليكن I = عدد PARTS - 1</span></span>
<span class="line"><span>3. ليكن DIRS = []</span></span>
<span class="line"><span>4. بينما I &gt;= 0،</span></span>
<span class="line"><span>   أ. إذا كان PARTS[I] = &quot;node_modules&quot;، فانتقل إلى د.</span></span>
<span class="line"><span>   ب. ليكن DIR = مسار join(PARTS[0 .. I] + &quot;node_modules&quot;)</span></span>
<span class="line"><span>   ج. ليكن DIRS = DIR + DIRS</span></span>
<span class="line"><span>   د. ليكن I = I - 1</span></span>
<span class="line"><span>5. أرجع DIRS + GLOBAL_FOLDERS</span></span>
<span class="line"><span></span></span>
<span class="line"><span>LOAD_PACKAGE_IMPORTS(X, DIR)</span></span>
<span class="line"><span>1. ابحث عن أقرب نطاق حزمة SCOPE إلى DIR.</span></span>
<span class="line"><span>2. إذا لم يتم العثور على أي نطاق، فارجع.</span></span>
<span class="line"><span>3. إذا كانت &quot;imports&quot; في SCOPE/package.json فارغة أو غير محددة، فارجع.</span></span>
<span class="line"><span>4. إذا تم تمكين \`--experimental-require-module\`</span></span>
<span class="line"><span>  أ. ليكن CONDITIONS = [&quot;node&quot;، &quot;require&quot;، &quot;module-sync&quot;]</span></span>
<span class="line"><span>  ب. وإلا، ليكن CONDITIONS = [&quot;node&quot;، &quot;require&quot;]</span></span>
<span class="line"><span>5. ليكن MATCH = PACKAGE_IMPORTS_RESOLVE(X، pathToFileURL(SCOPE)،</span></span>
<span class="line"><span>  CONDITIONS) &lt;a href=&quot;esm.md#resolver-algorithm-specification&quot;&gt;المحدد في محلل ESM&lt;/a&gt;.</span></span>
<span class="line"><span>6. RESOLVE_ESM_MATCH(MATCH).</span></span>
<span class="line"><span></span></span>
<span class="line"><span>LOAD_PACKAGE_EXPORTS(X, DIR)</span></span>
<span class="line"><span>1. حاول تفسير X كمزيج من NAME و SUBPATH حيث قد يكون للاسم بادئة ‎@scope/‎ ويبدأ المسار الفرعي بشرطة مائلة (\`/\`).</span></span>
<span class="line"><span>2. إذا كان X لا يطابق هذا النمط أو كان DIR/NAME/package.json ليس ملفا،</span></span>
<span class="line"><span>   فارجع.</span></span>
<span class="line"><span>3. قم بتحليل DIR/NAME/package.json، وابحث عن حقل &quot;exports&quot;.</span></span>
<span class="line"><span>4. إذا كانت &quot;exports&quot; فارغة أو غير محددة، فارجع.</span></span>
<span class="line"><span>5. إذا تم تمكين \`--experimental-require-module\`</span></span>
<span class="line"><span>  أ. ليكن CONDITIONS = [&quot;node&quot;، &quot;require&quot;، &quot;module-sync&quot;]</span></span>
<span class="line"><span>  ب. وإلا، ليكن CONDITIONS = [&quot;node&quot;، &quot;require&quot;]</span></span>
<span class="line"><span>6. ليكن MATCH = PACKAGE_EXPORTS_RESOLVE(pathToFileURL(DIR/NAME)، &quot;.&quot; + SUBPATH،</span></span>
<span class="line"><span>   \`package.json\` &quot;exports&quot;، CONDITIONS) &lt;a href=&quot;esm.md#resolver-algorithm-specification&quot;&gt;المحدد في محلل ESM&lt;/a&gt;.</span></span>
<span class="line"><span>7. RESOLVE_ESM_MATCH(MATCH)</span></span>
<span class="line"><span></span></span>
<span class="line"><span>LOAD_PACKAGE_SELF(X, DIR)</span></span>
<span class="line"><span>1. ابحث عن أقرب نطاق حزمة SCOPE إلى DIR.</span></span>
<span class="line"><span>2. إذا لم يتم العثور على أي نطاق، فارجع.</span></span>
<span class="line"><span>3. إذا كانت &quot;exports&quot; في SCOPE/package.json فارغة أو غير محددة، فارجع.</span></span>
<span class="line"><span>4. إذا لم يكن &quot;name&quot; في SCOPE/package.json هو الجزء الأول من X، فارجع.</span></span>
<span class="line"><span>5. ليكن MATCH = PACKAGE_EXPORTS_RESOLVE(pathToFileURL(SCOPE)،</span></span>
<span class="line"><span>   &quot;.&quot; + X.slice(&quot;name&quot;.length)، \`package.json\` &quot;exports&quot;، [&quot;node&quot;، &quot;require&quot;])</span></span>
<span class="line"><span>   &lt;a href=&quot;esm.md#resolver-algorithm-specification&quot;&gt;المحدد في محلل ESM&lt;/a&gt;.</span></span>
<span class="line"><span>6. RESOLVE_ESM_MATCH(MATCH)</span></span>
<span class="line"><span></span></span>
<span class="line"><span>RESOLVE_ESM_MATCH(MATCH)</span></span>
<span class="line"><span>1. ليكن RESOLVED_PATH = fileURLToPath(MATCH)</span></span>
<span class="line"><span>2. إذا كان الملف الموجود في RESOLVED_PATH موجودا، فقم بتحميل RESOLVED_PATH بتنسيق الامتداد الخاص به. توقف</span></span>
<span class="line"><span>3. ألقِ &quot;لم يتم العثور عليه&quot;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br></div></div><h2 id="caching" tabindex="-1">التخزين المؤقت <a class="header-anchor" href="#caching" aria-label="Permalink to “التخزين المؤقت”">​</a></h2><p>يتم تخزين الوحدات مؤقتًا بعد تحميلها للمرة الأولى. هذا يعني (من بين أشياء أخرى) أن كل استدعاء لـ <code>require(&#39;foo&#39;)</code> سيحصل على نفس الكائن تمامًا، إذا كان سيؤدي إلى نفس الملف.</p><p>بشرط عدم تعديل <code>require.cache</code>، فإن إجراء استدعاءات متعددة لـ <code>require(&#39;foo&#39;)</code> لن يؤدي إلى تنفيذ رمز الوحدة عدة مرات. هذه ميزة مهمة. بفضلها، يمكن إرجاع كائنات &quot;منتهية جزئيًا&quot;، مما يسمح بتحميل التبعيات المتعدية حتى عندما تتسبب في دورات.</p><p>لتنفيذ رمز الوحدة عدة مرات، قم بتصدير دالة، واستدع تلك الدالة.</p><h3 id="module-caching-caveats" tabindex="-1">محاذير التخزين المؤقت للوحدات <a class="header-anchor" href="#module-caching-caveats" aria-label="Permalink to “محاذير التخزين المؤقت للوحدات”">​</a></h3><p>يتم تخزين الوحدات مؤقتًا بناءً على اسم الملف الذي تم حله. نظرًا لأن الوحدات قد تحل إلى اسم ملف مختلف بناءً على موقع الوحدة المستدعية (التحميل من مجلدات <code>node_modules</code>)، فليس هناك <em>ضمان</em> بأن <code>require(&#39;foo&#39;)</code> ستعيد دائمًا نفس الكائن تمامًا، إذا كانت ستحل إلى ملفات مختلفة.</p><p>بالإضافة إلى ذلك، في أنظمة الملفات أو أنظمة التشغيل غير الحساسة لحالة الأحرف، يمكن أن تشير أسماء الملفات التي تم حلها المختلفة إلى نفس الملف، لكن ذاكرة التخزين المؤقت ستظل تعاملها كوحدات مختلفة وستعيد تحميل الملف عدة مرات. على سبيل المثال، يعيد <code>require(&#39;./foo&#39;)</code> و <code>require(&#39;./FOO&#39;)</code> كائنين مختلفين، بغض النظر عما إذا كان <code>./foo</code> و <code>./FOO</code> هما نفس الملف أم لا.</p><h2 id="built-in-modules" tabindex="-1">الوحدات المدمجة <a class="header-anchor" href="#built-in-modules" aria-label="Permalink to “الوحدات المدمجة”">​</a></h2><div class="info custom-block"><p class="custom-block-title">[التاريخ]</p><table tabindex="0"><thead><tr><th>الإصدار</th><th>التغييرات</th></tr></thead><tbody><tr><td>v16.0.0, v14.18.0</td><td>تمت إضافة دعم استيراد <code>node:</code> إلى <code>require(...)</code>.</td></tr></tbody></table></div><p>يحتوي Node.js على العديد من الوحدات المترجمة في الثنائي. يتم وصف هذه الوحدات بمزيد من التفصيل في مكان آخر في هذا المستند.</p><p>يتم تعريف الوحدات المضمنة داخل مصدر Node.js وتقع في مجلد <code>lib/</code>.</p><p>يمكن تحديد الوحدات المضمنة باستخدام البادئة <code>node:</code>، وفي هذه الحالة تتجاوز ذاكرة التخزين المؤقت <code>require</code>. على سبيل المثال، ستعيد <code>require(&#39;node:http&#39;)</code> دائمًا وحدة HTTP المضمنة، حتى إذا كان هناك إدخال <code>require.cache</code> بهذا الاسم.</p><p>يتم تحميل بعض الوحدات المضمنة دائمًا بشكل تفضيلي إذا تم تمرير معرفها إلى <code>require()</code>. على سبيل المثال، ستعيد <code>require(&#39;http&#39;)</code> دائمًا وحدة HTTP المضمنة، حتى إذا كان هناك ملف بهذا الاسم. يتم عرض قائمة الوحدات المضمنة التي يمكن تحميلها دون استخدام البادئة <code>node:</code> في <a href="/ar/nodejs/api/module#modulebuiltinmodules"><code>module.builtinModules</code></a>، المدرجة بدون البادئة.</p><h3 id="built-in-modules-with-mandatory-node-prefix" tabindex="-1">الوحدات النمطية المدمجة ذات البادئة <code>node:</code> الإلزامية <a class="header-anchor" href="#built-in-modules-with-mandatory-node-prefix" aria-label="Permalink to “الوحدات النمطية المدمجة ذات البادئة node: الإلزامية”">​</a></h3><p>عند تحميلها بواسطة <code>require()‎</code>، يجب طلب بعض الوحدات النمطية المدمجة باستخدام البادئة <code>node:</code>‎. يوجد هذا الشرط لمنع الوحدات النمطية المدمجة المُدخلة حديثًا من التعارض مع حزم المستخدم التي سبق أن أخذت الاسم. حاليًا، الوحدات النمطية المدمجة التي تتطلب البادئة <code>node:</code> هي:</p><ul><li><a href="/ar/nodejs/api/single-executable-applications#single-executable-application-api"><code>node:sea</code></a></li><li><a href="/ar/nodejs/api/sqlite"><code>node:sqlite</code></a></li><li><a href="/ar/nodejs/api/test"><code>node:test</code></a></li><li><a href="/ar/nodejs/api/test#test-reporters"><code>node:test/reporters</code></a></li></ul><p>يتم عرض قائمة هذه الوحدات النمطية في <a href="/ar/nodejs/api/module#modulebuiltinmodules"><code>module.builtinModules</code></a>، بما في ذلك البادئة.</p><h2 id="cycles" tabindex="-1">الدورات <a class="header-anchor" href="#cycles" aria-label="Permalink to “الدورات”">​</a></h2><p>عند وجود استدعاءات دائرية لـ <code>require()‎</code>، قد لا تكون الوحدة النمطية قد انتهت من التنفيذ عند إرجاعها.</p><p>ضع في اعتبارك هذا الموقف:</p><p><code>a.js</code>:</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;a starting&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">exports</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.done </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> b</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;./b.js&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;in a, b.done = %j&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, b.done);</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">exports</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.done </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;a done&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p><code>b.js</code>:</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;b starting&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">exports</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.done </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> a</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;./a.js&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;in b, a.done = %j&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, a.done);</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">exports</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.done </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;b done&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p><code>main.js</code>:</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;main starting&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> a</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;./a.js&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> b</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;./b.js&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;in main, a.done = %j, b.done = %j&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, a.done, b.done);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>عندما يقوم <code>main.js</code> بتحميل <code>a.js</code>، ثم يقوم <code>a.js</code> بدوره بتحميل <code>b.js</code>. في هذه المرحلة، يحاول <code>b.js</code> تحميل <code>a.js</code>. لمنع حلقة لا نهائية، يتم إرجاع <strong>نسخة غير مكتملة</strong> من كائن <code>a.js</code> المُصدَّر إلى الوحدة النمطية <code>b.js</code>. ثم ينتهي <code>b.js</code> من التحميل، ويتم توفير كائن <code>exports</code> الخاص به للوحدة النمطية <code>a.js</code>.</p><p>بحلول الوقت الذي يقوم فيه <code>main.js</code> بتحميل كلا الوحدتين النمطيتين، تكون كلتاهما قد انتهتا. وبالتالي، سيكون ناتج هذا البرنامج كما يلي:</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> node</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> main.js</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">main</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> starting</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">a</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> starting</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">b</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> starting</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">in b, a.done = false</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">b</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> done</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">in a, b.done = true</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">a</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> done</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">in main, a.done = true, b.done = true</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>التخطيط الدقيق مطلوب للسماح لتبعيات الوحدة النمطية الدائرية بالعمل بشكل صحيح داخل التطبيق.</p><h2 id="file-modules" tabindex="-1">وحدات الملف <a class="header-anchor" href="#file-modules" aria-label="Permalink to “وحدات الملف”">​</a></h2><p>إذا لم يتم العثور على اسم الملف المحدد، فسيحاول Node.js تحميل اسم الملف المطلوب مع الإضافات المضافة: <code>.js</code> و <code>.json</code> وأخيرًا <code>.node</code>. عند تحميل ملف بامتداد مختلف (على سبيل المثال <code>.cjs</code>)، يجب تمرير اسمه الكامل إلى <code>require()</code>، بما في ذلك امتداد الملف الخاص به (على سبيل المثال <code>require(&#39;./file.cjs&#39;)</code>).</p><p>يتم تحليل ملفات <code>.json</code> كملفات نص JSON، ويتم تفسير ملفات <code>.node</code> كوحدات إضافية مُجمّعة يتم تحميلها باستخدام <code>process.dlopen()</code>. يتم تحليل الملفات التي تستخدم أي امتداد آخر (أو بدون امتداد على الإطلاق) كملفات نص JavaScript. ارجع إلى قسم <a href="/ar/nodejs/api/packages#determining-module-system">تحديد نظام الوحدة النمطية</a> لفهم هدف التحليل الذي سيتم استخدامه.</p><p>الوحدة النمطية المطلوبة التي تبدأ بـ <code>&#39;/&#39;</code> هي مسار مطلق إلى الملف. على سبيل المثال، سيؤدي <code>require(&#39;/home/marco/foo.js&#39;)</code> إلى تحميل الملف الموجود في <code>/home/marco/foo.js</code>.</p><p>الوحدة النمطية المطلوبة التي تبدأ بـ <code>&#39;./&#39;</code> تكون مرتبطة بالملف الذي يستدعي <code>require()</code>. وهذا يعني أن <code>circle.js</code> يجب أن يكون في نفس دليل <code>foo.js</code> حتى يتمكن <code>require(&#39;./circle&#39;)</code> من العثور عليه.</p><p>بدون <code>&#39;/&#39;</code> أو <code>&#39;./&#39;</code> أو <code>&#39;../&#39;</code> في البداية للإشارة إلى ملف، يجب أن تكون الوحدة النمطية إما وحدة نمطية أساسية أو يتم تحميلها من مجلد <code>node_modules</code>.</p><p>إذا كان المسار المحدد غير موجود، فسيُصدر <code>require()</code> خطأ <a href="/ar/nodejs/api/errors#module-not-found"><code>MODULE_NOT_FOUND</code></a>.</p><h2 id="folders-as-modules" tabindex="-1">المجلدات كوحدات نمطية <a class="header-anchor" href="#folders-as-modules" aria-label="Permalink to “المجلدات كوحدات نمطية”">​</a></h2><div class="info custom-block"><p class="custom-block-title">[مستقر: 3 - قديم]</p><p><a href="/ar/nodejs/api/documentation#stability-index">مستقر: 3</a> <a href="/ar/nodejs/api/documentation#stability-index">الاستقرار: 3</a> - قديم: استخدم <a href="/ar/nodejs/api/packages#subpath-exports">صادرات المسار الفرعي</a> أو <a href="/ar/nodejs/api/packages#subpath-imports">عمليات استيراد المسار الفرعي</a> بدلاً من ذلك.</p></div><p>هناك ثلاث طرق يمكن من خلالها تمرير مجلد إلى <code>require()</code> كوسيطة.</p><p>الأولى هي إنشاء ملف <a href="/ar/nodejs/api/packages#nodejs-packagejson-field-definitions"><code>package.json</code></a> في جذر المجلد، والذي يحدد وحدة نمطية <code>main</code>. قد يبدو مثال ملف <a href="/ar/nodejs/api/packages#nodejs-packagejson-field-definitions"><code>package.json</code></a> كالتالي:</p><div class="language-json line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{ </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> : </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;some-library&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;main&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> : </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;./lib/some-library.js&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>إذا كان هذا في مجلد في <code>./some-library</code>، فسيحاول <code>require(&#39;./some-library&#39;)</code> تحميل <code>./some-library/lib/some-library.js</code>.</p><p>إذا لم يكن هناك ملف <a href="/ar/nodejs/api/packages#nodejs-packagejson-field-definitions"><code>package.json</code></a> موجودًا في الدليل، أو إذا كان إدخال <a href="/ar/nodejs/api/packages#main"><code>&quot;main&quot;</code></a> مفقودًا أو لا يمكن حله، فسيحاول Node.js تحميل ملف <code>index.js</code> أو <code>index.node</code> من هذا الدليل. على سبيل المثال، إذا لم يكن هناك ملف <a href="/ar/nodejs/api/packages#nodejs-packagejson-field-definitions"><code>package.json</code></a> في المثال السابق، فسيحاول <code>require(&#39;./some-library&#39;)</code> تحميل:</p><ul><li><code>./some-library/index.js</code></li><li><code>./some-library/index.node</code></li></ul><p>إذا فشلت هذه المحاولات، فسيبلغ Node.js عن الوحدة النمطية بأكملها على أنها مفقودة مع الخطأ الافتراضي:</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Error:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Cannot</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> find</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> module</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;some-library&#39;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>في جميع الحالات الثلاث المذكورة أعلاه، ستؤدي مكالمة <code>import(&#39;./some-library&#39;)</code> إلى خطأ <a href="/ar/nodejs/api/errors#err-unsupported-dir-import"><code>ERR_UNSUPPORTED_DIR_IMPORT</code></a>. يمكن أن يوفر استخدام <a href="/ar/nodejs/api/packages#subpath-exports">صادرات المسار الفرعي</a> أو <a href="/ar/nodejs/api/packages#subpath-imports">عمليات استيراد المسار الفرعي</a> للحزمة نفس فوائد تنظيم الاحتواء مثل المجلدات كوحدات نمطية، والعمل مع كل من <code>require</code> و <code>import</code>.</p><h2 id="loading-from-node_modules-folders" tabindex="-1">التحميل من مجلدات <code>node_modules</code> <a class="header-anchor" href="#loading-from-node_modules-folders" aria-label="Permalink to “التحميل من مجلدات node_modules”">​</a></h2><p>إذا لم يكن مُعرّف الوحدة النمطية (module identifier) الذي تم تمريره إلى <code>require()</code> وحدة نمطية <a href="/ar/nodejs/api/modules#built-in-modules">مدمجة</a>، ولم يبدأ بـ<code>&#39;/&#39;</code> أو <code>&#39;../&#39;</code> أو <code>&#39;./&#39;</code>، فسيبدأ Node.js في دليل الوحدة النمطية الحالية، ويضيف <code>/node_modules</code>، ويحاول تحميل الوحدة النمطية من هذا الموقع. لن يقوم Node.js بإلحاق <code>node_modules</code> بمسار ينتهي بالفعل بـ <code>node_modules</code>.</p><p>إذا لم يتم العثور عليه هناك، فإنه ينتقل إلى الدليل الأصل، وهكذا، حتى يتم الوصول إلى جذر نظام الملفات.</p><p>على سبيل المثال، إذا كان الملف الموجود في <code>&#39;/home/ry/projects/foo.js&#39;</code> يستدعي <code>require(&#39;bar.js&#39;)</code>، فسيبحث Node.js في المواقع التالية، بهذا الترتيب:</p><ul><li><code>/home/ry/projects/node_modules/bar.js</code></li><li><code>/home/ry/node_modules/bar.js</code></li><li><code>/home/node_modules/bar.js</code></li><li><code>/node_modules/bar.js</code></li></ul><p>يسمح هذا للبرامج بتوطين تبعياتها، بحيث لا تتعارض.</p><p>من الممكن طلب ملفات أو وحدات فرعية معينة موزعة مع وحدة نمطية عن طريق تضمين لاحقة مسار بعد اسم الوحدة النمطية. على سبيل المثال، سيقوم <code>require(&#39;example-module/path/to/file&#39;)</code> بحل <code>path/to/file</code> بالنسبة إلى مكان وجود <code>example-module</code>. يتبع المسار اللاحق نفس دلالات حل الوحدة النمطية.</p><h2 id="loading-from-the-global-folders" tabindex="-1">التحميل من المجلدات العمومية (global folders) <a class="header-anchor" href="#loading-from-the-global-folders" aria-label="Permalink to “التحميل من المجلدات العمومية (global folders)”">​</a></h2><p>إذا تم تعيين متغير البيئة <code>NODE_PATH</code> إلى قائمة من المسارات المطلقة مفصولة بنقطتين رأسيتين، فسيبحث Node.js في هذه المسارات عن الوحدات النمطية إذا لم يتم العثور عليها في مكان آخر.</p><p>في نظام التشغيل Windows، يتم تحديد <code>NODE_PATH</code> بفواصل منقوطة (<code>;</code>) بدلاً من النقطتين الرأسيتين.</p><p>تم إنشاء <code>NODE_PATH</code> في الأصل لدعم تحميل الوحدات النمطية من مسارات مختلفة قبل تحديد خوارزمية <a href="/ar/nodejs/api/modules#all-together">حل الوحدة النمطية</a> الحالية.</p><p>لا يزال <code>NODE_PATH</code> مدعومًا، ولكنه أقل ضرورة الآن بعد أن استقر نظام Node.js البيئي على اتفاقية لتحديد موقع الوحدات النمطية التابعة. في بعض الأحيان، تُظهر عمليات النشر التي تعتمد على <code>NODE_PATH</code> سلوكًا مفاجئًا عندما يكون الأشخاص غير مدركين أنه يجب تعيين <code>NODE_PATH</code>. في بعض الأحيان تتغير تبعيات الوحدة النمطية، مما يتسبب في تحميل إصدار مختلف (أو حتى وحدة نمطية مختلفة) أثناء البحث في <code>NODE_PATH</code>.</p><p>بالإضافة إلى ذلك، سيبحث Node.js في القائمة التالية من GLOBAL_FOLDERS:</p><ul><li>1: <code>$HOME/.node_modules</code></li><li>2: <code>$HOME/.node_libraries</code></li><li>3: <code>$PREFIX/lib/node</code></li></ul><p>حيث <code>$HOME</code> هو دليل المستخدم الرئيسي، و <code>$PREFIX</code> هو <code>node_prefix</code> الذي تم تكوينه لـ Node.js.</p><p>هذه في الغالب لأسباب تاريخية.</p><p>يُنصح بشدة بوضع التبعيات في مجلد <code>node_modules</code> المحلي. سيتم تحميل هذه بشكل أسرع وأكثر موثوقية.</p><h2 id="the-module-wrapper" tabindex="-1">غلاف الوحدة (The module wrapper) <a class="header-anchor" href="#the-module-wrapper" aria-label="Permalink to “غلاف الوحدة (The module wrapper)”">​</a></h2><p>قبل تنفيذ كود الوحدة، سيقوم Node.js بلفها بغلاف دالة يشبه ما يلي:</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">exports</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">module</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">__filename</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">__dirname</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// الكود الفعلي للوحدة موجود هنا</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>من خلال القيام بذلك، يحقق Node.js بعض الأشياء:</p><ul><li>يحافظ على نطاق المتغيرات ذات المستوى الأعلى (المعرفة باستخدام <code>var</code> أو <code>const</code> أو <code>let</code>) محصورًا في الوحدة بدلاً من الكائن العام.</li><li>يساعد في توفير بعض المتغيرات ذات المظهر العام والتي هي في الواقع خاصة بالوحدة، مثل: <ul><li>الكائنين <code>module</code> و <code>exports</code> اللذين يمكن للمنفذ استخدامهما لتصدير القيم من الوحدة.</li><li>المتغيرين المريحين <code>__filename</code> و <code>__dirname</code>، اللذين يحتويان على اسم الملف المطلق ومسار الدليل للوحدة.</li></ul></li></ul><h2 id="the-module-scope" tabindex="-1">نطاق الوحدة (The module scope) <a class="header-anchor" href="#the-module-scope" aria-label="Permalink to “نطاق الوحدة (The module scope)”">​</a></h2><h3 id="__dirname" tabindex="-1"><code>__dirname</code> <a class="header-anchor" href="#__dirname" aria-label="Permalink to “__dirname”">​</a></h3><p><strong>تمت إضافته في: الإصدار v0.1.27</strong></p><ul><li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;سلسلة نصية&gt;</a></li></ul><p>اسم دليل الوحدة الحالية. هذا هو نفسه <a href="/ar/nodejs/api/path#pathdirnamepath"><code>path.dirname()</code></a> الخاص بـ <a href="/ar/nodejs/api/modules#filename"><code>__filename</code></a>.</p><p>مثال: تشغيل <code>node example.js</code> من <code>/Users/mjr</code></p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(__dirname);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// يطبع: /Users/mjr</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(path.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">dirname</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(__filename));</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// يطبع: /Users/mjr</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="__filename" tabindex="-1"><code>__filename</code> <a class="header-anchor" href="#__filename" aria-label="Permalink to “__filename”">​</a></h3><p><strong>تمت إضافته في: الإصدار v0.0.1</strong></p><ul><li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;سلسلة نصية&gt;</a></li></ul><p>اسم ملف الوحدة الحالية. هذا هو المسار المطلق لملف الوحدة الحالية مع حل الروابط الرمزية.</p><p>بالنسبة للبرنامج الرئيسي، ليس هذا بالضرورة هو نفسه اسم الملف المستخدم في سطر الأوامر.</p><p>راجع <a href="/ar/nodejs/api/modules#dirname"><code>__dirname</code></a> لمعرفة اسم دليل الوحدة الحالية.</p><p>أمثلة:</p><p>تشغيل <code>node example.js</code> من <code>/Users/mjr</code></p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(__filename);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// يطبع: /Users/mjr/example.js</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(__dirname);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// يطبع: /Users/mjr</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>بالنظر إلى وحدتين: <code>a</code> و <code>b</code>، حيث <code>b</code> هي تبعية لـ <code>a</code> وهناك هيكل دليل لـ:</p><ul><li><code>/Users/mjr/app/a.js</code></li><li><code>/Users/mjr/app/node_modules/b/b.js</code></li></ul><p>ستعيد الإشارات إلى <code>__filename</code> داخل <code>b.js</code> القيمة <code>/Users/mjr/app/node_modules/b/b.js</code> بينما ستعيد الإشارات إلى <code>__filename</code> داخل <code>a.js</code> القيمة <code>/Users/mjr/app/a.js</code>.</p><h3 id="exports" tabindex="-1"><code>exports</code> <a class="header-anchor" href="#exports" aria-label="Permalink to “exports”">​</a></h3><p><strong>أُضيف في: الإصدار v0.1.12</strong></p><ul><li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noreferrer">&lt;Object&gt;</a></li></ul><p>مرجع إلى <code>module.exports</code> وهو أقصر في الكتابة. انظر قسم <a href="/ar/nodejs/api/modules#exports-shortcut">اختصار <code>exports</code></a> للحصول على تفاصيل حول متى تستخدم <code>exports</code> ومتى تستخدم <code>module.exports</code>.</p><h3 id="module" tabindex="-1"><code>module</code> <a class="header-anchor" href="#module" aria-label="Permalink to “module”">​</a></h3><p><strong>أُضيف في: الإصدار v0.1.16</strong></p><ul><li><a href="/ar/nodejs/api/modules#the-module-object">&lt;module&gt;</a></li></ul><p>مرجع إلى الوحدة النمطية الحالية، انظر قسم <a href="/ar/nodejs/api/modules#the-module-object">كائن <code>module</code></a>. على وجه الخصوص، يتم استخدام <code>module.exports</code> لتحديد ما تصدره الوحدة النمطية وتجعله متاحًا من خلال <code>require()</code>.</p><h3 id="requireid" tabindex="-1"><code>require(id)</code> <a class="header-anchor" href="#requireid" aria-label="Permalink to “require(id)”">​</a></h3><p><strong>أُضيف في: الإصدار v0.1.13</strong></p><ul><li><code>id</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> اسم أو مسار الوحدة النمطية</li><li>الإرجاع: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Data_types" target="_blank" rel="noreferrer">&lt;any&gt;</a> محتوى الوحدة النمطية المصدرة</li></ul><p>يستخدم لاستيراد الوحدات النمطية وملفات <code>JSON</code> والملفات المحلية. يمكن استيراد الوحدات النمطية من <code>node_modules</code>. يمكن استيراد الوحدات النمطية المحلية وملفات JSON باستخدام مسار نسبي (مثل <code>./</code>، <code>./foo</code>، <code>./bar/baz</code>، <code>../foo</code>) والذي سيتم حله مقابل الدليل المسمى بواسطة <a href="/ar/nodejs/api/modules#dirname"><code>__dirname</code></a> (إذا تم تحديده) أو دليل العمل الحالي. يتم حل المسارات النسبية لنمط POSIX بطريقة مستقلة عن نظام التشغيل، مما يعني أن الأمثلة أعلاه ستعمل على Windows بنفس الطريقة التي ستعمل بها على أنظمة Unix.</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// استيراد وحدة نمطية محلية بمسار نسبي إلى \`__dirname\` أو الحالي</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// دليل العمل. (على Windows، سيؤدي ذلك إلى الحل إلى .\\path\\myLocalModule.)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> myLocalModule</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;./path/myLocalModule&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// استيراد ملف JSON:</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> jsonData</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;./path/filename.json&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// استيراد وحدة نمطية من node_modules أو وحدة نمطية مدمجة في Node.js:</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> crypto</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;node:crypto&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h4 id="requirecache" tabindex="-1"><code>require.cache</code> <a class="header-anchor" href="#requirecache" aria-label="Permalink to “require.cache”">​</a></h4><p><strong>أُضيف في: الإصدار v0.3.0</strong></p><ul><li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noreferrer">&lt;Object&gt;</a></li></ul><p>يتم تخزين الوحدات النمطية مؤقتًا في هذا الكائن عند طلبها. عن طريق حذف قيمة مفتاح من هذا الكائن، ستقوم <code>require</code> التالية بإعادة تحميل الوحدة النمطية. هذا لا ينطبق على <a href="/ar/nodejs/api/addons">الوظائف الإضافية الأصلية</a>، والتي سيؤدي إعادة تحميلها إلى حدوث خطأ.</p><p>إضافة أو استبدال الإدخالات ممكن أيضًا. يتم فحص هذا المخزن المؤقت قبل الوحدات النمطية المضمنة وإذا تمت إضافة اسم يطابق وحدة نمطية مضمنة إلى المخزن المؤقت، فستتلقى استدعاءات <code>node:</code> ذات البادئة فقط الوحدة النمطية المضمنة. استخدم بحذر!</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> assert</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;node:assert&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> realFs</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;node:fs&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> fakeFs</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {};</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">require.cache.fs </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { exports: fakeFs };</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">assert.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">strictEqual</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;fs&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">), fakeFs);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">assert.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">strictEqual</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;node:fs&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">), realFs);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h4 id="requireextensions" tabindex="-1"><code>require.extensions</code> <a class="header-anchor" href="#requireextensions" aria-label="Permalink to “require.extensions”">​</a></h4><p><strong>تمت إضافته في: v0.3.0</strong></p><p><strong>تم إهماله منذ: v0.10.6</strong></p><div class="danger custom-block"><p class="custom-block-title">[مستقر: 0 - مهمل]</p><p><a href="/ar/nodejs/api/documentation#stability-index">مستقر: 0</a> <a href="/ar/nodejs/api/documentation#stability-index">الاستقرار: 0</a> - مهمل</p></div><ul><li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noreferrer">&lt;Object&gt;</a></li></ul><p>إرشاد <code>require</code> حول كيفية التعامل مع امتدادات ملفات معينة.</p><p>معالجة الملفات ذات الامتداد <code>.sjs</code> كـ <code>.js</code>:</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">require.extensions[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;.sjs&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> require.extensions[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;.js&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">];</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><strong>مهمل.</strong> في الماضي، تم استخدام هذه القائمة لتحميل وحدات غير JavaScript إلى Node.js عن طريق تجميعها عند الطلب. ومع ذلك، من الناحية العملية، هناك طرق أفضل بكثير للقيام بذلك، مثل تحميل الوحدات عبر برنامج Node.js آخر، أو تجميعها إلى JavaScript مسبقًا.</p><p>تجنب استخدام <code>require.extensions</code>. يمكن أن يتسبب الاستخدام في حدوث أخطاء دقيقة ويصبح حل الامتدادات أبطأ مع كل امتداد مسجل.</p><h4 id="requiremain" tabindex="-1"><code>require.main</code> <a class="header-anchor" href="#requiremain" aria-label="Permalink to “require.main”">​</a></h4><p><strong>تمت إضافته في: v0.1.17</strong></p><ul><li><a href="/ar/nodejs/api/modules#the-module-object">&lt;module&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Undefined_type" target="_blank" rel="noreferrer">&lt;undefined&gt;</a></li></ul><p>كائن <code>الوحدة</code> الذي يمثل البرنامج النصي للإدخال الذي تم تحميله عند تشغيل عملية Node.js، أو <code>غير معرف</code> إذا لم تكن نقطة إدخال البرنامج وحدة CommonJS. راجع <a href="/ar/nodejs/api/modules#accessing-the-main-module">&quot;الوصول إلى الوحدة الرئيسية&quot;</a>.</p><p>في البرنامج النصي <code>entry.js</code>:</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(require.main);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">node</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> entry.js</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">الوحدة {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  id</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;.&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  path</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;/absolute/path/to&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  exports</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {},</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  filename</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;/absolute/path/to/entry.js&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  loaded</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  children</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [],</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  paths</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">   [ </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;/absolute/path/to/node_modules&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">     &#39;/absolute/path/node_modules&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">     &#39;/absolute/node_modules&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">     &#39;/node_modules&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ] }</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h4 id="requireresolverequest-options" tabindex="-1"><code>require.resolve(request[, options])</code> <a class="header-anchor" href="#requireresolverequest-options" aria-label="Permalink to “require.resolve(request[, options])”">​</a></h4><div class="info custom-block"><p class="custom-block-title">[سجل التغييرات]</p><table tabindex="0"><thead><tr><th>الإصدار</th><th>التغييرات</th></tr></thead><tbody><tr><td>v8.9.0</td><td>يتم الآن دعم خيار <code>paths</code>.</td></tr><tr><td>v0.3.0</td><td>تمت إضافته في: v0.3.0</td></tr></tbody></table></div><ul><li><p><code>request</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> مسار الوحدة المراد حله.</p></li><li><p><code>options</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noreferrer">&lt;Object&gt;</a></p><ul><li><code>paths</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string[]&gt;</a> مسارات لحل موقع الوحدة النمطية منها. إذا كان موجودًا، فسيتم استخدام هذه المسارات بدلاً من مسارات الحل الافتراضية، باستثناء <a href="/ar/nodejs/api/modules#loading-from-the-global-folders">GLOBAL_FOLDERS</a> مثل <code>$HOME/.node_modules</code>، والتي يتم تضمينها دائمًا. يتم استخدام كل من هذه المسارات كنقطة انطلاق لخوارزمية حل الوحدة النمطية، مما يعني أنه يتم فحص تسلسل <code>node_modules</code> من هذا الموقع.</li></ul></li><li><p>الإرجاع: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a></p></li></ul><p>استخدم آلية <code>require()</code> الداخلية للبحث عن موقع وحدة، ولكن بدلاً من تحميل الوحدة النمطية، ما عليك سوى إرجاع اسم الملف الذي تم حله.</p><p>إذا تعذر العثور على الوحدة النمطية، يتم طرح خطأ <code>MODULE_NOT_FOUND</code>.</p><h5 id="requireresolvepathsrequest" tabindex="-1"><code>require.resolve.paths(request)</code> <a class="header-anchor" href="#requireresolvepathsrequest" aria-label="Permalink to “require.resolve.paths(request)”">​</a></h5><p><strong>أُضيف في: v8.9.0</strong></p><ul><li><code>request</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a>: مسار الوحدة النمطية التي يتم استرجاع مسارات البحث الخاصة بها.</li><li>الإرجاع: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string[]&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Null_type" target="_blank" rel="noreferrer">&lt;null&gt;</a></li></ul><p>إرجاع مصفوفة تحتوي على المسارات التي تم البحث فيها أثناء تحليل <code>request</code> أو <code>null</code> إذا كان سلسلة <code>request</code> تشير إلى وحدة نمطية أساسية، على سبيل المثال <code>http</code> أو <code>fs</code>.</p><h2 id="the-module-object" tabindex="-1">الكائن <code>module</code> <a class="header-anchor" href="#the-module-object" aria-label="Permalink to “الكائن module”">​</a></h2><p><strong>أُضيف في: v0.1.16</strong></p><ul><li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noreferrer">&lt;Object&gt;</a></li></ul><p>في كل وحدة نمطية، يكون المتغير الحر <code>module</code> مرجعًا إلى الكائن الذي يمثل الوحدة النمطية الحالية. للراحة، يمكن الوصول إلى <code>module.exports</code> أيضًا عبر <code>exports</code> العام على مستوى الوحدة النمطية. <code>module</code> ليس عامًا بالفعل ولكنه محلي لكل وحدة نمطية.</p><h3 id="modulechildren" tabindex="-1"><code>module.children</code> <a class="header-anchor" href="#modulechildren" aria-label="Permalink to “module.children”">​</a></h3><p><strong>أُضيف في: v0.1.16</strong></p><ul><li><a href="/ar/nodejs/api/modules#the-module-object">&lt;module[]&gt;</a></li></ul><p>كائنات الوحدة النمطية المطلوبة لأول مرة بواسطة هذه الوحدة النمطية.</p><h3 id="moduleexports" tabindex="-1"><code>module.exports</code> <a class="header-anchor" href="#moduleexports" aria-label="Permalink to “module.exports”">​</a></h3><p><strong>أُضيف في: v0.1.16</strong></p><ul><li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noreferrer">&lt;Object&gt;</a></li></ul><p>يتم إنشاء الكائن <code>module.exports</code> بواسطة نظام <code>Module</code>. في بعض الأحيان يكون هذا غير مقبول؛ يرغب الكثيرون في أن تكون وحدتهم النمطية مثيلًا لفئة ما. للقيام بذلك، قم بتعيين كائن التصدير المطلوب إلى <code>module.exports</code>. سيؤدي تعيين الكائن المطلوب إلى <code>exports</code> ببساطة إلى إعادة ربط المتغير المحلي <code>exports</code>، وهو على الأرجح ليس ما هو مطلوب.</p><p>على سبيل المثال، لنفترض أننا نصنع وحدة نمطية تسمى <code>a.js</code>:</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> EventEmitter</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;node:events&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">module</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">exports</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> EventEmitter</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// قم ببعض العمل، وبعد فترة من الوقت قم بإصدار</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// حدث &#39;ready&#39; من الوحدة النمطية نفسها.</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setTimeout</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  module</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">exports</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">emit</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;ready&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1000</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>ثم في ملف آخر يمكننا القيام بما يلي:</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> a</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;./a&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">a.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">on</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;ready&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;module &quot;a&quot; is ready&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>يجب إجراء التعيين إلى <code>module.exports</code> على الفور. لا يمكن القيام بذلك في أي عمليات رد نداء. هذا لا يعمل:</p><p><code>x.js</code>:</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setTimeout</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  module</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">exports</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { a: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;hello&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> };</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><code>y.js</code>:</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> x</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;./x&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(x.a);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h4 id="exports-shortcut" tabindex="-1">اختصار <code>exports</code> <a class="header-anchor" href="#exports-shortcut" aria-label="Permalink to “اختصار exports”">​</a></h4><p><strong>أُضيف في: الإصدار v0.1.16</strong></p><p>المتغير <code>exports</code> متاح ضمن نطاق الملف الخاص بالوحدة النمطية، ويتم تعيين قيمة <code>module.exports</code> له قبل تقييم الوحدة النمطية.</p><p>يسمح هذا بوجود اختصار، بحيث يمكن كتابة <code>module.exports.f = ...</code> بشكل أكثر إيجازًا كـ <code>exports.f = ...</code>. ومع ذلك، يجب الانتباه إلى أنه مثل أي متغير، إذا تم تعيين قيمة جديدة لـ <code>exports</code>، فلن تكون مرتبطة بعد الآن بـ <code>module.exports</code>:</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">module</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">exports</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.hello </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// تم التصدير من require للوحدة النمطية</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">exports</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { hello: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> };  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// لم يتم التصدير، متاح فقط في الوحدة النمطية</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>عندما يتم استبدال الخاصية <code>module.exports</code> بالكامل بكائن جديد، فمن الشائع أيضًا إعادة تعيين <code>exports</code>:</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">module</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">exports</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> exports</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Constructor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // ... إلخ.</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>لتوضيح السلوك، تخيل هذا التنفيذ الافتراضي لـ <code>require()</code>، وهو مشابه تمامًا لما يتم فعله بالفعل بواسطة <code>require()</code>:</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/* ... */</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> module</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { exports: {} };</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  ((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">module</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">exports</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // رمز الوحدة النمطية هنا. في هذا المثال، قم بتعريف دالة.</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> someFunc</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {}</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    exports</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> someFunc;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // في هذه المرحلة، لم يعد exports اختصارًا لـ module.exports، و</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // ستظل هذه الوحدة النمطية تصدر كائنًا افتراضيًا فارغًا.</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    module</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">exports</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> someFunc;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // في هذه المرحلة، ستصدر الوحدة النمطية الآن someFunc، بدلاً من</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // الكائن الافتراضي.</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  })(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">module</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">module</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">exports</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> module</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">exports</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h3 id="modulefilename" tabindex="-1"><code>module.filename</code> <a class="header-anchor" href="#modulefilename" aria-label="Permalink to “module.filename”">​</a></h3><p><strong>أُضيف في: الإصدار v0.1.16</strong></p><ul><li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a></li></ul><p>اسم الملف الكامل الذي تم حله للوحدة النمطية.</p><h3 id="moduleid" tabindex="-1"><code>module.id</code> <a class="header-anchor" href="#moduleid" aria-label="Permalink to “module.id”">​</a></h3><p><strong>أُضيف في: الإصدار v0.1.16</strong></p><ul><li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a></li></ul><p>معرف الوحدة النمطية. عادةً ما يكون هذا هو اسم الملف الكامل الذي تم حله.</p><h3 id="moduleispreloading" tabindex="-1"><code>module.isPreloading</code> <a class="header-anchor" href="#moduleispreloading" aria-label="Permalink to “module.isPreloading”">​</a></h3><p><strong>أُضيف في: الإصدار v15.4.0، v14.17.0</strong></p><ul><li>النوع: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" target="_blank" rel="noreferrer">&lt;boolean&gt;</a> <code>true</code> إذا كانت الوحدة النمطية قيد التشغيل أثناء مرحلة التحميل المسبق لـ Node.js.</li></ul><h3 id="moduleloaded" tabindex="-1"><code>module.loaded</code> <a class="header-anchor" href="#moduleloaded" aria-label="Permalink to “module.loaded”">​</a></h3><p><strong>تمت الإضافة في: v0.1.16</strong></p><ul><li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" target="_blank" rel="noreferrer">&lt;boolean&gt;</a></li></ul><p>ما إذا كانت الوحدة قد انتهت من التحميل أم لا، أو أنها قيد عملية التحميل.</p><h3 id="moduleparent" tabindex="-1"><code>module.parent</code> <a class="header-anchor" href="#moduleparent" aria-label="Permalink to “module.parent”">​</a></h3><p><strong>تمت الإضافة في: v0.1.16</strong></p><p><strong>تم الإلغاء منذ: v14.6.0, v12.19.0</strong></p><div class="danger custom-block"><p class="custom-block-title">[مستقر: 0 - تم الإلغاء]</p><p><a href="/ar/nodejs/api/documentation#stability-index">مستقر: 0</a> <a href="/ar/nodejs/api/documentation#stability-index">الاستقرار: 0</a> - تم الإلغاء: يرجى استخدام <a href="/ar/nodejs/api/modules#requiremain"><code>require.main</code></a> و <a href="/ar/nodejs/api/modules#modulechildren"><code>module.children</code></a> بدلاً من ذلك.</p></div><ul><li><a href="/ar/nodejs/api/modules#the-module-object">&lt;module&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Null_type" target="_blank" rel="noreferrer">&lt;null&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Undefined_type" target="_blank" rel="noreferrer">&lt;undefined&gt;</a></li></ul><p>الوحدة التي طلبت هذه الوحدة أولاً، أو <code>null</code> إذا كانت الوحدة الحالية هي نقطة الدخول للعملية الحالية، أو <code>undefined</code> إذا تم تحميل الوحدة بواسطة شيء ليس وحدة CommonJS (مثل: REPL أو <code>import</code>).</p><h3 id="modulepath" tabindex="-1"><code>module.path</code> <a class="header-anchor" href="#modulepath" aria-label="Permalink to “module.path”">​</a></h3><p><strong>تمت الإضافة في: v11.14.0</strong></p><ul><li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a></li></ul><p>اسم دليل الوحدة. عادة ما يكون هذا هو نفسه <a href="/ar/nodejs/api/path#pathdirnamepath"><code>path.dirname()</code></a> الخاص بـ <a href="/ar/nodejs/api/modules#moduleid"><code>module.id</code></a>.</p><h3 id="modulepaths" tabindex="-1"><code>module.paths</code> <a class="header-anchor" href="#modulepaths" aria-label="Permalink to “module.paths”">​</a></h3><p><strong>تمت الإضافة في: v0.4.0</strong></p><ul><li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string[]&gt;</a></li></ul><p>مسارات البحث عن الوحدة.</p><h3 id="modulerequireid" tabindex="-1"><code>module.require(id)</code> <a class="header-anchor" href="#modulerequireid" aria-label="Permalink to “module.require(id)”">​</a></h3><p><strong>تمت الإضافة في: v0.5.1</strong></p><ul><li><code>id</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a></li><li>الإرجاع: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Data_types" target="_blank" rel="noreferrer">&lt;any&gt;</a> محتوى الوحدة النمطية المصدرة</li></ul><p>توفر الطريقة <code>module.require()</code> طريقة لتحميل وحدة كما لو تم استدعاء <code>require()</code> من الوحدة الأصلية.</p><p>للقيام بذلك، من الضروري الحصول على مرجع للكائن <code>module</code>. نظرًا لأن <code>require()</code> تُرجع <code>module.exports</code>، وعادةً ما يكون <code>module</code> متاحًا <em>فقط</em> داخل كود وحدة نمطية معينة، فيجب تصديره بشكل صريح لاستخدامه.</p><h2 id="the-module-object_1" tabindex="-1">كائن <code>الوحدة النمطية</code> <a class="header-anchor" href="#the-module-object_1" aria-label="Permalink to “كائن الوحدة النمطية”">​</a></h2><p>تم نقل هذا القسم إلى <a href="/ar/nodejs/api/module#the-module-object">الوحدات النمطية: الوحدة النمطية الأساسية <code>module</code></a>.</p><ul><li><a href="/ar/nodejs/api/module#modulebuiltinmodules"><code>module.builtinModules</code></a></li><li><a href="/ar/nodejs/api/module#modulecreaterequirefilename"><code>module.createRequire(filename)</code></a></li><li><a href="/ar/nodejs/api/module#modulesyncbuiltinesmexports"><code>module.syncBuiltinESMExports()</code></a></li></ul><h2 id="source-map-v3-support" tabindex="-1">دعم الخريطة المصدرية الإصدار 3 <a class="header-anchor" href="#source-map-v3-support" aria-label="Permalink to “دعم الخريطة المصدرية الإصدار 3”">​</a></h2><p>تم نقل هذا القسم إلى <a href="/ar/nodejs/api/module#source-map-v3-support">الوحدات النمطية: الوحدة النمطية الأساسية <code>module</code></a>.</p><ul><li><a href="/ar/nodejs/api/module#modulefindsourcemappath"><code>module.findSourceMap(path)</code></a></li><li><a href="/ar/nodejs/api/module#class-modulesourcemap">فئة: <code>module.SourceMap</code></a><ul><li><a href="/ar/nodejs/api/module#new-sourcemappayload"><code>new SourceMap(payload)</code></a></li><li><a href="/ar/nodejs/api/module#sourcemappayload"><code>sourceMap.payload</code></a></li><li><a href="/ar/nodejs/api/module#sourcemapfindentrylinenumber-columnnumber"><code>sourceMap.findEntry(lineNumber, columnNumber)</code></a></li></ul></li></ul>`,269)])}var s=e(a,[[`render`,o]]);export{i as __pageData,s as default};