import{__plugin_vue_export_helper_default as e,createElementBlock as t,createStaticVNode as n,openBlock as r}from"./chunks/plugin-vue_export-helper.Bts1mPc7.js";const i=JSON.parse(`{"title":"Débogage de Node.js","description":"Options de débogage de Node.js, notamment --inspect, --inspect-brk et --debug, ainsi que des scénarios de débogage à distance et des informations sur l'ancien débogueur.","frontmatter":{"title":"Débogage de Node.js","description":"Options de débogage de Node.js, notamment --inspect, --inspect-brk et --debug, ainsi que des scénarios de débogage à distance et des informations sur l'ancien débogueur.","head":[["meta",{"name":"og:title","content":"Débogage de Node.js | Node.js - iDoc.dev"}],["meta",{"name":"og:description","content":"Options de débogage de Node.js, notamment --inspect, --inspect-brk et --debug, ainsi que des scénarios de débogage à distance et des informations sur l'ancien débogueur."}],["meta",{"name":"twitter:title","content":"Débogage de Node.js | Node.js - iDoc.dev"}],["meta",{"name":"twitter:description","content":"Options de débogage de Node.js, notamment --inspect, --inspect-brk et --debug, ainsi que des scénarios de débogage à distance et des informations sur l'ancien débogueur."}],["link",{"rel":"canonical","href":"https://idoc.dev/fr/nodejs/guide/debugging-nodejs"}],["meta",{"property":"og:url","content":"https://idoc.dev/fr/nodejs/guide/debugging-nodejs"}]]},"headers":[],"relativePath":"fr/nodejs/guide/debugging-nodejs.md","filePath":"fr/nodejs/guide/debugging-nodejs.md","lastUpdated":1749464498000}`),a={name:`fr/nodejs/guide/debugging-nodejs.md`};function o(e,i,a,o,s,c){return r(),t(`div`,null,i[0]||=[n(`<h1 id="debogage-de-node-js" tabindex="-1">Débogage de Node.js <a class="header-anchor" href="#debogage-de-node-js" aria-label="Permalink to “Débogage de Node.js”">​</a></h1><p>Ce guide vous aidera à démarrer le débogage de vos applications et scripts Node.js.</p><h2 id="activer-l-inspecteur" tabindex="-1">Activer l&#39;inspecteur <a class="header-anchor" href="#activer-l-inspecteur" aria-label="Permalink to “Activer l&#39;inspecteur”">​</a></h2><p>Lorsqu&#39;il est démarré avec l&#39;option <code>--inspect</code>, un processus Node.js écoute un client de débogage. Par défaut, il écoute à l&#39;hôte et au port <code>127.0.0.1:9229</code>. Chaque processus se voit également attribuer un UUID unique.</p><p>Les clients Inspector doivent connaître et spécifier l&#39;adresse de l&#39;hôte, le port et l&#39;UUID pour se connecter. Une URL complète ressemblera à quelque chose comme <code>ws://127.0.0.1:9229/0f2c936f-b1cd-4ac9-aab3-f63b0f33d55e</code>.</p><p>Node.js commencera également à écouter les messages de débogage s&#39;il reçoit un signal <code>SIGUSR1</code>. ( <code>SIGUSR1</code> n&#39;est pas disponible sur Windows.) Dans Node.js 7 et versions antérieures, cela active l&#39;API Debugger héritée. Dans Node.js 8 et versions ultérieures, cela activera l&#39;API Inspector.</p><h2 id="implications-de-securite" tabindex="-1">Implications de sécurité <a class="header-anchor" href="#implications-de-securite" aria-label="Permalink to “Implications de sécurité”">​</a></h2><p>Étant donné que le débogueur a un accès complet à l&#39;environnement d&#39;exécution Node.js, un acteur malveillant capable de se connecter à ce port peut être en mesure d&#39;exécuter du code arbitraire au nom du processus Node.js. Il est important de comprendre les implications de sécurité de l&#39;exposition du port du débogueur sur les réseaux publics et privés.</p><h3 id="exposer-publiquement-le-port-de-debogage-est-dangereux" tabindex="-1">Exposer publiquement le port de débogage est dangereux <a class="header-anchor" href="#exposer-publiquement-le-port-de-debogage-est-dangereux" aria-label="Permalink to “Exposer publiquement le port de débogage est dangereux”">​</a></h3><p>Si le débogueur est lié à une adresse IP publique ou à 0.0.0.0, tous les clients qui peuvent atteindre votre adresse IP pourront se connecter au débogueur sans aucune restriction et pourront exécuter du code arbitraire.</p><p>Par défaut, <code>node --inspect</code> se lie à 127.0.0.1. Vous devez explicitement fournir une adresse IP publique ou 0.0.0.0, etc., si vous avez l&#39;intention d&#39;autoriser les connexions externes au débogueur. Cela peut vous exposer à une menace de sécurité potentiellement importante. Nous vous suggérons de vous assurer que les pare-feu et les contrôles d&#39;accès appropriés sont en place pour éviter une exposition de sécurité.</p><p>Consultez la section sur &#39;<a href="/fr/nodejs/guide/debugging-nodejs#enabling-remote-debugging-scenarios">Activation des scénarios de débogage à distance</a>&#39; pour obtenir des conseils sur la façon d&#39;autoriser en toute sécurité les clients de débogage à distance à se connecter.</p><h3 id="les-applications-locales-ont-un-acces-complet-a-l-inspecteur" tabindex="-1">Les applications locales ont un accès complet à l&#39;inspecteur <a class="header-anchor" href="#les-applications-locales-ont-un-acces-complet-a-l-inspecteur" aria-label="Permalink to “Les applications locales ont un accès complet à l&#39;inspecteur”">​</a></h3><p>Même si vous liez le port de l&#39;inspecteur à 127.0.0.1 (la valeur par défaut), toutes les applications s&#39;exécutant localement sur votre machine auront un accès illimité. Ceci est intentionnel afin de permettre aux débogueurs locaux de se connecter facilement.</p><h3 id="navigateurs-websockets-et-politique-de-meme-origine" tabindex="-1">Navigateurs, WebSockets et politique de même origine <a class="header-anchor" href="#navigateurs-websockets-et-politique-de-meme-origine" aria-label="Permalink to “Navigateurs, WebSockets et politique de même origine”">​</a></h3><p>Les sites web ouverts dans un navigateur web peuvent effectuer des requêtes WebSocket et HTTP dans le cadre du modèle de sécurité du navigateur. Une connexion HTTP initiale est nécessaire pour obtenir un identifiant de session de débogage unique. La politique de même origine empêche les sites web d&#39;établir cette connexion HTTP. Pour une sécurité supplémentaire contre les <a href="https://en.wikipedia.org/wiki/DNS_rebinding" target="_blank" rel="noreferrer">attaques de reliaison DNS</a>, Node.js vérifie que les en-têtes &#39;Host&#39; de la connexion spécifient précisément une adresse IP ou <code>localhost</code>.</p><p>Ces politiques de sécurité interdisent la connexion à un serveur de débogage distant en spécifiant le nom d&#39;hôte. Vous pouvez contourner cette restriction en spécifiant soit l&#39;adresse IP, soit en utilisant des tunnels SSH comme décrit ci-dessous.</p><h2 id="clients-inspector" tabindex="-1">Clients Inspector <a class="header-anchor" href="#clients-inspector" aria-label="Permalink to “Clients Inspector”">​</a></h2><p>Un débogueur CLI minimal est disponible avec la commande <code>node inspect myscript.js</code>. Plusieurs outils commerciaux et open source peuvent également se connecter à l&#39;inspecteur Node.js.</p><h3 id="chrome-devtools-55-microsoft-edge" tabindex="-1">Chrome DevTools 55+, Microsoft Edge <a class="header-anchor" href="#chrome-devtools-55-microsoft-edge" aria-label="Permalink to “Chrome DevTools 55+, Microsoft Edge”">​</a></h3><ul><li><strong>Option 1</strong>: Ouvrez <code>chrome://inspect</code> dans un navigateur basé sur Chromium ou <code>edge://inspect</code> dans Edge. Cliquez sur le bouton Configurer et assurez-vous que votre hôte et votre port cibles sont répertoriés.</li><li><strong>Option 2</strong>: Copiez l&#39;<code>devtoolsFrontendUrl</code> de la sortie de <code>/json/list</code> (voir ci-dessus) ou du texte d&#39;aide <code>--inspect</code> et collez-le dans Chrome.</li></ul><p>Voir <a href="https://github.com/ChromeDevTools/devtools-frontend" target="_blank" rel="noreferrer">https://github.com/ChromeDevTools/devtools-frontend</a>, <a href="https://www.microsoftedgeinsider.com" target="_blank" rel="noreferrer">https://www.microsoftedgeinsider.com</a> pour plus d&#39;informations.</p><h3 id="visual-studio-code-1-10" tabindex="-1">Visual Studio Code 1.10+ <a class="header-anchor" href="#visual-studio-code-1-10" aria-label="Permalink to “Visual Studio Code 1.10+”">​</a></h3><ul><li>Dans le panneau Débogage, cliquez sur l&#39;icône des paramètres pour ouvrir <code>.vscode/launch.json</code>. Sélectionnez &quot;Node.js&quot; pour la configuration initiale.</li></ul><p>Voir <a href="https://github.com/microsoft/vscode" target="_blank" rel="noreferrer">https://github.com/microsoft/vscode</a> pour plus d&#39;informations.</p><h3 id="jetbrains-webstorm-et-autres-ide-jetbrains" tabindex="-1">JetBrains WebStorm et autres IDE JetBrains <a class="header-anchor" href="#jetbrains-webstorm-et-autres-ide-jetbrains" aria-label="Permalink to “JetBrains WebStorm et autres IDE JetBrains”">​</a></h3><ul><li>Créez une nouvelle configuration de débogage Node.js et lancez le débogage. <code>--inspect</code> sera utilisé par défaut pour Node.js 7+. Pour désactiver, décochez <code>js.debugger.node.use.inspect</code> dans le registre IDE. Pour en savoir plus sur l&#39;exécution et le débogage de Node.js dans WebStorm et d&#39;autres IDE JetBrains, consultez <a href="https://www.jetbrains.com/help/webstorm/running-and-debugging-node-js.html" target="_blank" rel="noreferrer">l&#39;aide en ligne de WebStorm</a>.</li></ul><h3 id="chrome-remote-interface" tabindex="-1">chrome-remote-interface <a class="header-anchor" href="#chrome-remote-interface" aria-label="Permalink to “chrome-remote-interface”">​</a></h3><ul><li>Bibliothèque pour faciliter les connexions aux points de terminaison du <a href="https://chromedevtools.github.io/debugger-protocol-viewer/v8/" target="_blank" rel="noreferrer">protocole Inspector</a>. Voir <a href="https://github.com/cyrus-and/chrome-remote-interface" target="_blank" rel="noreferrer">https://github.com/cyrus-and/chrome-remote-interface</a> pour plus d&#39;informations.</li></ul><h3 id="gitpod" tabindex="-1">Gitpod <a class="header-anchor" href="#gitpod" aria-label="Permalink to “Gitpod”">​</a></h3><ul><li>Démarrez une configuration de débogage Node.js depuis la vue <code>Debug</code> ou appuyez sur <code>F5</code>. Instructions détaillées.</li></ul><p>Voir <a href="https://www.gitpod.io" target="_blank" rel="noreferrer">https://www.gitpod.io</a> pour plus d&#39;informations.</p><h3 id="eclipse-ide-avec-l-extension-eclipse-wild-web-developer" tabindex="-1">Eclipse IDE avec l&#39;extension Eclipse Wild Web Developer <a class="header-anchor" href="#eclipse-ide-avec-l-extension-eclipse-wild-web-developer" aria-label="Permalink to “Eclipse IDE avec l&#39;extension Eclipse Wild Web Developer”">​</a></h3><ul><li>À partir d&#39;un fichier <code>.js</code>, choisissez <code>Debug As... &gt; Node program</code>, ou créez une configuration de débogage pour attacher le débogueur à une application Node.js en cours d&#39;exécution (déjà démarrée avec <code>--inspect</code>).</li></ul><p>Voir <a href="https://eclipse.org/eclipseide" target="_blank" rel="noreferrer">https://eclipse.org/eclipseide</a> pour plus d&#39;informations.</p><h2 id="options-de-ligne-de-commande" tabindex="-1">Options de ligne de commande <a class="header-anchor" href="#options-de-ligne-de-commande" aria-label="Permalink to “Options de ligne de commande”">​</a></h2><p>Le tableau suivant répertorie l&#39;impact de divers indicateurs d&#39;exécution sur le débogage\xA0:</p><table tabindex="0"><thead><tr><th>Indicateur</th><th>Signification</th></tr></thead><tbody><tr><td><code>--inspect</code></td><td>Active le débogage avec Node.js Inspector. Écoute sur l&#39;adresse et le port par défaut (127.0.0.1:9229)</td></tr><tr><td><code>--inspect-brk</code></td><td>Active le débogage avec Node.js Inspector. Écoute sur l&#39;adresse et le port par défaut (127.0.0.1:9229); S&#39;arrête avant le démarrage du code utilisateur</td></tr><tr><td><code>--inspect=[host:port]</code></td><td>Active l&#39;agent Inspector\xA0; Se lie à l&#39;adresse ou au nom d&#39;hôte host (par défaut\xA0: 127.0.0.1)\xA0; Écoute sur le port port (par défaut\xA0: 9229)</td></tr><tr><td><code>--inspect-brk=[host:port]</code></td><td>Active l&#39;agent Inspector\xA0; Se lie à l&#39;adresse ou au nom d&#39;hôte host (par défaut\xA0: 127.0.0.1)\xA0; Écoute sur le port port (par défaut\xA0: 9229); S&#39;arrête avant le démarrage du code utilisateur</td></tr><tr><td><code>--inspect-wait</code></td><td>Active l&#39;agent Inspector\xA0; Écoute sur l&#39;adresse et le port par défaut (127.0.0.1:9229)\xA0; Attend que le débogueur soit attaché.</td></tr><tr><td><code>--inspect-wait=[host:port]</code></td><td>Active l&#39;agent Inspector\xA0; Se lie à l&#39;adresse ou au nom d&#39;hôte host (par défaut\xA0: 127.0.0.1)\xA0; Écoute sur le port port (par défaut\xA0: 9229)\xA0; Attend que le débogueur soit attaché.</td></tr><tr><td><code>node inspect script.js</code></td><td>Crée un processus enfant pour exécuter le script de l&#39;utilisateur avec l&#39;indicateur --inspect\xA0; et utilise le processus principal pour exécuter le débogueur CLI.</td></tr><tr><td><code>node inspect --port=xxxx script.js</code></td><td>Crée un processus enfant pour exécuter le script de l&#39;utilisateur avec l&#39;indicateur --inspect\xA0; et utilise le processus principal pour exécuter le débogueur CLI. Écoute sur le port port (par défaut\xA0: 9229)</td></tr></tbody></table><h2 id="activation-des-scenarios-de-debogage-a-distance" tabindex="-1">Activation des scénarios de débogage à distance <a class="header-anchor" href="#activation-des-scenarios-de-debogage-a-distance" aria-label="Permalink to “Activation des scénarios de débogage à distance”">​</a></h2><p>Nous recommandons de ne jamais faire écouter le débogueur sur une adresse IP publique. Si vous devez autoriser les connexions de débogage à distance, nous recommandons plutôt l&#39;utilisation de tunnels ssh. Nous fournissons l&#39;exemple suivant à des fins d&#39;illustration uniquement. Veuillez comprendre le risque de sécurité lié à l&#39;autorisation d&#39;un accès distant à un service privilégié avant de continuer.</p><p>Supposons que vous exécutez Node.js sur une machine distante, remote.example.com, que vous souhaitez pouvoir déboguer. Sur cette machine, vous devez démarrer le processus Node avec l&#39;inspecteur écoutant uniquement localhost (par défaut).</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">node</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --inspect</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> app.js</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>Maintenant, sur votre machine locale à partir de laquelle vous souhaitez initier une connexion client de débogage, vous pouvez configurer un tunnel ssh\xA0:</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ssh</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -L</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 9225:localhost:9229</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> remote.example.com</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>Cela démarre une session de tunnel ssh où une connexion au port\xA09225 sur votre machine locale sera redirigée vers le port\xA09229 sur remote.example.com. Vous pouvez maintenant attacher un débogueur tel que Chrome DevTools ou Visual Studio Code à localhost\xA0:9225, ce qui devrait permettre de déboguer comme si l&#39;application Node.js s&#39;exécutait localement.</p><h2 id="debogueur-herite" tabindex="-1">Débogueur hérité <a class="header-anchor" href="#debogueur-herite" aria-label="Permalink to “Débogueur hérité”">​</a></h2><p><strong>Le débogueur hérité a été déprécié depuis Node.js 7.7.0. Veuillez utiliser --inspect et Inspector à la place.</strong></p><p>Lorsqu&#39;il est démarré avec les commutateurs <code>--debug</code> ou <code>--debug-brk</code> dans la version\xA07 et les versions antérieures, Node.js écoute les commandes de débogage définies par le protocole de débogage V8 abandonné sur un port TCP, par défaut <code>5858</code>. Tout client de débogage qui parle ce protocole peut se connecter au processus en cours d&#39;exécution et le déboguer\xA0; quelques exemples populaires sont énumérés ci-dessous.</p><p>Le protocole de débogage V8 n&#39;est plus maintenu ni documenté.</p><h3 id="debogueur-integre" tabindex="-1">Débogueur intégré <a class="header-anchor" href="#debogueur-integre" aria-label="Permalink to “Débogueur intégré”">​</a></h3><p>Démarrez <code>node debug script_name.js</code> pour démarrer votre script sous le débogueur en ligne de commande intégré. Votre script démarre dans un autre processus Node.js démarré avec l&#39;option <code>--debug-brk</code>, et le processus Node.js initial exécute le script <code>_debugger.js</code> et se connecte à votre cible. Voir <a href="/fr/nodejs/api/debugger">docs</a> pour plus d&#39;informations.</p><h3 id="node-inspector" tabindex="-1">node-inspector <a class="header-anchor" href="#node-inspector" aria-label="Permalink to “node-inspector”">​</a></h3><p>Déboguez votre application Node.js avec Chrome DevTools en utilisant un processus intermédiaire qui traduit le <a href="https://chromedevtools.github.io/debugger-protocol-viewer/v8/" target="_blank" rel="noreferrer">protocole Inspector</a> utilisé dans Chromium vers le protocole V8 Debugger utilisé dans Node.js. Consultez <a href="https://github.com/node-inspector/node-inspector" target="_blank" rel="noreferrer">https://github.com/node-inspector/node-inspector</a> pour plus d&#39;informations.</p>`,53)])}var s=e(a,[[`render`,o]]);export{i as __pageData,s as default};