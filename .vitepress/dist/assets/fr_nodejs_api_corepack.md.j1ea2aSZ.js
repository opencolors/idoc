import{__plugin_vue_export_helper_default as e,createElementBlock as t,createStaticVNode as n,openBlock as r}from"./chunks/plugin-vue_export-helper.Bts1mPc7.js";const i=JSON.parse(`{"title":"Documentation de Corepack de Node.js","description":"Corepack est un binaire fourni avec Node.js, offrant une interface standard pour gérer les gestionnaires de paquets comme npm, pnpm et Yarn. Il permet aux utilisateurs de basculer facilement entre différents gestionnaires de paquets et versions, garantissant la compatibilité et simplifiant le flux de travail de développement.","frontmatter":{"title":"Documentation de Corepack de Node.js","description":"Corepack est un binaire fourni avec Node.js, offrant une interface standard pour gérer les gestionnaires de paquets comme npm, pnpm et Yarn. Il permet aux utilisateurs de basculer facilement entre différents gestionnaires de paquets et versions, garantissant la compatibilité et simplifiant le flux de travail de développement.","head":[["meta",{"name":"og:title","content":"Documentation de Corepack de Node.js | Node.js - iDoc.dev"}],["meta",{"name":"og:description","content":"Corepack est un binaire fourni avec Node.js, offrant une interface standard pour gérer les gestionnaires de paquets comme npm, pnpm et Yarn. Il permet aux utilisateurs de basculer facilement entre différents gestionnaires de paquets et versions, garantissant la compatibilité et simplifiant le flux de travail de développement."}],["meta",{"name":"twitter:title","content":"Documentation de Corepack de Node.js | Node.js - iDoc.dev"}],["meta",{"name":"twitter:description","content":"Corepack est un binaire fourni avec Node.js, offrant une interface standard pour gérer les gestionnaires de paquets comme npm, pnpm et Yarn. Il permet aux utilisateurs de basculer facilement entre différents gestionnaires de paquets et versions, garantissant la compatibilité et simplifiant le flux de travail de développement."}],["link",{"rel":"canonical","href":"https://idoc.dev/fr/nodejs/api/corepack"}],["meta",{"property":"og:url","content":"https://idoc.dev/fr/nodejs/api/corepack"}]]},"headers":[],"relativePath":"fr/nodejs/api/corepack.md","filePath":"fr/nodejs/api/corepack.md","lastUpdated":1749464498000}`),a={name:`fr/nodejs/api/corepack.md`};function o(e,i,a,o,s,c){return r(),t(`div`,null,i[0]||=[n(`<h1 id="corepack" tabindex="-1">Corepack <a class="header-anchor" href="#corepack" aria-label="Permalink to “Corepack”">​</a></h1><p><strong>Ajouté dans\xA0: v16.9.0, v14.19.0</strong></p><div class="warning custom-block"><p class="custom-block-title">[Stable: 1 - Expérimental]</p><p><a href="/fr/nodejs/api/documentation#stability-index">Stable: 1</a> <a href="/fr/nodejs/api/documentation#stability-index">Stability: 1</a> - Expérimental</p></div><p><em><a href="https://github.com/nodejs/corepack">Corepack</a></em> est un outil expérimental pour aider à gérer les versions de vos gestionnaires de paquets. Il expose des proxys binaires pour chaque <a href="/fr/nodejs/api/corepack#supported-package-managers">gestionnaire de paquets pris en charge</a> qui, lorsqu&#39;ils sont appelés, identifieront le gestionnaire de paquets configuré pour le projet actuel, le téléchargeront si nécessaire et finiront par l&#39;exécuter.</p><p>Bien que Corepack soit distribué avec les installations par défaut de Node.js, les gestionnaires de paquets gérés par Corepack ne font pas partie de la distribution de Node.js et\xA0:</p><ul><li>Lors de la première utilisation, Corepack télécharge la dernière version depuis le réseau.</li><li>Toute mise à jour requise (liée à des vulnérabilités de sécurité ou autre) ne relève pas du projet Node.js. Si nécessaire, les utilisateurs finaux doivent trouver comment mettre à jour par eux-mêmes.</li></ul><p>Cette fonctionnalité simplifie deux flux de travail principaux\xA0:</p><ul><li>Elle facilite l&#39;intégration des nouveaux contributeurs, car ils n&#39;auront plus à suivre les processus d&#39;installation spécifiques au système simplement pour avoir le gestionnaire de paquets que vous souhaitez.</li><li>Elle vous permet de vous assurer que chaque membre de votre équipe utilisera exactement la version du gestionnaire de paquets que vous souhaitez qu&#39;ils utilisent, sans qu&#39;ils aient à la synchroniser manuellement chaque fois que vous devez effectuer une mise à jour.</li></ul><h2 id="workflows" tabindex="-1">Flux de travail <a class="header-anchor" href="#workflows" aria-label="Permalink to “Flux de travail”">​</a></h2><h3 id="enabling-the-feature" tabindex="-1">Activation de la fonctionnalité <a class="header-anchor" href="#enabling-the-feature" aria-label="Permalink to “Activation de la fonctionnalité”">​</a></h3><p>En raison de son statut expérimental, Corepack doit actuellement être activé explicitement pour avoir un effet. Pour ce faire, exécutez <a href="https://github.com/nodejs/corepack#corepack-enable--name" target="_blank" rel="noreferrer"><code>corepack enable</code></a>, ce qui configurera les liens symboliques dans votre environnement à côté du binaire <code>node</code> (et écrasera les liens symboliques existants si nécessaire).</p><p>À partir de ce moment, tout appel aux <a href="/fr/nodejs/api/corepack#supported-package-managers">binaires pris en charge</a> fonctionnera sans configuration supplémentaire. Si vous rencontrez un problème, exécutez <a href="https://github.com/nodejs/corepack#corepack-disable--name" target="_blank" rel="noreferrer"><code>corepack disable</code></a> pour supprimer les proxys de votre système (et envisagez d&#39;ouvrir un problème sur le <a href="https://github.com/nodejs/corepack" target="_blank" rel="noreferrer">dépôt Corepack</a> pour nous le faire savoir).</p><h3 id="configuring-a-package" tabindex="-1">Configuration d&#39;un paquet <a class="header-anchor" href="#configuring-a-package" aria-label="Permalink to “Configuration d&#39;un paquet”">​</a></h3><p>Les proxys Corepack trouveront le fichier <a href="/fr/nodejs/api/packages#nodejs-packagejson-field-definitions"><code>package.json</code></a> le plus proche dans votre hiérarchie de répertoires actuelle pour extraire sa propriété <a href="/fr/nodejs/api/packages#packagemanager"><code>&quot;packageManager&quot;</code></a>.</p><p>Si la valeur correspond à un <a href="/fr/nodejs/api/corepack#supported-package-managers">gestionnaire de paquets pris en charge</a>, Corepack s&#39;assurera que tous les appels aux binaires concernés sont exécutés avec la version demandée, en la téléchargeant à la demande si nécessaire, et en abandonnant si elle ne peut pas être récupérée avec succès.</p><p>Vous pouvez utiliser <a href="https://github.com/nodejs/corepack#corepack-use-nameversion" target="_blank" rel="noreferrer"><code>corepack use</code></a> pour demander à Corepack de mettre à jour votre fichier <code>package.json</code> local afin d&#39;utiliser le gestionnaire de paquets de votre choix :</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">corepack</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> use</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # définit la dernière version 7.x dans le package.json</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">corepack</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> use</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> yarn@</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">*</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # définit la dernière version dans le package.json</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="upgrading-the-global-versions" tabindex="-1">Mise à niveau des versions globales <a class="header-anchor" href="#upgrading-the-global-versions" aria-label="Permalink to “Mise à niveau des versions globales”">​</a></h3><p>Lorsqu&#39;il est exécuté en dehors d&#39;un projet existant (par exemple, lors de l&#39;exécution de <code>yarn init</code>), Corepack utilisera par défaut des versions prédéfinies correspondant approximativement aux dernières versions stables de chaque outil. Ces versions peuvent être remplacées en exécutant la commande <a href="https://github.com/nodejs/corepack#corepack-install--g--global---all--nameversion" target="_blank" rel="noreferrer"><code>corepack install</code></a> avec la version du gestionnaire de paquets que vous souhaitez définir :</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">corepack</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --global</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>Alternativement, une balise ou une plage peut être utilisée\xA0:</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">corepack</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --global</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> pnpm@</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">*</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">corepack</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --global</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> yarn@stable</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="offline-workflow" tabindex="-1">Flux de travail hors ligne <a class="header-anchor" href="#offline-workflow" aria-label="Permalink to “Flux de travail hors ligne”">​</a></h3><p>De nombreux environnements de production n&#39;ont pas d&#39;accès au réseau. Étant donné que Corepack télécharge généralement les versions du gestionnaire de paquets directement à partir de leurs registres, cela peut entrer en conflit avec ces environnements. Pour éviter que cela ne se produise, appelez la commande <a href="https://github.com/nodejs/corepack#corepack-pack---all--nameversion" target="_blank" rel="noreferrer"><code>corepack pack</code></a> pendant que vous avez encore un accès réseau (généralement en même temps que vous préparez votre image de déploiement). Cela garantira que les gestionnaires de paquets requis sont disponibles même sans accès réseau.</p><p>La commande <code>pack</code> possède <a href="https://github.com/nodejs/corepack#utility-commands" target="_blank" rel="noreferrer">divers indicateurs</a>. Consultez la <a href="https://github.com/nodejs/corepack#readme" target="_blank" rel="noreferrer">documentation Corepack</a> détaillée pour plus d&#39;informations.</p><h2 id="supported-package-managers" tabindex="-1">Gestionnaires de paquets pris en charge <a class="header-anchor" href="#supported-package-managers" aria-label="Permalink to “Gestionnaires de paquets pris en charge”">​</a></h2><p>Les binaires suivants sont fournis via Corepack\xA0:</p><table tabindex="0"><thead><tr><th>Gestionnaire de paquets</th><th>Noms des binaires</th></tr></thead><tbody><tr><td><a href="https://yarnpkg.com/" target="_blank" rel="noreferrer">Yarn</a></td><td><code>yarn</code> , <code>yarnpkg</code></td></tr><tr><td><a href="https://pnpm.io/" target="_blank" rel="noreferrer">pnpm</a></td><td><code>pnpm</code> , <code>pnpx</code></td></tr></tbody></table><h2 id="common-questions" tabindex="-1">Questions fréquentes <a class="header-anchor" href="#common-questions" aria-label="Permalink to “Questions fréquentes”">​</a></h2><h3 id="how-does-corepack-interact-with-npm?" tabindex="-1">Comment Corepack interagit-il avec npm\xA0? <a class="header-anchor" href="#how-does-corepack-interact-with-npm?" aria-label="Permalink to “Comment Corepack interagit-il avec npm\xA0?”">​</a></h3><p>Bien que Corepack puisse prendre en charge npm comme n’importe quel autre gestionnaire de paquets, ses shims ne sont pas activés par défaut. Cela a quelques conséquences\xA0:</p><ul><li>Il est toujours possible d’exécuter une commande <code>npm</code> dans un projet configuré pour être utilisé avec un autre gestionnaire de paquets, car Corepack ne peut pas l’intercepter.</li><li>Bien que <code>npm</code> soit une option valide dans la propriété <a href="/fr/nodejs/api/packages#packagemanager"><code>&quot;packageManager&quot;</code></a>, l’absence de shim entraînera l’utilisation du npm global.</li></ul><h3 id="running-npm-install--g-yarn-doesnt-work" tabindex="-1">L’exécution de <code>npm install -g yarn</code> ne fonctionne pas <a class="header-anchor" href="#running-npm-install--g-yarn-doesnt-work" aria-label="Permalink to “L’exécution de npm install -g yarn ne fonctionne pas”">​</a></h3><p>npm empêche de remplacer accidentellement les binaires Corepack lors d’une installation globale. Pour éviter ce problème, envisagez l’une des options suivantes\xA0:</p><ul><li>N’exécutez pas cette commande\xA0; Corepack fournira de toute façon les binaires du gestionnaire de paquets et s’assurera que les versions demandées sont toujours disponibles, il n’est donc pas nécessaire d’installer explicitement les gestionnaires de paquets.</li><li>Ajoutez l’indicateur <code>--force</code> à <code>npm install</code>\xA0; cela indiquera à npm qu’il est acceptable de remplacer les binaires, mais vous effacerez les binaires Corepack dans le processus. (Exécutez <a href="https://github.com/nodejs/corepack#corepack-enable--name" target="_blank" rel="noreferrer"><code>corepack enable</code></a> pour les rajouter.)</li></ul>`,35)])}var s=e(a,[[`render`,o]]);export{i as __pageData,s as default};