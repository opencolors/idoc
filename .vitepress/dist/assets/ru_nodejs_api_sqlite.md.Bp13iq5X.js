import{__plugin_vue_export_helper_default as e,createElementBlock as t,createStaticVNode as n,openBlock as r}from"./chunks/plugin-vue_export-helper.Bts1mPc7.js";const i=JSON.parse(`{"title":"Документация API SQLite для Node.js","description":"Документация API SQLite для Node.js предоставляет подробные сведения о том, как взаимодействовать с базами данных SQLite в приложениях Node.js. Она охватывает управление подключениями к базе данных, выполнение SQL-запросов, обработку транзакций и управление ошибками.","frontmatter":{"title":"Документация API SQLite для Node.js","description":"Документация API SQLite для Node.js предоставляет подробные сведения о том, как взаимодействовать с базами данных SQLite в приложениях Node.js. Она охватывает управление подключениями к базе данных, выполнение SQL-запросов, обработку транзакций и управление ошибками.","head":[["meta",{"name":"og:title","content":"Документация API SQLite для Node.js | Node.js - iDoc.dev"}],["meta",{"name":"og:description","content":"Документация API SQLite для Node.js предоставляет подробные сведения о том, как взаимодействовать с базами данных SQLite в приложениях Node.js. Она охватывает управление подключениями к базе данных, выполнение SQL-запросов, обработку транзакций и управление ошибками."}],["meta",{"name":"twitter:title","content":"Документация API SQLite для Node.js | Node.js - iDoc.dev"}],["meta",{"name":"twitter:description","content":"Документация API SQLite для Node.js предоставляет подробные сведения о том, как взаимодействовать с базами данных SQLite в приложениях Node.js. Она охватывает управление подключениями к базе данных, выполнение SQL-запросов, обработку транзакций и управление ошибками."}],["link",{"rel":"canonical","href":"https://idoc.dev/ru/nodejs/api/sqlite"}],["meta",{"property":"og:url","content":"https://idoc.dev/ru/nodejs/api/sqlite"}]]},"headers":[],"relativePath":"ru/nodejs/api/sqlite.md","filePath":"ru/nodejs/api/sqlite.md","lastUpdated":null}`),a={name:`ru/nodejs/api/sqlite.md`};function o(e,i,a,o,s,c){return r(),t(`div`,null,i[0]||=[n(`<h1 id="sqlite" tabindex="-1">SQLite <a class="header-anchor" href="#sqlite" aria-label="Permalink to “SQLite”">​</a></h1><p><strong>Добавлено в версии: v22.5.0</strong></p><div class="warning custom-block"><p class="custom-block-title">[Стабильность: 1 - Экспериментальный]</p><p><a href="/ru/nodejs/api/documentation#stability-index">Стабильность: 1</a> <a href="/ru/nodejs/api/documentation#stability-index">Стабильность: 1</a>.1 - Активная разработка.</p></div><p><strong>Исходный код:</strong> <a href="https://github.com/nodejs/node/blob/v23.5.0/lib/sqlite.js" target="_blank" rel="noreferrer">lib/sqlite.js</a></p><p>Модуль <code>node:sqlite</code> облегчает работу с базами данных SQLite. Чтобы получить к нему доступ:</p><div class="vp-code-group"><div class="tabs"><input type="radio" name="group-17" id="tab-18" checked><label data-title="ESM" for="tab-18">ESM</label><input type="radio" name="group-17" id="tab-19"><label data-title="CJS" for="tab-19">CJS</label></div><div class="blocks"><div class="language-js active line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> sqlite </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;node:sqlite&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> sqlite</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;node:sqlite&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div></div></div><p>Этот модуль доступен только по схеме <code>node:</code>.</p><p>В следующем примере показано основное использование модуля <code>node:sqlite</code> для открытия базы данных в памяти, записи данных в базу данных и последующего чтения данных обратно.</p><div class="vp-code-group"><div class="tabs"><input type="radio" name="group-27" id="tab-28" checked><label data-title="ESM" for="tab-28">ESM</label><input type="radio" name="group-27" id="tab-29"><label data-title="CJS" for="tab-29">CJS</label></div><div class="blocks"><div class="language-js active line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { DatabaseSync } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;node:sqlite&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> database</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> DatabaseSync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;:memory:&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Выполнение SQL-запросов из строк.</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">database.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">exec</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">\`</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  CREATE TABLE data(</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    key INTEGER PRIMARY KEY,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    value TEXT</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  ) STRICT</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">\`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Создание подготовленного запроса для вставки данных в базу данных.</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> insert</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> database.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">prepare</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;INSERT INTO data (key, value) VALUES (?, ?)&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Выполнение подготовленного запроса со связанными значениями.</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">insert.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">run</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;hello&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">insert.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">run</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;world&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Создание подготовленного запроса для чтения данных из базы данных.</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> query</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> database.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">prepare</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;SELECT * FROM data ORDER BY key&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Выполнение подготовленного запроса и вывод результирующего набора.</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(query.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">all</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">());</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Выводит: [ { key: 1, value: &#39;hello&#39; }, { key: 2, value: &#39;world&#39; } ]</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;use strict&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">DatabaseSync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;node:sqlite&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> database</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> DatabaseSync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;:memory:&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Выполнение SQL-запросов из строк.</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">database.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">exec</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">\`</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  CREATE TABLE data(</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    key INTEGER PRIMARY KEY,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    value TEXT</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  ) STRICT</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">\`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Создание подготовленного запроса для вставки данных в базу данных.</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> insert</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> database.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">prepare</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;INSERT INTO data (key, value) VALUES (?, ?)&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Выполнение подготовленного запроса со связанными значениями.</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">insert.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">run</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;hello&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">insert.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">run</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;world&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Создание подготовленного запроса для чтения данных из базы данных.</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> query</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> database.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">prepare</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;SELECT * FROM data ORDER BY key&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Выполнение подготовленного запроса и вывод результирующего набора.</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(query.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">all</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">());</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Выводит: [ { key: 1, value: &#39;hello&#39; }, { key: 2, value: &#39;world&#39; } ]</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div></div></div><h2 id="class-databasesync" tabindex="-1">Класс: <code>DatabaseSync</code> <a class="header-anchor" href="#class-databasesync" aria-label="Permalink to “Класс: DatabaseSync”">​</a></h2><p><strong>Добавлено в версии: v22.5.0</strong></p><p>Этот класс представляет собой единое <a href="https://www.sqlite.org/c3ref/sqlite3" target="_blank" rel="noreferrer">соединение</a> с базой данных SQLite. Все API, предоставляемые этим классом, выполняются синхронно.</p><h3 id="new-databasesynclocation-options" tabindex="-1"><code>new DatabaseSync(location[, options])</code> <a class="header-anchor" href="#new-databasesynclocation-options" aria-label="Permalink to “new DatabaseSync(location[, options])”">​</a></h3><p><strong>Добавлено в версии: v22.5.0</strong></p><ul><li><code>location</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> Расположение базы данных. База данных SQLite может храниться в файле или полностью <a href="https://www.sqlite.org/inmemorydb" target="_blank" rel="noreferrer">в памяти</a>. Чтобы использовать базу данных, хранящуюся в файле, местоположение должно быть путем к файлу. Чтобы использовать базу данных в памяти, местоположение должно быть специальным именем <code>&#39;:memory:&#39;</code>.</li><li><code>options</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noreferrer">&lt;Object&gt;</a> Параметры конфигурации для подключения к базе данных. Поддерживаются следующие параметры: <ul><li><code>open</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" target="_blank" rel="noreferrer">&lt;boolean&gt;</a> Если <code>true</code>, база данных открывается конструктором. Когда это значение равно <code>false</code>, база данных должна быть открыта с помощью метода <code>open()</code>. <strong>По умолчанию:</strong> <code>true</code>.</li><li><code>readOnly</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" target="_blank" rel="noreferrer">&lt;boolean&gt;</a> Если <code>true</code>, база данных открывается в режиме только для чтения. Если база данных не существует, ее открытие завершится неудачей. <strong>По умолчанию:</strong> <code>false</code>.</li><li><code>enableForeignKeyConstraints</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" target="_blank" rel="noreferrer">&lt;boolean&gt;</a> Если <code>true</code>, включаются ограничения внешнего ключа. Это рекомендуется, но может быть отключено для совместимости с устаревшими схемами баз данных. Принудительное применение ограничений внешнего ключа можно включить и отключить после открытия базы данных с помощью <a href="https://www.sqlite.org/pragma#pragma_foreign_keys" target="_blank" rel="noreferrer"><code>PRAGMA foreign_keys</code></a>. <strong>По умолчанию:</strong> <code>true</code>.</li><li><code>enableDoubleQuotedStringLiterals</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" target="_blank" rel="noreferrer">&lt;boolean&gt;</a> Если <code>true</code>, SQLite будет принимать <a href="https://www.sqlite.org/quirks#dblquote" target="_blank" rel="noreferrer">строковые литералы в двойных кавычках</a>. Это не рекомендуется, но может быть включено для совместимости с устаревшими схемами баз данных. <strong>По умолчанию:</strong> <code>false</code>.</li><li><code>allowExtension</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" target="_blank" rel="noreferrer">&lt;boolean&gt;</a> Если <code>true</code>, функция SQL <code>loadExtension</code> и метод <code>loadExtension()</code> включены. Вы можете вызвать <code>enableLoadExtension(false)</code> позже, чтобы отключить эту функцию. <strong>По умолчанию:</strong> <code>false</code>.</li></ul></li></ul><p>Создает новый экземпляр <code>DatabaseSync</code>.</p><h3 id="databaseclose" tabindex="-1"><code>database.close()</code> <a class="header-anchor" href="#databaseclose" aria-label="Permalink to “database.close()”">​</a></h3><p><strong>Добавлено в: v22.5.0</strong></p><p>Закрывает соединение с базой данных. Если база данных не открыта, выбрасывается исключение. Этот метод является оберткой для <a href="https://www.sqlite.org/c3ref/close" target="_blank" rel="noreferrer"><code>sqlite3_close_v2()</code></a>.</p><h3 id="databaseloadextensionpath" tabindex="-1"><code>database.loadExtension(path)</code> <a class="header-anchor" href="#databaseloadextensionpath" aria-label="Permalink to “database.loadExtension(path)”">​</a></h3><p><strong>Добавлено в: v23.5.0</strong></p><ul><li><code>path</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> Путь к разделяемой библиотеке для загрузки.</li></ul><p>Загружает разделяемую библиотеку в соединение с базой данных. Этот метод является оберткой для <a href="https://www.sqlite.org/c3ref/load_extension" target="_blank" rel="noreferrer"><code>sqlite3_load_extension()</code></a>. Необходимо включить опцию <code>allowExtension</code> при создании экземпляра <code>DatabaseSync</code>.</p><h3 id="databaseenableloadextensionallow" tabindex="-1"><code>database.enableLoadExtension(allow)</code> <a class="header-anchor" href="#databaseenableloadextensionallow" aria-label="Permalink to “database.enableLoadExtension(allow)”">​</a></h3><p><strong>Добавлено в: v23.5.0</strong></p><ul><li><code>allow</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" target="_blank" rel="noreferrer">&lt;boolean&gt;</a> Определяет, разрешена ли загрузка расширений.</li></ul><p>Включает или отключает SQL-функцию <code>loadExtension</code> и метод <code>loadExtension()</code>. Если при создании <code>allowExtension</code> имеет значение <code>false</code>, вы не можете включить загрузку расширений по соображениям безопасности.</p><h3 id="databaseexecsql" tabindex="-1"><code>database.exec(sql)</code> <a class="header-anchor" href="#databaseexecsql" aria-label="Permalink to “database.exec(sql)”">​</a></h3><p><strong>Добавлено в: v22.5.0</strong></p><ul><li><code>sql</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> SQL-строка для выполнения.</li></ul><p>Этот метод позволяет выполнять один или несколько SQL-запросов без возврата каких-либо результатов. Этот метод полезен при выполнении SQL-запросов, считанных из файла. Этот метод является оберткой для <a href="https://www.sqlite.org/c3ref/exec" target="_blank" rel="noreferrer"><code>sqlite3_exec()</code></a>.</p><h3 id="databasefunctionname-options-function" tabindex="-1"><code>database.function(name[, options], function)</code> <a class="header-anchor" href="#databasefunctionname-options-function" aria-label="Permalink to “database.function(name[, options], function)”">​</a></h3><p><strong>Добавлено в: v23.5.0</strong></p><ul><li><p><code>name</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> Имя создаваемой SQLite-функции.</p></li><li><p><code>options</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noreferrer">&lt;Object&gt;</a> Необязательные параметры конфигурации для функции. Поддерживаются следующие свойства:</p><ul><li><code>deterministic</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" target="_blank" rel="noreferrer">&lt;boolean&gt;</a> Если <code>true</code>, флаг <a href="https://www.sqlite.org/c3ref/c_deterministic" target="_blank" rel="noreferrer"><code>SQLITE_DETERMINISTIC</code></a> устанавливается для созданной функции. <strong>По умолчанию:</strong> <code>false</code>.</li><li><code>directOnly</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" target="_blank" rel="noreferrer">&lt;boolean&gt;</a> Если <code>true</code>, флаг <a href="https://www.sqlite.org/c3ref/c_deterministic" target="_blank" rel="noreferrer"><code>SQLITE_DIRECTONLY</code></a> устанавливается для созданной функции. <strong>По умолчанию:</strong> <code>false</code>.</li><li><code>useBigIntArguments</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" target="_blank" rel="noreferrer">&lt;boolean&gt;</a> Если <code>true</code>, целочисленные аргументы для <code>function</code> преобразуются в <code>BigInt</code>s. Если <code>false</code>, целочисленные аргументы передаются как числа JavaScript. <strong>По умолчанию:</strong> <code>false</code>.</li><li><code>varargs</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" target="_blank" rel="noreferrer">&lt;boolean&gt;</a> Если <code>true</code>, <code>function</code> может принимать переменное количество аргументов. Если <code>false</code>, <code>function</code> должна вызываться ровно с <code>function.length</code> аргументами. <strong>По умолчанию:</strong> <code>false</code>.</li></ul></li><li><p><code>function</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function" target="_blank" rel="noreferrer">&lt;Function&gt;</a> JavaScript-функция, вызываемая при вызове SQLite-функции.</p></li></ul><p>Этот метод используется для создания пользовательских функций SQLite. Этот метод является оберткой для <a href="https://www.sqlite.org/c3ref/create_function" target="_blank" rel="noreferrer"><code>sqlite3_create_function_v2()</code></a>.</p><h3 id="databaseopen" tabindex="-1"><code>database.open()</code> <a class="header-anchor" href="#databaseopen" aria-label="Permalink to “database.open()”">​</a></h3><p><strong>Добавлено в: v22.5.0</strong></p><p>Открывает базу данных, указанную в аргументе <code>location</code> конструктора <code>DatabaseSync</code>. Этот метод следует использовать только в том случае, если база данных не открыта через конструктор. Если база данных уже открыта, выбрасывается исключение.</p><h3 id="databasepreparesql" tabindex="-1"><code>database.prepare(sql)</code> <a class="header-anchor" href="#databasepreparesql" aria-label="Permalink to “database.prepare(sql)”">​</a></h3><p><strong>Добавлено в: v22.5.0</strong></p><ul><li><code>sql</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> SQL-строка для компиляции в подготовленное выражение.</li><li>Возвращает: <a href="/ru/nodejs/api/sqlite#class-statementsync">&lt;StatementSync&gt;</a> Подготовленное выражение.</li></ul><p>Компилирует SQL-выражение в <a href="https://www.sqlite.org/c3ref/stmt" target="_blank" rel="noreferrer">подготовленное выражение</a>. Этот метод является оберткой вокруг <a href="https://www.sqlite.org/c3ref/prepare" target="_blank" rel="noreferrer"><code>sqlite3_prepare_v2()</code></a>.</p><h3 id="databasecreatesessionoptions" tabindex="-1"><code>database.createSession([options])</code> <a class="header-anchor" href="#databasecreatesessionoptions" aria-label="Permalink to “database.createSession([options])”">​</a></h3><p><strong>Добавлено в: v23.3.0</strong></p><ul><li><p><code>options</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noreferrer">&lt;Object&gt;</a> Параметры конфигурации для сеанса.</p><ul><li><code>table</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> Определенная таблица для отслеживания изменений. По умолчанию отслеживаются изменения во всех таблицах.</li><li><code>db</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> Имя базы данных для отслеживания. Это полезно, когда несколько баз данных были добавлены с помощью <a href="https://www.sqlite.org/lang_attach" target="_blank" rel="noreferrer"><code>ATTACH DATABASE</code></a>. <strong>По умолчанию</strong>: <code>&#39;main&#39;</code>.</li></ul></li><li><p>Возвращает: <a href="/ru/nodejs/api/sqlite#class-session">&lt;Session&gt;</a> Дескриптор сеанса.</p></li></ul><p>Создает и присоединяет сеанс к базе данных. Этот метод является оберткой вокруг <a href="https://www.sqlite.org/session/sqlite3session_create" target="_blank" rel="noreferrer"><code>sqlite3session_create()</code></a> и <a href="https://www.sqlite.org/session/sqlite3session_attach" target="_blank" rel="noreferrer"><code>sqlite3session_attach()</code></a>.</p><h3 id="databaseapplychangesetchangeset-options" tabindex="-1"><code>database.applyChangeset(changeset[, options])</code> <a class="header-anchor" href="#databaseapplychangesetchangeset-options" aria-label="Permalink to “database.applyChangeset(changeset[, options])”">​</a></h3><p><strong>Добавлено в: v23.3.0</strong></p><ul><li><p><code>changeset</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Uint8Array" target="_blank" rel="noreferrer">&lt;Uint8Array&gt;</a> Бинарный набор изменений или патчсет.</p></li><li><p><code>options</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noreferrer">&lt;Object&gt;</a> Параметры конфигурации для применения изменений.</p><ul><li><code>filter</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function" target="_blank" rel="noreferrer">&lt;Function&gt;</a> Пропускает изменения, которые, когда имя целевой таблицы передается в эту функцию, возвращают истинное значение. По умолчанию предпринимаются все изменения.</li><li><code>onConflict</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;number&gt;</a> Определяет, как обрабатываются конфликты. <strong>По умолчанию</strong>: <code>SQLITE_CHANGESET_ABORT</code>.</li><li><code>SQLITE_CHANGESET_OMIT</code>: конфликтующие изменения опускаются.</li><li><code>SQLITE_CHANGESET_REPLACE</code>: конфликтующие изменения заменяют существующие значения.</li><li><code>SQLITE_CHANGESET_ABORT</code>: прерывает работу при конфликте и откатывает базу данных.</li></ul></li><li><p>Возвращает: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" target="_blank" rel="noreferrer">&lt;boolean&gt;</a> Успешно ли был применен набор изменений без прерывания.</p></li></ul><p>Если база данных не открыта, выбрасывается исключение. Этот метод является оберткой вокруг <a href="https://www.sqlite.org/session/sqlite3changeset_apply" target="_blank" rel="noreferrer"><code>sqlite3changeset_apply()</code></a>.</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> sourceDb</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> DatabaseSync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;:memory:&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> targetDb</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> DatabaseSync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;:memory:&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">sourceDb.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">exec</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;CREATE TABLE data(key INTEGER PRIMARY KEY, value TEXT)&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">targetDb.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">exec</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;CREATE TABLE data(key INTEGER PRIMARY KEY, value TEXT)&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> session</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> sourceDb.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">createSession</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> insert</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> sourceDb.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">prepare</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;INSERT INTO data (key, value) VALUES (?, ?)&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">insert.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">run</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;hello&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">insert.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">run</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;world&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> changeset</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> session.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">changeset</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">targetDb.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">applyChangeset</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(changeset);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Теперь, когда набор изменений был применен, targetDb содержит те же данные, что и sourceDb.</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h2 id="class-session" tabindex="-1">Class: <code>Session</code> <a class="header-anchor" href="#class-session" aria-label="Permalink to “Class: Session”">​</a></h2><p><strong>Добавлено в версии: v23.3.0</strong></p><h3 id="sessionchangeset" tabindex="-1"><code>session.changeset()</code> <a class="header-anchor" href="#sessionchangeset" aria-label="Permalink to “session.changeset()”">​</a></h3><p><strong>Добавлено в версии: v23.3.0</strong></p><ul><li>Возвращает: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Uint8Array" target="_blank" rel="noreferrer">&lt;Uint8Array&gt;</a> Бинарный набор изменений, который может быть применен к другим базам данных.</li></ul><p>Извлекает набор изменений, содержащий все изменения с момента создания набора изменений. Может вызываться несколько раз. Исключение выбрасывается, если база данных или сессия не открыты. Этот метод является оберткой вокруг <a href="https://www.sqlite.org/session/sqlite3session_changeset" target="_blank" rel="noreferrer"><code>sqlite3session_changeset()</code></a>.</p><h3 id="sessionpatchset" tabindex="-1"><code>session.patchset()</code> <a class="header-anchor" href="#sessionpatchset" aria-label="Permalink to “session.patchset()”">​</a></h3><p><strong>Добавлено в версии: v23.3.0</strong></p><ul><li>Возвращает: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Uint8Array" target="_blank" rel="noreferrer">&lt;Uint8Array&gt;</a> Бинарный набор патчей, который может быть применен к другим базам данных.</li></ul><p>Аналогичен методу выше, но генерирует более компактный набор патчей. См. <a href="https://www.sqlite.org/sessionintro#changesets_and_patchsets" target="_blank" rel="noreferrer">Changesets and Patchsets</a> в документации SQLite. Исключение выбрасывается, если база данных или сессия не открыты. Этот метод является оберткой вокруг <a href="https://www.sqlite.org/session/sqlite3session_patchset" target="_blank" rel="noreferrer"><code>sqlite3session_patchset()</code></a>.</p><h3 id="sessionclose" tabindex="-1"><code>session.close()</code>. <a class="header-anchor" href="#sessionclose" aria-label="Permalink to “session.close().”">​</a></h3><p>Закрывает сессию. Исключение выбрасывается, если база данных или сессия не открыты. Этот метод является оберткой вокруг <a href="https://www.sqlite.org/session/sqlite3session_delete" target="_blank" rel="noreferrer"><code>sqlite3session_delete()</code></a>.</p><h2 id="class-statementsync" tabindex="-1">Class: <code>StatementSync</code> <a class="header-anchor" href="#class-statementsync" aria-label="Permalink to “Class: StatementSync”">​</a></h2><p><strong>Добавлено в версии: v22.5.0</strong></p><p>Этот класс представляет собой отдельное <a href="https://www.sqlite.org/c3ref/stmt" target="_blank" rel="noreferrer">подготовленное выражение</a>. Этот класс нельзя создать через его конструктор. Вместо этого экземпляры создаются с помощью метода <code>database.prepare()</code>. Все API, предоставляемые этим классом, выполняются синхронно.</p><p>Подготовленное выражение — это эффективное бинарное представление SQL, используемого для его создания. Подготовленные выражения можно параметризовать и вызывать несколько раз с разными связанными значениями. Параметры также предлагают защиту от <a href="https://en.wikipedia.org/wiki/SQL_injection" target="_blank" rel="noreferrer">SQL-инъекций</a>. По этим причинам подготовленные выражения предпочтительнее строковых SQL-запросов, созданных вручную, при обработке пользовательского ввода.</p><h3 id="statementallnamedparameters-anonymousparameters" tabindex="-1"><code>statement.all([namedParameters][, ...anonymousParameters])</code> <a class="header-anchor" href="#statementallnamedparameters-anonymousparameters" aria-label="Permalink to “statement.all([namedParameters][, ...anonymousParameters])”">​</a></h3><p><strong>Добавлено в версии: v22.5.0</strong></p><ul><li><code>namedParameters</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noreferrer">&lt;Object&gt;</a> Необязательный объект, используемый для привязки именованных параметров. Ключи этого объекта используются для настройки отображения.</li><li><code>...anonymousParameters</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Null_type" target="_blank" rel="noreferrer">&lt;null&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;number&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/BigInt" target="_blank" rel="noreferrer">&lt;bigint&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="/ru/nodejs/api/buffer#class-buffer">&lt;Buffer&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Uint8Array" target="_blank" rel="noreferrer">&lt;Uint8Array&gt;</a> Ноль или более значений для привязки к анонимным параметрам.</li><li>Возвращает: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array" target="_blank" rel="noreferrer">&lt;Array&gt;</a> Массив объектов. Каждый объект соответствует строке, возвращенной в результате выполнения подготовленного оператора. Ключи и значения каждого объекта соответствуют именам столбцов и значениям строки.</li></ul><p>Этот метод выполняет подготовленный оператор и возвращает все результаты в виде массива объектов. Если подготовленный оператор не возвращает никаких результатов, этот метод возвращает пустой массив. <a href="https://www.sqlite.org/c3ref/bind_blob" target="_blank" rel="noreferrer">Параметры подготовленного оператора привязываются</a> с использованием значений в <code>namedParameters</code> и <code>anonymousParameters</code>.</p><h3 id="statementexpandedsql" tabindex="-1"><code>statement.expandedSQL</code> <a class="header-anchor" href="#statementexpandedsql" aria-label="Permalink to “statement.expandedSQL”">​</a></h3><p><strong>Добавлено в версии: v22.5.0</strong></p><ul><li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> Исходный SQL, расширенный для включения значений параметров.</li></ul><p>Исходный SQL-текст подготовленного оператора с заполнителями параметров, замененными значениями, которые использовались во время последнего выполнения этого подготовленного оператора. Это свойство является оболочкой для <a href="https://www.sqlite.org/c3ref/expanded_sql" target="_blank" rel="noreferrer"><code>sqlite3_expanded_sql()</code></a>.</p><h3 id="statementgetnamedparameters-anonymousparameters" tabindex="-1"><code>statement.get([именованныеПараметры][, ...анонимныеПараметры])</code> <a class="header-anchor" href="#statementgetnamedparameters-anonymousparameters" aria-label="Permalink to “statement.get([именованныеПараметры][, ...анонимныеПараметры])”">​</a></h3><p><strong>Добавлено в версии: v22.5.0</strong></p><ul><li><code>именованныеПараметры</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noreferrer">&lt;Object&gt;</a> Необязательный объект, используемый для привязки именованных параметров. Ключи этого объекта используются для настройки сопоставления.</li><li><code>...анонимныеПараметры</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Null_type" target="_blank" rel="noreferrer">&lt;null&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;number&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/BigInt" target="_blank" rel="noreferrer">&lt;bigint&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="/ru/nodejs/api/buffer#class-buffer">&lt;Buffer&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Uint8Array" target="_blank" rel="noreferrer">&lt;Uint8Array&gt;</a> Ноль или более значений для привязки к анонимным параметрам.</li><li>Возвращает: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noreferrer">&lt;Object&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Undefined_type" target="_blank" rel="noreferrer">&lt;undefined&gt;</a> Объект, соответствующий первой строке, возвращенной в результате выполнения подготовленного выражения. Ключи и значения объекта соответствуют именам и значениям столбцов строки. Если из базы данных не было возвращено ни одной строки, этот метод возвращает <code>undefined</code>.</li></ul><p>Этот метод выполняет подготовленное выражение и возвращает первый результат в виде объекта. Если подготовленное выражение не возвращает никаких результатов, этот метод возвращает <code>undefined</code>. <a href="https://www.sqlite.org/c3ref/bind_blob" target="_blank" rel="noreferrer">Параметры подготовленного выражения привязываются</a> с использованием значений в <code>именованныеПараметры</code> и <code>анонимныеПараметры</code>.</p><h3 id="statementiteratenamedparameters-anonymousparameters" tabindex="-1"><code>statement.iterate([именованныеПараметры][, ...анонимныеПараметры])</code> <a class="header-anchor" href="#statementiteratenamedparameters-anonymousparameters" aria-label="Permalink to “statement.iterate([именованныеПараметры][, ...анонимныеПараметры])”">​</a></h3><p><strong>Добавлено в версии: v23.4.0</strong></p><ul><li><code>именованныеПараметры</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noreferrer">&lt;Object&gt;</a> Необязательный объект, используемый для привязки именованных параметров. Ключи этого объекта используются для настройки сопоставления.</li><li><code>...анонимныеПараметры</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Null_type" target="_blank" rel="noreferrer">&lt;null&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;number&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/BigInt" target="_blank" rel="noreferrer">&lt;bigint&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="/ru/nodejs/api/buffer#class-buffer">&lt;Buffer&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Uint8Array" target="_blank" rel="noreferrer">&lt;Uint8Array&gt;</a> Ноль или более значений для привязки к анонимным параметрам.</li><li>Возвращает: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Iteration_protocols#The_iterator_protocol" target="_blank" rel="noreferrer">&lt;Iterator&gt;</a> Итерируемый итератор объектов. Каждый объект соответствует строке, возвращенной в результате выполнения подготовленного выражения. Ключи и значения каждого объекта соответствуют именам и значениям столбцов строки.</li></ul><p>Этот метод выполняет подготовленное выражение и возвращает итератор объектов. Если подготовленное выражение не возвращает никаких результатов, этот метод возвращает пустой итератор. <a href="https://www.sqlite.org/c3ref/bind_blob" target="_blank" rel="noreferrer">Параметры подготовленного выражения привязываются</a> с использованием значений в <code>именованныеПараметры</code> и <code>анонимныеПараметры</code>.</p><h3 id="statementrunnamedparameters-anonymousparameters" tabindex="-1"><code>statement.run([namedParameters][, ...anonymousParameters])</code> <a class="header-anchor" href="#statementrunnamedparameters-anonymousparameters" aria-label="Permalink to “statement.run([namedParameters][, ...anonymousParameters])”">​</a></h3><p><strong>Добавлено в: v22.5.0</strong></p><ul><li><code>namedParameters</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noreferrer">&lt;Object&gt;</a> Необязательный объект, используемый для привязки именованных параметров. Ключи этого объекта используются для настройки сопоставления.</li><li><code>...anonymousParameters</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Null_type" target="_blank" rel="noreferrer">&lt;null&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;number&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/BigInt" target="_blank" rel="noreferrer">&lt;bigint&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="/ru/nodejs/api/buffer#class-buffer">&lt;Buffer&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Uint8Array" target="_blank" rel="noreferrer">&lt;Uint8Array&gt;</a> Ноль или более значений для привязки к анонимным параметрам.</li><li>Возвращает: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noreferrer">&lt;Object&gt;</a><ul><li><code>changes</code>: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;number&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/BigInt" target="_blank" rel="noreferrer">&lt;bigint&gt;</a> Количество строк, измененных, вставленных или удаленных последней выполненной инструкцией <code>INSERT</code>, <code>UPDATE</code> или <code>DELETE</code>. Это поле является либо числом, либо <code>BigInt</code> в зависимости от конфигурации подготовленного запроса. Это свойство является результатом <a href="https://www.sqlite.org/c3ref/changes" target="_blank" rel="noreferrer"><code>sqlite3_changes64()</code></a>.</li><li><code>lastInsertRowid</code>: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;number&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/BigInt" target="_blank" rel="noreferrer">&lt;bigint&gt;</a> Последний вставленный rowid. Это поле является либо числом, либо <code>BigInt</code> в зависимости от конфигурации подготовленного запроса. Это свойство является результатом <a href="https://www.sqlite.org/c3ref/last_insert_rowid" target="_blank" rel="noreferrer"><code>sqlite3_last_insert_rowid()</code></a>.</li></ul></li></ul><p>Этот метод выполняет подготовленный запрос и возвращает объект, суммирующий результирующие изменения. Подготовленные параметры запроса <a href="https://www.sqlite.org/c3ref/bind_blob" target="_blank" rel="noreferrer">связываются</a> с использованием значений в <code>namedParameters</code> и <code>anonymousParameters</code>.</p><h3 id="statementsetallowbarenamedparametersenabled" tabindex="-1"><code>statement.setAllowBareNamedParameters(enabled)</code> <a class="header-anchor" href="#statementsetallowbarenamedparametersenabled" aria-label="Permalink to “statement.setAllowBareNamedParameters(enabled)”">​</a></h3><p><strong>Добавлено в версии: v22.5.0</strong></p><ul><li><code>enabled</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" target="_blank" rel="noreferrer">&lt;boolean&gt;</a> Включает или отключает поддержку привязки именованных параметров без префиксного символа.</li></ul><p>Имена параметров SQLite начинаются с префиксного символа. По умолчанию <code>node:sqlite</code> требует, чтобы этот префиксный символ присутствовал при привязке параметров. Однако, за исключением символа доллара, эти префиксные символы также требуют дополнительного экранирования при использовании в ключах объектов.</p><p>Для улучшения эргономики этот метод можно использовать для разрешения &quot;голых&quot; именованных параметров, которые не требуют префиксного символа в коде JavaScript. Следует учитывать несколько предостережений при включении &quot;голых&quot; именованных параметров:</p><ul><li>Префиксный символ по-прежнему требуется в SQL.</li><li>Префиксный символ по-прежнему разрешен в JavaScript. Фактически, имена с префиксами будут иметь немного лучшую производительность привязки.</li><li>Использование неоднозначных именованных параметров, таких как <code>$k</code> и <code>@k</code>, в одном и том же подготовленном операторе приведет к исключению, поскольку невозможно определить, как привязать &quot;голое&quot; имя.</li></ul><h3 id="statementsetreadbigintsenabled" tabindex="-1"><code>statement.setReadBigInts(enabled)</code> <a class="header-anchor" href="#statementsetreadbigintsenabled" aria-label="Permalink to “statement.setReadBigInts(enabled)”">​</a></h3><p><strong>Добавлено в версии: v22.5.0</strong></p><ul><li><code>enabled</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" target="_blank" rel="noreferrer">&lt;boolean&gt;</a> Включает или отключает использование <code>BigInt</code> при чтении полей <code>INTEGER</code> из базы данных.</li></ul><p>При чтении из базы данных SQLite <code>INTEGER</code> по умолчанию сопоставляются с числами JavaScript. Однако SQLite <code>INTEGER</code> может хранить значения, превышающие возможности представления чисел JavaScript. В таких случаях этот метод можно использовать для чтения данных <code>INTEGER</code> с использованием JavaScript <code>BigInt</code>. Этот метод не влияет на операции записи в базу данных, где числа и <code>BigInt</code> поддерживаются постоянно.</p><h3 id="statementsourcesql" tabindex="-1"><code>statement.sourceSQL</code> <a class="header-anchor" href="#statementsourcesql" aria-label="Permalink to “statement.sourceSQL”">​</a></h3><p><strong>Добавлено в версии: v22.5.0</strong></p><ul><li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> Исходный SQL, используемый для создания этого подготовленного оператора.</li></ul><p>Исходный SQL-текст подготовленного оператора. Это свойство является оберткой вокруг <a href="https://www.sqlite.org/c3ref/expanded_sql" target="_blank" rel="noreferrer"><code>sqlite3_sql()</code></a>.</p><h3 id="type-conversion-between-javascript-and-sqlite" tabindex="-1">Преобразование типов между JavaScript и SQLite <a class="header-anchor" href="#type-conversion-between-javascript-and-sqlite" aria-label="Permalink to “Преобразование типов между JavaScript и SQLite”">​</a></h3><p>Когда Node.js записывает данные в SQLite или считывает их из нее, необходимо преобразовывать типы данных между JavaScript и <a href="https://www.sqlite.org/datatype3" target="_blank" rel="noreferrer">типами данных</a> SQLite. Поскольку JavaScript поддерживает больше типов данных, чем SQLite, поддерживается только подмножество типов JavaScript. Попытка записать неподдерживаемый тип данных в SQLite приведет к исключению.</p><table tabindex="0"><thead><tr><th>SQLite</th><th>JavaScript</th></tr></thead><tbody><tr><td><code>NULL</code></td><td><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Null_type" target="_blank" rel="noreferrer">&lt;null&gt;</a></td></tr><tr><td><code>INTEGER</code></td><td><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;number&gt;</a> или <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/BigInt" target="_blank" rel="noreferrer">&lt;bigint&gt;</a></td></tr><tr><td><code>REAL</code></td><td><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;number&gt;</a></td></tr><tr><td><code>TEXT</code></td><td><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a></td></tr><tr><td><code>BLOB</code></td><td><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Uint8Array" target="_blank" rel="noreferrer">&lt;Uint8Array&gt;</a></td></tr></tbody></table><h2 id="sqliteconstants" tabindex="-1"><code>sqlite.constants</code> <a class="header-anchor" href="#sqliteconstants" aria-label="Permalink to “sqlite.constants”">​</a></h2><p><strong>Добавлено в: v23.5.0</strong></p><ul><li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noreferrer">&lt;Object&gt;</a></li></ul><p>Объект, содержащий часто используемые константы для операций SQLite.</p><h3 id="sqlite-constants" tabindex="-1">Константы SQLite <a class="header-anchor" href="#sqlite-constants" aria-label="Permalink to “Константы SQLite”">​</a></h3><p>Следующие константы экспортируются объектом <code>sqlite.constants</code>.</p><h4 id="conflict-resolution-constants" tabindex="-1">Константы разрешения конфликтов <a class="header-anchor" href="#conflict-resolution-constants" aria-label="Permalink to “Константы разрешения конфликтов”">​</a></h4><p>Следующие константы предназначены для использования с <a href="/ru/nodejs/api/sqlite#databaseapplychangesetchangeset-options"><code>database.applyChangeset()</code></a>.</p><table tabindex="0"><thead><tr><th>Константа</th><th>Описание</th></tr></thead><tbody><tr><td><code>SQLITE_CHANGESET_OMIT</code></td><td>Конфликтующие изменения игнорируются.</td></tr><tr><td><code>SQLITE_CHANGESET_REPLACE</code></td><td>Конфликтующие изменения заменяют существующие значения.</td></tr><tr><td><code>SQLITE_CHANGESET_ABORT</code></td><td>Прервать работу при возникновении конфликта и откатить базу данных.</td></tr></tbody></table>`,113)])}var s=e(a,[[`render`,o]]);export{i as __pageData,s as default};