import{__plugin_vue_export_helper_default as e,createElementBlock as t,createStaticVNode as n,openBlock as r}from"./chunks/plugin-vue_export-helper.Bts1mPc7.js";const i=JSON.parse(`{"title":"توثيق واجهة برمجة التطبيقات (API) للأذونات في Node.js","description":"توفر توثيق واجهة برمجة التطبيقات (API) للأذونات في Node.js إرشادات حول كيفية إدارة والتحكم في الأذونات لعمليات مختلفة داخل تطبيقات Node.js، مما يضمن الوصول الآمن والمراقب إلى موارد النظام.","frontmatter":{"title":"توثيق واجهة برمجة التطبيقات (API) للأذونات في Node.js","description":"توفر توثيق واجهة برمجة التطبيقات (API) للأذونات في Node.js إرشادات حول كيفية إدارة والتحكم في الأذونات لعمليات مختلفة داخل تطبيقات Node.js، مما يضمن الوصول الآمن والمراقب إلى موارد النظام.","head":[["meta",{"name":"og:title","content":"توثيق واجهة برمجة التطبيقات (API) للأذونات في Node.js | Node.js - iDoc.dev"}],["meta",{"name":"og:description","content":"توفر توثيق واجهة برمجة التطبيقات (API) للأذونات في Node.js إرشادات حول كيفية إدارة والتحكم في الأذونات لعمليات مختلفة داخل تطبيقات Node.js، مما يضمن الوصول الآمن والمراقب إلى موارد النظام."}],["meta",{"name":"twitter:title","content":"توثيق واجهة برمجة التطبيقات (API) للأذونات في Node.js | Node.js - iDoc.dev"}],["meta",{"name":"twitter:description","content":"توفر توثيق واجهة برمجة التطبيقات (API) للأذونات في Node.js إرشادات حول كيفية إدارة والتحكم في الأذونات لعمليات مختلفة داخل تطبيقات Node.js، مما يضمن الوصول الآمن والمراقب إلى موارد النظام."}],["link",{"rel":"canonical","href":"https://idoc.dev/ar/nodejs/api/permissions"}],["meta",{"property":"og:url","content":"https://idoc.dev/ar/nodejs/api/permissions"}]]},"headers":[],"relativePath":"ar/nodejs/api/permissions.md","filePath":"ar/nodejs/api/permissions.md","lastUpdated":1749464498000}`),a={name:`ar/nodejs/api/permissions.md`};function o(e,i,a,o,s,c){return r(),t(`div`,null,i[0]||=[n(`<h1 id="permissions" tabindex="-1">الأذونات <a class="header-anchor" href="#permissions" aria-label="Permalink to “الأذونات”">​</a></h1><p>يمكن استخدام الأذونات للتحكم في موارد النظام التي يمكن لعملية Node.js الوصول إليها أو الإجراءات التي يمكن للعملية اتخاذها فيما يتعلق بتلك الموارد.</p><ul><li><a href="/ar/nodejs/api/permissions#process-based-permissions">الأذونات المستندة إلى العملية</a> تتحكم في وصول عملية Node.js إلى الموارد. يمكن السماح بالوصول إلى المورد بشكل كامل أو رفضه، أو يمكن التحكم في الإجراءات المتعلقة به. على سبيل المثال، يمكن السماح بقراءات نظام الملفات مع رفض الكتابة. لا تحمي هذه الميزة من التعليمات البرمجية الخبيثة. وفقًا <a href="https://github.com/nodejs/node/blob/main/SECURITY.md" target="_blank" rel="noreferrer">لسياسة أمان</a> Node.js، تثق Node.js في أي تعليمات برمجية يُطلب منها تشغيلها.</li></ul><p>يطبق نموذج الأذونات نهج &quot;حزام الأمان&quot;، الذي يمنع التعليمات البرمجية الموثوقة من تغيير الملفات عن غير قصد أو استخدام الموارد التي لم يتم منح الوصول إليها بشكل صريح. لا يوفر ضمانات أمنية في وجود تعليمات برمجية خبيثة. يمكن للتعليمات البرمجية الخبيثة تجاوز نموذج الأذونات وتنفيذ تعليمات برمجية عشوائية دون القيود التي يفرضها نموذج الأذونات.</p><p>إذا وجدت ثغرة أمنية محتملة، فيرجى الرجوع إلى <a href="https://github.com/nodejs/node/blob/main/SECURITY.md" target="_blank" rel="noreferrer">سياسة الأمان</a> الخاصة بنا.</p><h2 id="process-based-permissions" tabindex="-1">الأذونات المستندة إلى العملية <a class="header-anchor" href="#process-based-permissions" aria-label="Permalink to “الأذونات المستندة إلى العملية”">​</a></h2><h3 id="permission-model" tabindex="-1">نموذج الأذونات <a class="header-anchor" href="#permission-model" aria-label="Permalink to “نموذج الأذونات”">​</a></h3><div class="tip custom-block"><p class="custom-block-title">[مستقر: 2 - مستقر]</p><p><a href="/ar/nodejs/api/documentation#stability-index">مستقر: 2</a> <a href="/ar/nodejs/api/documentation#stability-index">الاستقرار: 2</a> - مستقر.</p></div><p>نموذج أذونات Node.js هو آلية لتقييد الوصول إلى موارد محددة أثناء التنفيذ. توجد واجهة برمجة التطبيقات خلف علامة <a href="/ar/nodejs/api/cli#permission"><code>--permission</code></a> التي عند تمكينها، ستقيد الوصول إلى جميع الأذونات المتاحة.</p><p>الأذونات المتاحة موثقة بواسطة علامة <a href="/ar/nodejs/api/cli#permission"><code>--permission</code></a>.</p><p>عند بدء Node.js باستخدام <code>--permission</code>، سيتم تقييد القدرة على الوصول إلى نظام الملفات من خلال وحدة <code>fs</code>، وعمليات التفريخ، واستخدام <code>node:worker_threads</code>، واستخدام الإضافات الأصلية، واستخدام WASI، وتمكين مفتش وقت التشغيل.</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> node</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --permission</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> index.js</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Error:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Access</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> to</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> this</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> API</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> has</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> been</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> restricted</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    at</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> node:internal/main/run_main_module:23:47</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  code:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;ERR_ACCESS_DENIED&#39;,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  permission:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;FileSystemRead&#39;,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  resource:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;/home/user/index.js&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>يمكن السماح بالوصول إلى تفريخ عملية وإنشاء سلاسل عاملة باستخدام <a href="/ar/nodejs/api/cli#allow-child-process"><code>--allow-child-process</code></a> و <a href="/ar/nodejs/api/cli#allow-worker"><code>--allow-worker</code></a> على التوالي.</p><p>للسماح بالإضافات الأصلية عند استخدام نموذج الأذونات، استخدم علامة <a href="/ar/nodejs/api/cli#allow-addons"><code>--allow-addons</code></a>. بالنسبة لـ WASI، استخدم علامة <a href="/ar/nodejs/api/cli#allow-wasi"><code>--allow-wasi</code></a>.</p><h4 id="runtime-api" tabindex="-1">واجهة برمجة التطبيقات وقت التشغيل <a class="header-anchor" href="#runtime-api" aria-label="Permalink to “واجهة برمجة التطبيقات وقت التشغيل”">​</a></h4><p>عند تمكين نموذج الأذونات من خلال العلامة <a href="/ar/nodejs/api/cli#permission"><code>--permission</code></a> تتم إضافة خاصية جديدة <code>permission</code> إلى كائن <code>process</code>. تحتوي هذه الخاصية على دالة واحدة:</p><h5 id="permissionhasscope-reference" tabindex="-1"><code>permission.has(scope[, reference])</code> <a class="header-anchor" href="#permissionhasscope-reference" aria-label="Permalink to “permission.has(scope[, reference])”">​</a></h5><p>استدعاء واجهة برمجة التطبيقات للتحقق من الأذونات في وقت التشغيل (<a href="/ar/nodejs/api/process#processpermissionhasscope-reference"><code>permission.has()</code></a>)</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">process.permission.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">has</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;fs.write&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// true</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">process.permission.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">has</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;fs.write&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;/home/rafaelgss/protected-folder&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// true</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">process.permission.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">has</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;fs.read&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// true</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">process.permission.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">has</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;fs.read&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;/home/rafaelgss/protected-folder&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// false</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h4 id="file-system-permissions" tabindex="-1">أذونات نظام الملفات <a class="header-anchor" href="#file-system-permissions" aria-label="Permalink to “أذونات نظام الملفات”">​</a></h4><p>يقيد نموذج الأذونات، بشكل افتراضي، الوصول إلى نظام الملفات من خلال الوحدة <code>node:fs</code>. ولا يضمن عدم تمكن المستخدمين من الوصول إلى نظام الملفات بوسائل أخرى، مثل الوحدة <code>node:sqlite</code>.</p><p>للسماح بالوصول إلى نظام الملفات، استخدم العلامات <a href="/ar/nodejs/api/cli#allow-fs-read"><code>--allow-fs-read</code></a> و <a href="/ar/nodejs/api/cli#allow-fs-write"><code>--allow-fs-write</code></a>:</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> node</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --permission</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --allow-fs-read=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --allow-fs-write=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> index.js</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Hello</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> world!</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>الوسائط الصالحة لكلتا العلامتين هي:</p><ul><li><code>*</code> - للسماح بجميع عمليات <code>FileSystemRead</code> أو <code>FileSystemWrite</code>، على التوالي.</li><li>المسارات مفصولة بفواصل (<code>,</code>) للسماح فقط بعمليات <code>FileSystemRead</code> أو <code>FileSystemWrite</code> المطابقة، على التوالي.</li></ul><p>مثال:</p><ul><li><code>--allow-fs-read=*</code> - سيسمح بجميع عمليات <code>FileSystemRead</code>.</li><li><code>--allow-fs-write=*</code> - سيسمح بجميع عمليات <code>FileSystemWrite</code>.</li><li><code>--allow-fs-write=/tmp/</code> - سيسمح بالوصول إلى <code>FileSystemWrite</code> إلى المجلد <code>/tmp/</code>.</li><li><code>--allow-fs-read=/tmp/ --allow-fs-read=/home/.gitignore</code> - يسمح بالوصول إلى <code>FileSystemRead</code> إلى المجلد <code>/tmp/</code> <strong>و</strong> المسار <code>/home/.gitignore</code>.</li></ul><p>تُدعم الأحرف بدلًا من ذلك:</p><ul><li><code>--allow-fs-read=/home/test*</code> سيسمح بالوصول للقراءة إلى كل ما يطابق الحرف بدلًا من ذلك. على سبيل المثال: <code>/home/test/file1</code> أو <code>/home/test2</code></li></ul><p>بعد تمرير حرف بدل (<code>*</code>) سيتم تجاهل جميع الأحرف اللاحقة. على سبيل المثال: <code>/home/*.js</code> ستعمل بشكل مشابه لـ <code>/home/*</code>.</p><p>عند تهيئة نموذج الأذونات، سيضيف تلقائيًا حرف بدل (*) إذا كان الدليل المحدد موجودًا. على سبيل المثال، إذا كان <code>/home/test/files</code> موجودًا، فسيتم التعامل معه على أنه <code>/home/test/files/*</code>. ومع ذلك، إذا لم يكن الدليل موجودًا، فلن تتم إضافة حرف البدل، وسيقتصر الوصول على <code>/home/test/files</code>. إذا كنت تريد السماح بالوصول إلى مجلد غير موجود بعد، فتأكد من تضمين حرف البدل بشكل صريح: <code>/my-path/folder-do-not-exist/*</code>.</p><h4 id="permission-model-constraints" tabindex="-1">قيود نموذج الأذونات <a class="header-anchor" href="#permission-model-constraints" aria-label="Permalink to “قيود نموذج الأذونات”">​</a></h4><p>هناك قيود تحتاج إلى معرفتها قبل استخدام هذا النظام:</p><ul><li><p>النموذج لا يرث إلى عملية عقدة فرعية أو خيط عامل.</p></li><li><p>عند استخدام نموذج الأذونات، سيتم تقييد الميزات التالية:</p><ul><li>الوحدات الأصلية</li><li>العملية الفرعية</li><li>خيوط العمال</li><li>بروتوكول الفحص</li><li>الوصول إلى نظام الملفات</li><li>واسي</li></ul></li><li><p>يتم تهيئة نموذج الأذونات بعد إعداد بيئة Node.js. ومع ذلك، تم تصميم بعض العلامات مثل <code>--env-file</code> أو <code>--openssl-config</code> لقراءة الملفات قبل تهيئة البيئة. ونتيجة لذلك، فإن هذه العلامات لا تخضع لقواعد نموذج الأذونات. وينطبق الأمر نفسه على علامات V8 التي يمكن تعيينها عبر وقت التشغيل من خلال <code>v8.setFlagsFromString</code>.</p></li><li><p>لا يمكن طلب محركات OpenSSL في وقت التشغيل عند تمكين نموذج الأذونات، مما يؤثر على وحدات التشفير المضمنة و https و tls.</p></li><li><p>لا يمكن تحميل ملحقات وقت التشغيل القابلة للتحميل عند تمكين نموذج الأذونات، مما يؤثر على وحدة sqlite.</p></li><li><p>يؤدي استخدام واصفات الملفات الموجودة عبر وحدة <code>node:fs</code> إلى تجاوز نموذج الأذونات.</p></li></ul><h4 id="limitations-and-known-issues" tabindex="-1">القيود والمشاكل المعروفة <a class="header-anchor" href="#limitations-and-known-issues" aria-label="Permalink to “القيود والمشاكل المعروفة”">​</a></h4><ul><li>سيتم تتبع الروابط الرمزية حتى إلى المواقع الموجودة خارج مجموعة المسارات التي تم منح الوصول إليها. قد تسمح الروابط الرمزية النسبية بالوصول إلى ملفات ودلائل عشوائية. عند بدء تشغيل التطبيقات مع تمكين نموذج الأذونات، يجب التأكد من عدم وجود مسارات تم منح الوصول إليها تحتوي على روابط رمزية نسبية.</li></ul>`,36)])}var s=e(a,[[`render`,o]]);export{i as __pageData,s as default};