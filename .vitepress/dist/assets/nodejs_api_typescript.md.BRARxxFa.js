import{__plugin_vue_export_helper_default as e,createElementBlock as t,createStaticVNode as n,openBlock as r}from"./chunks/plugin-vue_export-helper.Bts1mPc7.js";const i=JSON.parse(`{"title":"TypeScript Support in Node.js","description":"Learn how to use TypeScript with Node.js, including installation, configuration, and best practices for integrating TypeScript into your Node.js projects.","frontmatter":{"title":"TypeScript Support in Node.js","description":"Learn how to use TypeScript with Node.js, including installation, configuration, and best practices for integrating TypeScript into your Node.js projects.","head":[["meta",{"name":"og:title","content":"TypeScript Support in Node.js | Node.js - iDoc.dev"}],["meta",{"name":"og:description","content":"Learn how to use TypeScript with Node.js, including installation, configuration, and best practices for integrating TypeScript into your Node.js projects."}],["meta",{"name":"twitter:title","content":"TypeScript Support in Node.js | Node.js - iDoc.dev"}],["meta",{"name":"twitter:description","content":"Learn how to use TypeScript with Node.js, including installation, configuration, and best practices for integrating TypeScript into your Node.js projects."}],["link",{"rel":"canonical","href":"https://idoc.dev/nodejs/api/typescript"}],["meta",{"property":"og:url","content":"https://idoc.dev/nodejs/api/typescript"}]]},"headers":[],"relativePath":"nodejs/api/typescript.md","filePath":"en/nodejs/api/typescript.md","lastUpdated":1749464498000}`),a={name:`nodejs/api/typescript.md`};function o(e,i,a,o,s,c){return r(),t(`div`,null,i[0]||=[n(`<h1 id="modules-typescript" tabindex="-1">Modules: TypeScript <a class="header-anchor" href="#modules-typescript" aria-label="Permalink to “Modules: TypeScript”">​</a></h1><div class="info custom-block"><p class="custom-block-title">[History]</p><table tabindex="0"><thead><tr><th>Version</th><th>Changes</th></tr></thead><tbody><tr><td>v23.6.0</td><td>Type stripping is enabled by default.</td></tr><tr><td>v22.7.0</td><td>Added <code>--experimental-transform-types</code> flag.</td></tr></tbody></table></div><div class="warning custom-block"><p class="custom-block-title">[Stable: 1 - Experimental]</p><p><a href="/nodejs/api/documentation#stability-index">Stable: 1</a> <a href="/nodejs/api/documentation#stability-index">Stability: 1</a>.1 - Active development</p></div><h2 id="enabling" tabindex="-1">Enabling <a class="header-anchor" href="#enabling" aria-label="Permalink to “Enabling”">​</a></h2><p>There are two ways to enable runtime TypeScript support in Node.js:</p><h2 id="full-typescript-support" tabindex="-1">Full TypeScript support <a class="header-anchor" href="#full-typescript-support" aria-label="Permalink to “Full TypeScript support”">​</a></h2><p>To use TypeScript with full support for all TypeScript features, including <code>tsconfig.json</code>, you can use a third-party package. These instructions use <a href="https://tsx.is/" target="_blank" rel="noreferrer"><code>tsx</code></a> as an example but there are many other similar libraries available.</p><h2 id="type-stripping" tabindex="-1">Type stripping <a class="header-anchor" href="#type-stripping" aria-label="Permalink to “Type stripping”">​</a></h2><p><strong>Added in: v22.6.0</strong></p><div class="warning custom-block"><p class="custom-block-title">[Stable: 1 - Experimental]</p><p><a href="/nodejs/api/documentation#stability-index">Stable: 1</a> <a href="/nodejs/api/documentation#stability-index">Stability: 1</a>.1 - Active development</p></div><p>By default Node.js will execute TypeScript files that contains only erasable TypeScript syntax. Node.js will replace TypeScript syntax with whitespace, and no type checking is performed. To enable the transformation of non erasable TypeScript syntax, which requires JavaScript code generation, such as <code>enum</code> declarations, parameter properties use the flag <a href="/nodejs/api/cli#experimental-transform-types"><code>--experimental-transform-types</code></a>. To disable this feature, use the flag <a href="/nodejs/api/cli#no-experimental-strip-types"><code>--no-experimental-strip-types</code></a>.</p><p>Node.js ignores <code>tsconfig.json</code> files and therefore features that depend on settings within <code>tsconfig.json</code>, such as paths or converting newer JavaScript syntax to older standards, are intentionally unsupported. To get full TypeScript support, see <a href="/nodejs/api/typescript#full-typescript-support">Full TypeScript support</a>.</p><p>The type stripping feature is designed to be lightweight. By intentionally not supporting syntaxes that require JavaScript code generation, and by replacing inline types with whitespace, Node.js can run TypeScript code without the need for source maps.</p><p>Type stripping is compatible with most versions of TypeScript but we recommend version 5.7 or newer with the following <code>tsconfig.json</code> settings:</p><div class="language-json line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;compilerOptions&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">     &quot;target&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;esnext&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">     &quot;module&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;nodenext&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">     &quot;allowImportingTsExtensions&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">     &quot;rewriteRelativeImportExtensions&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">     &quot;verbatimModuleSyntax&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="determining-module-system" tabindex="-1">Determining module system <a class="header-anchor" href="#determining-module-system" aria-label="Permalink to “Determining module system”">​</a></h3><p>Node.js supports both <a href="/nodejs/api/modules">CommonJS</a> and <a href="/nodejs/api/esm">ES Modules</a> syntax in TypeScript files. Node.js will not convert from one module system to another; if you want your code to run as an ES module, you must use <code>import</code> and <code>export</code> syntax, and if you want your code to run as CommonJS you must use <code>require</code> and <code>module.exports</code>.</p><ul><li><code>.ts</code> files will have their module system determined <a href="/nodejs/api/packages#determining-module-system">the same way as <code>.js</code> files.</a> To use <code>import</code> and <code>export</code> syntax, add <code>&quot;type&quot;: &quot;module&quot;</code> to the nearest parent <code>package.json</code>.</li><li><code>.mts</code> files will always be run as ES modules, similar to <code>.mjs</code> files.</li><li><code>.cts</code> files will always be run as CommonJS modules, similar to <code>.cjs</code> files.</li><li><code>.tsx</code> files are unsupported.</li></ul><p>As in JavaScript files, <a href="/nodejs/api/esm#mandatory-file-extensions">file extensions are mandatory</a> in <code>import</code> statements and <code>import()</code> expressions: <code>import &#39;./file.ts&#39;</code>, not <code>import &#39;./file&#39;</code>. Because of backward compatibility, file extensions are also mandatory in <code>require()</code> calls: <code>require(&#39;./file.ts&#39;)</code>, not <code>require(&#39;./file&#39;)</code>, similar to how the <code>.cjs</code> extension is mandatory in <code>require</code> calls in CommonJS files.</p><p>The <code>tsconfig.json</code> option <code>allowImportingTsExtensions</code> will allow the TypeScript compiler <code>tsc</code> to type-check files with <code>import</code> specifiers that include the <code>.ts</code> extension.</p><h3 id="typescript-features" tabindex="-1">TypeScript features <a class="header-anchor" href="#typescript-features" aria-label="Permalink to “TypeScript features”">​</a></h3><p>Since Node.js is only removing inline types, any TypeScript features that involve <em>replacing</em> TypeScript syntax with new JavaScript syntax will error, unless the flag <a href="/nodejs/api/cli#experimental-transform-types"><code>--experimental-transform-types</code></a> is passed.</p><p>The most prominent features that require transformation are:</p><ul><li><code>Enum</code> declarations</li><li><code>namespace</code> with runtime code</li><li>legacy <code>module</code> with runtime code</li><li>parameter properties</li><li>import aliases</li></ul><p><code>namespaces</code> and <code>module</code> that do not contain runtime code are supported. This example will work correctly:</p><div class="language-ts line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// This namespace is exporting a type</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">namespace</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> TypeOnly</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">   export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> type</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> A</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>This will result in <a href="/nodejs/api/errors#err-unsupported-typescript-syntax"><code>ERR_UNSUPPORTED_TYPESCRIPT_SYNTAX</code></a> error:</p><div class="language-ts line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// This namespace is exporting a value</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">namespace</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> A</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">   export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> x </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>Since Decorators are currently a <a href="https://github.com/tc39/proposal-decorators" target="_blank" rel="noreferrer">TC39 Stage 3 proposal</a> and will soon be supported by the JavaScript engine, they are not transformed and will result in a parser error. This is a temporary limitation and will be resolved in the future.</p><p>In addition, Node.js does not read <code>tsconfig.json</code> files and does not support features that depend on settings within <code>tsconfig.json</code>, such as paths or converting newer JavaScript syntax into older standards.</p><h3 id="importing-types-without-type-keyword" tabindex="-1">Importing types without <code>type</code> keyword <a class="header-anchor" href="#importing-types-without-type-keyword" aria-label="Permalink to “Importing types without type keyword”">​</a></h3><p>Due to the nature of type stripping, the <code>type</code> keyword is necessary to correctly strip type imports. Without the <code>type</code> keyword, Node.js will treat the import as a value import, which will result in a runtime error. The tsconfig option <a href="https://www.typescriptlang.org/tsconfig/#verbatimModuleSyntax" target="_blank" rel="noreferrer"><code>verbatimModuleSyntax</code></a> can be used to match this behavior.</p><p>This example will work correctly:</p><div class="language-ts line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> type</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { Type1, Type2 } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;./module.ts&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { fn, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">type</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> FnParams } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;./fn.ts&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>This will result in a runtime error:</p><div class="language-ts line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { Type1, Type2 } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;./module.ts&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { fn, FnParams } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;./fn.ts&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="non-file-forms-of-input" tabindex="-1">Non-file forms of input <a class="header-anchor" href="#non-file-forms-of-input" aria-label="Permalink to “Non-file forms of input”">​</a></h3><p>Type stripping can be enabled for <code>--eval</code> and STDIN. The module system will be determined by <code>--input-type</code>, as it is for JavaScript.</p><p>TypeScript syntax is unsupported in the REPL, <code>--check</code>, and <code>inspect</code>.</p><h3 id="source-maps" tabindex="-1">Source maps <a class="header-anchor" href="#source-maps" aria-label="Permalink to “Source maps”">​</a></h3><p>Since inline types are replaced by whitespace, source maps are unnecessary for correct line numbers in stack traces; and Node.js does not generate them. When <a href="/nodejs/api/cli#experimental-transform-types"><code>--experimental-transform-types</code></a> is enabled, source-maps are enabled by default.</p><h3 id="type-stripping-in-dependencies" tabindex="-1">Type stripping in dependencies <a class="header-anchor" href="#type-stripping-in-dependencies" aria-label="Permalink to “Type stripping in dependencies”">​</a></h3><p>To discourage package authors from publishing packages written in TypeScript, Node.js will by default refuse to handle TypeScript files inside folders under a <code>node_modules</code> path.</p><h3 id="paths-aliases" tabindex="-1">Paths aliases <a class="header-anchor" href="#paths-aliases" aria-label="Permalink to “Paths aliases”">​</a></h3><p><a href="https://www.typescriptlang.org/tsconfig/#paths" target="_blank" rel="noreferrer"><code>tsconfig</code> &quot;paths&quot;</a> won&#39;t be transformed and therefore produce an error. The closest feature available is <a href="/nodejs/api/packages#subpath-imports">subpath imports</a> with the limitation that they need to start with <code>#</code>.</p>`,45)])}var s=e(a,[[`render`,o]]);export{i as __pageData,s as default};