import{__plugin_vue_export_helper_default as e,createElementBlock as t,createStaticVNode as n,openBlock as r}from"./chunks/plugin-vue_export-helper.Bts1mPc7.js";const i=JSON.parse(`{"title":"Sicherheitsbest Practices für Node.js-Anwendungen","description":"Ein umfassender Leitfaden zur Sicherung von Node.js-Anwendungen, der die Bedrohungsmodellierung, die besten Praktiken und die Abmilderung von häufigen Schwachstellen wie Denial of Service, DNS-Rebinding und Offenlegung von sensiblen Informationen abdeckt.","frontmatter":{"title":"Sicherheitsbest Practices für Node.js-Anwendungen","description":"Ein umfassender Leitfaden zur Sicherung von Node.js-Anwendungen, der die Bedrohungsmodellierung, die besten Praktiken und die Abmilderung von häufigen Schwachstellen wie Denial of Service, DNS-Rebinding und Offenlegung von sensiblen Informationen abdeckt.","head":[["meta",{"name":"og:title","content":"Sicherheitsbest Practices für Node.js-Anwendungen | Node.js - iDoc.dev"}],["meta",{"name":"og:description","content":"Ein umfassender Leitfaden zur Sicherung von Node.js-Anwendungen, der die Bedrohungsmodellierung, die besten Praktiken und die Abmilderung von häufigen Schwachstellen wie Denial of Service, DNS-Rebinding und Offenlegung von sensiblen Informationen abdeckt."}],["meta",{"name":"twitter:title","content":"Sicherheitsbest Practices für Node.js-Anwendungen | Node.js - iDoc.dev"}],["meta",{"name":"twitter:description","content":"Ein umfassender Leitfaden zur Sicherung von Node.js-Anwendungen, der die Bedrohungsmodellierung, die besten Praktiken und die Abmilderung von häufigen Schwachstellen wie Denial of Service, DNS-Rebinding und Offenlegung von sensiblen Informationen abdeckt."}],["link",{"rel":"canonical","href":"https://idoc.dev/de/nodejs/guide/security-best-practices"}],["meta",{"property":"og:url","content":"https://idoc.dev/de/nodejs/guide/security-best-practices"}]]},"headers":[],"relativePath":"de/nodejs/guide/security-best-practices.md","filePath":"de/nodejs/guide/security-best-practices.md","lastUpdated":1749464498000}`),a={name:`de/nodejs/guide/security-best-practices.md`};function o(e,i,a,o,s,c){return r(),t(`div`,null,i[0]||=[n(`<h1 id="sicherheits-best-practices" tabindex="-1">Sicherheits-Best Practices <a class="header-anchor" href="#sicherheits-best-practices" aria-label="Permalink to “Sicherheits-Best Practices”">​</a></h1><h3 id="absicht" tabindex="-1">Absicht <a class="header-anchor" href="#absicht" aria-label="Permalink to “Absicht”">​</a></h3><p>Dieses Dokument soll das aktuelle <a href="/de/nodejs/guide/security-best-practices#threat-model">Bedrohungsmodell</a> erweitern und umfassende Richtlinien zur Absicherung einer Node.js-Anwendung bereitstellen.</p><h2 id="dokumentinhalt" tabindex="-1">Dokumentinhalt <a class="header-anchor" href="#dokumentinhalt" aria-label="Permalink to “Dokumentinhalt”">​</a></h2><ul><li>Best Practices: Eine vereinfachte, komprimierte Darstellung der Best Practices. Wir können <a href="https://github.com/nodejs/security-wg/issues/488" target="_blank" rel="noreferrer">dieses Issue</a> oder <a href="https://github.com/goldbergyoni/nodebestpractices" target="_blank" rel="noreferrer">diese Richtlinie</a> als Ausgangspunkt verwenden. Es ist wichtig zu beachten, dass dieses Dokument spezifisch für Node.js ist. Wenn Sie etwas Breiteres suchen, sollten Sie <a href="https://github.com/ossf/wg-best-practices-os-developers" target="_blank" rel="noreferrer">OSSF Best Practices</a> in Betracht ziehen.</li><li>Erklärte Angriffe: Veranschaulichung und Dokumentation in einfachem Deutsch mit einigen Codebeispielen (wenn möglich) der Angriffe, die wir im Bedrohungsmodell erwähnen.</li><li>Bibliotheken von Drittanbietern: Definition von Bedrohungen (Typosquatting-Angriffe, schädliche Pakete...) und Best Practices in Bezug auf Node-Module-Abhängigkeiten usw.</li></ul><h2 id="bedrohungsliste" tabindex="-1">Bedrohungsliste <a class="header-anchor" href="#bedrohungsliste" aria-label="Permalink to “Bedrohungsliste”">​</a></h2><h3 id="denial-of-service-des-http-servers-cwe-400" tabindex="-1">Denial of Service des HTTP-Servers (CWE-400) <a class="header-anchor" href="#denial-of-service-des-http-servers-cwe-400" aria-label="Permalink to “Denial of Service des HTTP-Servers (CWE-400)”">​</a></h3><p>Dies ist ein Angriff, bei dem die Anwendung für den Zweck, für den sie entwickelt wurde, nicht mehr verfügbar ist, da eingehende HTTP-Anfragen auf eine bestimmte Weise verarbeitet werden. Diese Anfragen müssen nicht unbedingt von einem böswilligen Akteur gezielt erstellt werden: Ein falsch konfigurierter oder fehlerhafter Client kann dem Server auch ein Anfrage Muster senden, das zu einem Denial of Service führt.</p><p>HTTP-Anfragen werden vom Node.js HTTP-Server empfangen und über den registrierten Anfrage Handler an den Anwendungscode übergeben. Der Server analysiert den Inhalt des Anfragekörpers nicht. Daher ist jeder DoS, der durch den Inhalt des Körpers verursacht wird, nachdem dieser an den Anfrage Handler übergeben wurde, keine Schwachstelle in Node.js selbst, da es in der Verantwortung des Anwendungscodes liegt, ihn korrekt zu behandeln.</p><p>Stellen Sie sicher, dass der Webserver Socket-Fehler ordnungsgemäß behandelt, z. B. wenn ein Server ohne Fehler Handler erstellt wird, ist er anfällig für DoS.</p><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> net </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;node:net&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> server</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> net.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">createServer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">socket</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // socket.on(&#39;error&#39;, console.error)</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> // this prevents the server to crash</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  socket.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">write</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;Echo server</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\r\\n</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  socket.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pipe</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(socket)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">server.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">listen</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">5000</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;0.0.0.0&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p><em>Wenn eine fehlerhafte Anfrage gestellt wird, kann der Server abstürzen.</em></p><p>Ein Beispiel für einen DoS-Angriff, der nicht durch den Inhalt der Anfrage verursacht wird, ist Slowloris. Bei diesem Angriff werden HTTP-Anfragen langsam und fragmentiert, ein Fragment nach dem anderen, gesendet. Bis die vollständige Anfrage zugestellt ist, hält der Server Ressourcen für die laufende Anfrage bereit. Wenn genügend dieser Anfragen gleichzeitig gesendet werden, erreicht die Anzahl der gleichzeitigen Verbindungen bald ihr Maximum, was zu einem Denial of Service führt. Auf diese Weise hängt der Angriff nicht vom Inhalt der Anfrage ab, sondern vom Timing und Muster der Anfragen, die an den Server gesendet werden.</p><h4 id="abhilfen" tabindex="-1">Abhilfen <a class="header-anchor" href="#abhilfen" aria-label="Permalink to “Abhilfen”">​</a></h4><ul><li>Verwenden Sie einen Reverse-Proxy, um Anfragen entgegenzunehmen und an die Node.js-Anwendung weiterzuleiten. Reverse-Proxies können Caching, Load Balancing, IP-Blacklisting usw. bereitstellen, was die Wahrscheinlichkeit verringert, dass ein DoS-Angriff wirksam ist.</li><li>Konfigurieren Sie die Server-Timeouts korrekt, sodass Verbindungen, die inaktiv sind oder bei denen Anfragen zu langsam eintreffen, verworfen werden können. Beachten Sie die verschiedenen Timeouts in <code>http.Server</code>, insbesondere <code>headersTimeout</code>, <code>requestTimeout</code>, <code>timeout</code> und <code>keepAliveTimeout</code>.</li><li>Begrenzen Sie die Anzahl offener Sockets pro Host und insgesamt. Siehe die <a href="/de/nodejs/api/http">http-Dokumentation</a>, insbesondere <code>agent.maxSockets</code>, <code>agent.maxTotalSockets</code>, <code>agent.maxFreeSockets</code> und <code>server.maxRequestsPerSocket</code>.</li></ul><h3 id="dns-rebinding-cwe-346" tabindex="-1">DNS-Rebinding (CWE-346) <a class="header-anchor" href="#dns-rebinding-cwe-346" aria-label="Permalink to “DNS-Rebinding (CWE-346)”">​</a></h3><p>Dies ist ein Angriff, der auf Node.js-Anwendungen abzielen kann, die mit aktiviertem Debugging-Inspector unter Verwendung des Schalters <a href="/de/nodejs/guide/debugging-nodejs">--inspect</a> ausgeführt werden.</p><p>Da Websites, die in einem Webbrowser geöffnet werden, WebSocket- und HTTP-Anfragen stellen können, können sie auf den lokal ausgeführten Debugging-Inspector abzielen. Dies wird normalerweise durch die <a href="/de/nodejs/guide/debugging-nodejs">Same-Origin-Policy</a> verhindert, die von modernen Browsern implementiert wird und die Skripten verbietet, Ressourcen von verschiedenen Ursprüngen zu erreichen (d. h. eine bösartige Website kann keine Daten lesen, die von einer lokalen IP-Adresse angefordert werden).</p><p>Durch DNS-Rebinding kann ein Angreifer jedoch vorübergehend den Ursprung seiner Anfragen kontrollieren, sodass es so aussieht, als würden sie von einer lokalen IP-Adresse stammen. Dies geschieht durch die Kontrolle sowohl einer Website als auch des DNS-Servers, der zum Auflösen ihrer IP-Adresse verwendet wird. Weitere Informationen finden Sie im <a href="https://en.wikipedia.org/wiki/DNS_rebinding" target="_blank" rel="noreferrer">DNS Rebinding Wiki</a>.</p><h4 id="abhilfen-1" tabindex="-1">Abhilfen <a class="header-anchor" href="#abhilfen-1" aria-label="Permalink to “Abhilfen”">​</a></h4><ul><li>Deaktivieren Sie den Inspector beim SIGUSR1-Signal, indem Sie einen <code>process.on(&#39;SIGUSR1&#39;, ...)</code>-Listener daran anhängen.</li><li>Führen Sie das Inspector-Protokoll nicht in der Produktion aus.</li></ul><h3 id="offenlegung-sensibler-informationen-an-einen-unbefugten-akteur-cwe-552" tabindex="-1">Offenlegung sensibler Informationen an einen unbefugten Akteur (CWE-552) <a class="header-anchor" href="#offenlegung-sensibler-informationen-an-einen-unbefugten-akteur-cwe-552" aria-label="Permalink to “Offenlegung sensibler Informationen an einen unbefugten Akteur (CWE-552)”">​</a></h3><p>Alle im aktuellen Verzeichnis enthaltenen Dateien und Ordner werden während der Paketveröffentlichung an die npm-Registry übertragen.</p><p>Es gibt einige Mechanismen, um dieses Verhalten zu steuern, indem eine Sperrliste mit <code>.npmignore</code> und <code>.gitignore</code> definiert wird oder indem eine Zulassungsliste in der <code>package.json</code> definiert wird.</p><h4 id="gegenmaßnahmen" tabindex="-1">Gegenmaßnahmen <a class="header-anchor" href="#gegenmaßnahmen" aria-label="Permalink to “Gegenmaßnahmen”">​</a></h4><ul><li>Verwenden Sie <code>npm publish --dry-run</code>, um alle zu veröffentlichenden Dateien aufzulisten. Stellen Sie sicher, dass Sie den Inhalt überprüfen, bevor Sie das Paket veröffentlichen.</li><li>Es ist auch wichtig, Ignorierdateien wie <code>.gitignore</code> und <code>.npmignore</code> zu erstellen und zu pflegen. In diesen Dateien können Sie festlegen, welche Dateien/Ordner nicht veröffentlicht werden sollen. Die <a href="https://docs.npmjs.com/cli/v8/configuring-npm/package-json#files" target="_blank" rel="noreferrer">Eigenschaft files</a> in <code>package.json</code> ermöglicht die inverse Operation <code>-- allowed</code> list.</li><li>Stellen Sie im Falle einer Gefährdung sicher, dass Sie das <a href="https://docs.npmjs.com/unpublishing-packages-from-the-registry" target="_blank" rel="noreferrer">Paket unveröffentlichen</a>.</li></ul><h3 id="http-request-smuggling-cwe-444" tabindex="-1">HTTP Request Smuggling (CWE-444) <a class="header-anchor" href="#http-request-smuggling-cwe-444" aria-label="Permalink to “HTTP Request Smuggling (CWE-444)”">​</a></h3><p>Dies ist ein Angriff, bei dem zwei HTTP-Server beteiligt sind (normalerweise ein Proxy und eine Node.js-Anwendung). Ein Client sendet eine HTTP-Anfrage, die zuerst über den Front-End-Server (den Proxy) läuft und dann an den Back-End-Server (die Anwendung) weitergeleitet wird. Wenn das Front-End und das Back-End mehrdeutige HTTP-Anfragen unterschiedlich interpretieren, besteht die Möglichkeit, dass ein Angreifer eine bösartige Nachricht sendet, die vom Front-End nicht gesehen wird, aber vom Back-End gesehen wird, wodurch sie effektiv am Proxy-Server &quot;vorbeigeschmuggelt&quot; wird.</p><p>Weitere Details und Beispiele finden Sie unter <a href="https://cwe.mitre.org/data/definitions/444.html" target="_blank" rel="noreferrer">CWE-444</a>.</p><p>Da dieser Angriff davon abhängt, dass Node.js HTTP-Anfragen anders interpretiert als ein (beliebiger) HTTP-Server, kann ein erfolgreicher Angriff auf eine Schwachstelle in Node.js, dem Front-End-Server oder beidem zurückzuführen sein. Wenn die Art und Weise, wie die Anfrage von Node.js interpretiert wird, mit der HTTP-Spezifikation übereinstimmt (siehe <a href="https://datatracker.ietf.org/doc/html/rfc7230#section-3" target="_blank" rel="noreferrer">RFC7230</a>), wird dies nicht als Schwachstelle in Node.js betrachtet.</p><h4 id="gegenmaßnahmen-1" tabindex="-1">Gegenmaßnahmen <a class="header-anchor" href="#gegenmaßnahmen-1" aria-label="Permalink to “Gegenmaßnahmen”">​</a></h4><ul><li>Verwenden Sie die Option <code>insecureHTTPParser</code> nicht, wenn Sie einen HTTP-Server erstellen.</li><li>Konfigurieren Sie den Front-End-Server, um mehrdeutige Anfragen zu normalisieren.</li><li>Überwachen Sie kontinuierlich auf neue HTTP Request Smuggling-Schwachstellen sowohl in Node.js als auch im Front-End-Server Ihrer Wahl.</li><li>Verwenden Sie HTTP/2 durchgehend und deaktivieren Sie wenn möglich das HTTP-Downgrading.</li></ul><h3 id="informationsweitergabe-durch-timing-angriffe-cwe-208" tabindex="-1">Informationsweitergabe durch Timing-Angriffe (CWE-208) <a class="header-anchor" href="#informationsweitergabe-durch-timing-angriffe-cwe-208" aria-label="Permalink to “Informationsweitergabe durch Timing-Angriffe (CWE-208)”">​</a></h3><p>Dies ist ein Angriff, der es dem Angreifer ermöglicht, potenziell sensible Informationen zu erhalten, indem er beispielsweise misst, wie lange es dauert, bis die Anwendung auf eine Anfrage reagiert. Dieser Angriff ist nicht spezifisch für Node.js und kann auf fast alle Laufzeitumgebungen abzielen.</p><p>Der Angriff ist möglich, wenn die Anwendung ein Geheimnis in einer zeitkritischen Operation (z. B. Verzweigung) verwendet. Betrachten Sie die Authentifizierung in einer typischen Anwendung. Hier beinhaltet eine einfache Authentifizierungsmethode E-Mail und Passwort als Anmeldedaten. Benutzerinformationen werden aus der Eingabe des Benutzers abgerufen, idealerweise aus einem DBMS. Nach dem Abrufen der Benutzerinformationen wird das Passwort mit den aus der Datenbank abgerufenen Benutzerinformationen verglichen. Die Verwendung des eingebauten Zeichenkettenvergleichs dauert für gleich lange Werte länger. Dieser Vergleich erhöht unfreiwillig die Antwortzeit der Anfrage, wenn er für eine akzeptable Zeit ausgeführt wird. Durch den Vergleich der Antwortzeiten der Anfragen kann ein Angreifer die Länge und den Wert des Passworts in einer großen Anzahl von Anfragen erraten.</p><h4 id="abschwachungen" tabindex="-1">Abschwächungen <a class="header-anchor" href="#abschwachungen" aria-label="Permalink to “Abschwächungen”">​</a></h4><ul><li>Die Crypto-API stellt eine Funktion <code>timingSafeEqual</code> bereit, um tatsächliche und erwartete sensible Werte mit einem Constant-Time-Algorithmus zu vergleichen.</li><li>Für den Passwortvergleich können Sie das <a href="/de/nodejs/api/crypto">Scrypt</a> verwenden, das auch im nativen Crypto-Modul verfügbar ist.</li><li>Vermeiden Sie generell die Verwendung von Geheimnissen in Operationen mit variabler Zeit. Dies schließt die Verzweigung von Geheimnissen ein und, wenn sich der Angreifer in derselben Infrastruktur befindet (z. B. auf derselben Cloud-Maschine), die Verwendung eines Geheimnisses als Index in den Speicher. Das Schreiben von Constant-Time-Code in JavaScript ist schwierig (teilweise aufgrund des JIT). Verwenden Sie für Krypto-Anwendungen die eingebauten Krypto-APIs oder WebAssembly (für Algorithmen, die nicht nativ implementiert sind).</li></ul><h3 id="bosartige-drittanbietermodule-cwe-1357" tabindex="-1">Bösartige Drittanbietermodule (CWE-1357) <a class="header-anchor" href="#bosartige-drittanbietermodule-cwe-1357" aria-label="Permalink to “Bösartige Drittanbietermodule (CWE-1357)”">​</a></h3><p>Derzeit kann in Node.js jedes Paket auf leistungsstarke Ressourcen wie den Netzwerkzugriff zugreifen. Da sie außerdem Zugriff auf das Dateisystem haben, können sie alle Daten überallhin senden.</p><p>Jeder Code, der in einem Node-Prozess ausgeführt wird, hat die Möglichkeit, zusätzlichen beliebigen Code zu laden und auszuführen, indem er <code>eval()</code> (oder dessen Äquivalente) verwendet. Jeder Code mit Schreibzugriff auf das Dateisystem kann dasselbe erreichen, indem er in neue oder vorhandene Dateien schreibt, die geladen werden.</p><p>Node.js verfügt über einen experimentellen¹ <a href="/de/nodejs/api/permissions">Richtlinienmechanismus</a>, um die geladene Ressource als nicht vertrauenswürdig oder vertrauenswürdig zu deklarieren. Diese Richtlinie ist jedoch standardmäßig nicht aktiviert. Stellen Sie sicher, dass Sie Abhängigkeitsversionen festlegen und automatische Überprüfungen auf Schwachstellen mithilfe gängiger Workflows oder npm-Skripte durchführen. Bevor Sie ein Paket installieren, stellen Sie sicher, dass dieses Paket gepflegt wird und alle Inhalte enthält, die Sie erwartet haben. Seien Sie vorsichtig, der GitHub-Quellcode ist nicht immer derselbe wie der veröffentlichte, validieren Sie ihn in den <code>node_modules</code>.</p><h4 id="lieferkettenangriffe" tabindex="-1">Lieferkettenangriffe <a class="header-anchor" href="#lieferkettenangriffe" aria-label="Permalink to “Lieferkettenangriffe”">​</a></h4><p>Ein Lieferkettenangriff auf eine Node.js-Anwendung erfolgt, wenn eine ihrer Abhängigkeiten (direkte oder transitive) kompromittiert wird. Dies kann entweder dadurch geschehen, dass die Anwendung bei der Spezifikation der Abhängigkeiten zu nachlässig ist (was unerwünschte Aktualisierungen ermöglicht) und/oder aufgrund häufiger Tippfehler in der Spezifikation (anfällig für <a href="https://en.wikipedia.org/wiki/Typosquatting" target="_blank" rel="noreferrer">Typosquatting</a>).</p><p>Ein Angreifer, der die Kontrolle über ein Upstream-Paket übernimmt, kann eine neue Version mit bösartigem Code veröffentlichen. Wenn eine Node.js-Anwendung von diesem Paket abhängt, ohne genau festzulegen, welche Version sicher zu verwenden ist, kann das Paket automatisch auf die neueste bösartige Version aktualisiert werden, wodurch die Anwendung kompromittiert wird.</p><p>In der Datei <code>package.json</code> angegebene Abhängigkeiten können eine exakte Versionsnummer oder einen Bereich haben. Wenn jedoch eine Abhängigkeit an eine exakte Version gebunden wird, werden ihre transitiven Abhängigkeiten nicht selbst gebunden. Dies macht die Anwendung weiterhin anfällig für unerwünschte/unerwartete Aktualisierungen.</p><p>Mögliche Angriffsvektoren:</p><ul><li>Typosquatting-Angriffe</li><li>Lockfile-Vergiftung</li><li>Kompromittierte Maintainer</li><li>Bösartige Pakete</li><li>Dependency Confusion</li></ul><h5 id="abschwachungen-1" tabindex="-1">Abschwächungen <a class="header-anchor" href="#abschwachungen-1" aria-label="Permalink to “Abschwächungen”">​</a></h5><ul><li>Verhindern Sie, dass npm beliebige Skripte mit <code>--ignore-scripts</code> ausführt. <ul><li>Zusätzlich können Sie dies global mit <code>npm config set ignore-scripts true</code> deaktivieren.</li></ul></li><li>Fixieren Sie Abhängigkeitsversionen auf eine bestimmte unveränderliche Version, nicht auf eine Version, die ein Bereich ist oder aus einer veränderlichen Quelle stammt.</li><li>Verwenden Sie Lockfiles, die jede Abhängigkeit (direkt und transitiv) fixieren. <ul><li>Verwenden Sie <a href="https://blog.ulisesgascon.com/lockfile-posioned" target="_blank" rel="noreferrer">Maßnahmen zur Abmilderung von Lockfile-Vergiftungen</a>.</li></ul></li><li>Automatisieren Sie die Überprüfung auf neue Schwachstellen mithilfe von CI mit Tools wie <a href="https://www.npmjs.com/package/npm-audit" target="_blank" rel="noreferrer">npm-audit</a>. <ul><li>Tools wie <code>Socket</code> können verwendet werden, um Pakete mit statischer Analyse zu analysieren, um riskantes Verhalten wie Netzwerk- oder Dateisystemzugriff zu finden.</li></ul></li><li>Verwenden Sie <code>npm ci</code> anstelle von <code>npm install</code>. Dies erzwingt die Lockfile, so dass Inkonsistenzen zwischen ihr und der Datei <code>package.json</code> einen Fehler verursachen (anstatt die Lockfile zugunsten von <code>package.json</code> stillschweigend zu ignorieren).</li><li>Überprüfen Sie die Datei <code>package.json</code> sorgfältig auf Fehler/Tippfehler in den Namen der Abhängigkeiten.</li></ul><h3 id="memory-access-violation-cwe-284" tabindex="-1">Memory Access Violation (CWE-284) <a class="header-anchor" href="#memory-access-violation-cwe-284" aria-label="Permalink to “Memory Access Violation (CWE-284)”">​</a></h3><p>Speicherbasierte oder Heap-basierte Angriffe hängen von einer Kombination aus Fehlern im Speichermanagement und einem ausnutzbaren Speicherallokator ab. Wie alle Runtimes ist auch Node.js anfällig für diese Angriffe, wenn Ihre Projekte auf einem gemeinsam genutzten Rechner laufen. Die Verwendung eines sicheren Heaps ist nützlich, um zu verhindern, dass sensible Informationen aufgrund von Pointer-Über- und Unterläufen durchsickern.</p><p>Leider ist ein sicherer Heap unter Windows nicht verfügbar. Weitere Informationen finden Sie in der Node.js <a href="/de/nodejs/api/cli">secure-heap Dokumentation</a>.</p><h4 id="gegenmaßnahmen-2" tabindex="-1">Gegenmaßnahmen <a class="header-anchor" href="#gegenmaßnahmen-2" aria-label="Permalink to “Gegenmaßnahmen”">​</a></h4><ul><li>Verwenden Sie <code>--secure-heap=n</code> je nach Ihrer Anwendung, wobei n die maximal zugewiesene Byte-Größe ist.</li><li>Führen Sie Ihre Produktionsanwendung nicht auf einem gemeinsam genutzten Rechner aus.</li></ul><h3 id="monkey-patching-cwe-349" tabindex="-1">Monkey Patching (CWE-349) <a class="header-anchor" href="#monkey-patching-cwe-349" aria-label="Permalink to “Monkey Patching (CWE-349)”">​</a></h3><p>Monkey Patching bezieht sich auf die Modifikation von Eigenschaften zur Laufzeit, um das bestehende Verhalten zu ändern. Beispiel:</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// eslint-disable-next-line no-extend-native</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Array</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">prototype</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">push</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">item</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // overriding the global [].push</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h4 id="gegenmaßnahmen-3" tabindex="-1">Gegenmaßnahmen <a class="header-anchor" href="#gegenmaßnahmen-3" aria-label="Permalink to “Gegenmaßnahmen”">​</a></h4><p>Das Flag <code>--frozen-intrinsics</code> aktiviert experimentelle¹ eingefrorene Intrinsics, was bedeutet, dass alle eingebauten JavaScript-Objekte und -Funktionen rekursiv eingefroren werden. Daher überschreibt der folgende Code-Snippet nicht das Standardverhalten von <code>Array.prototype.push</code></p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// eslint-disable-next-line no-extend-native</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Array</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">prototype</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">push</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">item</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // overriding the global [].push</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Uncaught:</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// TypeError &lt;Object &lt;Object &lt;[Object: null prototype] {}&gt;&gt;&gt;:</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Cannot assign to read only property &#39;push&#39; of object &#39;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>Es ist jedoch wichtig zu erwähnen, dass Sie immer noch neue Globals definieren und bestehende Globals mit <code>globalThis</code> ersetzen können.</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">globalThis.foo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">foo</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">//</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> you</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> can</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> still</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> define</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> new</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> globals</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 3</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">globalThis.Array</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 4</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Array</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">//</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> However,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> you</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> can</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> also</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> replace</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> existing</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> globals</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 4</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>Daher kann <code>Object.freeze(globalThis)</code> verwendet werden, um zu garantieren, dass keine Globals ersetzt werden.</p><h3 id="prototype-pollution-attacks-cwe-1321" tabindex="-1">Prototype Pollution Attacks (CWE-1321) <a class="header-anchor" href="#prototype-pollution-attacks-cwe-1321" aria-label="Permalink to “Prototype Pollution Attacks (CWE-1321)”">​</a></h3><p>Prototype Pollution bezieht sich auf die Möglichkeit, Eigenschaften in Javascript-Sprachelemente zu modifizieren oder einzufügen, indem die Verwendung von _<em>proto</em>, _constructor, prototype und anderen Eigenschaften, die von eingebauten Prototypen geerbt werden, missbraucht wird.</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> a</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { a: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, b: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> data</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> JSON</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">parse</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;{&quot;__proto__&quot;: { &quot;polluted&quot;: true}}&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> c</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Object.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">assign</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({}, a, data)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(c.polluted) </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// true</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Potential DoS</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> data2</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> JSON</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">parse</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;{&quot;__proto__&quot;: null}&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> d</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Object.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">assign</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(a, data2)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">d.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">hasOwnProperty</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;b&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Uncaught TypeError: d.hasOwnProperty is not a function</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>Dies ist eine potenzielle Schwachstelle, die von der JavaScript-Sprache geerbt wird.</p><h4 id="beispiele" tabindex="-1">Beispiele <a class="header-anchor" href="#beispiele" aria-label="Permalink to “Beispiele”">​</a></h4><ul><li><a href="https://www.cvedetails.com/cve/CVE-2022-21824/" target="_blank" rel="noreferrer">CVE-2022-21824</a> (Node.js)</li><li><a href="https://www.cvedetails.com/cve/CVE-2018-3721/" target="_blank" rel="noreferrer">CVE-2018-3721</a> (Bibliothek von Drittanbietern: Lodash)</li></ul><h4 id="schutzmaßnahmen" tabindex="-1">Schutzmaßnahmen <a class="header-anchor" href="#schutzmaßnahmen" aria-label="Permalink to “Schutzmaßnahmen”">​</a></h4><ul><li>Vermeiden Sie <a href="https://gist.github.com/DaniAkash/b3d7159fddcff0a9ee035bd10e34b277#file-unsafe-merge-js" target="_blank" rel="noreferrer">unsichere rekursive Zusammenführungen</a>, siehe <a href="https://www.cve.org/CVERecord?id=CVE-2018-16487" target="_blank" rel="noreferrer">CVE-2018-16487</a>.</li><li>Implementieren Sie JSON-Schema-Validierungen für externe/nicht vertrauenswürdige Anfragen.</li><li>Erstellen Sie Objekte ohne Prototyp mit <code>Object.create(null)</code>.</li><li>Einfrieren des Prototyps: <code>Object.freeze(MyObject.prototype)</code>.</li><li>Deaktivieren Sie die Eigenschaft <code>Object.prototype.__proto__</code> mit dem Flag <code>--disable-proto</code>.</li><li>Überprüfen Sie, ob die Eigenschaft direkt im Objekt vorhanden ist und nicht aus dem Prototyp stammt, indem Sie <code>Object.hasOwn(obj, keyFromObj)</code> verwenden.</li><li>Vermeiden Sie die Verwendung von Methoden aus <code>Object.prototype</code>.</li></ul><h3 id="unkontrolliertes-suchpfadelement-cwe-427" tabindex="-1">Unkontrolliertes Suchpfadelement (CWE-427) <a class="header-anchor" href="#unkontrolliertes-suchpfadelement-cwe-427" aria-label="Permalink to “Unkontrolliertes Suchpfadelement (CWE-427)”">​</a></h3><p>Node.js lädt Module gemäß dem <a href="/de/nodejs/api/modules">Modulauflösungsalgorithmus</a>. Daher wird davon ausgegangen, dass das Verzeichnis, in dem ein Modul angefordert wird (require), vertrauenswürdig ist.</p><p>Dies bedeutet, dass folgendes Anwendungsverhalten erwartet wird. Angenommen, die folgende Verzeichnisstruktur:</p><ul><li>app/ <ul><li>server.js</li><li>auth.js</li><li>auth</li></ul></li></ul><p>Wenn server.js <code>require(&#39;./auth&#39;)</code> verwendet, wird dem Modulauflösungsalgorithmus gefolgt und auth anstelle von <code>auth.js</code> geladen.</p><h4 id="schutzmaßnahmen-1" tabindex="-1">Schutzmaßnahmen <a class="header-anchor" href="#schutzmaßnahmen-1" aria-label="Permalink to “Schutzmaßnahmen”">​</a></h4><p>Die Verwendung des experimentellen¹ <a href="/de/nodejs/api/permissions">Richtlinienmechanismus mit Integritätsprüfung</a> kann die oben genannte Bedrohung vermeiden. Für das oben beschriebene Verzeichnis kann folgende <code>policy.json</code> verwendet werden:</p><div class="language-json line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;resources&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;./app/auth.js&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;integrity&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;sha256-iuGZ6SFVFpMuHUcJciQTIKpIyaQVigMZlvg9Lx66HV8=&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    },</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;./app/server.js&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;dependencies&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        &quot;./auth&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;./app/auth.js&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      },</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      &quot;integrity&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;sha256-NPtLCQ0ntPPWgfVEgX46ryTNpdvTWdQPoZO3kHo0bKI=&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>Wenn also das Auth-Modul angefordert wird, validiert das System die Integrität und gibt einen Fehler aus, wenn sie nicht mit der erwarteten übereinstimmt.</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">»</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> node</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --experimental-policy=policy.json</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> app/server.js</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">node:internal/policy/sri:65</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">      throw</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> new</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ERR_SRI_PARSE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">str,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> str[prevIndex],</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> prevIndex</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">      ^</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">SyntaxError</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [ERR_SRI_PARSE]: Subresource Integrity string </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;sha256-iuGZ6SFVFpMuHUcJciQTIKpIyaQVigMZlvg9Lx66HV8=%&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> had an unexpected </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;%&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> at position 51</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    at</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> new</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> NodeError</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (node:internal/errors:393:5)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    at</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Object.parse</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (node:internal/policy/sri:65:13)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    at</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> processEntry</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (node:internal/policy/manifest:581:38)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    at</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Manifest.assertIntegrity</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (node:internal/policy/manifest:588:32)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    at</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Module._compile</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (node:internal/modules/cjs/loader:1119:21)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    at</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Module._extensions..js</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (node:internal/modules/cjs/loader:1213:10)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    at</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Module.load</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (node:internal/modules/cjs/loader:1037:32)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    at</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Module._load</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (node:internal/modules/cjs/loader:878:12)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    at</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Module.require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (node:internal/modules/cjs/loader:1061:19)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    at</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (node:internal/modules/cjs/helpers:99:18) {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  code:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;ERR_SRI_PARSE&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p>Beachten Sie, dass die Verwendung von <code>--policy-integrity</code> immer empfohlen wird, um Richtlinienmutationen zu vermeiden.</p><h2 id="experimentelle-funktionen-in-der-produktion" tabindex="-1">Experimentelle Funktionen in der Produktion <a class="header-anchor" href="#experimentelle-funktionen-in-der-produktion" aria-label="Permalink to “Experimentelle Funktionen in der Produktion”">​</a></h2><p>Die Verwendung experimenteller Funktionen in der Produktion wird nicht empfohlen. Experimentelle Funktionen können bei Bedarf grundlegende Änderungen erfahren, und ihre Funktionalität ist nicht sicher stabil. Feedback wird jedoch sehr geschätzt.</p><h2 id="openssf-tools" tabindex="-1">OpenSSF-Tools <a class="header-anchor" href="#openssf-tools" aria-label="Permalink to “OpenSSF-Tools”">​</a></h2><p>Die <a href="https://www.openssf.org" target="_blank" rel="noreferrer">OpenSSF</a> leitet mehrere Initiativen, die sehr nützlich sein können, insbesondere wenn Sie planen, ein npm-Paket zu veröffentlichen. Diese Initiativen umfassen:</p><ul><li><a href="https://securityscorecards.dev/" target="_blank" rel="noreferrer">OpenSSF Scorecard</a> Scorecard bewertet Open-Source-Projekte anhand einer Reihe automatisierter Sicherheitsrisikoprüfungen. Sie können sie verwenden, um Schwachstellen und Abhängigkeiten in Ihrer Codebasis proaktiv zu bewerten und fundierte Entscheidungen über die Akzeptanz von Schwachstellen zu treffen.</li><li><a href="https://bestpractices.coreinfrastructure.org/en" target="_blank" rel="noreferrer">OpenSSF Best Practices Badge Program</a> Projekte können sich freiwillig selbst zertifizieren, indem sie beschreiben, wie sie jede Best Practice einhalten. Dies generiert ein Badge, das dem Projekt hinzugefügt werden kann.</li></ul>`,87)])}var s=e(a,[[`render`,o]]);export{i as __pageData,s as default};