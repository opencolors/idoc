import{__plugin_vue_export_helper_default as e,createElementBlock as t,createStaticVNode as n,openBlock as r}from"./chunks/plugin-vue_export-helper.Bts1mPc7.js";const i=JSON.parse(`{"title":"توثيق وحدة Node.js Inspector","description":"توفر وحدة Node.js Inspector واجهة برمجة التطبيقات للتفاعل مع أداة الفحص V8، مما يسمح للمطورين بتصحيح تطبيقات Node.js من خلال الاتصال ببروتوكول الفحص.","frontmatter":{"title":"توثيق وحدة Node.js Inspector","description":"توفر وحدة Node.js Inspector واجهة برمجة التطبيقات للتفاعل مع أداة الفحص V8، مما يسمح للمطورين بتصحيح تطبيقات Node.js من خلال الاتصال ببروتوكول الفحص.","head":[["meta",{"name":"og:title","content":"توثيق وحدة Node.js Inspector | Node.js - iDoc.dev"}],["meta",{"name":"og:description","content":"توفر وحدة Node.js Inspector واجهة برمجة التطبيقات للتفاعل مع أداة الفحص V8، مما يسمح للمطورين بتصحيح تطبيقات Node.js من خلال الاتصال ببروتوكول الفحص."}],["meta",{"name":"twitter:title","content":"توثيق وحدة Node.js Inspector | Node.js - iDoc.dev"}],["meta",{"name":"twitter:description","content":"توفر وحدة Node.js Inspector واجهة برمجة التطبيقات للتفاعل مع أداة الفحص V8، مما يسمح للمطورين بتصحيح تطبيقات Node.js من خلال الاتصال ببروتوكول الفحص."}],["link",{"rel":"canonical","href":"https://idoc.dev/ar/nodejs/api/inspector"}],["meta",{"property":"og:url","content":"https://idoc.dev/ar/nodejs/api/inspector"}]]},"headers":[],"relativePath":"ar/nodejs/api/inspector.md","filePath":"ar/nodejs/api/inspector.md","lastUpdated":null}`),a={name:`ar/nodejs/api/inspector.md`};function o(e,i,a,o,s,c){return r(),t(`div`,null,i[0]||=[n(`<h1 id="inspector" tabindex="-1">المفتش (Inspector) <a class="header-anchor" href="#inspector" aria-label="Permalink to “المفتش (Inspector)”">​</a></h1><div class="tip custom-block"><p class="custom-block-title">[مستقر: 2 - مستقر]</p><p><a href="/ar/nodejs/api/documentation#stability-index">مستقر: 2</a> <a href="/ar/nodejs/api/documentation#stability-index">الاستقرار: 2</a> - مستقر</p></div><p><strong>كود المصدر:</strong> <a href="https://github.com/nodejs/node/blob/v23.5.0/lib/inspector.js" target="_blank" rel="noreferrer">lib/inspector.js</a></p><p>توفر وحدة <code>node:inspector</code> واجهة برمجة تطبيقات (API) للتفاعل مع مفتش V8.</p><p>يمكن الوصول إليه باستخدام:</p><div class="vp-code-group"><div class="tabs"><input type="radio" name="group-17" id="tab-18" checked><label data-title="ESM" for="tab-18">ESM</label><input type="radio" name="group-17" id="tab-19"><label data-title="CJS" for="tab-19">CJS</label></div><div class="blocks"><div class="language-js active line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> *</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> as</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> inspector </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;node:inspector/promises&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> inspector</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;node:inspector/promises&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div></div></div><p>أو</p><div class="vp-code-group"><div class="tabs"><input type="radio" name="group-24" id="tab-25" checked><label data-title="ESM" for="tab-25">ESM</label><input type="radio" name="group-24" id="tab-26"><label data-title="CJS" for="tab-26">CJS</label></div><div class="blocks"><div class="language-js active line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> *</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> as</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> inspector </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;node:inspector&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> inspector</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;node:inspector&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div></div></div><h2 id="promises-api" tabindex="-1">واجهة برمجة تطبيقات الوعود (Promises API) <a class="header-anchor" href="#promises-api" aria-label="Permalink to “واجهة برمجة تطبيقات الوعود (Promises API)”">​</a></h2><div class="warning custom-block"><p class="custom-block-title">[مستقر: 1 - تجريبي]</p><p><a href="/ar/nodejs/api/documentation#stability-index">مستقر: 1</a> <a href="/ar/nodejs/api/documentation#stability-index">الاستقرار: 1</a> - تجريبي</p></div><p><strong>تمت الإضافة في: v19.0.0</strong></p><h3 id="class-inspectorsession" tabindex="-1">الصنف: <code>inspector.Session</code> <a class="header-anchor" href="#class-inspectorsession" aria-label="Permalink to “الصنف: inspector.Session”">​</a></h3><ul><li>يمتد: <a href="/ar/nodejs/api/events#class-eventemitter">&lt;EventEmitter&gt;</a></li></ul><p>يُستخدم <code>inspector.Session</code> لإرسال الرسائل إلى الواجهة الخلفية لمفتش V8 وتلقي استجابات الرسائل والإشعارات.</p><h4 id="new-inspectorsession" tabindex="-1"><code>new inspector.Session()</code> <a class="header-anchor" href="#new-inspectorsession" aria-label="Permalink to “new inspector.Session()”">​</a></h4><p><strong>تمت الإضافة في: v8.0.0</strong></p><p>إنشاء نسخة جديدة من الصنف <code>inspector.Session</code>. يجب توصيل جلسة المفتش من خلال <a href="/ar/nodejs/api/inspector#sessionconnect"><code>session.connect()</code></a> قبل إمكانية إرسال الرسائل إلى الواجهة الخلفية للمفتش.</p><p>عند استخدام <code>Session</code>، لن يتم تحرير الكائن الناتج بواسطة واجهة برمجة تطبيقات وحدة التحكم (console API)، إلا إذا نفذنا يدويًا الأمر <code>Runtime.DiscardConsoleEntries</code>.</p><h4 id="event-inspectornotification" tabindex="-1">الحدث: <code>&#39;inspectorNotification&#39;</code> <a class="header-anchor" href="#event-inspectornotification" aria-label="Permalink to “الحدث: &#39;inspectorNotification&#39;”">​</a></h4><p><strong>تمت الإضافة في: v8.0.0</strong></p><ul><li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noreferrer">&lt;Object&gt;</a> كائن رسالة الإشعار</li></ul><p>يتم إطلاقه عند تلقي أي إشعار من مفتش V8.</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">session.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">on</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;inspectorNotification&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">message</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(message.method));</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Debugger.paused</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Debugger.resumed</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>من الممكن أيضًا الاشتراك فقط في الإشعارات ذات طريقة محددة:</p><h4 id="الحدث-lt-inspector-protocol-method-gt-event-lt-inspector-protocol-method-gt" tabindex="-1">الحدث: <code>&amp;lt;inspector-protocol-method&amp;gt;</code>; {#event-&lt;inspector-protocol-method&gt;;} <a class="header-anchor" href="#الحدث-lt-inspector-protocol-method-gt-event-lt-inspector-protocol-method-gt" aria-label="Permalink to “الحدث: &amp;lt;inspector-protocol-method&amp;gt;; {#event-&amp;lt;inspector-protocol-method&amp;gt;;}”">​</a></h4><p><strong>أُضيف في: الإصدار v8.0.0</strong></p><ul><li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noreferrer">&lt;Object&gt;</a> كائن رسالة الإشعار</li></ul><p>يتم إصداره عند استلام إشعار من المُدقق يحتوي على حقل <code>method</code> مُعيّنًا إلى القيمة <code>\\&lt;inspector-protocol-method\\&gt;</code>.</p><p>يقوم المقتطف التالي بتثبيت مستمع على الحدث <a href="https://chromedevtools.github.io/devtools-protocol/v8/Debugger#event-paused" target="_blank" rel="noreferrer"><code>&#39;Debugger.paused&#39;</code></a>، وطباعة سبب تعليق البرنامج كلما تم تعليق تنفيذ البرنامج (من خلال نقاط التوقف، على سبيل المثال):</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">session.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">on</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;Debugger.paused&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, ({ </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">params</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(params.hitBreakpoints);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// [ &#39;/the/file/that/has/the/breakpoint.js:11:0&#39; ]</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h4 id="sessionconnect" tabindex="-1"><code>session.connect()</code> <a class="header-anchor" href="#sessionconnect" aria-label="Permalink to “session.connect()”">​</a></h4><p><strong>أُضيف في: الإصدار v8.0.0</strong></p><p>يربط جلسة بالواجهة الخلفية للمُدقق.</p><h4 id="sessionconnecttomainthread" tabindex="-1"><code>session.connectToMainThread()</code> <a class="header-anchor" href="#sessionconnecttomainthread" aria-label="Permalink to “session.connectToMainThread()”">​</a></h4><p><strong>أُضيف في: الإصدار v12.11.0</strong></p><p>يربط جلسة بالواجهة الخلفية للمُدقق للخيط الرئيسي. سيتم طرح استثناء إذا لم يتم استدعاء واجهة برمجة التطبيقات هذه في خيط العامل.</p><h4 id="sessiondisconnect" tabindex="-1"><code>session.disconnect()</code> <a class="header-anchor" href="#sessiondisconnect" aria-label="Permalink to “session.disconnect()”">​</a></h4><p><strong>أُضيف في: الإصدار v8.0.0</strong></p><p>يغلق الجلسة على الفور. سيتم استدعاء جميع عمليات معاودة الاتصال بالرسائل المعلقة بخطأ. يجب استدعاء <a href="/ar/nodejs/api/inspector#sessionconnect"><code>session.connect()</code></a> لتتمكن من إرسال الرسائل مرة أخرى. ستفقد الجلسة التي أعيد توصيلها جميع حالات المُدقق، مثل العوامل الممكنة أو نقاط التوقف التي تم تكوينها.</p><h4 id="sessionpostmethod-params" tabindex="-1"><code>session.post(method[, params])</code> <a class="header-anchor" href="#sessionpostmethod-params" aria-label="Permalink to “session.post(method[, params])”">​</a></h4><p><strong>أُضيف في: الإصدار v19.0.0</strong></p><ul><li><code>method</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a></li><li><code>params</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noreferrer">&lt;Object&gt;</a></li><li>الإرجاع: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" target="_blank" rel="noreferrer">&lt;Promise&gt;</a></li></ul><p>ينشر رسالة إلى الواجهة الخلفية للمُدقق.</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { Session } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;node:inspector/promises&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">try</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> session</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Session</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  session.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">connect</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> result</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> session.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">post</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;Runtime.evaluate&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, { expression: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;2 + 2&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(result);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">} </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">catch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (error) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(error);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Output: { result: { type: &#39;number&#39;, value: 4, description: &#39;4&#39; } }</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>يتم نشر أحدث إصدار من بروتوكول V8 للمُدقق على <a href="https://chromedevtools.github.io/devtools-protocol/v8/" target="_blank" rel="noreferrer">عارض بروتوكول Chrome DevTools</a>.</p><p>يدعم مُدقق Node.js جميع نطاقات بروتوكول Chrome DevTools التي أعلنتها V8. يوفر نطاق بروتوكول Chrome DevTools واجهة للتفاعل مع أحد عوامل وقت التشغيل المستخدمة لفحص حالة التطبيق والاستماع إلى أحداث وقت التشغيل.</p><h4 id="example-usage" tabindex="-1">مثال للاستخدام <a class="header-anchor" href="#example-usage" aria-label="Permalink to “مثال للاستخدام”">​</a></h4><p>بصرف النظر عن مصحح الأخطاء، تتوفر العديد من أدوات V8 Profilers من خلال بروتوكول DevTools.</p><h5 id="cpu-profiler" tabindex="-1">محلل وحدة المعالجة المركزية (CPU) <a class="header-anchor" href="#cpu-profiler" aria-label="Permalink to “محلل وحدة المعالجة المركزية (CPU)”">​</a></h5><p>إليك مثال يوضح كيفية استخدام <a href="https://chromedevtools.github.io/devtools-protocol/v8/Profiler" target="_blank" rel="noreferrer">محلل وحدة المعالجة المركزية (CPU)</a>:</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { Session } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;node:inspector/promises&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> fs </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;node:fs&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> session</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Session</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">session.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">connect</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> session.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">post</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;Profiler.enable&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> session.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">post</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;Profiler.start&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Invoke business logic under measurement here...</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// some time later...</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">profile</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> session.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">post</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;Profiler.stop&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Write profile to disk, upload, etc.</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">fs.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">writeFileSync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;./profile.cpuprofile&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">JSON</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">stringify</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(profile));</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h5 id="heap-profiler" tabindex="-1">محلل الذاكرة المكدسة (Heap) <a class="header-anchor" href="#heap-profiler" aria-label="Permalink to “محلل الذاكرة المكدسة (Heap)”">​</a></h5><p>إليك مثال يوضح كيفية استخدام <a href="https://chromedevtools.github.io/devtools-protocol/v8/HeapProfiler" target="_blank" rel="noreferrer">محلل الذاكرة المكدسة (Heap)</a>:</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { Session } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;node:inspector/promises&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> fs </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;node:fs&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> session</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Session</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> fd</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> fs.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">openSync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;profile.heapsnapshot&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;w&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">session.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">connect</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">session.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">on</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;HeapProfiler.addHeapSnapshotChunk&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">m</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  fs.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">writeSync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(fd, m.params.chunk);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> result</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> session.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">post</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;HeapProfiler.takeHeapSnapshot&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;HeapProfiler.takeHeapSnapshot done:&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, result);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">session.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">disconnect</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">fs.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">closeSync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(fd);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h2 id="callback-api" tabindex="-1">واجهة برمجة تطبيقات الاستدعاء (Callback API) <a class="header-anchor" href="#callback-api" aria-label="Permalink to “واجهة برمجة تطبيقات الاستدعاء (Callback API)”">​</a></h2><h3 id="class-inspectorsession_1" tabindex="-1">صنف: <code>inspector.Session</code> <a class="header-anchor" href="#class-inspectorsession_1" aria-label="Permalink to “صنف: inspector.Session”">​</a></h3><ul><li>يمتد من: <a href="/ar/nodejs/api/events#class-eventemitter">&lt;EventEmitter&gt;</a></li></ul><p>يتم استخدام <code>inspector.Session</code> لإرسال الرسائل إلى الواجهة الخلفية لمفتش V8 وتلقي استجابات الرسائل والإشعارات.</p><h4 id="new-inspectorsession_1" tabindex="-1"><code>new inspector.Session()</code> <a class="header-anchor" href="#new-inspectorsession_1" aria-label="Permalink to “new inspector.Session()”">​</a></h4><p><strong>تمت الإضافة في: v8.0.0</strong></p><p>قم بإنشاء مثيل جديد لفئة <code>inspector.Session</code>. يجب توصيل جلسة المفتش من خلال <a href="/ar/nodejs/api/inspector#sessionconnect"><code>session.connect()</code></a> قبل أن يتم إرسال الرسائل إلى الواجهة الخلفية للمفتش.</p><p>عند استخدام <code>Session</code>، لن يتم تحرير الكائن الناتج عن واجهة برمجة تطبيقات وحدة التحكم (console API)، ما لم ننفذ أمر <code>Runtime.DiscardConsoleEntries</code> يدويًا.</p><h4 id="event-inspectornotification_1" tabindex="-1">الحدث: <code>&#39;inspectorNotification&#39;</code> <a class="header-anchor" href="#event-inspectornotification_1" aria-label="Permalink to “الحدث: &#39;inspectorNotification&#39;”">​</a></h4><p><strong>تمت إضافته في: الإصدار 8.0.0</strong></p><ul><li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noreferrer">&lt;Object&gt;</a> كائن رسالة الإشعار</li></ul><p>يُطلق هذا الحدث عند تلقي أي إشعار من V8 Inspector.</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">session.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">on</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;inspectorNotification&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">message</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(message.method));</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Debugger.paused</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Debugger.resumed</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>من الممكن أيضًا الاشتراك فقط في الإشعارات التي لها طريقة محددة:</p><h4 id="الحدث-lt-inspector-protocol-method-gt-؛-event-lt-inspector-protocol-method-gt-1" tabindex="-1">الحدث: <code>&amp;lt;inspector-protocol-method&amp;gt;</code>؛ {#event-&lt;inspector-protocol-method&gt;;_1} <a class="header-anchor" href="#الحدث-lt-inspector-protocol-method-gt-؛-event-lt-inspector-protocol-method-gt-1" aria-label="Permalink to “الحدث: &amp;lt;inspector-protocol-method&amp;gt;؛ {#event-&amp;lt;inspector-protocol-method&amp;gt;;_1}”">​</a></h4><p><strong>تمت إضافته في: الإصدار 8.0.0</strong></p><ul><li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noreferrer">&lt;Object&gt;</a> كائن رسالة الإشعار</li></ul><p>يُطلق هذا الحدث عند تلقي إشعار Inspector تم تعيين حقله method إلى قيمة <code>\\&lt;inspector-protocol-method\\&gt;</code>.</p><p>يقوم المقتطف التالي بتثبيت مستمع على حدث <a href="https://chromedevtools.github.io/devtools-protocol/v8/Debugger#event-paused" target="_blank" rel="noreferrer"><code>&#39;Debugger.paused&#39;</code></a>، ويطبع سبب تعليق البرنامج متى تم تعليق تنفيذ البرنامج (من خلال نقاط التوقف، على سبيل المثال):</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">session.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">on</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;Debugger.paused&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, ({ </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">params</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(params.hitBreakpoints);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// [ &#39;/the/file/that/has/the/breakpoint.js:11:0&#39; ]</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h4 id="sessionconnect_1" tabindex="-1"><code>session.connect()</code> <a class="header-anchor" href="#sessionconnect_1" aria-label="Permalink to “session.connect()”">​</a></h4><p><strong>تمت إضافته في: الإصدار 8.0.0</strong></p><p>يقوم بتوصيل جلسة عمل بالواجهة الخلفية لـ Inspector.</p><h4 id="sessionconnecttomainthread_1" tabindex="-1"><code>session.connectToMainThread()</code> <a class="header-anchor" href="#sessionconnecttomainthread_1" aria-label="Permalink to “session.connectToMainThread()”">​</a></h4><p><strong>تمت إضافته في: الإصدار 12.11.0</strong></p><p>يقوم بتوصيل جلسة عمل بالواجهة الخلفية لـ Inspector في مؤشر الترابط الرئيسي. سيتم طرح استثناء إذا لم يتم استدعاء واجهة برمجة التطبيقات هذه في مؤشر ترابط Worker.</p><h4 id="sessiondisconnect_1" tabindex="-1"><code>session.disconnect()</code> <a class="header-anchor" href="#sessiondisconnect_1" aria-label="Permalink to “session.disconnect()”">​</a></h4><p><strong>تمت إضافته في: الإصدار 8.0.0</strong></p><p>أغلق الجلسة على الفور. سيتم استدعاء جميع استدعاءات الرسائل المعلقة مع وجود خطأ. يجب استدعاء <a href="/ar/nodejs/api/inspector#sessionconnect"><code>session.connect()</code></a> لتتمكن من إرسال الرسائل مرة أخرى. ستفقد الجلسة المعاد توصيلها جميع حالات Inspector، مثل الوكلاء الممكّنين أو نقاط التوقف التي تم تكوينها.</p><h4 id="sessionpostmethod-params-callback" tabindex="-1"><code>session.post(method[, params][, callback])</code> <a class="header-anchor" href="#sessionpostmethod-params-callback" aria-label="Permalink to “session.post(method[, params][, callback])”">​</a></h4><div class="info custom-block"><p class="custom-block-title">[سجل التغييرات]</p><table tabindex="0"><thead><tr><th>الإصدار</th><th>التغييرات</th></tr></thead><tbody><tr><td>الإصدار 18.0.0</td><td>تمرير استدعاء غير صالح إلى وسيطة <code>callback</code> يطرح الآن <code>ERR_INVALID_ARG_TYPE</code> بدلاً من <code>ERR_INVALID_CALLBACK</code>.</td></tr><tr><td>الإصدار 8.0.0</td><td>تمت إضافته في: الإصدار 8.0.0</td></tr></tbody></table></div><ul><li><code>method</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a></li><li><code>params</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noreferrer">&lt;Object&gt;</a></li><li><code>callback</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function" target="_blank" rel="noreferrer">&lt;Function&gt;</a></li></ul><p>ينشر رسالة إلى الواجهة الخلفية لـ Inspector. سيتم إعلام <code>callback</code> عند تلقي رد. <code>callback</code> هي دالة تقبل وسيطتين اختياريتين: خطأ ونتيجة خاصة بالرسالة.</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">session.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">post</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;Runtime.evaluate&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, { expression: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;2 + 2&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">             (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, { </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">result</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(result));</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Output: { type: &#39;number&#39;, value: 4, description: &#39;4&#39; }</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>يتم نشر أحدث إصدار من بروتوكول V8 Inspector على <a href="https://chromedevtools.github.io/devtools-protocol/v8/" target="_blank" rel="noreferrer">عارض بروتوكول Chrome DevTools</a>.</p><p>يدعم Node.js Inspector جميع مجالات بروتوكول Chrome DevTools التي أعلنتها V8. يوفر مجال بروتوكول Chrome DevTools واجهة للتفاعل مع أحد وكلاء وقت التشغيل المستخدمين لفحص حالة التطبيق والاستماع إلى أحداث وقت التشغيل.</p><p>لا يمكنك تعيين <code>reportProgress</code> إلى <code>true</code> عند إرسال أمر <code>HeapProfiler.takeHeapSnapshot</code> أو <code>HeapProfiler.stopTrackingHeapObjects</code> إلى V8.</p><h4 id="example-usage_1" tabindex="-1">مثال على الاستخدام <a class="header-anchor" href="#example-usage_1" aria-label="Permalink to “مثال على الاستخدام”">​</a></h4><p>بالإضافة إلى مصحح الأخطاء، تتوفر العديد من مُحلِّلات V8 Profilers من خلال بروتوكول DevTools.</p><h5 id="cpu-profiler_1" tabindex="-1">محلل CPU <a class="header-anchor" href="#cpu-profiler_1" aria-label="Permalink to “محلل CPU”">​</a></h5><p>فيما يلي مثال يوضح كيفية استخدام <a href="https://chromedevtools.github.io/devtools-protocol/v8/Profiler" target="_blank" rel="noreferrer">محلل CPU</a>:</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> inspector</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;node:inspector&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> fs</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;node:fs&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> session</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> inspector.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Session</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">session.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">connect</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">session.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">post</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;Profiler.enable&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  session.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">post</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;Profiler.start&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // Invoke business logic under measurement here...</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // some time later...</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    session.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">post</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;Profiler.stop&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">err</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, { </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">profile</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      // Write profile to disk, upload, etc.</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">err) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        fs.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">writeFileSync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;./profile.cpuprofile&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">JSON</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">stringify</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(profile));</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><h5 id="heap-profiler_1" tabindex="-1">محلل الذاكرة المؤقتة (Heap) <a class="header-anchor" href="#heap-profiler_1" aria-label="Permalink to “محلل الذاكرة المؤقتة (Heap)”">​</a></h5><p>فيما يلي مثال يوضح كيفية استخدام <a href="https://chromedevtools.github.io/devtools-protocol/v8/HeapProfiler" target="_blank" rel="noreferrer">محلل الذاكرة المؤقتة</a>:</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> inspector</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;node:inspector&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> fs</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;node:fs&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> session</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> inspector.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Session</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> fd</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> fs.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">openSync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;profile.heapsnapshot&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;w&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">session.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">connect</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">session.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">on</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;HeapProfiler.addHeapSnapshotChunk&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">m</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  fs.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">writeSync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(fd, m.params.chunk);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">session.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">post</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;HeapProfiler.takeHeapSnapshot&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">err</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">r</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;HeapProfiler.takeHeapSnapshot done:&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, err, r);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  session.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">disconnect</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  fs.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">closeSync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(fd);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h2 id="common-objects" tabindex="-1">الكائنات الشائعة <a class="header-anchor" href="#common-objects" aria-label="Permalink to “الكائنات الشائعة”">​</a></h2><h3 id="inspectorclose" tabindex="-1"><code>inspector.close()</code> <a class="header-anchor" href="#inspectorclose" aria-label="Permalink to “inspector.close()”">​</a></h3><div class="info custom-block"><p class="custom-block-title">[السجل]</p><table tabindex="0"><thead><tr><th>الإصدار</th><th>التغييرات</th></tr></thead><tbody><tr><td>v18.10.0</td><td>يتم عرض واجهة برمجة التطبيقات في سلاسل العمل (worker threads).</td></tr><tr><td>v9.0.0</td><td>تمت الإضافة في: v9.0.0</td></tr></tbody></table></div><p>يحاول إغلاق جميع الاتصالات المتبقية، مما يمنع حلقة الأحداث حتى يتم إغلاقها جميعًا. بمجرد إغلاق جميع الاتصالات، يتم إلغاء تنشيط الفاحص.</p><h3 id="inspectorconsole" tabindex="-1"><code>inspector.console</code> <a class="header-anchor" href="#inspectorconsole" aria-label="Permalink to “inspector.console”">​</a></h3><ul><li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noreferrer">&lt;Object&gt;</a> كائن لإرسال الرسائل إلى وحدة تحكم الفاحص البعيدة.</li></ul><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;node:inspector&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">).console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;a message&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>لا تتمتع وحدة تحكم الفاحص بتكافؤ واجهة برمجة التطبيقات (API) مع وحدة تحكم Node.js.</p><h3 id="inspectoropenport-host-wait" tabindex="-1"><code>inspector.open([port[, host[, wait]]])</code> <a class="header-anchor" href="#inspectoropenport-host-wait" aria-label="Permalink to “inspector.open([port[, host[, wait]]])”">​</a></h3><div class="info custom-block"><p class="custom-block-title">[التاريخ]</p><table tabindex="0"><thead><tr><th>الإصدار</th><th>التغييرات</th></tr></thead><tbody><tr><td>v20.6.0</td><td>تُرجع الآن <code>inspector.open()</code> كائن <code>Disposable</code>.</td></tr></tbody></table></div><ul><li><code>port</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;number&gt;</a> المنفذ للاستماع لاتصالات المدقق. اختياري. <strong>افتراضي:</strong> ما تم تحديده في CLI.</li><li><code>host</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> المضيف للاستماع لاتصالات المدقق. اختياري. <strong>افتراضي:</strong> ما تم تحديده في CLI.</li><li><code>wait</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" target="_blank" rel="noreferrer">&lt;boolean&gt;</a> حظر حتى يتم توصيل عميل. اختياري. <strong>افتراضي:</strong> <code>false</code>.</li><li>يُرجع: <a href="https://tc39.es/proposal-explicit-resource-management/#sec-disposable-interface" target="_blank" rel="noreferrer">&lt;Disposable&gt;</a> كائن Disposable يستدعي <a href="/ar/nodejs/api/inspector#inspectorclose"><code>inspector.close()</code></a>.</li></ul><p>تفعيل المدقق على المضيف والمنفذ. مكافئ لـ <code>node --inspect=[[host:]port]</code>, ولكن يمكن القيام بذلك برمجيًا بعد بدء تشغيل node.</p><p>إذا كانت قيمة wait هي <code>true</code>, فسيتم الحظر حتى يتم توصيل عميل بمنفذ الفحص ويتم تمرير التحكم في التدفق إلى عميل التصحيح.</p><p>راجع <a href="/ar/nodejs/api/cli#warning-binding-inspector-to-a-public-ipport-combination-is-insecure">تحذير الأمان</a> بشأن استخدام معلمة <code>host</code>.</p><h3 id="inspectorurl" tabindex="-1"><code>inspector.url()</code> <a class="header-anchor" href="#inspectorurl" aria-label="Permalink to “inspector.url()”">​</a></h3><ul><li>يُرجع: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Undefined_type" target="_blank" rel="noreferrer">&lt;undefined&gt;</a></li></ul><p>إرجاع عنوان URL للمدقق النشط، أو <code>undefined</code> إذا لم يكن هناك أي مدقق نشط.</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> node</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --inspect</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -p</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;inspector.url()&#39;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Debugger</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> listening</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> on</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ws://127.0.0.1:9229/166e272e-7a30-4d09-97ce-f1c012b43c34</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">For</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> help,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> see:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> https://nodejs.org/en/docs/inspector</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ws://127.0.0.1:9229/166e272e-7a30-4d09-97ce-f1c012b43c34</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> node</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --inspect=localhost:3000</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -p</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;inspector.url()&#39;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Debugger</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> listening</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> on</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ws://localhost:3000/51cf8d0e-3c36-4c59-8efd-54519839e56a</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">For</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> help,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> see:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> https://nodejs.org/en/docs/inspector</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ws://localhost:3000/51cf8d0e-3c36-4c59-8efd-54519839e56a</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> node</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -p</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;inspector.url()&#39;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">undefined</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h3 id="inspectorwaitfordebugger" tabindex="-1"><code>inspector.waitForDebugger()</code> <a class="header-anchor" href="#inspectorwaitfordebugger" aria-label="Permalink to “inspector.waitForDebugger()”">​</a></h3><p><strong>إضافة في: v12.7.0</strong></p><p>يحظر حتى يرسل عميل (موجود أو متصل لاحقًا) أمر <code>Runtime.runIfWaitingForDebugger</code>.</p><p>سيتم طرح استثناء إذا لم يكن هناك مدقق نشط.</p><h2 id="integration-with-devtools" tabindex="-1">التكامل مع أدوات المطورين <a class="header-anchor" href="#integration-with-devtools" aria-label="Permalink to “التكامل مع أدوات المطورين”">​</a></h2><p>توفر الوحدة <code>node:inspector</code> واجهة برمجة تطبيقات للتكامل مع أدوات المطورين التي تدعم بروتوكول أدوات المطورين في Chrome. يمكن لواجهات أدوات المطورين المتصلة بمثيل Node.js قيد التشغيل التقاط أحداث البروتوكول المنبعثة من المثيل وعرضها وفقًا لذلك لتسهيل التصحيح. تقوم الطرق التالية ببث حدث بروتوكول إلى جميع الواجهات الأمامية المتصلة. يمكن أن تكون <code>params</code> التي تم تمريرها إلى الطرق اختيارية، اعتمادًا على البروتوكول.</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// سيتم إطلاق حدث \`Network.requestWillBeSent\`.</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">inspector.Network.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">requestWillBeSent</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  requestId: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;request-id-1&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  timestamp: Date.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">now</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1000</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  wallTime: Date.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">now</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  request: {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    url: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;https://nodejs.org/en&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    method: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;GET&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h3 id="inspectornetworkrequestwillbesentparams" tabindex="-1"><code>inspector.Network.requestWillBeSent([params])</code> <a class="header-anchor" href="#inspectornetworkrequestwillbesentparams" aria-label="Permalink to “inspector.Network.requestWillBeSent([params])”">​</a></h3><p><strong>إضافة في: v22.6.0, v20.18.0</strong></p><div class="warning custom-block"><p class="custom-block-title">[مستقر: 1 - تجريبي]</p><p><a href="/ar/nodejs/api/documentation#stability-index">مستقر: 1</a> <a href="/ar/nodejs/api/documentation#stability-index">الاستقرار: 1</a> - تجريبي</p></div><ul><li><code>params</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noreferrer">&lt;Object&gt;</a></li></ul><p>هذه الميزة متاحة فقط مع تمكين العلامة <code>--experimental-network-inspection</code>.</p><p>يبث حدث <code>Network.requestWillBeSent</code> إلى الواجهات الأمامية المتصلة. يشير هذا الحدث إلى أن التطبيق على وشك إرسال طلب HTTP.</p><h3 id="inspectornetworkresponsereceivedparams" tabindex="-1"><code>inspector.Network.responseReceived([params])</code> <a class="header-anchor" href="#inspectornetworkresponsereceivedparams" aria-label="Permalink to “inspector.Network.responseReceived([params])”">​</a></h3><p><strong>إضافة في: v22.6.0, v20.18.0</strong></p><div class="warning custom-block"><p class="custom-block-title">[مستقر: 1 - تجريبي]</p><p><a href="/ar/nodejs/api/documentation#stability-index">مستقر: 1</a> <a href="/ar/nodejs/api/documentation#stability-index">الاستقرار: 1</a> - تجريبي</p></div><ul><li><code>params</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noreferrer">&lt;Object&gt;</a></li></ul><p>هذه الميزة متاحة فقط مع تمكين العلامة <code>--experimental-network-inspection</code>.</p><p>يبث حدث <code>Network.responseReceived</code> إلى الواجهات الأمامية المتصلة. يشير هذا الحدث إلى أن استجابة HTTP متاحة.</p><h3 id="inspectornetworkloadingfinishedparams" tabindex="-1"><code>inspector.Network.loadingFinished([params])</code> <a class="header-anchor" href="#inspectornetworkloadingfinishedparams" aria-label="Permalink to “inspector.Network.loadingFinished([params])”">​</a></h3><p><strong>أضيف في: v22.6.0, v20.18.0</strong></p><div class="warning custom-block"><p class="custom-block-title">[مستقر: 1 - تجريبي]</p><p><a href="/ar/nodejs/api/documentation#stability-index">مستقر: 1</a> <a href="/ar/nodejs/api/documentation#stability-index">الاستقرار: 1</a> - تجريبي</p></div><ul><li><code>params</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noreferrer">&lt;Object&gt;</a></li></ul><p>هذه الميزة متاحة فقط مع تمكين علامة <code>--experimental-network-inspection</code>.</p><p>يبث حدث <code>Network.loadingFinished</code> إلى الواجهات الأمامية المتصلة. يشير هذا الحدث إلى أن تحميل طلب HTTP قد انتهى.</p><h3 id="inspectornetworkloadingfailedparams" tabindex="-1"><code>inspector.Network.loadingFailed([params])</code> <a class="header-anchor" href="#inspectornetworkloadingfailedparams" aria-label="Permalink to “inspector.Network.loadingFailed([params])”">​</a></h3><p><strong>أضيف في: v22.7.0, v20.18.0</strong></p><div class="warning custom-block"><p class="custom-block-title">[مستقر: 1 - تجريبي]</p><p><a href="/ar/nodejs/api/documentation#stability-index">مستقر: 1</a> <a href="/ar/nodejs/api/documentation#stability-index">الاستقرار: 1</a> - تجريبي</p></div><ul><li><code>params</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noreferrer">&lt;Object&gt;</a></li></ul><p>هذه الميزة متاحة فقط مع تمكين علامة <code>--experimental-network-inspection</code>.</p><p>يبث حدث <code>Network.loadingFailed</code> إلى الواجهات الأمامية المتصلة. يشير هذا الحدث إلى أن تحميل طلب HTTP قد فشل.</p><h2 id="support-of-breakpoints" tabindex="-1">دعم نقاط التوقف <a class="header-anchor" href="#support-of-breakpoints" aria-label="Permalink to “دعم نقاط التوقف”">​</a></h2><p>يسمح نطاق <a href="https://chromedevtools.github.io/devtools-protocol/v8/Debugger" target="_blank" rel="noreferrer"><code>Debugger</code></a> في بروتوكول Chrome DevTools لـ <code>inspector.Session</code> بالاتصال ببرنامج وتعيين نقاط توقف للتنقل عبر التعليمات البرمجية.</p><p>ومع ذلك، يجب تجنب تعيين نقاط التوقف باستخدام <code>inspector.Session</code> في نفس سلسلة الرسائل، والتي يتم توصيلها بواسطة <a href="/ar/nodejs/api/inspector#sessionconnect"><code>session.connect()</code></a>، حيث أن البرنامج الذي يتم إرفاقه وإيقافه مؤقتًا هو المصحح نفسه تمامًا. بدلاً من ذلك، حاول الاتصال بالسلسلة الرئيسية بواسطة <a href="/ar/nodejs/api/inspector#sessionconnecttomainthread"><code>session.connectToMainThread()</code></a> وتعيين نقاط التوقف في سلسلة عامل، أو الاتصال ببرنامج <a href="/ar/nodejs/api/debugger">Debugger</a> عبر اتصال WebSocket.</p>`,151)])}var s=e(a,[[`render`,o]]);export{i as __pageData,s as default};