import{__plugin_vue_export_helper_default as e,createElementBlock as t,createStaticVNode as n,openBlock as r}from"./chunks/plugin-vue_export-helper.Bts1mPc7.js";const i=JSON.parse(`{"title":"Documentation Node.js - Modules","description":"Découvrez la documentation de Node.js sur les modules, y compris CommonJS, les modules ES, et comment gérer les dépendances et la résolution des modules.","frontmatter":{"title":"Documentation Node.js - Modules","description":"Découvrez la documentation de Node.js sur les modules, y compris CommonJS, les modules ES, et comment gérer les dépendances et la résolution des modules.","head":[["meta",{"name":"og:title","content":"Documentation Node.js - Modules | Node.js - iDoc.dev"}],["meta",{"name":"og:description","content":"Découvrez la documentation de Node.js sur les modules, y compris CommonJS, les modules ES, et comment gérer les dépendances et la résolution des modules."}],["meta",{"name":"twitter:title","content":"Documentation Node.js - Modules | Node.js - iDoc.dev"}],["meta",{"name":"twitter:description","content":"Découvrez la documentation de Node.js sur les modules, y compris CommonJS, les modules ES, et comment gérer les dépendances et la résolution des modules."}],["link",{"rel":"canonical","href":"https://idoc.dev/fr/nodejs/api/modules"}],["meta",{"property":"og:url","content":"https://idoc.dev/fr/nodejs/api/modules"}]]},"headers":[],"relativePath":"fr/nodejs/api/modules.md","filePath":"fr/nodejs/api/modules.md","lastUpdated":null}`),a={name:`fr/nodejs/api/modules.md`};function o(e,i,a,o,s,c){return r(),t(`div`,null,i[0]||=[n(`<h1 id="modules-commonjs-modules" tabindex="-1">Modules\xA0: modules CommonJS <a class="header-anchor" href="#modules-commonjs-modules" aria-label="Permalink to “Modules\xA0: modules CommonJS”">​</a></h1><div class="tip custom-block"><p class="custom-block-title">[Stable: 2 - Stable]</p><p><a href="/fr/nodejs/api/documentation#stability-index">Stable: 2</a> <a href="/fr/nodejs/api/documentation#stability-index">Stability: 2</a> - Stable</p></div><p>Les modules CommonJS sont la manière originale d’empaqueter du code JavaScript pour Node.js. Node.js prend également en charge la norme <a href="/fr/nodejs/api/esm">modules ECMAScript</a> utilisée par les navigateurs et autres environnements d’exécution JavaScript.</p><p>Dans Node.js, chaque fichier est traité comme un module distinct. Par exemple, considérez un fichier nommé <code>foo.js</code>\xA0:</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> circle</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;./circle.js&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">\`L’aire d’un cercle de rayon\xA04 est de \${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">circle</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">area</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">4</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">)</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}\`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>Sur la première ligne, <code>foo.js</code> charge le module <code>circle.js</code> qui se trouve dans le même répertoire que <code>foo.js</code>.</p><p>Voici le contenu de <code>circle.js</code>\xA0:</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">PI</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Math;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">exports</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">area</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">r</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> PI</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> *</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> r </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">**</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">exports</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">circumference</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">r</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> *</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> PI</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> *</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> r;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>Le module <code>circle.js</code> a exporté les fonctions <code>area()</code> et <code>circumference()</code>. Les fonctions et les objets sont ajoutés à la racine d’un module en spécifiant des propriétés supplémentaires sur l’objet spécial <code>exports</code>.</p><p>Les variables locales du module seront privées, car le module est encapsulé dans une fonction par Node.js (voir <a href="/fr/nodejs/api/modules#the-module-wrapper">encapsuleur de module</a>). Dans cet exemple, la variable <code>PI</code> est privée à <code>circle.js</code>.</p><p>La propriété <code>module.exports</code> peut recevoir une nouvelle valeur (telle qu’une fonction ou un objet).</p><p>Dans le code suivant, <code>bar.js</code> utilise le module <code>square</code>, qui exporte une classe Square\xA0:</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> Square</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;./square.js&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> mySquare</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Square</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">\`L’aire de mySquare est \${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">mySquare</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">area</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">()</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}\`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>Le module <code>square</code> est défini dans <code>square.js</code>\xA0:</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// L’attribution à exports ne modifiera pas le module, vous devez utiliser module.exports</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">module</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">exports</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Square</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  constructor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">width</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.width </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> width;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  area</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.width </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">**</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>Le système de modules CommonJS est implémenté dans le <a href="/fr/nodejs/api/module">module cœur <code>module</code></a>.</p><h2 id="enabling" tabindex="-1">Activation <a class="header-anchor" href="#enabling" aria-label="Permalink to “Activation”">​</a></h2><p>Node.js possède deux systèmes de modules\xA0: les modules CommonJS et les <a href="/fr/nodejs/api/esm">modules ECMAScript</a>.</p><p>Par défaut, Node.js traitera ce qui suit comme des modules CommonJS\xA0:</p><ul><li>Les fichiers avec une extension <code>.cjs</code>\xA0;</li><li>Les fichiers avec une extension <code>.js</code> lorsque le fichier <code>package.json</code> parent le plus proche contient un champ de niveau supérieur <a href="/fr/nodejs/api/packages#type"><code>&quot;type&quot;</code></a> avec la valeur <code>&quot;commonjs&quot;</code>.</li><li>Les fichiers avec une extension <code>.js</code> ou sans extension, lorsque le fichier <code>package.json</code> parent le plus proche ne contient pas de champ de niveau supérieur <a href="/fr/nodejs/api/packages#type"><code>&quot;type&quot;</code></a> ou qu’il n’y a pas de <code>package.json</code> dans un dossier parent quelconque\xA0; sauf si le fichier contient une syntaxe qui provoque une erreur à moins d’être évalué comme un module ES. Les auteurs de packages doivent inclure le champ <a href="/fr/nodejs/api/packages#type"><code>&quot;type&quot;</code></a>, même dans les packages où toutes les sources sont CommonJS. Le fait d’être explicite sur le <code>type</code> du package facilitera la tâche des outils de construction et des chargeurs pour déterminer comment les fichiers du package doivent être interprétés.</li><li>Les fichiers avec une extension qui n’est pas <code>.mjs</code>, <code>.cjs</code>, <code>.json</code>, <code>.node</code> ou <code>.js</code> (lorsque le fichier <code>package.json</code> parent le plus proche contient un champ de niveau supérieur <a href="/fr/nodejs/api/packages#type"><code>&quot;type&quot;</code></a> avec la valeur <code>&quot;module&quot;</code>, ces fichiers ne seront reconnus comme des modules CommonJS que s’ils sont inclus via <code>require()</code>, et non lorsqu’ils sont utilisés comme point d’entrée en ligne de commande du programme).</li></ul><p>Voir <a href="/fr/nodejs/api/packages#determining-module-system">Détermination du système de modules</a> pour plus de détails.</p><p>L’appel de <code>require()</code> utilise toujours le chargeur de modules CommonJS. L’appel de <code>import()</code> utilise toujours le chargeur de modules ECMAScript.</p><h2 id="accessing-the-main-module" tabindex="-1">Accéder au module principal <a class="header-anchor" href="#accessing-the-main-module" aria-label="Permalink to “Accéder au module principal”">​</a></h2><p>Lorsqu&#39;un fichier est exécuté directement depuis Node.js, <code>require.main</code> est défini sur son <code>module</code>. Cela signifie qu&#39;il est possible de déterminer si un fichier a été exécuté directement en testant <code>require.main === module</code>.</p><p>Pour un fichier <code>foo.js</code>, cela sera <code>true</code> s&#39;il est exécuté via <code>node foo.js</code>, mais <code>false</code> s&#39;il est exécuté par <code>require(&#39;./foo&#39;)</code>.</p><p>Lorsque le point d&#39;entrée n&#39;est pas un module CommonJS, <code>require.main</code> est <code>undefined</code>, et le module principal est hors de portée.</p><h2 id="package-manager-tips" tabindex="-1">Conseils pour les gestionnaires de paquets <a class="header-anchor" href="#package-manager-tips" aria-label="Permalink to “Conseils pour les gestionnaires de paquets”">​</a></h2><p>La sémantique de la fonction <code>require()</code> de Node.js a été conçue pour être suffisamment générale pour prendre en charge des structures de répertoire raisonnables. Les programmes de gestion de paquets tels que <code>dpkg</code>, <code>rpm</code> et <code>npm</code> pourront, espérons-le, créer des paquets natifs à partir de modules Node.js sans modification.</p><p>Dans ce qui suit, nous donnons une structure de répertoire suggérée qui pourrait fonctionner :</p><p>Supposons que nous voulions que le dossier <code>/usr/lib/node/\\&lt;some-package\\&gt;/\\&lt;some-version\\&gt;</code> contienne le contenu d&#39;une version spécifique d&#39;un paquet.</p><p>Les paquets peuvent dépendre les uns des autres. Afin d&#39;installer le paquet <code>foo</code>, il peut être nécessaire d&#39;installer une version spécifique du paquet <code>bar</code>. Le paquet <code>bar</code> peut lui-même avoir des dépendances, et dans certains cas, celles-ci peuvent même entrer en conflit ou former des dépendances cycliques.</p><p>Étant donné que Node.js recherche le <code>realpath</code> de tous les modules qu&#39;il charge (c&#39;est-à-dire qu&#39;il résout les liens symboliques) et qu&#39;il <a href="/fr/nodejs/api/modules#loading-from-node-modules-folders">recherche ensuite leurs dépendances dans les dossiers <code>node_modules</code></a>, cette situation peut être résolue avec l&#39;architecture suivante :</p><ul><li><code>/usr/lib/node/foo/1.2.3/</code> : Contenu du paquet <code>foo</code>, version 1.2.3.</li><li><code>/usr/lib/node/bar/4.3.2/</code> : Contenu du paquet <code>bar</code> dont <code>foo</code> dépend.</li><li><code>/usr/lib/node/foo/1.2.3/node_modules/bar</code> : Lien symbolique vers <code>/usr/lib/node/bar/4.3.2/</code>.</li><li><code>/usr/lib/node/bar/4.3.2/node_modules/*</code> : Liens symboliques vers les paquets dont <code>bar</code> dépend.</li></ul><p>Ainsi, même si un cycle est rencontré, ou s&#39;il y a des conflits de dépendances, chaque module sera en mesure d&#39;obtenir une version de sa dépendance qu&#39;il peut utiliser.</p><p>Lorsque le code du paquet <code>foo</code> fait <code>require(&#39;bar&#39;)</code>, il obtiendra la version qui est liée symboliquement dans <code>/usr/lib/node/foo/1.2.3/node_modules/bar</code>. Ensuite, lorsque le code du paquet <code>bar</code> appelle <code>require(&#39;quux&#39;)</code>, il obtiendra la version qui est liée symboliquement dans <code>/usr/lib/node/bar/4.3.2/node_modules/quux</code>.</p><p>De plus, pour rendre le processus de recherche de module encore plus optimal, plutôt que de placer les paquets directement dans <code>/usr/lib/node</code>, nous pourrions les placer dans <code>/usr/lib/node_modules/\\&lt;name\\&gt;/\\&lt;version\\&gt;</code>. Alors Node.js ne se souciera pas de chercher les dépendances manquantes dans <code>/usr/node_modules</code> ou <code>/node_modules</code>.</p><p>Afin de rendre les modules disponibles pour le REPL de Node.js, il pourrait être utile d&#39;ajouter également le dossier <code>/usr/lib/node_modules</code> à la variable d&#39;environnement <code>$NODE_PATH</code>. Étant donné que les recherches de modules utilisant les dossiers <code>node_modules</code> sont toutes relatives et basées sur le chemin réel des fichiers qui font les appels à <code>require()</code>, les paquets eux-mêmes peuvent se trouver n&#39;importe où.</p><h2 id="loading-ecmascript-modules-using-require" tabindex="-1">Chargement de modules ECMAScript en utilisant <code>require()</code> <a class="header-anchor" href="#loading-ecmascript-modules-using-require" aria-label="Permalink to “Chargement de modules ECMAScript en utilisant require()”">​</a></h2><div class="info custom-block"><p class="custom-block-title">[Historique]</p><table tabindex="0"><thead><tr><th>Version</th><th>Modifications</th></tr></thead><tbody><tr><td>v23.5.0</td><td>Cette fonctionnalité n&#39;émet plus d&#39;avertissement expérimental par défaut, bien que l&#39;avertissement puisse toujours être émis par --trace-require-module.</td></tr><tr><td>v23.0.0</td><td>Cette fonctionnalité n&#39;est plus derrière l&#39;indicateur CLI <code>--experimental-require-module</code>.</td></tr><tr><td>v23.0.0</td><td>Prise en charge de l&#39;exportation d&#39;interopérabilité <code>&#39;module.exports&#39;</code> dans <code>require(esm)</code>.</td></tr><tr><td>v22.0.0, v20.17.0</td><td>Ajouté dans\xA0: v22.0.0, v20.17.0</td></tr></tbody></table></div><div class="warning custom-block"><p class="custom-block-title">[Stable: 1 - Expérimental]</p><p><a href="/fr/nodejs/api/documentation#stability-index">Stable\xA0:\xA01</a> <a href="/fr/nodejs/api/documentation#stability-index">Stabilité\xA0:\xA01</a>.2 - Version candidate</p></div><p>L&#39;extension <code>.mjs</code> est réservée aux <a href="/fr/nodejs/api/esm">Modules ECMAScript</a>. Voir la section <a href="/fr/nodejs/api/packages#determining-module-system">Détermination du système de modules</a> pour plus d&#39;informations concernant les fichiers qui sont analysés en tant que modules ECMAScript.</p><p><code>require()</code> prend uniquement en charge le chargement des modules ECMAScript qui répondent aux exigences suivantes\xA0:</p><ul><li>Le module est entièrement synchrone (ne contient pas de <code>await</code> de niveau supérieur)\xA0; et</li><li>L&#39;une de ces conditions est remplie\xA0:</li></ul><p>Si le module ES chargé répond aux exigences, <code>require()</code> peut le charger et renvoyer l&#39;objet d&#39;espace de noms du module. Dans ce cas, il est similaire à <code>import()</code> dynamique, mais il est exécuté de manière synchrone et renvoie directement l&#39;objet d&#39;espace de noms.</p><p>Avec les modules ES suivants\xA0:</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// distance.mjs</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> distance</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">a</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">b</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) { </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (b.x </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> a.x) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">**</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (b.y </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> a.y) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">**</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; }</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// point.mjs</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> default</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Point</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  constructor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">x</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">y</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.x </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> x; </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.y </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> y; }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>Un module CommonJS peut les charger avec <code>require()</code>\xA0:</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> distance</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;./distance.mjs&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(distance);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// [Module: null prototype] {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//   distance: [Function: distance]</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> point</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;./point.mjs&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(point);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// [Module: null prototype] {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//   default: [class Point],</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//   __esModule: true,</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// }</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>Pour l&#39;interopérabilité avec les outils existants qui convertissent les modules ES en CommonJS, qui pourraient ensuite charger de vrais modules ES via <code>require()</code>, l&#39;espace de noms renvoyé contiendrait une propriété <code>__esModule: true</code> s&#39;il a une exportation <code>default</code> afin que le code consommateur généré par les outils puisse reconnaître les exportations par défaut dans les vrais modules ES. Si l&#39;espace de noms définit déjà <code>__esModule</code>, cela ne serait pas ajouté. Cette propriété est expérimentale et peut changer à l&#39;avenir. Elle ne doit être utilisée que par les outils convertissant les modules ES en modules CommonJS, en suivant les conventions existantes de l&#39;écosystème. Le code écrit directement en CommonJS doit éviter d&#39;en dépendre.</p><p>Lorsqu&#39;un module ES contient à la fois des exportations nommées et une exportation par défaut, le résultat renvoyé par <code>require()</code> est l&#39;objet d&#39;espace de noms du module, qui place l&#39;exportation par défaut dans la propriété <code>.default</code>, similaire aux résultats renvoyés par <code>import()</code>. Pour personnaliser ce qui doit être renvoyé directement par <code>require(esm)</code>, le module ES peut exporter la valeur souhaitée en utilisant le nom de chaîne <code>&quot;module.exports&quot;</code>.</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// point.mjs</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> default</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Point</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  constructor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">x</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">y</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.x </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> x; </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.y </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> y; }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// \`distance\` est perdu pour les consommateurs CommonJS de ce module, sauf s&#39;il est</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ajouté à \`Point\` en tant que propriété statique.</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> distance</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">a</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">b</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) { </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (b.x </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> a.x) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">**</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (b.y </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> a.y) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">**</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { Point </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">as</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;module.exports&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> Point</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;./point.mjs&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Point); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// [class Point]</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Les exportations nommées sont perdues lorsque &#39;module.exports&#39; est utilisé</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">distance</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;./point.mjs&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(distance); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// undefined</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>Notez dans l&#39;exemple ci-dessus, lorsque le nom d&#39;exportation <code>module.exports</code> est utilisé, les exportations nommées seront perdues pour les consommateurs CommonJS. Pour permettre aux consommateurs CommonJS de continuer à accéder aux exportations nommées, le module peut s&#39;assurer que l&#39;exportation par défaut est un objet avec les exportations nommées attachées comme propriétés. Par exemple, avec l&#39;exemple ci-dessus, <code>distance</code> peut être attaché à l&#39;exportation par défaut, la classe <code>Point</code>, comme une méthode statique.</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> distance</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">a</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">b</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) { </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (b.x </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> a.x) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">**</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (b.y </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> a.y) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">**</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> default</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Point</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  constructor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">x</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">y</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.x </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> x; </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.y </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> y; }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  static</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;"> distance</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> distance;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { Point </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">as</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;module.exports&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> Point</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;./point.mjs&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Point); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// [class Point]</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">distance</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;./point.mjs&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(distance); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// [Function: distance]</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>Si le module en cours de <code>require()</code> contient <code>await</code> de niveau supérieur, ou si le graphique de module qu&#39;il <code>import</code> contient <code>await</code> de niveau supérieur, <a href="/fr/nodejs/api/errors#err-require-async-module"><code>ERR_REQUIRE_ASYNC_MODULE</code></a> sera levé. Dans ce cas, les utilisateurs doivent charger le module asynchrone en utilisant <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/import" target="_blank" rel="noreferrer"><code>import()</code></a>.</p><p>Si <code>--experimental-print-required-tla</code> est activé, au lieu de lever <code>ERR_REQUIRE_ASYNC_MODULE</code> avant l&#39;évaluation, Node.js évaluera le module, essaiera de localiser les awaits de niveau supérieur, et imprimera leur emplacement pour aider les utilisateurs à les corriger.</p><p>La prise en charge du chargement des modules ES en utilisant <code>require()</code> est actuellement expérimentale et peut être désactivée en utilisant <code>--no-experimental-require-module</code>. Pour imprimer où cette fonctionnalité est utilisée, utilisez <a href="/fr/nodejs/api/cli#trace-require-modulemode"><code>--trace-require-module</code></a>.</p><p>Cette fonctionnalité peut être détectée en vérifiant si <a href="/fr/nodejs/api/process#processfeaturesrequire-module"><code>process.features.require_module</code></a> est <code>true</code>.</p><h2 id="all-together" tabindex="-1">Tout ensemble <a class="header-anchor" href="#all-together" aria-label="Permalink to “Tout ensemble”">​</a></h2><p>Pour obtenir le nom de fichier exact qui sera chargé lorsque <code>require()</code> est appelé, utilisez la fonction <code>require.resolve()</code>.</p><p>En réunissant tout ce qui précède, voici l&#39;algorithme de haut niveau en pseudocode de ce que fait <code>require()</code>\xA0:</p><div class="language-text line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">text</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>require(X) depuis le module au chemin Y</span></span>
<span class="line"><span>1. Si X est un module principal,</span></span>
<span class="line"><span>   a. retourner le module principal</span></span>
<span class="line"><span>   b. ARRÊTER</span></span>
<span class="line"><span>2. Si X commence par &#39;/&#39;</span></span>
<span class="line"><span>   a. définir Y comme étant la racine du système de fichiers</span></span>
<span class="line"><span>3. Si X commence par &#39;./&#39; ou &#39;/&#39; ou &#39;../&#39;</span></span>
<span class="line"><span>   a. CHARGER_COMME_FICHIER(Y + X)</span></span>
<span class="line"><span>   b. CHARGER_COMME_RÉPERTOIRE(Y + X)</span></span>
<span class="line"><span>   c. LANCER &quot;introuvable&quot;</span></span>
<span class="line"><span>4. Si X commence par &#39;#&#39;</span></span>
<span class="line"><span>   a. CHARGER_IMPORTATIONS_DE_PAQUET(X, dirname(Y))</span></span>
<span class="line"><span>5. CHARGER_SOI_MÊME_DU_PAQUET(X, dirname(Y))</span></span>
<span class="line"><span>6. CHARGER_MODULES_NODE(X, dirname(Y))</span></span>
<span class="line"><span>7. LANCER &quot;introuvable&quot;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>PEUT-ÊTRE_DÉTECTER_ET_CHARGER(X)</span></span>
<span class="line"><span>1. Si X est analysé comme un module CommonJS, charger X comme un module CommonJS. ARRÊTER.</span></span>
<span class="line"><span>2. Sinon, si le code source de X peut être analysé comme un module ECMAScript en utilisant</span></span>
<span class="line"><span>  &lt;a href=&quot;esm.md#resolver-algorithm-specification&quot;&gt;DÉTECTER_SYNTAXE_DE_MODULE défini dans</span></span>
<span class="line"><span>  le résolveur ESM&lt;/a&gt;,</span></span>
<span class="line"><span>  a. Charger X comme un module ECMAScript. ARRÊTER.</span></span>
<span class="line"><span>3. LANCER l&#39;erreur SyntaxError en tentant d&#39;analyser X comme CommonJS dans 1. ARRÊTER.</span></span>
<span class="line"><span></span></span>
<span class="line"><span>CHARGER_COMME_FICHIER(X)</span></span>
<span class="line"><span>1. Si X est un fichier, charger X comme son format d&#39;extension de fichier. ARRÊTER</span></span>
<span class="line"><span>2. Si X.js est un fichier,</span></span>
<span class="line"><span>    a. Trouver l&#39;étendue de paquet SCOPE la plus proche de X.</span></span>
<span class="line"><span>    b. Si aucune étendue n&#39;a été trouvée</span></span>
<span class="line"><span>      1. PEUT-ÊTRE_DÉTECTER_ET_CHARGER(X.js)</span></span>
<span class="line"><span>    c. Si SCOPE/package.json contient le champ &quot;type&quot;,</span></span>
<span class="line"><span>      1. Si le champ &quot;type&quot; est &quot;module&quot;, charger X.js comme un module ECMAScript. ARRÊTER.</span></span>
<span class="line"><span>      2. Si le champ &quot;type&quot; est &quot;commonjs&quot;, charger X.js comme un module CommonJS. ARRÊTER.</span></span>
<span class="line"><span>    d. PEUT-ÊTRE_DÉTECTER_ET_CHARGER(X.js)</span></span>
<span class="line"><span>3. Si X.json est un fichier, charger X.json dans un objet JavaScript. ARRÊTER</span></span>
<span class="line"><span>4. Si X.node est un fichier, charger X.node comme un module complémentaire binaire. ARRÊTER</span></span>
<span class="line"><span></span></span>
<span class="line"><span>CHARGER_INDEX(X)</span></span>
<span class="line"><span>1. Si X/index.js est un fichier</span></span>
<span class="line"><span>    a. Trouver l&#39;étendue de paquet SCOPE la plus proche de X.</span></span>
<span class="line"><span>    b. Si aucune étendue n&#39;a été trouvée, charger X/index.js comme un module CommonJS. ARRÊTER.</span></span>
<span class="line"><span>    c. Si SCOPE/package.json contient le champ &quot;type&quot;,</span></span>
<span class="line"><span>      1. Si le champ &quot;type&quot; est &quot;module&quot;, charger X/index.js comme un module ECMAScript. ARRÊTER.</span></span>
<span class="line"><span>      2. Sinon, charger X/index.js comme un module CommonJS. ARRÊTER.</span></span>
<span class="line"><span>2. Si X/index.json est un fichier, analyser X/index.json en un objet JavaScript. ARRÊTER</span></span>
<span class="line"><span>3. Si X/index.node est un fichier, charger X/index.node comme un module complémentaire binaire. ARRÊTER</span></span>
<span class="line"><span></span></span>
<span class="line"><span>CHARGER_COMME_RÉPERTOIRE(X)</span></span>
<span class="line"><span>1. Si X/package.json est un fichier,</span></span>
<span class="line"><span>   a. Analyser X/package.json, et rechercher le champ &quot;main&quot;.</span></span>
<span class="line"><span>   b. Si &quot;main&quot; est une valeur fausse, ALLER À 2.</span></span>
<span class="line"><span>   c. soit M = X + (champ principal json)</span></span>
<span class="line"><span>   d. CHARGER_COMME_FICHIER(M)</span></span>
<span class="line"><span>   e. CHARGER_INDEX(M)</span></span>
<span class="line"><span>   f. CHARGER_INDEX(X) DÉPRÉCIÉ</span></span>
<span class="line"><span>   g. LANCER &quot;introuvable&quot;</span></span>
<span class="line"><span>2. CHARGER_INDEX(X)</span></span>
<span class="line"><span></span></span>
<span class="line"><span>CHARGER_MODULES_NODE(X, DÉMARRER)</span></span>
<span class="line"><span>1. soit DIRS = CHEMINS_MODULES_NODE(DÉMARRER)</span></span>
<span class="line"><span>2. pour chaque DIR dans DIRS\xA0:</span></span>
<span class="line"><span>   a. CHARGER_EXPORATIONS_DE_PAQUET(X, DIR)</span></span>
<span class="line"><span>   b. CHARGER_COMME_FICHIER(DIR/X)</span></span>
<span class="line"><span>   c. CHARGER_COMME_RÉPERTOIRE(DIR/X)</span></span>
<span class="line"><span></span></span>
<span class="line"><span>CHEMINS_MODULES_NODE(DÉMARRER)</span></span>
<span class="line"><span>1. soit PARTS = chemin diviser(DÉMARRER)</span></span>
<span class="line"><span>2. soit I = nombre de PARTS - 1</span></span>
<span class="line"><span>3. soit DIRS = []</span></span>
<span class="line"><span>4. tant que I &gt;= 0,</span></span>
<span class="line"><span>   a. si PARTS[I] = &quot;node_modules&quot;, ALLER À d.</span></span>
<span class="line"><span>   b. DIR = chemin joindre(PARTS[0 .. I] + &quot;node_modules&quot;)</span></span>
<span class="line"><span>   c. DIRS = DIR + DIRS</span></span>
<span class="line"><span>   d. soit I = I - 1</span></span>
<span class="line"><span>5. retourner DIRS + DOSSIERS_GLOBAUX</span></span>
<span class="line"><span></span></span>
<span class="line"><span>CHARGER_IMPORTATIONS_DE_PAQUET(X, DIR)</span></span>
<span class="line"><span>1. Trouver l&#39;étendue de paquet SCOPE la plus proche de DIR.</span></span>
<span class="line"><span>2. Si aucune étendue n&#39;a été trouvée, retourner.</span></span>
<span class="line"><span>3. Si les &quot;importations&quot; de SCOPE/package.json sont nulles ou non définies, retourner.</span></span>
<span class="line"><span>4. Si \`--experimental-require-module\` est activé</span></span>
<span class="line"><span>  a. soit CONDITIONS = [&quot;node&quot;, &quot;require&quot;, &quot;module-sync&quot;]</span></span>
<span class="line"><span>  b. Sinon, soit CONDITIONS = [&quot;node&quot;, &quot;require&quot;]</span></span>
<span class="line"><span>5. soit MATCH = PACKAGE_IMPORTS_RESOLVE(X, pathToFileURL(SCOPE),</span></span>
<span class="line"><span>  CONDITIONS) &lt;a href=&quot;esm.md#resolver-algorithm-specification&quot;&gt;défini dans le résolveur ESM&lt;/a&gt;.</span></span>
<span class="line"><span>6. RESOLVE_ESM_MATCH(MATCH).</span></span>
<span class="line"><span></span></span>
<span class="line"><span>CHARGER_EXPORATIONS_DE_PAQUET(X, DIR)</span></span>
<span class="line"><span>1. Essayer d&#39;interpréter X comme une combinaison de NAME et SUBPATH où le nom</span></span>
<span class="line"><span>   peut avoir un préfixe @scope/ et le sous-chemin commence par une barre oblique (\`/\`).</span></span>
<span class="line"><span>2. Si X ne correspond pas à ce modèle ou si DIR/NAME/package.json n&#39;est pas un fichier,</span></span>
<span class="line"><span>   retourner.</span></span>
<span class="line"><span>3. Analyser DIR/NAME/package.json, et rechercher le champ &quot;exports&quot;.</span></span>
<span class="line"><span>4. Si &quot;exports&quot; est nul ou non défini, retourner.</span></span>
<span class="line"><span>5. Si \`--experimental-require-module\` est activé</span></span>
<span class="line"><span>  a. soit CONDITIONS = [&quot;node&quot;, &quot;require&quot;, &quot;module-sync&quot;]</span></span>
<span class="line"><span>  b. Sinon, soit CONDITIONS = [&quot;node&quot;, &quot;require&quot;]</span></span>
<span class="line"><span>6. soit MATCH = PACKAGE_EXPORTS_RESOLVE(pathToFileURL(DIR/NAME), &quot;.&quot; + SUBPATH,</span></span>
<span class="line"><span>   \`package.json\` &quot;exports&quot;, CONDITIONS) &lt;a href=&quot;esm.md#resolver-algorithm-specification&quot;&gt;défini dans le résolveur ESM&lt;/a&gt;.</span></span>
<span class="line"><span>7. RESOLVE_ESM_MATCH(MATCH)</span></span>
<span class="line"><span></span></span>
<span class="line"><span>CHARGER_SOI_MÊME_DU_PAQUET(X, DIR)</span></span>
<span class="line"><span>1. Trouver l&#39;étendue de paquet SCOPE la plus proche de DIR.</span></span>
<span class="line"><span>2. Si aucune étendue n&#39;a été trouvée, retourner.</span></span>
<span class="line"><span>3. Si les &quot;exports&quot; de SCOPE/package.json sont nuls ou non définis, retourner.</span></span>
<span class="line"><span>4. Si le &quot;name&quot; de SCOPE/package.json n&#39;est pas le premier segment de X, retourner.</span></span>
<span class="line"><span>5. soit MATCH = PACKAGE_EXPORTS_RESOLVE(pathToFileURL(SCOPE),</span></span>
<span class="line"><span>   &quot;.&quot; + X.slice(&quot;name&quot;.length), \`package.json\` &quot;exports&quot;, [&quot;node&quot;, &quot;require&quot;])</span></span>
<span class="line"><span>   &lt;a href=&quot;esm.md#resolver-algorithm-specification&quot;&gt;défini dans le résolveur ESM&lt;/a&gt;.</span></span>
<span class="line"><span>6. RESOLVE_ESM_MATCH(MATCH)</span></span>
<span class="line"><span></span></span>
<span class="line"><span>RESOLVE_ESM_MATCH(MATCH)</span></span>
<span class="line"><span>1. soit RESOLVED_PATH = fileURLToPath(MATCH)</span></span>
<span class="line"><span>2. Si le fichier à RESOLVED_PATH existe, charger RESOLVED_PATH comme son extension</span></span>
<span class="line"><span>   format. ARRÊTER</span></span>
<span class="line"><span>3. LANCER &quot;introuvable&quot;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br><span class="line-number">115</span><br><span class="line-number">116</span><br></div></div><h2 id="caching" tabindex="-1">Mise en cache <a class="header-anchor" href="#caching" aria-label="Permalink to “Mise en cache”">​</a></h2><p>Les modules sont mis en cache après leur première chargement. Cela signifie (entre autres choses) que chaque appel à <code>require(&#39;foo&#39;)</code> retournera exactement le même objet, s&#39;il se résout au même fichier.</p><p>À condition que <code>require.cache</code> ne soit pas modifié, plusieurs appels à <code>require(&#39;foo&#39;)</code> n&#39;entraîneront pas l&#39;exécution du code du module plusieurs fois. C&#39;est une caractéristique importante. Grâce à elle, des objets « partiellement terminés » peuvent être retournés, ce qui permet de charger des dépendances transitives même lorsqu&#39;elles provoqueraient des cycles.</p><p>Pour qu&#39;un module exécute du code plusieurs fois, exportez une fonction et appelez cette fonction.</p><h3 id="module-caching-caveats" tabindex="-1">Avertissements concernant la mise en cache des modules <a class="header-anchor" href="#module-caching-caveats" aria-label="Permalink to “Avertissements concernant la mise en cache des modules”">​</a></h3><p>Les modules sont mis en cache en fonction de leur nom de fichier résolu. Étant donné que les modules peuvent se résoudre en un nom de fichier différent en fonction de l&#39;emplacement du module appelant (chargement à partir des dossiers <code>node_modules</code>), il n&#39;est pas <em>garanti</em> que <code>require(&#39;foo&#39;)</code> renvoie toujours exactement le même objet, s&#39;il se résout à différents fichiers.</p><p>De plus, sur les systèmes de fichiers ou les systèmes d&#39;exploitation insensibles à la casse, différents noms de fichiers résolus peuvent pointer vers le même fichier, mais le cache les traitera toujours comme des modules différents et rechargera le fichier plusieurs fois. Par exemple, <code>require(&#39;./foo&#39;)</code> et <code>require(&#39;./FOO&#39;)</code> renvoient deux objets différents, que <code>./foo</code> et <code>./FOO</code> soient ou non le même fichier.</p><h2 id="built-in-modules" tabindex="-1">Modules intégrés <a class="header-anchor" href="#built-in-modules" aria-label="Permalink to “Modules intégrés”">​</a></h2><div class="info custom-block"><p class="custom-block-title">[Historique]</p><table tabindex="0"><thead><tr><th>Version</th><th>Modifications</th></tr></thead><tbody><tr><td>v16.0.0, v14.18.0</td><td>Ajout de la prise en charge de l&#39;importation <code>node:</code> à <code>require(...)</code>.</td></tr></tbody></table></div><p>Node.js possède plusieurs modules compilés dans le binaire. Ces modules sont décrits plus en détail ailleurs dans cette documentation.</p><p>Les modules intégrés sont définis dans la source de Node.js et se trouvent dans le dossier <code>lib/</code>.</p><p>Les modules intégrés peuvent être identifiés à l&#39;aide du préfixe <code>node:</code>, auquel cas ils contournent le cache <code>require</code>. Par exemple, <code>require(&#39;node:http&#39;)</code> renverra toujours le module HTTP intégré, même s&#39;il existe une entrée <code>require.cache</code> portant ce nom.</p><p>Certains modules intégrés sont toujours chargés de préférence si leur identifiant est transmis à <code>require()</code>. Par exemple, <code>require(&#39;http&#39;)</code> renverra toujours le module HTTP intégré, même s&#39;il existe un fichier portant ce nom. La liste des modules intégrés qui peuvent être chargés sans utiliser le préfixe <code>node:</code> est exposée dans <a href="/fr/nodejs/api/module#modulebuiltinmodules"><code>module.builtinModules</code></a>, répertoriée sans le préfixe.</p><h3 id="built-in-modules-with-mandatory-node-prefix" tabindex="-1">Modules intégrés avec le préfixe obligatoire <code>node:</code> <a class="header-anchor" href="#built-in-modules-with-mandatory-node-prefix" aria-label="Permalink to “Modules intégrés avec le préfixe obligatoire node:”">​</a></h3><p>Lorsqu&#39;ils sont chargés par <code>require()</code>, certains modules intégrés doivent être demandés avec le préfixe <code>node:</code>. Cette exigence existe pour empêcher les modules intégrés nouvellement introduits d&#39;entrer en conflit avec les packages utilisateur qui ont déjà pris le nom. Actuellement, les modules intégrés qui nécessitent le préfixe <code>node:</code> sont les suivants\xA0:</p><ul><li><a href="/fr/nodejs/api/single-executable-applications#single-executable-application-api"><code>node:sea</code></a></li><li><a href="/fr/nodejs/api/sqlite"><code>node:sqlite</code></a></li><li><a href="/fr/nodejs/api/test"><code>node:test</code></a></li><li><a href="/fr/nodejs/api/test#test-reporters"><code>node:test/reporters</code></a></li></ul><p>La liste de ces modules est exposée dans <a href="/fr/nodejs/api/module#modulebuiltinmodules"><code>module.builtinModules</code></a>, y compris le préfixe.</p><h2 id="cycles" tabindex="-1">Cycles <a class="header-anchor" href="#cycles" aria-label="Permalink to “Cycles”">​</a></h2><p>Lorsqu&#39;il y a des appels <code>require()</code> circulaires, un module peut ne pas avoir fini de s&#39;exécuter lorsqu&#39;il est retourné.</p><p>Considérez cette situation\xA0:</p><p><code>a.js</code>\xA0:</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;a starting&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">exports</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.done </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> b</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;./b.js&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;in a, b.done = %j&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, b.done);</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">exports</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.done </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;a done&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p><code>b.js</code>\xA0:</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;b starting&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">exports</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.done </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> a</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;./a.js&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;in b, a.done = %j&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, a.done);</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">exports</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.done </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;b done&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p><code>main.js</code>\xA0:</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;main starting&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> a</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;./a.js&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> b</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;./b.js&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;in main, a.done = %j, b.done = %j&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, a.done, b.done);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>Lorsque <code>main.js</code> charge <code>a.js</code>, puis <code>a.js</code> charge à son tour <code>b.js</code>. À ce stade, <code>b.js</code> essaie de charger <code>a.js</code>. Afin d&#39;empêcher une boucle infinie, une <strong>copie non terminée</strong> de l&#39;objet <code>exports</code> de <code>a.js</code> est renvoyée au module <code>b.js</code>. <code>b.js</code> termine ensuite le chargement et son objet <code>exports</code> est fourni au module <code>a.js</code>.</p><p>Au moment où <code>main.js</code> a chargé les deux modules, ils sont tous les deux terminés. La sortie de ce programme serait donc\xA0:</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> node</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> main.js</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">main</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> starting</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">a</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> starting</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">b</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> starting</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">in b, a.done = false</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">b</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> done</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">in a, b.done = true</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">a</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> done</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">in main, a.done = true, b.done = true</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>Une planification minutieuse est nécessaire pour permettre aux dépendances de modules cycliques de fonctionner correctement dans une application.</p><h2 id="file-modules" tabindex="-1">Modules de fichiers <a class="header-anchor" href="#file-modules" aria-label="Permalink to “Modules de fichiers”">​</a></h2><p>Si le nom de fichier exact n&#39;est pas trouvé, Node.js tentera de charger le nom de fichier requis avec les extensions ajoutées : <code>.js</code>, <code>.json</code> et enfin <code>.node</code>. Lors du chargement d&#39;un fichier qui a une extension différente (par exemple <code>.cjs</code>), son nom complet doit être passé à <code>require()</code>, y compris son extension de fichier (par exemple <code>require(&#39;./file.cjs&#39;)</code>).</p><p>Les fichiers <code>.json</code> sont analysés comme des fichiers texte JSON, les fichiers <code>.node</code> sont interprétés comme des modules complémentaires compilés chargés avec <code>process.dlopen()</code>. Les fichiers utilisant toute autre extension (ou aucune extension) sont analysés comme des fichiers texte JavaScript. Consultez la section <a href="/fr/nodejs/api/packages#determining-module-system">Détermination du système de modules</a> pour comprendre quel objectif d&#39;analyse sera utilisé.</p><p>Un module requis préfixé par <code>&#39;/&#39;</code> est un chemin absolu vers le fichier. Par exemple, <code>require(&#39;/home/marco/foo.js&#39;)</code> chargera le fichier à <code>/home/marco/foo.js</code>.</p><p>Un module requis préfixé par <code>&#39;./&#39;</code> est relatif au fichier appelant <code>require()</code>. Autrement dit, <code>circle.js</code> doit se trouver dans le même répertoire que <code>foo.js</code> pour que <code>require(&#39;./circle&#39;)</code> le trouve.</p><p>Sans <code>&#39;/&#39;</code>, <code>&#39;./&#39;</code> ou <code>&#39;../&#39;</code> en tête pour indiquer un fichier, le module doit être un module principal ou être chargé à partir d&#39;un dossier <code>node_modules</code>.</p><p>Si le chemin donné n&#39;existe pas, <code>require()</code> lèvera une erreur <a href="/fr/nodejs/api/errors#module-not-found"><code>MODULE_NOT_FOUND</code></a>.</p><h2 id="folders-as-modules" tabindex="-1">Dossiers en tant que modules <a class="header-anchor" href="#folders-as-modules" aria-label="Permalink to “Dossiers en tant que modules”">​</a></h2><div class="info custom-block"><p class="custom-block-title">[Stable: 3 - Legacy]</p><p><a href="/fr/nodejs/api/documentation#stability-index">Stable: 3</a> <a href="/fr/nodejs/api/documentation#stability-index">Stability: 3</a> - Legacy : Utilisez plutôt les <a href="/fr/nodejs/api/packages#subpath-exports">exportations de sous-chemin</a> ou les <a href="/fr/nodejs/api/packages#subpath-imports">importations de sous-chemin</a>.</p></div><p>Il existe trois façons de passer un dossier à <code>require()</code> comme argument.</p><p>La première consiste à créer un fichier <a href="/fr/nodejs/api/packages#nodejs-packagejson-field-definitions"><code>package.json</code></a> à la racine du dossier, qui spécifie un module <code>main</code>. Un exemple de fichier <a href="/fr/nodejs/api/packages#nodejs-packagejson-field-definitions"><code>package.json</code></a> pourrait ressembler à ceci :</p><div class="language-json line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{ </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> : </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;some-library&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;main&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> : </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;./lib/some-library.js&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>Si cela se trouvait dans un dossier à <code>./some-library</code>, alors <code>require(&#39;./some-library&#39;)</code> tenterait de charger <code>./some-library/lib/some-library.js</code>.</p><p>S&#39;il n&#39;y a pas de fichier <a href="/fr/nodejs/api/packages#nodejs-packagejson-field-definitions"><code>package.json</code></a> présent dans le répertoire, ou si l&#39;entrée <a href="/fr/nodejs/api/packages#main"><code>&quot;main&quot;</code></a> est manquante ou ne peut pas être résolue, alors Node.js tentera de charger un fichier <code>index.js</code> ou <code>index.node</code> hors de ce répertoire. Par exemple, s&#39;il n&#39;y avait pas de fichier <a href="/fr/nodejs/api/packages#nodejs-packagejson-field-definitions"><code>package.json</code></a> dans l&#39;exemple précédent, alors <code>require(&#39;./some-library&#39;)</code> tenterait de charger :</p><ul><li><code>./some-library/index.js</code></li><li><code>./some-library/index.node</code></li></ul><p>Si ces tentatives échouent, Node.js signalera l&#39;ensemble du module comme manquant avec l&#39;erreur par défaut\xA0:</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Error:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Cannot</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> find</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> module</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;some-library&#39;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>Dans les trois cas ci-dessus, un appel <code>import(&#39;./some-library&#39;)</code> entraînerait une erreur <a href="/fr/nodejs/api/errors#err-unsupported-dir-import"><code>ERR_UNSUPPORTED_DIR_IMPORT</code></a>. L&#39;utilisation des <a href="/fr/nodejs/api/packages#subpath-exports">exportations de sous-chemin</a> ou des <a href="/fr/nodejs/api/packages#subpath-imports">importations de sous-chemin</a> de package peut fournir les mêmes avantages d&#39;organisation de confinement que les dossiers en tant que modules, et fonctionner à la fois pour <code>require</code> et <code>import</code>.</p><h2 id="loading-from-node_modules-folders" tabindex="-1">Chargement depuis les dossiers <code>node_modules</code> <a class="header-anchor" href="#loading-from-node_modules-folders" aria-label="Permalink to “Chargement depuis les dossiers node_modules”">​</a></h2><p>Si l&#39;identifiant de module passé à <code>require()</code> n&#39;est pas un module <a href="/fr/nodejs/api/modules#built-in-modules">intégré</a>, et ne commence pas par <code>&#39;/&#39;</code>, <code>&#39;../&#39;</code> ou <code>&#39;./&#39;</code>, alors Node.js commence par le répertoire du module courant, ajoute <code>/node_modules</code> et tente de charger le module à partir de cet emplacement. Node.js n&#39;ajoutera pas <code>node_modules</code> à un chemin se terminant déjà par <code>node_modules</code>.</p><p>S&#39;il n&#39;est pas trouvé là, il se déplace vers le répertoire parent, et ainsi de suite, jusqu&#39;à atteindre la racine du système de fichiers.</p><p>Par exemple, si le fichier à l&#39;adresse <code>&#39;/home/ry/projects/foo.js&#39;</code> appelait <code>require(&#39;bar.js&#39;)</code>, alors Node.js chercherait aux emplacements suivants, dans cet ordre\xA0:</p><ul><li><code>/home/ry/projects/node_modules/bar.js</code></li><li><code>/home/ry/node_modules/bar.js</code></li><li><code>/home/node_modules/bar.js</code></li><li><code>/node_modules/bar.js</code></li></ul><p>Cela permet aux programmes de localiser leurs dépendances, afin qu&#39;elles ne s&#39;entrechoquent pas.</p><p>Il est possible d&#39;exiger des fichiers spécifiques ou des sous-modules distribués avec un module en incluant un suffixe de chemin après le nom du module. Par exemple, <code>require(&#39;example-module/path/to/file&#39;)</code> résoudrait <code>path/to/file</code> par rapport à l&#39;emplacement de <code>example-module</code>. Le chemin suffixé suit la même sémantique de résolution de module.</p><h2 id="loading-from-the-global-folders" tabindex="-1">Chargement depuis les dossiers globaux <a class="header-anchor" href="#loading-from-the-global-folders" aria-label="Permalink to “Chargement depuis les dossiers globaux”">​</a></h2><p>Si la variable d&#39;environnement <code>NODE_PATH</code> est définie sur une liste de chemins absolus délimités par deux-points, alors Node.js recherchera ces chemins pour les modules s&#39;ils ne sont pas trouvés ailleurs.</p><p>Sous Windows, <code>NODE_PATH</code> est délimité par des points-virgules (<code>;</code>) au lieu de deux-points.</p><p><code>NODE_PATH</code> a été initialement créé pour prendre en charge le chargement de modules à partir de chemins variables avant que l&#39;algorithme actuel de <a href="/fr/nodejs/api/modules#all-together">résolution de module</a> ne soit défini.</p><p><code>NODE_PATH</code> est toujours pris en charge, mais est moins nécessaire maintenant que l&#39;écosystème Node.js s&#39;est installé sur une convention pour localiser les modules dépendants. Parfois, les déploiements qui reposent sur <code>NODE_PATH</code> présentent un comportement surprenant lorsque les personnes ne sont pas conscientes que <code>NODE_PATH</code> doit être défini. Parfois, les dépendances d&#39;un module changent, ce qui entraîne le chargement d&#39;une version différente (voire d&#39;un module différent) lors de la recherche dans <code>NODE_PATH</code>.</p><p>De plus, Node.js recherchera dans la liste suivante de GLOBAL_FOLDERS\xA0:</p><ul><li>1\xA0: <code>$HOME/.node_modules</code></li><li>2\xA0: <code>$HOME/.node_libraries</code></li><li>3\xA0: <code>$PREFIX/lib/node</code></li></ul><p>Où <code>$HOME</code> est le répertoire personnel de l&#39;utilisateur et <code>$PREFIX</code> est le <code>node_prefix</code> configuré de Node.js.</p><p>Ce sont principalement des raisons historiques.</p><p>Il est fortement encouragé de placer les dépendances dans le dossier <code>node_modules</code> local. Celles-ci seront chargées plus rapidement et plus fiablement.</p><h2 id="the-module-wrapper" tabindex="-1">Le wrapper de module <a class="header-anchor" href="#the-module-wrapper" aria-label="Permalink to “Le wrapper de module”">​</a></h2><p>Avant que le code d&#39;un module ne soit exécuté, Node.js l&#39;encapsule avec un wrapper de fonction qui ressemble à ceci :</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">exports</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">module</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">__filename</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">__dirname</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Le code du module vit en fait ici</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>Ce faisant, Node.js réalise plusieurs choses\xA0:</p><ul><li>Il maintient les variables de niveau supérieur (définies avec <code>var</code>, <code>const</code> ou <code>let</code>) limitées au module plutôt qu&#39;à l&#39;objet global.</li><li>Il permet de fournir des variables d&#39;apparence globale qui sont en fait spécifiques au module, telles que : <ul><li>Les objets <code>module</code> et <code>exports</code> que l&#39;implémenteur peut utiliser pour exporter des valeurs du module.</li><li>Les variables de commodité <code>__filename</code> et <code>__dirname</code>, contenant le nom de fichier absolu et le chemin d&#39;accès au répertoire du module.</li></ul></li></ul><h2 id="the-module-scope" tabindex="-1">La portée du module <a class="header-anchor" href="#the-module-scope" aria-label="Permalink to “La portée du module”">​</a></h2><h3 id="__dirname" tabindex="-1"><code>__dirname</code> <a class="header-anchor" href="#__dirname" aria-label="Permalink to “__dirname”">​</a></h3><p><strong>Ajouté dans\xA0: v0.1.27</strong></p><ul><li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a></li></ul><p>Le nom du répertoire du module courant. Il s&#39;agit du même que le <a href="/fr/nodejs/api/path#pathdirnamepath"><code>path.dirname()</code></a> de <a href="/fr/nodejs/api/modules#filename"><code>__filename</code></a>.</p><p>Exemple\xA0: exécuter <code>node example.js</code> depuis <code>/Users/mjr</code></p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(__dirname);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Affiche\xA0: /Users/mjr</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(path.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">dirname</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(__filename));</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Affiche\xA0: /Users/mjr</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="__filename" tabindex="-1"><code>__filename</code> <a class="header-anchor" href="#__filename" aria-label="Permalink to “__filename”">​</a></h3><p><strong>Ajouté dans\xA0: v0.0.1</strong></p><ul><li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a></li></ul><p>Le nom de fichier du module courant. Il s&#39;agit du chemin absolu du fichier du module courant avec les liens symboliques résolus.</p><p>Pour un programme principal, ce n&#39;est pas nécessairement le même que le nom de fichier utilisé dans la ligne de commande.</p><p>Voir <a href="/fr/nodejs/api/modules#dirname"><code>__dirname</code></a> pour le nom de répertoire du module courant.</p><p>Exemples\xA0:</p><p>Exécuter <code>node example.js</code> depuis <code>/Users/mjr</code></p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(__filename);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Affiche\xA0: /Users/mjr/example.js</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(__dirname);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Affiche\xA0: /Users/mjr</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>Étant donné deux modules\xA0: <code>a</code> et <code>b</code>, où <code>b</code> est une dépendance de <code>a</code> et qu&#39;il existe une structure de répertoires de\xA0:</p><ul><li><code>/Users/mjr/app/a.js</code></li><li><code>/Users/mjr/app/node_modules/b/b.js</code></li></ul><p>Les références à <code>__filename</code> dans <code>b.js</code> renverront <code>/Users/mjr/app/node_modules/b/b.js</code> tandis que les références à <code>__filename</code> dans <code>a.js</code> renverront <code>/Users/mjr/app/a.js</code>.</p><h3 id="exports" tabindex="-1"><code>exports</code> <a class="header-anchor" href="#exports" aria-label="Permalink to “exports”">​</a></h3><p><strong>Ajouté dans : v0.1.12</strong></p><ul><li><a href="https://developer.mozilla.org/fr/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noreferrer">&lt;Object&gt;</a></li></ul><p>Une référence à <code>module.exports</code> qui est plus courte à taper. Consultez la section sur le <a href="/fr/nodejs/api/modules#exports-shortcut">raccourci exports</a> pour plus de détails sur quand utiliser <code>exports</code> et quand utiliser <code>module.exports</code>.</p><h3 id="module" tabindex="-1"><code>module</code> <a class="header-anchor" href="#module" aria-label="Permalink to “module”">​</a></h3><p><strong>Ajouté dans : v0.1.16</strong></p><ul><li><a href="/fr/nodejs/api/modules#the-module-object">&lt;module&gt;</a></li></ul><p>Une référence au module actuel, voir la section sur l&#39;objet <a href="/fr/nodejs/api/modules#the-module-object"><code>module</code></a>. En particulier, <code>module.exports</code> est utilisé pour définir ce qu&#39;un module exporte et rend disponible via <code>require()</code>.</p><h3 id="requireid" tabindex="-1"><code>require(id)</code> <a class="header-anchor" href="#requireid" aria-label="Permalink to “require(id)”">​</a></h3><p><strong>Ajouté dans : v0.1.13</strong></p><ul><li><code>id</code> <a href="https://developer.mozilla.org/fr/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> nom ou chemin du module</li><li>Retourne : <a href="https://developer.mozilla.org/fr/docs/Web/JavaScript/Data_structures#Data_types" target="_blank" rel="noreferrer">&lt;any&gt;</a> contenu du module exporté</li></ul><p>Utilisé pour importer des modules, des fichiers <code>JSON</code> et des fichiers locaux. Les modules peuvent être importés depuis <code>node_modules</code>. Les modules locaux et les fichiers JSON peuvent être importés en utilisant un chemin relatif (par exemple <code>./</code>, <code>./foo</code>, <code>./bar/baz</code>, <code>../foo</code>) qui sera résolu par rapport au répertoire nommé par <a href="/fr/nodejs/api/modules#dirname"><code>__dirname</code></a> (si défini) ou au répertoire de travail actuel. Les chemins relatifs de style POSIX sont résolus de manière indépendante du système d&#39;exploitation, ce qui signifie que les exemples ci-dessus fonctionneront sur Windows de la même manière que sur les systèmes Unix.</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Importation d&#39;un module local avec un chemin relatif à \`__dirname\` ou au répertoire</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// de travail courant. (Sur Windows, ceci serait résolu en .\\path\\myLocalModule.)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> myLocalModule</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;./path/myLocalModule&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Importation d&#39;un fichier JSON\xA0:</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> jsonData</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;./path/filename.json&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Importation d&#39;un module depuis node_modules ou un module intégré à Node.js\xA0:</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> crypto</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;node:crypto&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h4 id="requirecache" tabindex="-1"><code>require.cache</code> <a class="header-anchor" href="#requirecache" aria-label="Permalink to “require.cache”">​</a></h4><p><strong>Ajouté dans : v0.3.0</strong></p><ul><li><a href="https://developer.mozilla.org/fr/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noreferrer">&lt;Object&gt;</a></li></ul><p>Les modules sont mis en cache dans cet objet lorsqu&#39;ils sont requis. En supprimant une valeur de clé de cet objet, le prochain <code>require</code> rechargera le module. Ceci ne s&#39;applique pas aux <a href="/fr/nodejs/api/addons">modules complémentaires natifs</a>, pour lesquels le rechargement entraînera une erreur.</p><p>Il est également possible d&#39;ajouter ou de remplacer des entrées. Ce cache est vérifié avant les modules intégrés, et si un nom correspondant à un module intégré est ajouté au cache, seules les requêtes <code>require</code> préfixées par <code>node:</code> recevront le module intégré. Utilisez avec précaution\xA0!</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> assert</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;node:assert&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> realFs</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;node:fs&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> fakeFs</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {};</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">require.cache.fs </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { exports: fakeFs };</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">assert.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">strictEqual</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;fs&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">), fakeFs);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">assert.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">strictEqual</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;node:fs&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">), realFs);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h4 id="requireextensions" tabindex="-1"><code>require.extensions</code> <a class="header-anchor" href="#requireextensions" aria-label="Permalink to “require.extensions”">​</a></h4><p><strong>Ajouté dans : v0.3.0</strong></p><p><strong>Déprécié depuis : v0.10.6</strong></p><div class="danger custom-block"><p class="custom-block-title">[Stable: 0 - Déprécié]</p><p><a href="/fr/nodejs/api/documentation#stability-index">Stable: 0</a> <a href="/fr/nodejs/api/documentation#stability-index">Stability: 0</a> - Déprécié</p></div><ul><li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noreferrer">&lt;Object&gt;</a></li></ul><p>Indique à <code>require</code> comment gérer certaines extensions de fichier.</p><p>Traitez les fichiers avec l&#39;extension <code>.sjs</code> comme <code>.js</code> :</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">require.extensions[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;.sjs&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> require.extensions[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;.js&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">];</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><strong>Déprécié.</strong> Par le passé, cette liste était utilisée pour charger des modules non-JavaScript dans Node.js en les compilant à la demande. Cependant, en pratique, il existe de bien meilleures façons de le faire, comme le chargement de modules via un autre programme Node.js, ou leur compilation en JavaScript à l&#39;avance.</p><p>Évitez d&#39;utiliser <code>require.extensions</code>. Son utilisation pourrait provoquer des bogues subtils et la résolution des extensions devient plus lente à chaque extension enregistrée.</p><h4 id="requiremain" tabindex="-1"><code>require.main</code> <a class="header-anchor" href="#requiremain" aria-label="Permalink to “require.main”">​</a></h4><p><strong>Ajouté dans : v0.1.17</strong></p><ul><li><a href="/fr/nodejs/api/modules#the-module-object">&lt;module&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Undefined_type" target="_blank" rel="noreferrer">&lt;undefined&gt;</a></li></ul><p>L&#39;objet <code>Module</code> représentant le script d&#39;entrée chargé au lancement du processus Node.js, ou <code>undefined</code> si le point d&#39;entrée du programme n&#39;est pas un module CommonJS. Voir <a href="/fr/nodejs/api/modules#accessing-the-main-module">&quot;Accéder au module principal&quot;</a>.</p><p>Dans le script <code>entry.js</code> :</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(require.main);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">node</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> entry.js</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Module {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  id</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;.&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  path</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;/absolute/path/to&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  exports</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {},</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  filename</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;/absolute/path/to/entry.js&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  loaded</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  children</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [],</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  paths</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">   [ </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;/absolute/path/to/node_modules&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">     &#39;/absolute/path/node_modules&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">     &#39;/absolute/node_modules&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">     &#39;/node_modules&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ] }</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h4 id="requireresolverequest-options" tabindex="-1"><code>require.resolve(request[, options])</code> <a class="header-anchor" href="#requireresolverequest-options" aria-label="Permalink to “require.resolve(request[, options])”">​</a></h4><div class="info custom-block"><p class="custom-block-title">[Historique]</p><table tabindex="0"><thead><tr><th>Version</th><th>Modifications</th></tr></thead><tbody><tr><td>v8.9.0</td><td>L&#39;option <code>paths</code> est maintenant supportée.</td></tr><tr><td>v0.3.0</td><td>Ajouté dans : v0.3.0</td></tr></tbody></table></div><ul><li><p><code>request</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> Le chemin du module à résoudre.</p></li><li><p><code>options</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noreferrer">&lt;Object&gt;</a></p><ul><li><code>paths</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string[]&gt;</a> Chemins à partir desquels résoudre l&#39;emplacement du module. Si présents, ces chemins sont utilisés à la place des chemins de résolution par défaut, à l&#39;exception des <a href="/fr/nodejs/api/modules#loading-from-the-global-folders">GLOBAL_FOLDERS</a> tels que <code>$HOME/.node_modules</code>, qui sont toujours inclus. Chacun de ces chemins est utilisé comme point de départ pour l&#39;algorithme de résolution de module, ce qui signifie que la hiérarchie <code>node_modules</code> est vérifiée à partir de cet emplacement.</li></ul></li><li><p>Renvoie : <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a></p></li></ul><p>Utilisez le mécanisme interne <code>require()</code> pour rechercher l&#39;emplacement d&#39;un module, mais au lieu de charger le module, renvoyez simplement le nom de fichier résolu.</p><p>Si le module est introuvable, une erreur <code>MODULE_NOT_FOUND</code> est levée.</p><h5 id="requireresolvepathsrequest" tabindex="-1"><code>require.resolve.paths(request)</code> <a class="header-anchor" href="#requireresolvepathsrequest" aria-label="Permalink to “require.resolve.paths(request)”">​</a></h5><p><strong>Ajouté dans\xA0: v8.9.0</strong></p><ul><li><code>request</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> Le chemin du module dont les chemins de recherche sont en cours de récupération.</li><li>Retourne\xA0: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string[]&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Null_type" target="_blank" rel="noreferrer">&lt;null&gt;</a></li></ul><p>Retourne un tableau contenant les chemins recherchés lors de la résolution de <code>request</code> ou <code>null</code> si la chaîne <code>request</code> fait référence à un module principal, par exemple <code>http</code> ou <code>fs</code>.</p><h2 id="the-module-object" tabindex="-1">L’objet <code>module</code> <a class="header-anchor" href="#the-module-object" aria-label="Permalink to “L’objet module”">​</a></h2><p><strong>Ajouté dans\xA0: v0.1.16</strong></p><ul><li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noreferrer">&lt;Object&gt;</a></li></ul><p>Dans chaque module, la variable libre <code>module</code> est une référence à l’objet représentant le module courant. Pour plus de commodité, <code>module.exports</code> est également accessible via le module-global <code>exports</code>. <code>module</code> n’est pas réellement une variable globale, mais plutôt locale à chaque module.</p><h3 id="modulechildren" tabindex="-1"><code>module.children</code> <a class="header-anchor" href="#modulechildren" aria-label="Permalink to “module.children”">​</a></h3><p><strong>Ajouté dans\xA0: v0.1.16</strong></p><ul><li><a href="/fr/nodejs/api/modules#the-module-object">&lt;module[]&gt;</a></li></ul><p>Les objets module requis pour la première fois par celui-ci.</p><h3 id="moduleexports" tabindex="-1"><code>module.exports</code> <a class="header-anchor" href="#moduleexports" aria-label="Permalink to “module.exports”">​</a></h3><p><strong>Ajouté dans\xA0: v0.1.16</strong></p><ul><li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noreferrer">&lt;Object&gt;</a></li></ul><p>L’objet <code>module.exports</code> est créé par le système <code>Module</code>. Parfois, ce n’est pas acceptable\xA0; beaucoup veulent que leur module soit une instance d’une certaine classe. Pour ce faire, assignez l’objet exporté souhaité à <code>module.exports</code>. L’attribution de l’objet souhaité à <code>exports</code> ne fera que relier la variable locale <code>exports</code>, ce qui n’est probablement pas ce qui est souhaité.</p><p>Par exemple, supposons que nous créions un module appelé <code>a.js</code>\xA0:</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> EventEmitter</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;node:events&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">module</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">exports</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> EventEmitter</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Do some work, and after some time emit</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// the &#39;ready&#39; event from the module itself.</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setTimeout</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  module</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">exports</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">emit</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;ready&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1000</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>Puis, dans un autre fichier, nous pourrions faire\xA0:</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> a</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;./a&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">a.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">on</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;ready&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;module &quot;a&quot; is ready&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>L’affectation à <code>module.exports</code> doit être effectuée immédiatement. Elle ne peut pas être effectuée dans des rappels. Ceci ne fonctionne pas\xA0:</p><p><code>x.js</code>\xA0:</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setTimeout</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  module</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">exports</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { a: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;hello&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> };</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><code>y.js</code>\xA0:</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> x</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;./x&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(x.a);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h4 id="exports-shortcut" tabindex="-1">Raccourci <code>exports</code> <a class="header-anchor" href="#exports-shortcut" aria-label="Permalink to “Raccourci exports”">​</a></h4><p><strong>Ajouté dans\xA0: v0.1.16</strong></p><p>La variable <code>exports</code> est disponible dans la portée de niveau fichier d’un module, et sa valeur est affectée à <code>module.exports</code> avant que le module ne soit évalué.</p><p>Elle permet un raccourci, de sorte que <code>module.exports.f = ...</code> puisse être écrit plus succinctement comme <code>exports.f = ...</code>. Cependant, sachez que, comme toute variable, si une nouvelle valeur est affectée à <code>exports</code>, elle n’est plus liée à <code>module.exports</code>\xA0:</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">module</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">exports</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.hello </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Exporté à partir de require de module</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">exports</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { hello: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> };  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Non exporté, uniquement disponible dans le module</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>Lorsque la propriété <code>module.exports</code> est complètement remplacée par un nouvel objet, il est courant de réaffecter également <code>exports</code>\xA0:</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">module</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">exports</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> exports</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Constructor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // ... etc.</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>Pour illustrer le comportement, imaginez cette implémentation hypothétique de <code>require()</code>, qui est très similaire à ce qui est réellement fait par <code>require()</code>\xA0:</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/* ... */</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> module</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { exports: {} };</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  ((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">module</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">exports</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // Module code here. In this example, define a function.</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> someFunc</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {}</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    exports</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> someFunc;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // At this point, exports is no longer a shortcut to module.exports, and</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // this module will still export an empty default object.</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    module</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">exports</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> someFunc;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // At this point, the module will now export someFunc, instead of the</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // default object.</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  })(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">module</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">module</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">exports</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> module</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">exports</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h3 id="modulefilename" tabindex="-1"><code>module.filename</code> <a class="header-anchor" href="#modulefilename" aria-label="Permalink to “module.filename”">​</a></h3><p><strong>Ajouté dans\xA0: v0.1.16</strong></p><ul><li><a href="https://developer.mozilla.org/fr/docs/Web/JavaScript/Reference/Objets_globaux/String" target="_blank" rel="noreferrer">&lt;string&gt;</a></li></ul><p>Le nom de fichier complet du module.</p><h3 id="moduleid" tabindex="-1"><code>module.id</code> <a class="header-anchor" href="#moduleid" aria-label="Permalink to “module.id”">​</a></h3><p><strong>Ajouté dans\xA0: v0.1.16</strong></p><ul><li><a href="https://developer.mozilla.org/fr/docs/Web/JavaScript/Reference/Objets_globaux/String" target="_blank" rel="noreferrer">&lt;string&gt;</a></li></ul><p>L’identifiant du module. En général, il s’agit du nom de fichier complet.</p><h3 id="moduleispreloading" tabindex="-1"><code>module.isPreloading</code> <a class="header-anchor" href="#moduleispreloading" aria-label="Permalink to “module.isPreloading”">​</a></h3><p><strong>Ajouté dans\xA0: v15.4.0, v14.17.0</strong></p><ul><li>Type\xA0: <a href="https://developer.mozilla.org/fr/docs/Web/JavaScript/Reference/Objets_globaux/Boolean" target="_blank" rel="noreferrer">&lt;boolean&gt;</a> <code>true</code> si le module s’exécute pendant la phase de préchargement de Node.js.</li></ul><h3 id="moduleloaded" tabindex="-1"><code>module.loaded</code> <a class="header-anchor" href="#moduleloaded" aria-label="Permalink to “module.loaded”">​</a></h3><p><strong>Ajouté dans\xA0: v0.1.16</strong></p><ul><li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" target="_blank" rel="noreferrer">&lt;boolean&gt;</a></li></ul><p>Indique si le module est terminé de charger, ou s&#39;il est en cours de chargement.</p><h3 id="moduleparent" tabindex="-1"><code>module.parent</code> <a class="header-anchor" href="#moduleparent" aria-label="Permalink to “module.parent”">​</a></h3><p><strong>Ajouté dans\xA0: v0.1.16</strong></p><p><strong>Déprécié depuis\xA0: v14.6.0, v12.19.0</strong></p><div class="danger custom-block"><p class="custom-block-title">[Stable: 0 - Déprécié]</p><p><a href="/fr/nodejs/api/documentation#stability-index">Stable: 0</a> <a href="/fr/nodejs/api/documentation#stability-index">Stability: 0</a> - Déprécié\xA0: Veuillez utiliser <a href="/fr/nodejs/api/modules#requiremain"><code>require.main</code></a> et <a href="/fr/nodejs/api/modules#modulechildren"><code>module.children</code></a> à la place.</p></div><ul><li><a href="/fr/nodejs/api/modules#the-module-object">&lt;module&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Null_type" target="_blank" rel="noreferrer">&lt;null&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Undefined_type" target="_blank" rel="noreferrer">&lt;undefined&gt;</a></li></ul><p>Le module qui a requis celui-ci en premier, ou <code>null</code> si le module actuel est le point d&#39;entrée du processus actuel, ou <code>undefined</code> si le module a été chargé par quelque chose qui n&#39;est pas un module CommonJS (E.G.: REPL ou <code>import</code>).</p><h3 id="modulepath" tabindex="-1"><code>module.path</code> <a class="header-anchor" href="#modulepath" aria-label="Permalink to “module.path”">​</a></h3><p><strong>Ajouté dans\xA0: v11.14.0</strong></p><ul><li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a></li></ul><p>Le nom du répertoire du module. C&#39;est généralement le même que le <a href="/fr/nodejs/api/path#pathdirnamepath"><code>path.dirname()</code></a> de <a href="/fr/nodejs/api/modules#moduleid"><code>module.id</code></a>.</p><h3 id="modulepaths" tabindex="-1"><code>module.paths</code> <a class="header-anchor" href="#modulepaths" aria-label="Permalink to “module.paths”">​</a></h3><p><strong>Ajouté dans\xA0: v0.4.0</strong></p><ul><li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string[]&gt;</a></li></ul><p>Les chemins de recherche pour le module.</p><h3 id="modulerequireid" tabindex="-1"><code>module.require(id)</code> <a class="header-anchor" href="#modulerequireid" aria-label="Permalink to “module.require(id)”">​</a></h3><p><strong>Ajouté dans\xA0: v0.5.1</strong></p><ul><li><code>id</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a></li><li>Retourne\xA0: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Data_types" target="_blank" rel="noreferrer">&lt;any&gt;</a> contenu du module exporté</li></ul><p>La méthode <code>module.require()</code> fournit un moyen de charger un module comme si <code>require()</code> était appelé à partir du module d&#39;origine.</p><p>Pour ce faire, il est nécessaire d&#39;obtenir une référence à l&#39;objet <code>module</code>. Étant donné que <code>require()</code> renvoie <code>module.exports</code> et que <code>module</code> n&#39;est généralement disponible <em>que</em> dans le code d&#39;un module spécifique, il doit être explicitement exporté pour pouvoir être utilisé.</p><h2 id="the-module-object_1" tabindex="-1">L&#39;objet <code>Module</code> <a class="header-anchor" href="#the-module-object_1" aria-label="Permalink to “L&#39;objet Module”">​</a></h2><p>Cette section a été déplacée vers <a href="/fr/nodejs/api/module#the-module-object">Modules\xA0: module central <code>module</code></a>.</p><ul><li><a href="/fr/nodejs/api/module#modulebuiltinmodules"><code>module.builtinModules</code></a></li><li><a href="/fr/nodejs/api/module#modulecreaterequirefilename"><code>module.createRequire(filename)</code></a></li><li><a href="/fr/nodejs/api/module#modulesyncbuiltinesmexports"><code>module.syncBuiltinESMExports()</code></a></li></ul><h2 id="source-map-v3-support" tabindex="-1">Prise en charge de la source map v3 <a class="header-anchor" href="#source-map-v3-support" aria-label="Permalink to “Prise en charge de la source map v3”">​</a></h2><p>Cette section a été déplacée vers <a href="/fr/nodejs/api/module#source-map-v3-support">Modules\xA0: module central <code>module</code></a>.</p><ul><li><a href="/fr/nodejs/api/module#modulefindsourcemappath"><code>module.findSourceMap(path)</code></a></li><li><a href="/fr/nodejs/api/module#class-modulesourcemap">Classe\xA0: <code>module.SourceMap</code></a><ul><li><a href="/fr/nodejs/api/module#new-sourcemappayload"><code>new SourceMap(payload)</code></a></li><li><a href="/fr/nodejs/api/module#sourcemappayload"><code>sourceMap.payload</code></a></li><li><a href="/fr/nodejs/api/module#sourcemapfindentrylinenumber-columnnumber"><code>sourceMap.findEntry(lineNumber, columnNumber)</code></a></li></ul></li></ul>`,269)])}var s=e(a,[[`render`,o]]);export{i as __pageData,s as default};