import{__plugin_vue_export_helper_default as e,createElementBlock as t,createStaticVNode as n,openBlock as r}from"./chunks/plugin-vue_export-helper.Bts1mPc7.js";const i=JSON.parse(`{"title":"La différence entre développement et production dans Node.js","description":"Comprendre le rôle de NODE_ENV dans Node.js et son impact sur les environnements de développement et de production.","frontmatter":{"title":"La différence entre développement et production dans Node.js","description":"Comprendre le rôle de NODE_ENV dans Node.js et son impact sur les environnements de développement et de production.","head":[["meta",{"name":"og:title","content":"La différence entre développement et production dans Node.js | Node.js - iDoc.dev"}],["meta",{"name":"og:description","content":"Comprendre le rôle de NODE_ENV dans Node.js et son impact sur les environnements de développement et de production."}],["meta",{"name":"twitter:title","content":"La différence entre développement et production dans Node.js | Node.js - iDoc.dev"}],["meta",{"name":"twitter:description","content":"Comprendre le rôle de NODE_ENV dans Node.js et son impact sur les environnements de développement et de production."}],["link",{"rel":"canonical","href":"https://idoc.dev/fr/nodejs/guide/the-difference-between-development-and-production"}],["meta",{"property":"og:url","content":"https://idoc.dev/fr/nodejs/guide/the-difference-between-development-and-production"}]]},"headers":[],"relativePath":"fr/nodejs/guide/the-difference-between-development-and-production.md","filePath":"fr/nodejs/guide/the-difference-between-development-and-production.md","lastUpdated":null}`),a={name:`fr/nodejs/guide/the-difference-between-development-and-production.md`};function o(e,i,a,o,s,c){return r(),t(`div`,null,i[0]||=[n(`<h1 id="node-js-la-difference-entre-developpement-et-production" tabindex="-1">Node.js, la différence entre développement et production <a class="header-anchor" href="#node-js-la-difference-entre-developpement-et-production" aria-label="Permalink to “Node.js, la différence entre développement et production”">​</a></h1><p><code>Il n&#39;y a pas de différence entre le développement et la production dans Node.js</code>, c&#39;est-à-dire qu&#39;il n&#39;y a pas de paramètres spécifiques que vous devez appliquer pour que Node.js fonctionne dans une configuration de production. Cependant, quelques bibliothèques dans le registre npm reconnaissent l&#39;utilisation de la variable <code>NODE_ENV</code> et la définissent par défaut sur un paramètre de <code>development</code>. Exécutez toujours votre Node.js avec <code>NODE_ENV=production</code> défini.</p><p>Une façon populaire de configurer votre application est d&#39;utiliser la <a href="https://12factor.net" target="_blank" rel="noreferrer">méthodologie des douze facteurs</a>.</p><h2 id="node-env-dans-express" tabindex="-1">NODE_ENV dans Express <a class="header-anchor" href="#node-env-dans-express" aria-label="Permalink to “NODE_ENV dans Express”">​</a></h2><p>Dans le framework <a href="https://expressjs.com" target="_blank" rel="noreferrer">express</a>, extrêmement populaire, définir NODE_ENV sur production garantit généralement que\xA0:</p><ul><li>la journalisation est réduite au minimum, au niveau essentiel</li><li>davantage de niveaux de mise en cache ont lieu pour optimiser les performances</li></ul><p>Cela se fait généralement en exécutant la commande</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> NODE_ENV</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">production</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>dans le shell, mais il est préférable de le mettre dans votre fichier de configuration shell (par exemple <code>.bash_profile</code> avec le shell Bash), car sinon le paramètre ne persiste pas en cas de redémarrage du système.</p><p>Vous pouvez également appliquer la variable d&#39;environnement en la faisant précéder de votre commande d&#39;initialisation d&#39;application\xA0:</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">NODE_ENV</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">production</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> node</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> app.js</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>Par exemple, dans une application Express, vous pouvez l&#39;utiliser pour définir différents gestionnaires d&#39;erreurs par environnement\xA0:</p><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (process.env.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">NODE_ENV</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> ===</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;development&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  app.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">use</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(express.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">errorHandler</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({ dumpExceptions: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, showStack: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }));</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (process.env.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">NODE_ENV</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> ===</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;production&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  app.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">use</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(express.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">errorHandler</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">());</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>Par exemple, [Pug](<a href="https://pugjs.org" target="_blank" rel="noreferrer">https://pugjs.org</a>], la bibliothèque de modèles utilisée par [Express.js](<a href="https://expressjs.com" target="_blank" rel="noreferrer">https://expressjs.com</a>], compile en mode débogage si <code>NODE_ENV</code> n&#39;est pas défini sur <code>production</code>. Les vues Express sont compilées dans chaque requête en mode développement, tandis qu&#39;en production, elles sont mises en cache. Il existe de nombreux autres exemples.</p><p><code>Cette variable d&#39;environnement est une convention largement utilisée dans les bibliothèques externes, mais pas dans Node.js lui-même.</code></p><h2 id="pourquoi-node-env-est-il-considere-comme-un-antipattern" tabindex="-1">Pourquoi NODE_ENV est-il considéré comme un antipattern\xA0? <a class="header-anchor" href="#pourquoi-node-env-est-il-considere-comme-un-antipattern" aria-label="Permalink to “Pourquoi NODE_ENV est-il considéré comme un antipattern\xA0?”">​</a></h2><p>Un environnement est une plateforme numérique ou un système où les ingénieurs peuvent créer, tester, déployer et gérer des produits logiciels. Conventionnellement, il existe quatre étapes ou types d&#39;environnements où notre application est exécutée\xA0:</p><ul><li>Développement</li><li>Préproduction</li><li>Production</li><li>Test</li></ul><p>Le problème fondamental de <code>NODE_ENV</code> découle du fait que les développeurs combinent les optimisations et le comportement du logiciel avec l&#39;environnement dans lequel leur logiciel est exécuté. Le résultat est un code comme le suivant\xA0:</p><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (process.env.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">NODE_ENV</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> ===</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;development&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // ...</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (process.env.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">NODE_ENV</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> ===</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;staging&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // ...</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (process.env.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">NODE_ENV</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> ===</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;production&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // ...</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (process.env.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">NODE_ENV</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> ===</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;testing&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // ...</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>Bien que cela puisse sembler inoffensif, cela rend les environnements de production et de préproduction différents, ce qui rend les tests fiables impossibles. Par exemple, un test et donc une fonctionnalité de votre produit pourraient réussir lorsque <code>NODE_ENV</code> est défini sur <code>development</code>, mais échouer lorsque <code>NODE_ENV</code> est défini sur <code>production</code>. Par conséquent, définir <code>NODE_ENV</code> sur autre chose que <code>production</code> est considéré comme un antipattern.</p>`,21)])}var s=e(a,[[`render`,o]]);export{i as __pageData,s as default};