import{__plugin_vue_export_helper_default as e,createElementBlock as t,createStaticVNode as n,openBlock as r}from"./chunks/plugin-vue_export-helper.Bts1mPc7.js";const i=JSON.parse(`{"title":"ECMAScript-Module in Node.js","description":"Diese Seite bietet detaillierte Dokumentation darüber, wie ECMAScript-Module (ESM) in Node.js verwendet werden, einschließlich Modulauflösung, Import- und Export-Syntax sowie Kompatibilität mit CommonJS.","frontmatter":{"title":"ECMAScript-Module in Node.js","description":"Diese Seite bietet detaillierte Dokumentation darüber, wie ECMAScript-Module (ESM) in Node.js verwendet werden, einschließlich Modulauflösung, Import- und Export-Syntax sowie Kompatibilität mit CommonJS.","head":[["meta",{"name":"og:title","content":"ECMAScript-Module in Node.js | Node.js - iDoc.dev"}],["meta",{"name":"og:description","content":"Diese Seite bietet detaillierte Dokumentation darüber, wie ECMAScript-Module (ESM) in Node.js verwendet werden, einschließlich Modulauflösung, Import- und Export-Syntax sowie Kompatibilität mit CommonJS."}],["meta",{"name":"twitter:title","content":"ECMAScript-Module in Node.js | Node.js - iDoc.dev"}],["meta",{"name":"twitter:description","content":"Diese Seite bietet detaillierte Dokumentation darüber, wie ECMAScript-Module (ESM) in Node.js verwendet werden, einschließlich Modulauflösung, Import- und Export-Syntax sowie Kompatibilität mit CommonJS."}],["link",{"rel":"canonical","href":"https://idoc.dev/de/nodejs/api/esm"}],["meta",{"property":"og:url","content":"https://idoc.dev/de/nodejs/api/esm"}]]},"headers":[],"relativePath":"de/nodejs/api/esm.md","filePath":"de/nodejs/api/esm.md","lastUpdated":null}`),a={name:`de/nodejs/api/esm.md`};function o(e,i,a,o,s,c){return r(),t(`div`,null,i[0]||=[n(`<h1 id="modules-ecmascript-modules" tabindex="-1">Module: ECMAScript-Module <a class="header-anchor" href="#modules-ecmascript-modules" aria-label="Permalink to “Module: ECMAScript-Module”">​</a></h1><div class="info custom-block"><p class="custom-block-title">[Historie]</p><table tabindex="0"><thead><tr><th>Version</th><th>Änderungen</th></tr></thead><tbody><tr><td>v23.1.0</td><td>Importattribute sind nicht mehr experimentell.</td></tr><tr><td>v22.0.0</td><td>Unterstützung für Importzusicherungen entfernt.</td></tr><tr><td>v21.0.0, v20.10.0, v18.20.0</td><td>Experimentelle Unterstützung für Importattribute hinzugefügt.</td></tr><tr><td>v20.0.0, v18.19.0</td><td>Module-Customization-Hooks werden außerhalb des Hauptthreads ausgeführt.</td></tr><tr><td>v18.6.0, v16.17.0</td><td>Unterstützung für die Verkettung von Module-Customization-Hooks hinzugefügt.</td></tr><tr><td>v17.1.0, v16.14.0</td><td>Experimentelle Unterstützung für Importzusicherungen hinzugefügt.</td></tr><tr><td>v17.0.0, v16.12.0</td><td>Konsolidierte Customization-Hooks, entfernte <code>getFormat</code>, <code>getSource</code>, <code>transformSource</code> und <code>getGlobalPreloadCode</code>-Hooks, hinzugefügt <code>load</code>- und <code>globalPreload</code>-Hooks, die die Rückgabe von <code>format</code> entweder von <code>resolve</code>- oder <code>load</code>-Hooks erlauben.</td></tr><tr><td>v14.8.0</td><td>Top-Level-Await als nicht-experimentell gekennzeichnet.</td></tr><tr><td>v15.3.0, v14.17.0, v12.22.0</td><td>Stabilisierung der Modulimplementierung.</td></tr><tr><td>v14.13.0, v12.20.0</td><td>Unterstützung für die Erkennung von benannten CommonJS-Exporten.</td></tr><tr><td>v14.0.0, v13.14.0, v12.20.0</td><td>Experimentelle Modulwarnung entfernt.</td></tr><tr><td>v13.2.0, v12.17.0</td><td>Das Laden von ECMAScript-Modulen erfordert keine Befehlszeilenoption mehr.</td></tr><tr><td>v12.0.0</td><td>Unterstützung für ES-Module unter Verwendung der Dateiendung <code>.js</code> über das Feld <code>&quot;type&quot;</code> in <code>package.json</code> hinzugefügt.</td></tr><tr><td>v8.5.0</td><td>Hinzugefügt in: v8.5.0</td></tr></tbody></table></div><div class="tip custom-block"><p class="custom-block-title">[Stabil: 2 - Stabil]</p><p><a href="/de/nodejs/api/documentation#stability-index">Stabil: 2</a> <a href="/de/nodejs/api/documentation#stability-index">Stabilität: 2</a> - Stabil</p></div><h2 id="introduction" tabindex="-1">Einführung <a class="header-anchor" href="#introduction" aria-label="Permalink to “Einführung”">​</a></h2><p>ECMAScript-Module sind <a href="https://tc39.github.io/ecma262/#sec-modules" target="_blank" rel="noreferrer">das offizielle Standardformat</a> zum Verpacken von JavaScript-Code zur Wiederverwendung. Module werden mithilfe verschiedener <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/import" target="_blank" rel="noreferrer"><code>import</code></a>- und <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/export" target="_blank" rel="noreferrer"><code>export</code></a>-Anweisungen definiert.</p><p>Das folgende Beispiel eines ES-Moduls exportiert eine Funktion:</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// addTwo.mjs</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> addTwo</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">num</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> num </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { addTwo };</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>Das folgende Beispiel eines ES-Moduls importiert die Funktion aus <code>addTwo.mjs</code>:</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// app.mjs</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { addTwo } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;./addTwo.mjs&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Gibt aus: 6</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">addTwo</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">4</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">));</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>Node.js unterstützt ECMAScript-Module vollständig, so wie sie aktuell spezifiziert sind, und bietet Interoperabilität zwischen diesen und seinem ursprünglichen Modulformat, <a href="/de/nodejs/api/modules">CommonJS</a>.</p><h2 id="enabling" tabindex="-1">Aktivierung <a class="header-anchor" href="#enabling" aria-label="Permalink to “Aktivierung”">​</a></h2><p>Node.js verfügt über zwei Modulsysteme: <a href="/de/nodejs/api/modules">CommonJS</a>-Module und ECMAScript-Module.</p><p>Autoren können Node.js anweisen, JavaScript als ES-Modul zu interpretieren, indem sie die Dateiendung <code>.mjs</code>, das Feld <code>package.json</code> <a href="/de/nodejs/api/packages#type"><code>&quot;type&quot;</code></a> mit dem Wert <code>&quot;module&quot;</code> oder das Flag <a href="/de/nodejs/api/cli#input-typetype"><code>--input-type</code></a> mit dem Wert <code>&quot;module&quot;</code> verwenden. Dies sind explizite Kennzeichen dafür, dass Code als ES-Modul ausgeführt werden soll.</p><p>Umgekehrt können Autoren Node.js explizit anweisen, JavaScript als CommonJS zu interpretieren, indem sie die Dateiendung <code>.cjs</code>, das Feld <code>package.json</code> <a href="/de/nodejs/api/packages#type"><code>&quot;type&quot;</code></a> mit dem Wert <code>&quot;commonjs&quot;</code> oder das Flag <a href="/de/nodejs/api/cli#input-typetype"><code>--input-type</code></a> mit dem Wert <code>&quot;commonjs&quot;</code> verwenden.</p><p>Wenn Code explizite Kennzeichen für eines der Modulsysteme fehlen, untersucht Node.js den Quellcode eines Moduls, um nach ES-Modul-Syntax zu suchen. Wenn eine solche Syntax gefunden wird, führt Node.js den Code als ES-Modul aus; andernfalls führt er das Modul als CommonJS aus. Weitere Informationen finden Sie unter <a href="/de/nodejs/api/packages#determining-module-system">Bestimmung des Modulsystems</a>.</p><h2 id="packages" tabindex="-1">Pakete <a class="header-anchor" href="#packages" aria-label="Permalink to “Pakete”">​</a></h2><p>Dieser Abschnitt wurde nach <a href="/de/nodejs/api/packages">Module: Pakete</a> verschoben.</p><h2 id="import-specifiers" tabindex="-1"><code>import</code>-Spezifizierer <a class="header-anchor" href="#import-specifiers" aria-label="Permalink to “import-Spezifizierer”">​</a></h2><h3 id="terminology" tabindex="-1">Terminologie <a class="header-anchor" href="#terminology" aria-label="Permalink to “Terminologie”">​</a></h3><p>Der <em>Spezifizierer</em> einer <code>import</code>-Anweisung ist die Zeichenkette nach dem Schlüsselwort <code>from</code>, z. B. <code>&#39;node:path&#39;</code> in <code>import { sep } from &#39;node:path&#39;</code>. Spezifizierer werden auch in <code>export from</code>-Anweisungen und als Argument für einen <code>import()</code>-Ausdruck verwendet.</p><p>Es gibt drei Arten von Spezifizierern:</p><ul><li><em>Relative Spezifizierer</em> wie <code>&#39;./startup.js&#39;</code> oder <code>&#39;../config.mjs&#39;</code>. Sie verweisen auf einen Pfad relativ zum Speicherort der importierenden Datei. <em>Die Dateiendung ist hier immer notwendig.</em></li><li><em>Bare Spezifizierer</em> wie <code>&#39;some-package&#39;</code> oder <code>&#39;some-package/shuffle&#39;</code>. Sie können auf den Haupteinstiegspunkt eines Pakets über den Paketnamen oder auf ein bestimmtes Funktionsmodul innerhalb eines Pakets mit dem Paketnamen als Präfix gemäß den Beispielen verweisen. <em>Das Einfügen der Dateiendung ist nur notwendig für Pakete ohne ein <a href="packages.html#exports"><code>&quot;exports&quot;</code></a>-Feld.</em></li><li><em>Absolute Spezifizierer</em> wie <code>&#39;file:///opt/nodejs/config.js&#39;</code>. Sie verweisen direkt und explizit auf einen vollständigen Pfad.</li></ul><p>Bare-Spezifizierer-Auflösungen werden durch den <a href="/de/nodejs/api/esm#resolution-algorithm-specification">Node.js-Modulauflösungs- und -ladealgorithmus</a> behandelt. Alle anderen Spezifizierer-Auflösungen werden immer nur mit der standardmäßigen relativen <a href="https://url.spec.whatwg.org/" target="_blank" rel="noreferrer">URL</a>-Auflösungssemantik aufgelöst.</p><p>Wie in CommonJS kann auf Moduldateien innerhalb von Paketen zugegriffen werden, indem ein Pfad an den Paketnamen angehängt wird, es sei denn, die <a href="/de/nodejs/api/packages#nodejs-packagejson-field-definitions"><code>package.json</code></a> des Pakets enthält ein <a href="/de/nodejs/api/packages#exports"><code>&quot;exports&quot;</code></a>-Feld. In diesem Fall kann auf Dateien innerhalb von Paketen nur über die in <a href="/de/nodejs/api/packages#exports"><code>&quot;exports&quot;</code></a> definierten Pfade zugegriffen werden.</p><p>Einzelheiten zu diesen Paketauflösungsregeln, die für Bare-Spezifizierer in der Node.js-Modulauflösung gelten, finden Sie in der <a href="/de/nodejs/api/packages">Paketdokumentation</a>.</p><h3 id="mandatory-file-extensions" tabindex="-1">Obligatorische Dateiendungen <a class="header-anchor" href="#mandatory-file-extensions" aria-label="Permalink to “Obligatorische Dateiendungen”">​</a></h3><p>Eine Dateiendung muss angegeben werden, wenn das Schlüsselwort <code>import</code> verwendet wird, um relative oder absolute Spezifizierer aufzulösen. Verzeichnisindizes (z. B. <code>&#39;./startup/index.js&#39;</code>) müssen ebenfalls vollständig angegeben werden.</p><p>Dieses Verhalten entspricht dem Verhalten von <code>import</code> in Browserumgebungen, wenn von einem typisch konfigurierten Server ausgegangen wird.</p><h3 id="urls" tabindex="-1">URLs <a class="header-anchor" href="#urls" aria-label="Permalink to “URLs”">​</a></h3><p>ES-Module werden als URLs aufgelöst und zwischengespeichert. Dies bedeutet, dass Sonderzeichen <a href="/de/nodejs/api/url#percent-encoding-in-urls">prozentcodiert</a> werden müssen, z. B. <code>#</code> mit <code>%23</code> und <code>?</code> mit <code>%3F</code>.</p><p>Die URL-Schemas <code>file:</code>, <code>node:</code> und <code>data:</code> werden unterstützt. Ein Spezifizierer wie <code>&#39;https://example.com/app.js&#39;</code> wird in Node.js nicht nativ unterstützt, es sei denn, es wird ein <a href="/de/nodejs/api/module#import-from-https">benutzerdefinierter HTTPS-Loader</a> verwendet.</p><h4 id="file-urls" tabindex="-1"><code>file:</code>-URLs <a class="header-anchor" href="#file-urls" aria-label="Permalink to “file:-URLs”">​</a></h4><p>Module werden mehrmals geladen, wenn der <code>import</code>-Spezifizierer, der zur Auflösung verwendet wird, eine andere Query oder ein anderes Fragment hat.</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;./foo.mjs?query=1&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// lädt ./foo.mjs mit Query &quot;?query=1&quot;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;./foo.mjs?query=2&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// lädt ./foo.mjs mit Query &quot;?query=2&quot;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>Das Volume-Root kann über <code>/</code>, <code>//</code> oder <code>file:///</code> referenziert werden. Angesichts der Unterschiede zwischen der <a href="https://url.spec.whatwg.org/" target="_blank" rel="noreferrer">URL</a> und der Pfadauflösung (z. B. Details zur Prozentcodierung) wird empfohlen, <a href="/de/nodejs/api/url#urlpathtofileurlpath-options">url.pathToFileURL</a> zu verwenden, wenn ein Pfad importiert wird.</p><h4 id="data-imports" tabindex="-1"><code>data:</code>-Imports <a class="header-anchor" href="#data-imports" aria-label="Permalink to “data:-Imports”">​</a></h4><p><strong>Hinzugefügt in: v12.10.0</strong></p><p><a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/Data_URIs" target="_blank" rel="noreferrer"><code>data:</code>-URLs</a> werden für den Import mit den folgenden MIME-Typen unterstützt:</p><ul><li><code>text/javascript</code> für ES-Module</li><li><code>application/json</code> für JSON</li><li><code>application/wasm</code> für Wasm</li></ul><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;data:text/javascript,console.log(&quot;hello!&quot;);&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> _ </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;data:application/json,&quot;world!&quot;&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> with</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { type: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;json&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> };</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><code>data:</code>-URLs lösen nur <a href="/de/nodejs/api/esm#terminology">Bare Specifiers</a> für Builtin-Module und <a href="/de/nodejs/api/esm#terminology">Absolute Specifiers</a> auf. Das Auflösen von <a href="/de/nodejs/api/esm#terminology">Relative Specifiers</a> funktioniert nicht, da <code>data:</code> kein <a href="https://url.spec.whatwg.org/#special-scheme" target="_blank" rel="noreferrer">spezielles Schema</a> ist. Beispielsweise schlägt der Versuch, <code>./foo</code> von <code>data:text/javascript,import &quot;./foo&quot;;</code> zu laden, fehl, da es kein Konzept der relativen Auflösung für <code>data:</code>-URLs gibt.</p><h4 id="node-imports" tabindex="-1"><code>node:</code>-Importe <a class="header-anchor" href="#node-imports" aria-label="Permalink to “node:-Importe”">​</a></h4><div class="info custom-block"><p class="custom-block-title">[Historie]</p><table tabindex="0"><thead><tr><th>Version</th><th>Änderungen</th></tr></thead><tbody><tr><td>v16.0.0, v14.18.0</td><td><code>node:</code>-Importunterstützung zu <code>require(...)</code> hinzugefügt.</td></tr><tr><td>v14.13.1, v12.20.0</td><td>Hinzugefügt in: v14.13.1, v12.20.0</td></tr></tbody></table></div><p><code>node:</code>-URLs werden als alternative Methode zum Laden von Node.js-integrierten Modulen unterstützt. Dieses URL-Schema ermöglicht es, integrierte Module über gültige absolute URL-Strings zu referenzieren.</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> fs </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;node:fs/promises&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h2 id="import-attributes" tabindex="-1">Importattribute <a class="header-anchor" href="#import-attributes" aria-label="Permalink to “Importattribute”">​</a></h2><div class="info custom-block"><p class="custom-block-title">[Historie]</p><table tabindex="0"><thead><tr><th>Version</th><th>Änderungen</th></tr></thead><tbody><tr><td>v21.0.0, v20.10.0, v18.20.0</td><td>Umstellung von Import Assertions auf Import Attributes.</td></tr><tr><td>v17.1.0, v16.14.0</td><td>Hinzugefügt in: v17.1.0, v16.14.0</td></tr></tbody></table></div><div class="tip custom-block"><p class="custom-block-title">[Stabil: 2 - Stabil]</p><p><a href="/de/nodejs/api/documentation#stability-index">Stabil: 2</a> <a href="/de/nodejs/api/documentation#stability-index">Stabilität: 2</a> - Stabil</p></div><p><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/import/with" target="_blank" rel="noreferrer">Importattribute</a> sind eine Inline-Syntax für Modulimportanweisungen, um neben dem Modulbezeichner weitere Informationen zu übermitteln.</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> fooData </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;./foo.json&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> with</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { type: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;json&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> };</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">default</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">barData</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  await</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;./bar.json&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, { with: { type: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;json&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> } });</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>Node.js unterstützt nur das Attribut <code>type</code>, für das es die folgenden Werte unterstützt:</p><table tabindex="0"><thead><tr><th>Attribut <code>type</code></th><th>Benötigt für</th></tr></thead><tbody><tr><td><code>&#39;json&#39;</code></td><td><a href="/de/nodejs/api/esm#json-modules">JSON-Module</a></td></tr><tr><td>Das Attribut <code>type: &#39;json&#39;</code> ist beim Importieren von JSON-Modulen obligatorisch.</td><td></td></tr></tbody></table><h2 id="built-in-modules" tabindex="-1">Integrierte Module <a class="header-anchor" href="#built-in-modules" aria-label="Permalink to “Integrierte Module”">​</a></h2><p><a href="/de/nodejs/api/modules#built-in-modules">Integrierte Module</a> stellen benannte Exporte ihrer öffentlichen API bereit. Ein Standardexport wird ebenfalls bereitgestellt, der dem Wert der CommonJS-Exporte entspricht. Der Standardexport kann unter anderem verwendet werden, um die benannten Exporte zu ändern. Benannte Exporte von integrierten Modulen werden nur durch Aufrufen von <a href="/de/nodejs/api/module#modulesyncbuiltinesmexports"><code>module.syncBuiltinESMExports()</code></a> aktualisiert.</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> EventEmitter </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;node:events&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> e</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> EventEmitter</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { readFile } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;node:fs&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">readFile</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;./foo.txt&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">err</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">source</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (err) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(err);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">else</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(source);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> fs, { readFileSync } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;node:fs&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { syncBuiltinESMExports } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;node:module&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { Buffer } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;node:buffer&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">fs.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">readFileSync</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Buffer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;Hallo, ESM&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">syncBuiltinESMExports</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">fs.readFileSync </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">===</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> readFileSync;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h2 id="import-expressions" tabindex="-1"><code>import()</code>-Ausdrücke <a class="header-anchor" href="#import-expressions" aria-label="Permalink to “import()-Ausdrücke”">​</a></h2><p><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/import" target="_blank" rel="noreferrer">Dynamisches <code>import()</code></a> wird sowohl in CommonJS- als auch in ES-Modulen unterstützt. In CommonJS-Modulen kann es verwendet werden, um ES-Module zu laden.</p><h2 id="importmeta" tabindex="-1"><code>import.meta</code> <a class="header-anchor" href="#importmeta" aria-label="Permalink to “import.meta”">​</a></h2><ul><li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noreferrer">&lt;Object&gt;</a></li></ul><p>Die Meta-Eigenschaft <code>import.meta</code> ist ein <code>Object</code>, das die folgenden Eigenschaften enthält. Sie wird nur in ES-Modulen unterstützt.</p><h3 id="importmetadirname" tabindex="-1"><code>import.meta.dirname</code> <a class="header-anchor" href="#importmetadirname" aria-label="Permalink to “import.meta.dirname”">​</a></h3><p><strong>Hinzugefügt in: v21.2.0, v20.11.0</strong></p><div class="warning custom-block"><p class="custom-block-title">[Stable: 1 - Experimental]</p><p><a href="/de/nodejs/api/documentation#stability-index">Stable: 1</a> <a href="/de/nodejs/api/documentation#stability-index">Stabilität: 1</a>.2 - Release Candidate</p></div><ul><li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> Der Verzeichnisname des aktuellen Moduls. Dies ist dasselbe wie <a href="/de/nodejs/api/path#pathdirnamepath"><code>path.dirname()</code></a> von <a href="/de/nodejs/api/esm#importmetafilename"><code>import.meta.filename</code></a>.</li></ul><h3 id="importmetafilename" tabindex="-1"><code>import.meta.filename</code> <a class="header-anchor" href="#importmetafilename" aria-label="Permalink to “import.meta.filename”">​</a></h3><p><strong>Hinzugefügt in: v21.2.0, v20.11.0</strong></p><div class="warning custom-block"><p class="custom-block-title">[Stable: 1 - Experimental]</p><p><a href="/de/nodejs/api/documentation#stability-index">Stable: 1</a> <a href="/de/nodejs/api/documentation#stability-index">Stabilität: 1</a>.2 - Release Candidate</p></div><ul><li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> Der vollständige absolute Pfad und Dateiname des aktuellen Moduls, wobei Symlinks aufgelöst werden.</li><li>Dies ist dasselbe wie <a href="/de/nodejs/api/url#urlfileurltopathurl-options"><code>url.fileURLToPath()</code></a> von <a href="/de/nodejs/api/esm#importmetaurl"><code>import.meta.url</code></a>.</li></ul><h3 id="importmetaurl" tabindex="-1"><code>import.meta.url</code> <a class="header-anchor" href="#importmetaurl" aria-label="Permalink to “import.meta.url”">​</a></h3><ul><li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> Die absolute <code>file:</code>-URL des Moduls.</li></ul><p>Dies ist genau so definiert wie in Browsern, die die URL der aktuellen Moduldatei bereitstellen.</p><p>Dies ermöglicht nützliche Muster wie das relative Laden von Dateien:</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { readFileSync } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;node:fs&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> buffer</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> readFileSync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> URL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;./data.proto&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">meta</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.url));</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="importmetaresolvespecifier" tabindex="-1"><code>import.meta.resolve(specifier)</code> <a class="header-anchor" href="#importmetaresolvespecifier" aria-label="Permalink to “import.meta.resolve(specifier)”">​</a></h3><div class="info custom-block"><p class="custom-block-title">[History]</p><table tabindex="0"><thead><tr><th>Version</th><th>Changes</th></tr></thead><tbody><tr><td>v20.6.0, v18.19.0</td><td>Nicht mehr hinter dem <code>--experimental-import-meta-resolve</code> CLI-Flag, mit Ausnahme des nicht standardmäßigen <code>parentURL</code>-Parameters.</td></tr><tr><td>v20.6.0, v18.19.0</td><td>Diese API wirft keine Ausnahme mehr, wenn <code>file:</code>-URLs als Ziel verwendet werden, die keiner existierenden Datei im lokalen Dateisystem entsprechen.</td></tr><tr><td>v20.0.0, v18.19.0</td><td>Diese API gibt jetzt synchron einen String anstelle eines Promise zurück.</td></tr><tr><td>v16.2.0, v14.18.0</td><td>Unterstützung für WHATWG <code>URL</code>-Objekt zum <code>parentURL</code>-Parameter hinzugefügt.</td></tr><tr><td>v13.9.0, v12.16.2</td><td>Hinzugefügt in: v13.9.0, v12.16.2</td></tr></tbody></table></div><div class="warning custom-block"><p class="custom-block-title">[Stable: 1 - Experimental]</p><p><a href="/de/nodejs/api/documentation#stability-index">Stable: 1</a> <a href="/de/nodejs/api/documentation#stability-index">Stabilität: 1</a>.2 - Release Candidate</p></div><ul><li><code>specifier</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> Der Modul-Spezifizierer, der relativ zum aktuellen Modul aufgelöst werden soll.</li><li>Returns: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> Die absolute URL-Zeichenkette, zu der der Spezifizierer aufgelöst würde.</li></ul><p><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/import.meta/resolve" target="_blank" rel="noreferrer"><code>import.meta.resolve</code></a> ist eine modulrelative Auflösungsfunktion, die auf jedes Modul beschränkt ist und die URL-Zeichenkette zurückgibt.</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> dependencyAsset</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">meta</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">resolve</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;component-lib/asset.css&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// file:///app/node_modules/component-lib/asset.css</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">meta</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">resolve</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;./dep.js&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// file:///app/dep.js</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>Alle Funktionen der Node.js-Modulauflösung werden unterstützt. Abhängigkeitsauflösungen unterliegen den zulässigen Exportauflösungen innerhalb des Pakets.</p><p><strong>Vorbehalte</strong>:</p><ul><li>Dies kann zu synchronen Dateisystemoperationen führen, die sich ähnlich wie <code>require.resolve</code> auf die Leistung auswirken können.</li><li>Diese Funktion ist in benutzerdefinierten Ladeprogrammen nicht verfügbar (sie würde zu einem Deadlock führen).</li></ul><p><strong>Nicht-standardmäßige API</strong>:</p><p>Bei Verwendung des <code>--experimental-import-meta-resolve</code>-Flags akzeptiert diese Funktion ein zweites Argument:</p><ul><li><code>parent</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="/de/nodejs/api/url#the-whatwg-url-api">&lt;URL&gt;</a> Eine optionale absolute übergeordnete Modul-URL, von der aus aufgelöst werden soll. <strong>Standard:</strong> <code>import.meta.url</code></li></ul><h2 id="interoperability-with-commonjs" tabindex="-1">Interoperabilität mit CommonJS <a class="header-anchor" href="#interoperability-with-commonjs" aria-label="Permalink to “Interoperabilität mit CommonJS”">​</a></h2><h3 id="import-statements" tabindex="-1"><code>import</code>-Anweisungen <a class="header-anchor" href="#import-statements" aria-label="Permalink to “import-Anweisungen”">​</a></h3><p>Eine <code>import</code>-Anweisung kann auf ein ES-Modul oder ein CommonJS-Modul verweisen. <code>import</code>-Anweisungen sind nur in ES-Modulen zulässig, aber dynamische [<code>import()</code>]-Ausdrücke (/de/nodejs/api/esm#import-expressions) werden in CommonJS zum Laden von ES-Modulen unterstützt.</p><p>Beim Importieren von <a href="/de/nodejs/api/esm#commonjs-namespaces">CommonJS-Modulen</a> wird das <code>module.exports</code>-Objekt als Standardexport bereitgestellt. Benannte Exporte können verfügbar sein, die durch statische Analyse als Komfortfunktion für eine bessere Ökosystemkompatibilität bereitgestellt werden.</p><h3 id="require" tabindex="-1"><code>require</code> <a class="header-anchor" href="#require" aria-label="Permalink to “require”">​</a></h3><p>Das CommonJS-Modul <code>require</code> unterstützt derzeit nur das Laden von synchronen ES-Modulen (d. h. ES-Modulen, die kein Top-Level-<code>await</code> verwenden).</p><p>Weitere Informationen finden Sie unter <a href="/de/nodejs/api/modules#loading-ecmascript-modules-using-require">Laden von ECMAScript-Modulen mit <code>require()</code></a>.</p><h3 id="commonjs-namespaces" tabindex="-1">CommonJS-Namensräume <a class="header-anchor" href="#commonjs-namespaces" aria-label="Permalink to “CommonJS-Namensräume”">​</a></h3><div class="info custom-block"><p class="custom-block-title">[Verlauf]</p><table tabindex="0"><thead><tr><th>Version</th><th>Änderungen</th></tr></thead><tbody><tr><td>v23.0.0</td><td>Export-Marker <code>&#39;module.exports&#39;</code> zu CJS-Namensräumen hinzugefügt.</td></tr><tr><td>v14.13.0</td><td>Hinzugefügt in: v14.13.0</td></tr></tbody></table></div><p>CommonJS-Module bestehen aus einem <code>module.exports</code>-Objekt, das einen beliebigen Typ haben kann.</p><p>Um dies zu unterstützen, wird beim Importieren von CommonJS aus einem ECMAScript-Modul ein Namespace-Wrapper für das CommonJS-Modul erstellt, der immer einen <code>default</code>-Export-Schlüssel bereitstellt, der auf den CommonJS-<code>module.exports</code>-Wert verweist.</p><p>Darüber hinaus wird eine heuristische statische Analyse des Quelltextes des CommonJS-Moduls durchgeführt, um eine bestmögliche statische Liste von Exporten zu erhalten, die im Namespace von Werten in <code>module.exports</code> bereitgestellt werden sollen. Dies ist notwendig, da diese Namespaces vor der Auswertung des CJS-Moduls erstellt werden müssen.</p><p>Diese CommonJS-Namespace-Objekte stellen auch den <code>default</code>-Export als benannten Export <code>&#39;module.exports&#39;</code> bereit, um eindeutig anzugeben, dass ihre Darstellung in CommonJS diesen Wert und nicht den Namespace-Wert verwendet. Dies spiegelt die Semantik der Behandlung des Exportnamens <code>&#39;module.exports&#39;</code> in der Interop-Unterstützung von <a href="/de/nodejs/api/modules#loading-ecmascript-modules-using-require"><code>require(esm)</code></a> wider.</p><p>Beim Importieren eines CommonJS-Moduls kann es zuverlässig mit dem ES-Modul-Standardimport oder seiner entsprechenden Syntax-Vereinfachung importiert werden:</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">default</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> as</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> cjs } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;cjs&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Identisch mit dem obigen</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> cjsSugar </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;cjs&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(cjs);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(cjs </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">===</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> cjsSugar);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Gibt aus:</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//   &lt;module.exports&gt;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//   true</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>Dieses exotische Modul-Namespace-Objekt kann direkt beobachtet werden, entweder bei Verwendung von <code>import * as m from &#39;cjs&#39;</code> oder einem dynamischen Import:</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> *</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> as</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> m </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;cjs&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(m);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(m </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">===</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;cjs&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">));</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Gibt aus:</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//   [Module] { default: &lt;module.exports&gt;, &#39;module.exports&#39;: &lt;module.exports&gt; }</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//   true</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>Für eine bessere Kompatibilität mit der bestehenden Verwendung im JS-Ökosystem versucht Node.js zusätzlich, die benannten CommonJS-Exporte jedes importierten CommonJS-Moduls zu ermitteln, um sie als separate ES-Modulexporte mithilfe eines statischen Analyseprozesses bereitzustellen.</p><p>Betrachten Sie beispielsweise ein CommonJS-Modul, das wie folgt geschrieben ist:</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// cjs.cjs</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">exports</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.name </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;exported&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>Das vorhergehende Modul unterstützt benannte Importe in ES-Modulen:</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { name } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;./cjs.cjs&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(name);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Gibt aus: &#39;exported&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> cjs </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;./cjs.cjs&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(cjs);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Gibt aus: { name: &#39;exported&#39; }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> *</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> as</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> m </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;./cjs.cjs&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(m);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Gibt aus:</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//   [Module] {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//     default: { name: &#39;exported&#39; },</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//     &#39;module.exports&#39;: { name: &#39;exported&#39; },</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//     name: &#39;exported&#39;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//   }</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p>Wie aus dem letzten Beispiel des protokollierten exotischen Modul-Namespace-Objekts ersichtlich ist, wird der <code>name</code>-Export aus dem <code>module.exports</code>-Objekt kopiert und direkt im ES-Modul-Namespace festgelegt, wenn das Modul importiert wird.</p><p>Live-Binding-Aktualisierungen oder neue Exporte, die zu <code>module.exports</code> hinzugefügt werden, werden für diese benannten Exporte nicht erkannt.</p><p>Die Erkennung benannter Exporte basiert auf allgemeinen Syntaxmustern, erkennt aber nicht immer benannte Exporte korrekt. In diesen Fällen kann die Verwendung der oben beschriebenen Standardimportform eine bessere Option sein.</p><p>Die Erkennung benannter Exporte deckt viele gängige Exportmuster, Reexportmuster sowie Build-Tool- und Transpiler-Ausgaben ab. Die genaue implementierte Semantik finden Sie unter <a href="https://github.com/nodejs/cjs-module-lexer/tree/1.2.2" target="_blank" rel="noreferrer">cjs-module-lexer</a>.</p><h3 id="differences-between-es-modules-and-commonjs" tabindex="-1">Unterschiede zwischen ES-Modulen und CommonJS <a class="header-anchor" href="#differences-between-es-modules-and-commonjs" aria-label="Permalink to “Unterschiede zwischen ES-Modulen und CommonJS”">​</a></h3><h4 id="no-require-exports-or-moduleexports" tabindex="-1">Kein <code>require</code>, <code>exports</code> oder <code>module.exports</code> <a class="header-anchor" href="#no-require-exports-or-moduleexports" aria-label="Permalink to “Kein require, exports oder module.exports”">​</a></h4><p>In den meisten Fällen kann das ES-Modul <code>import</code> verwendet werden, um CommonJS-Module zu laden.</p><p>Bei Bedarf kann eine <code>require</code>-Funktion innerhalb eines ES-Moduls mit <a href="/de/nodejs/api/module#modulecreaterequirefilename"><code>module.createRequire()</code></a> erstellt werden.</p><h4 id="no-__filename-or-__dirname" tabindex="-1">Kein <code>__filename</code> oder <code>__dirname</code> <a class="header-anchor" href="#no-__filename-or-__dirname" aria-label="Permalink to “Kein __filename oder __dirname”">​</a></h4><p>Diese CommonJS-Variablen sind in ES-Modulen nicht verfügbar.</p><p><code>__filename</code>- und <code>__dirname</code>-Anwendungsfälle können über <a href="/de/nodejs/api/esm#importmetafilename"><code>import.meta.filename</code></a> und <a href="/de/nodejs/api/esm#importmetadirname"><code>import.meta.dirname</code></a> repliziert werden.</p><h4 id="no-addon-loading" tabindex="-1">Kein Addon-Laden <a class="header-anchor" href="#no-addon-loading" aria-label="Permalink to “Kein Addon-Laden”">​</a></h4><p><a href="/de/nodejs/api/addons">Addons</a> werden derzeit nicht mit ES-Modulimporten unterstützt.</p><p>Sie können stattdessen mit <a href="/de/nodejs/api/module#modulecreaterequirefilename"><code>module.createRequire()</code></a> oder <a href="/de/nodejs/api/process#processdlopenmodule-filename-flags"><code>process.dlopen</code></a> geladen werden.</p><h4 id="no-requireresolve" tabindex="-1">Kein <code>require.resolve</code> <a class="header-anchor" href="#no-requireresolve" aria-label="Permalink to “Kein require.resolve”">​</a></h4><p>Relative Auflösung kann über <code>new URL(&#39;./local&#39;, import.meta.url)</code> behandelt werden.</p><p>Für einen vollständigen <code>require.resolve</code>-Ersatz gibt es die <a href="/de/nodejs/api/esm#importmetaresolvespecifier">import.meta.resolve</a>-API.</p><p>Alternativ kann <code>module.createRequire()</code> verwendet werden.</p><h4 id="no-node_path" tabindex="-1">Kein <code>NODE_PATH</code> <a class="header-anchor" href="#no-node_path" aria-label="Permalink to “Kein NODE_PATH”">​</a></h4><p><code>NODE_PATH</code> ist nicht Teil der Auflösung von <code>import</code>-Spezifizierern. Bitte verwenden Sie Symlinks, wenn dieses Verhalten gewünscht ist.</p><h4 id="no-requireextensions" tabindex="-1">Kein <code>require.extensions</code> <a class="header-anchor" href="#no-requireextensions" aria-label="Permalink to “Kein require.extensions”">​</a></h4><p><code>require.extensions</code> wird von <code>import</code> nicht verwendet. Module-Customization-Hooks können einen Ersatz bieten.</p><h4 id="no-requirecache" tabindex="-1">Kein <code>require.cache</code> <a class="header-anchor" href="#no-requirecache" aria-label="Permalink to “Kein require.cache”">​</a></h4><p><code>require.cache</code> wird von <code>import</code> nicht verwendet, da der ES-Modul-Loader einen eigenen separaten Cache hat.</p><h2 id="json-modules" tabindex="-1">JSON-Module <a class="header-anchor" href="#json-modules" aria-label="Permalink to “JSON-Module”">​</a></h2><div class="info custom-block"><p class="custom-block-title">[Verlauf]</p><table tabindex="0"><thead><tr><th>Version</th><th>Änderungen</th></tr></thead><tbody><tr><td>v23.1.0</td><td>JSON-Module sind nicht mehr experimentell.</td></tr></tbody></table></div><div class="tip custom-block"><p class="custom-block-title">[Stabil: 2 - Stabil]</p><p><a href="/de/nodejs/api/documentation#stability-index">Stabil: 2</a> <a href="/de/nodejs/api/documentation#stability-index">Stabilität: 2</a> - Stabil</p></div><p>Auf JSON-Dateien kann mit <code>import</code> verwiesen werden:</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> packageConfig </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;./package.json&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> with</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { type: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;json&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> };</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>Die <code>with { type: &#39;json&#39; }</code>-Syntax ist obligatorisch; siehe <a href="/de/nodejs/api/esm#import-attributes">Import-Attribute</a>.</p><p>Das importierte JSON stellt nur einen <code>default</code>-Export bereit. Es gibt keine Unterstützung für benannte Exporte. Es wird ein Cache-Eintrag im CommonJS-Cache erstellt, um Duplikate zu vermeiden. Das gleiche Objekt wird in CommonJS zurückgegeben, wenn das JSON-Modul bereits über denselben Pfad importiert wurde.</p><h2 id="wasm-modules" tabindex="-1">Wasm-Module <a class="header-anchor" href="#wasm-modules" aria-label="Permalink to “Wasm-Module”">​</a></h2><div class="warning custom-block"><p class="custom-block-title">[Stabil: 1 - Experimentell]</p><p><a href="/de/nodejs/api/documentation#stability-index">Stabil: 1</a> <a href="/de/nodejs/api/documentation#stability-index">Stabilität: 1</a> - Experimentell</p></div><p>Das Importieren von WebAssembly-Modulen wird unter dem Flag <code>--experimental-wasm-modules</code> unterstützt, wodurch alle <code>.wasm</code>-Dateien als normale Module importiert werden können und gleichzeitig ihre Modulimporte unterstützt werden.</p><p>Diese Integration entspricht dem <a href="https://github.com/webassembly/esm-integration" target="_blank" rel="noreferrer">ES Module Integration Proposal for WebAssembly</a>.</p><p>Zum Beispiel ein <code>index.mjs</code> mit:</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> *</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> as</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> M </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;./module.wasm&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">M</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>ausgeführt unter:</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">node</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --experimental-wasm-modules</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> index.mjs</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>würde die Exportschnittstelle für die Instanziierung von <code>module.wasm</code> bereitstellen.</p><h2 id="top-level-await" tabindex="-1">Top-Level <code>await</code> <a class="header-anchor" href="#top-level-await" aria-label="Permalink to “Top-Level await”">​</a></h2><p><strong>Hinzugefügt in: v14.8.0</strong></p><p>Das Schlüsselwort <code>await</code> kann im Top-Level-Body eines ECMAScript-Moduls verwendet werden.</p><p>Annahme einer <code>a.mjs</code> mit</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> five</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> Promise</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">resolve</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">5</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>Und einer <code>b.mjs</code> mit</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { five } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;./a.mjs&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(five); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Loggt \`5\`</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">node</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> b.mjs</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # funktioniert</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>Wenn ein Top-Level-<code>await</code>-Ausdruck niemals aufgelöst wird, beendet sich der <code>node</code>-Prozess mit dem <a href="/de/nodejs/api/process#exit-codes">Statuscode</a> <code>13</code>.</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { spawn } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;node:child_process&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { execPath } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;node:process&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">spawn</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(execPath, [</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  &#39;--input-type=module&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  &#39;--eval&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // Niemals auflösendes Promise:</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  &#39;await new Promise(() =&gt; {})&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">once</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;exit&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">code</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(code); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Loggt \`13\`</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h2 id="loaders" tabindex="-1">Loader <a class="header-anchor" href="#loaders" aria-label="Permalink to “Loader”">​</a></h2><p>Die ehemalige Loader-Dokumentation befindet sich jetzt unter <a href="/de/nodejs/api/module#customization-hooks">Module: Anpassungshooks</a>.</p><h2 id="resolution-and-loading-algorithm" tabindex="-1">Auflösungs- und Ladealgorithmus <a class="header-anchor" href="#resolution-and-loading-algorithm" aria-label="Permalink to “Auflösungs- und Ladealgorithmus”">​</a></h2><h3 id="features" tabindex="-1">Merkmale <a class="header-anchor" href="#features" aria-label="Permalink to “Merkmale”">​</a></h3><p>Der Standard-Resolver hat die folgenden Eigenschaften:</p><ul><li>Dateibasierte URL-Auflösung, wie sie von ES-Modulen verwendet wird</li><li>Relative und absolute URL-Auflösung</li><li>Keine Standarderweiterungen</li><li>Keine Ordner-Hauptdateien</li><li>Bare-Specifier-Paketauflösungssuche über node_modules</li><li>Schlägt nicht bei unbekannten Erweiterungen oder Protokollen fehl</li><li>Kann optional einen Hinweis auf das Format für die Ladephase geben</li></ul><p>Der Standard-Loader hat die folgenden Eigenschaften:</p><ul><li>Unterstützung für das Laden von integrierten Modulen über <code>node:</code>-URLs</li><li>Unterstützung für das Laden von &quot;Inline&quot;-Modulen über <code>data:</code>-URLs</li><li>Unterstützung für das Laden von <code>file:</code>-Modulen</li><li>Schlägt bei jedem anderen URL-Protokoll fehl</li><li>Schlägt bei unbekannten Erweiterungen für das Laden von <code>file:</code> fehl (unterstützt nur <code>.cjs</code>, <code>.js</code> und <code>.mjs</code>)</li></ul><h3 id="resolution-algorithm" tabindex="-1">Auflösungsalgorithmus <a class="header-anchor" href="#resolution-algorithm" aria-label="Permalink to “Auflösungsalgorithmus”">​</a></h3><p>Der Algorithmus zum Laden eines ES-Modulspezifizierers wird durch die unten stehende <strong>ESM_RESOLVE</strong>-Methode gegeben. Sie gibt die aufgelöste URL für einen Modulspezifizierer relativ zu einer parentURL zurück.</p><p>Der Auflösungsalgorithmus bestimmt die vollständig aufgelöste URL für einen Modul-Load zusammen mit seinem vorgeschlagenen Modulformat. Der Auflösungsalgorithmus bestimmt nicht, ob das Protokoll der aufgelösten URL geladen werden kann oder ob die Dateiendungen zulässig sind. Stattdessen werden diese Validierungen von Node.js während der Ladephase angewendet (z. B. wenn es aufgefordert wurde, eine URL zu laden, die ein Protokoll hat, das nicht <code>file:</code>, <code>data:</code> oder <code>node:</code> ist).</p><p>Der Algorithmus versucht auch, das Format der Datei basierend auf der Erweiterung zu bestimmen (siehe <strong>ESM_FILE_FORMAT</strong>-Algorithmus unten). Wenn er die Dateiendung nicht erkennt (z. B. wenn sie nicht <code>.mjs</code>, <code>.cjs</code> oder <code>.json</code> ist), wird das Format <code>undefined</code> zurückgegeben, was während der Ladephase einen Fehler auslöst.</p><p>Der Algorithmus zur Bestimmung des Modulformats einer aufgelösten URL wird durch <strong>ESM_FILE_FORMAT</strong> bereitgestellt, das das eindeutige Modulformat für jede Datei zurückgibt. Das Format <em>&quot;module&quot;</em> wird für ein ECMAScript-Modul zurückgegeben, während das Format <em>&quot;commonjs&quot;</em> verwendet wird, um das Laden über den Legacy-CommonJS-Loader anzuzeigen. Zusätzliche Formate wie <em>&quot;addon&quot;</em> können in zukünftigen Updates erweitert werden.</p><p>In den folgenden Algorithmen werden alle Subroutinenfehler als Fehler dieser Top-Level-Routinen weitergegeben, sofern nicht anders angegeben.</p><p><em>defaultConditions</em> ist das bedingte Umgebungsnamen-Array <code>[&quot;node&quot;, &quot;import&quot;]</code>.</p><p>Der Resolver kann die folgenden Fehler auslösen:</p><ul><li><em>Ungültiger Modulspezifizierer</em>: Der Modulspezifizierer ist eine ungültige URL, ein Paketname oder ein Paketunterpfad-Spezifizierer.</li><li><em>Ungültige Paketkonfiguration</em>: Die package.json-Konfiguration ist ungültig oder enthält eine ungültige Konfiguration.</li><li><em>Ungültiges Paketziel</em>: Paket-Exporte oder -Importe definieren ein Zielmodul für das Paket, das ein ungültiger Typ oder ein ungültiges String-Ziel ist.</li><li><em>Paketpfad nicht exportiert</em>: Paket-Exporte definieren oder erlauben keinen Zielunterpfad im Paket für das angegebene Modul.</li><li><em>Paketimport nicht definiert</em>: Paketimporte definieren den Spezifizierer nicht.</li><li><em>Modul nicht gefunden</em>: Das angeforderte Paket oder Modul existiert nicht.</li><li><em>Nicht unterstützter Verzeichnisimport</em>: Der aufgelöste Pfad entspricht einem Verzeichnis, das kein unterstütztes Ziel für Modulimporte ist.</li></ul><h3 id="resolution-algorithm-specification" tabindex="-1">Spezifikation des Auflösungsalgorithmus <a class="header-anchor" href="#resolution-algorithm-specification" aria-label="Permalink to “Spezifikation des Auflösungsalgorithmus”">​</a></h3><p><strong>ESM_RESOLVE</strong>(<em>specifier</em>, <em>parentURL</em>)</p><p><strong>PACKAGE_RESOLVE</strong>(<em>packageSpecifier</em>, <em>parentURL</em>)</p><p><strong>PACKAGE_SELF_RESOLVE</strong>(<em>packageName</em>, <em>packageSubpath</em>, <em>parentURL</em>)</p><p><strong>PACKAGE_EXPORTS_RESOLVE</strong>(<em>packageURL</em>, <em>subpath</em>, <em>exports</em>, <em>conditions</em>)</p><p><strong>PACKAGE_IMPORTS_RESOLVE</strong>(<em>specifier</em>, <em>parentURL</em>, <em>conditions</em>)</p><p><strong>PACKAGE_IMPORTS_EXPORTS_RESOLVE</strong>(<em>matchKey</em>, <em>matchObj</em>, <em>packageURL</em>, <em>isImports</em>, <em>conditions</em>)</p><p><strong>PATTERN_KEY_COMPARE</strong>(<em>keyA</em>, <em>keyB</em>)</p><p><strong>PACKAGE_TARGET_RESOLVE</strong>(<em>packageURL</em>, <em>target</em>, <em>patternMatch</em>, <em>isImports</em>, <em>conditions</em>)</p><p><strong>ESM_FILE_FORMAT</strong>(<em>url</em>)</p><p><strong>LOOKUP_PACKAGE_SCOPE</strong>(<em>url</em>)</p><p><strong>READ_PACKAGE_JSON</strong>(<em>packageURL</em>)</p><p><strong>DETECT_MODULE_SYNTAX</strong>(<em>source</em>)</p><h3 id="customizing-esm-specifier-resolution-algorithm" tabindex="-1">Anpassung des ESM-Spezifizierer-Auflösungsalgorithmus <a class="header-anchor" href="#customizing-esm-specifier-resolution-algorithm" aria-label="Permalink to “Anpassung des ESM-Spezifizierer-Auflösungsalgorithmus”">​</a></h3><p><a href="/de/nodejs/api/module#customization-hooks">Modul-Anpassungshooks</a> bieten einen Mechanismus zur Anpassung des ESM-Spezifizierer-Auflösungsalgorithmus. Ein Beispiel, das die Auflösung im CommonJS-Stil für ESM-Spezifizierer bietet, ist <a href="https://github.com/nodejs/loaders-test/tree/main/commonjs-extension-resolution-loader" target="_blank" rel="noreferrer">commonjs-extension-resolution-loader</a>.</p>`,191)])}var s=e(a,[[`render`,o]]);export{i as __pageData,s as default};