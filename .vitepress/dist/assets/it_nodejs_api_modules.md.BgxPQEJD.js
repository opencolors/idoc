import{__plugin_vue_export_helper_default as e,createElementBlock as t,createStaticVNode as n,openBlock as r}from"./chunks/plugin-vue_export-helper.Bts1mPc7.js";const i=JSON.parse(`{"title":"Documentazione Node.js - Moduli","description":"Esplora la documentazione di Node.js sui moduli, inclusi CommonJS, moduli ES e come gestire le dipendenze e la risoluzione dei moduli.","frontmatter":{"title":"Documentazione Node.js - Moduli","description":"Esplora la documentazione di Node.js sui moduli, inclusi CommonJS, moduli ES e come gestire le dipendenze e la risoluzione dei moduli.","head":[["meta",{"name":"og:title","content":"Documentazione Node.js - Moduli | Node.js - iDoc.dev"}],["meta",{"name":"og:description","content":"Esplora la documentazione di Node.js sui moduli, inclusi CommonJS, moduli ES e come gestire le dipendenze e la risoluzione dei moduli."}],["meta",{"name":"twitter:title","content":"Documentazione Node.js - Moduli | Node.js - iDoc.dev"}],["meta",{"name":"twitter:description","content":"Esplora la documentazione di Node.js sui moduli, inclusi CommonJS, moduli ES e come gestire le dipendenze e la risoluzione dei moduli."}],["link",{"rel":"canonical","href":"https://idoc.dev/it/nodejs/api/modules"}],["meta",{"property":"og:url","content":"https://idoc.dev/it/nodejs/api/modules"}]]},"headers":[],"relativePath":"it/nodejs/api/modules.md","filePath":"it/nodejs/api/modules.md","lastUpdated":1749464498000}`),a={name:`it/nodejs/api/modules.md`};function o(e,i,a,o,s,c){return r(),t(`div`,null,i[0]||=[n(`<h1 id="modules-commonjs-modules" tabindex="-1">Moduli: Moduli CommonJS <a class="header-anchor" href="#modules-commonjs-modules" aria-label="Permalink to “Moduli: Moduli CommonJS”">​</a></h1><div class="tip custom-block"><p class="custom-block-title">[Stabile: 2 - Stabile]</p><p><a href="/it/nodejs/api/documentation#stability-index">Stabile: 2</a> <a href="/it/nodejs/api/documentation#stability-index">Stabilità: 2</a> - Stabile</p></div><p>I moduli CommonJS sono il modo originale per impacchettare il codice JavaScript per Node.js. Node.js supporta anche lo standard <a href="/it/nodejs/api/esm">moduli ECMAScript</a> utilizzato dai browser e da altri runtime JavaScript.</p><p>In Node.js, ogni file viene trattato come un modulo separato. Ad esempio, considera un file di nome <code>foo.js</code>:</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> circle</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;./circle.js&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">\`L&#39;area di un cerchio di raggio 4 è \${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">circle</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">area</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">4</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">)</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}\`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>Nella prima riga, <code>foo.js</code> carica il modulo <code>circle.js</code> che si trova nella stessa directory di <code>foo.js</code>.</p><p>Ecco il contenuto di <code>circle.js</code>:</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">PI</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Math;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">exports</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">area</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">r</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> PI</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> *</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> r </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">**</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">exports</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">circumference</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">r</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> *</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> PI</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> *</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> r;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>Il modulo <code>circle.js</code> ha esportato le funzioni <code>area()</code> e <code>circumference()</code>. Funzioni e oggetti vengono aggiunti alla radice di un modulo specificando proprietà aggiuntive sull&#39;oggetto speciale <code>exports</code>.</p><p>Le variabili locali al modulo saranno private, perché il modulo è racchiuso in una funzione da Node.js (vedi <a href="/it/nodejs/api/modules#the-module-wrapper">module wrapper</a>). In questo esempio, la variabile <code>PI</code> è privata a <code>circle.js</code>.</p><p>Alla proprietà <code>module.exports</code> può essere assegnato un nuovo valore (come una funzione o un oggetto).</p><p>Nel seguente codice, <code>bar.js</code> utilizza il modulo <code>square</code>, che esporta una classe Square:</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> Square</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;./square.js&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> mySquare</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Square</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">\`L&#39;area del mio quadrato è \${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">mySquare</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">area</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">()</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}\`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>Il modulo <code>square</code> è definito in <code>square.js</code>:</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// L&#39;assegnazione a exports non modificherà il modulo, deve essere usato module.exports</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">module</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">exports</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Square</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  constructor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">width</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.width </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> width;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  area</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.width </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">**</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>Il sistema di moduli CommonJS è implementato nel <a href="/it/nodejs/api/module"><code>module</code> core module</a>.</p><h2 id="enabling" tabindex="-1">Abilitazione <a class="header-anchor" href="#enabling" aria-label="Permalink to “Abilitazione”">​</a></h2><p>Node.js ha due sistemi di moduli: moduli CommonJS e <a href="/it/nodejs/api/esm">moduli ECMAScript</a>.</p><p>Per impostazione predefinita, Node.js tratterà i seguenti come moduli CommonJS:</p><ul><li>File con estensione <code>.cjs</code>;</li><li>File con estensione <code>.js</code> quando il file <code>package.json</code> principale più vicino contiene un campo di primo livello <a href="/it/nodejs/api/packages#type"><code>&quot;type&quot;</code></a> con il valore <code>&quot;commonjs&quot;</code>.</li><li>File con estensione <code>.js</code> o senza estensione, quando il file <code>package.json</code> principale più vicino non contiene un campo di primo livello <a href="/it/nodejs/api/packages#type"><code>&quot;type&quot;</code></a> oppure non c&#39;è alcun <code>package.json</code> in nessuna cartella principale; a meno che il file non contenga una sintassi che genera un errore a meno che non venga valutato come modulo ES. Gli autori del pacchetto dovrebbero includere il campo <a href="/it/nodejs/api/packages#type"><code>&quot;type&quot;</code></a>, anche nei pacchetti in cui tutte le sorgenti sono CommonJS. Essere espliciti sul <code>type</code> del pacchetto renderà più facile per gli strumenti di compilazione e i loader determinare come i file nel pacchetto devono essere interpretati.</li><li>File con un&#39;estensione diversa da <code>.mjs</code>, <code>.cjs</code>, <code>.json</code>, <code>.node</code> o <code>.js</code> (quando il file <code>package.json</code> principale più vicino contiene un campo di primo livello <a href="/it/nodejs/api/packages#type"><code>&quot;type&quot;</code></a> con un valore di <code>&quot;module&quot;</code>, questi file saranno riconosciuti come moduli CommonJS solo se vengono inclusi tramite <code>require()</code>, non quando vengono utilizzati come punto di ingresso da riga di comando del programma).</li></ul><p>Vedi <a href="/it/nodejs/api/packages#determining-module-system">Determinazione del sistema di moduli</a> per maggiori dettagli.</p><p>La chiamata a <code>require()</code> utilizza sempre il loader del modulo CommonJS. La chiamata a <code>import()</code> utilizza sempre il loader del modulo ECMAScript.</p><h2 id="accessing-the-main-module" tabindex="-1">Accesso al modulo principale <a class="header-anchor" href="#accessing-the-main-module" aria-label="Permalink to “Accesso al modulo principale”">​</a></h2><p>Quando un file viene eseguito direttamente da Node.js, <code>require.main</code> viene impostato sul suo <code>module</code>. Ciò significa che è possibile determinare se un file è stato eseguito direttamente verificando <code>require.main === module</code>.</p><p>Per un file <code>foo.js</code>, questo sarà <code>true</code> se eseguito tramite <code>node foo.js</code>, ma <code>false</code> se eseguito da <code>require(&#39;./foo&#39;)</code>.</p><p>Quando il punto di ingresso non è un modulo CommonJS, <code>require.main</code> è <code>undefined</code> e il modulo principale è fuori portata.</p><h2 id="package-manager-tips" tabindex="-1">Suggerimenti per il gestore di pacchetti <a class="header-anchor" href="#package-manager-tips" aria-label="Permalink to “Suggerimenti per il gestore di pacchetti”">​</a></h2><p>La semantica della funzione <code>require()</code> di Node.js è stata progettata per essere sufficientemente generale da supportare strutture di directory ragionevoli. Si spera che i programmi di gestione dei pacchetti come <code>dpkg</code>, <code>rpm</code> e <code>npm</code> possano costruire pacchetti nativi dai moduli Node.js senza modifiche.</p><p>Di seguito, forniamo una struttura di directory suggerita che potrebbe funzionare:</p><p>Supponiamo di voler avere la cartella in <code>/usr/lib/node/\\&lt;nome-pacchetto\\&gt;/\\&lt;versione\\&gt;</code> contenente il contenuto di una versione specifica di un pacchetto.</p><p>I pacchetti possono dipendere l&#39;uno dall&#39;altro. Per installare il pacchetto <code>foo</code>, potrebbe essere necessario installare una versione specifica del pacchetto <code>bar</code>. Il pacchetto <code>bar</code> stesso potrebbe avere delle dipendenze e, in alcuni casi, queste potrebbero persino collidere o formare dipendenze cicliche.</p><p>Poiché Node.js cerca il <code>realpath</code> di tutti i moduli che carica (cioè, risolve i collegamenti simbolici) e quindi <a href="/it/nodejs/api/modules#loading-from-node-modules-folders">cerca le loro dipendenze nelle cartelle <code>node_modules</code></a>, questa situazione può essere risolta con la seguente architettura:</p><ul><li><code>/usr/lib/node/foo/1.2.3/</code>: Contenuto del pacchetto <code>foo</code>, versione 1.2.3.</li><li><code>/usr/lib/node/bar/4.3.2/</code>: Contenuto del pacchetto <code>bar</code> da cui dipende <code>foo</code>.</li><li><code>/usr/lib/node/foo/1.2.3/node_modules/bar</code>: Collegamento simbolico a <code>/usr/lib/node/bar/4.3.2/</code>.</li><li><code>/usr/lib/node/bar/4.3.2/node_modules/*</code>: Collegamenti simbolici ai pacchetti da cui dipende <code>bar</code>.</li></ul><p>Pertanto, anche se si verifica un ciclo o se ci sono conflitti di dipendenza, ogni modulo sarà in grado di ottenere una versione della sua dipendenza che può utilizzare.</p><p>Quando il codice nel pacchetto <code>foo</code> esegue <code>require(&#39;bar&#39;)</code>, otterrà la versione che è collegata simbolicamente in <code>/usr/lib/node/foo/1.2.3/node_modules/bar</code>. Quindi, quando il codice nel pacchetto <code>bar</code> chiama <code>require(&#39;quux&#39;)</code>, otterrà la versione che è collegata simbolicamente in <code>/usr/lib/node/bar/4.3.2/node_modules/quux</code>.</p><p>Inoltre, per rendere il processo di ricerca dei moduli ancora più ottimale, piuttosto che inserire i pacchetti direttamente in <code>/usr/lib/node</code>, potremmo inserirli in <code>/usr/lib/node_modules/\\&lt;nome\\&gt;/\\&lt;versione\\&gt;</code>. Quindi Node.js non si preoccuperà di cercare le dipendenze mancanti in <code>/usr/node_modules</code> o <code>/node_modules</code>.</p><p>Per rendere i moduli disponibili al REPL di Node.js, potrebbe essere utile aggiungere anche la cartella <code>/usr/lib/node_modules</code> alla variabile di ambiente <code>$NODE_PATH</code>. Poiché le ricerche di moduli che utilizzano le cartelle <code>node_modules</code> sono tutte relative e basate sul percorso reale dei file che effettuano le chiamate a <code>require()</code>, i pacchetti stessi possono essere ovunque.</p><h2 id="loading-ecmascript-modules-using-require" tabindex="-1">Caricamento di moduli ECMAScript tramite <code>require()</code> <a class="header-anchor" href="#loading-ecmascript-modules-using-require" aria-label="Permalink to “Caricamento di moduli ECMAScript tramite require()”">​</a></h2><div class="info custom-block"><p class="custom-block-title">[Cronologia]</p><table tabindex="0"><thead><tr><th>Versione</th><th>Modifiche</th></tr></thead><tbody><tr><td>v23.5.0</td><td>Questa funzionalità non emette più un avviso sperimentale per impostazione predefinita, sebbene l&#39;avviso possa ancora essere emesso da --trace-require-module.</td></tr><tr><td>v23.0.0</td><td>Questa funzionalità non è più dietro il flag CLI <code>--experimental-require-module</code>.</td></tr><tr><td>v23.0.0</td><td>Supporto all&#39;esportazione interop <code>&#39;module.exports&#39;</code> in <code>require(esm)</code>.</td></tr><tr><td>v22.0.0, v20.17.0</td><td>Aggiunto in: v22.0.0, v20.17.0</td></tr></tbody></table></div><div class="warning custom-block"><p class="custom-block-title">[Stabile: 1 - Sperimentale]</p><p><a href="/it/nodejs/api/documentation#stability-index">Stabile: 1</a> <a href="/it/nodejs/api/documentation#stability-index">Stabilità: 1</a>.2 - Candidato per il rilascio</p></div><p>L&#39;estensione <code>.mjs</code> è riservata ai <a href="/it/nodejs/api/esm">Moduli ECMAScript</a>. Consulta la sezione <a href="/it/nodejs/api/packages#determining-module-system">Determinazione del sistema di moduli</a> per maggiori informazioni su quali file vengono analizzati come moduli ECMAScript.</p><p><code>require()</code> supporta solo il caricamento di moduli ECMAScript che soddisfano i seguenti requisiti:</p><ul><li>Il modulo è completamente sincrono (non contiene <code>await</code> di livello superiore); e</li><li>Una di queste condizioni è soddisfatta:</li></ul><p>Se il modulo ES caricato soddisfa i requisiti, <code>require()</code> può caricarlo e restituire l&#39;oggetto namespace del modulo. In questo caso è simile all&#39; <code>import()</code> dinamico, ma viene eseguito in modo sincrono e restituisce direttamente l&#39;oggetto namespace.</p><p>Con i seguenti moduli ES:</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// distance.mjs</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> distance</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">a</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">b</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) { </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (b.x </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> a.x) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">**</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (b.y </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> a.y) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">**</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; }</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// point.mjs</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> default</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Point</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  constructor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">x</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">y</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.x </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> x; </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.y </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> y; }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>Un modulo CommonJS può caricarli con <code>require()</code>:</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> distance</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;./distance.mjs&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(distance);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// [Module: null prototype] {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//   distance: [Function: distance]</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> point</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;./point.mjs&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(point);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// [Module: null prototype] {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//   default: [class Point],</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//   __esModule: true,</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// }</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>Per l&#39;interoperabilità con gli strumenti esistenti che convertono i moduli ES in CommonJS, che potrebbero quindi caricare moduli ES reali tramite <code>require()</code>, lo spazio dei nomi restituito conterrà una proprietà <code>__esModule: true</code> se ha un&#39;esportazione <code>default</code> in modo che il codice di consumo generato dagli strumenti possa riconoscere le esportazioni predefinite nei moduli ES reali. Se lo spazio dei nomi definisce già <code>__esModule</code>, questo non verrà aggiunto. Questa proprietà è sperimentale e può cambiare in futuro. Dovrebbe essere utilizzata solo da strumenti che convertono i moduli ES in moduli CommonJS, seguendo le convenzioni dell&#39;ecosistema esistenti. Il codice creato direttamente in CommonJS dovrebbe evitare di dipendere da esso.</p><p>Quando un modulo ES contiene sia esportazioni con nome che un&#39;esportazione predefinita, il risultato restituito da <code>require()</code> è l&#39;oggetto namespace del modulo, che inserisce l&#39;esportazione predefinita nella proprietà <code>.default</code>, in modo simile ai risultati restituiti da <code>import()</code>. Per personalizzare ciò che deve essere restituito direttamente da <code>require(esm)</code>, il modulo ES può esportare il valore desiderato utilizzando il nome stringa <code>&quot;module.exports&quot;</code>.</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// point.mjs</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> default</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Point</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  constructor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">x</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">y</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.x </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> x; </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.y </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> y; }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// \`distance\` viene persa per i consumatori CommonJS di questo modulo, a meno che non venga</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// aggiunta a \`Point\` come proprietà statica.</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> distance</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">a</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">b</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) { </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (b.x </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> a.x) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">**</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (b.y </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> a.y) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">**</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { Point </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">as</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;module.exports&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> Point</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;./point.mjs&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Point); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// [class Point]</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Le esportazioni con nome vengono perse quando viene utilizzato &#39;module.exports&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">distance</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;./point.mjs&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(distance); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// undefined</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>Si noti nell&#39;esempio sopra, quando viene utilizzato il nome di esportazione <code>module.exports</code>, le esportazioni con nome andranno perse per i consumatori CommonJS. Per consentire ai consumatori CommonJS di continuare ad accedere alle esportazioni con nome, il modulo può assicurarsi che l&#39;esportazione predefinita sia un oggetto con le esportazioni con nome allegate come proprietà. Ad esempio, con l&#39;esempio sopra, <code>distance</code> può essere allegato all&#39;esportazione predefinita, la classe <code>Point</code>, come metodo statico.</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> distance</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">a</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">b</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) { </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (b.x </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> a.x) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">**</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (b.y </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> a.y) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">**</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> default</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Point</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  constructor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">x</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">y</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.x </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> x; </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.y </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> y; }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  static</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;"> distance</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> distance;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { Point </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">as</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;module.exports&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> Point</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;./point.mjs&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Point); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// [class Point]</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">distance</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;./point.mjs&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(distance); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// [Function: distance]</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>Se il modulo che viene <code>require()</code> contiene <code>await</code> di livello superiore, o il grafo del modulo che <code>import</code> contiene <code>await</code> di livello superiore, verrà generato <a href="/it/nodejs/api/errors#err-require-async-module"><code>ERR_REQUIRE_ASYNC_MODULE</code></a>. In questo caso, gli utenti devono caricare il modulo asincrono utilizzando <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/import" target="_blank" rel="noreferrer"><code>import()</code></a>.</p><p>Se <code>--experimental-print-required-tla</code> è abilitato, invece di generare <code>ERR_REQUIRE_ASYNC_MODULE</code> prima della valutazione, Node.js valuterà il modulo, cercherà di individuare gli await di livello superiore e stamperà la loro posizione per aiutare gli utenti a risolverli.</p><p>Il supporto per il caricamento di moduli ES tramite <code>require()</code> è attualmente sperimentale e può essere disabilitato utilizzando <code>--no-experimental-require-module</code>. Per stampare dove viene utilizzata questa funzionalità, utilizzare <a href="/it/nodejs/api/cli#trace-require-modulemode"><code>--trace-require-module</code></a>.</p><p>Questa funzionalità può essere rilevata controllando se <a href="/it/nodejs/api/process#processfeaturesrequire-module"><code>process.features.require_module</code></a> è <code>true</code>.</p><h2 id="all-together" tabindex="-1">Tutto insieme <a class="header-anchor" href="#all-together" aria-label="Permalink to “Tutto insieme”">​</a></h2><p>Per ottenere il nome esatto del file che verrà caricato quando viene chiamato <code>require()</code>, usa la funzione <code>require.resolve()</code>.</p><p>Mettendo insieme tutto quanto sopra, ecco l&#39;algoritmo di alto livello in pseudocodice di ciò che fa <code>require()</code>:</p><div class="language-text line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">text</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>require(X) dal modulo al percorso Y</span></span>
<span class="line"><span>1. Se X è un modulo core,</span></span>
<span class="line"><span>   a. restituisci il modulo core</span></span>
<span class="line"><span>   b. FERMA</span></span>
<span class="line"><span>2. Se X inizia con &#39;/&#39;</span></span>
<span class="line"><span>   a. imposta Y come radice del file system</span></span>
<span class="line"><span>3. Se X inizia con &#39;./&#39; o &#39;/&#39; o &#39;../&#39;</span></span>
<span class="line"><span>   a. LOAD_AS_FILE(Y + X)</span></span>
<span class="line"><span>   b. LOAD_AS_DIRECTORY(Y + X)</span></span>
<span class="line"><span>   c. LANCIA &quot;non trovato&quot;</span></span>
<span class="line"><span>4. Se X inizia con &#39;#&#39;</span></span>
<span class="line"><span>   a. LOAD_PACKAGE_IMPORTS(X, dirname(Y))</span></span>
<span class="line"><span>5. LOAD_PACKAGE_SELF(X, dirname(Y))</span></span>
<span class="line"><span>6. LOAD_NODE_MODULES(X, dirname(Y))</span></span>
<span class="line"><span>7. LANCIA &quot;non trovato&quot;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>MAYBE_DETECT_AND_LOAD(X)</span></span>
<span class="line"><span>1. Se X viene analizzato come un modulo CommonJS, carica X come un modulo CommonJS. FERMA.</span></span>
<span class="line"><span>2. Altrimenti, se il codice sorgente di X può essere analizzato come un modulo ECMAScript usando</span></span>
<span class="line"><span>  &lt;a href=&quot;esm.md#resolver-algorithm-specification&quot;&gt;DETECT_MODULE_SYNTAX definito nel</span></span>
<span class="line"><span>  resolver ESM&lt;/a&gt;,</span></span>
<span class="line"><span>  a. Carica X come un modulo ECMAScript. FERMA.</span></span>
<span class="line"><span>3. LANCIA SyntaxError dal tentativo di analizzare X come CommonJS in 1. FERMA.</span></span>
<span class="line"><span></span></span>
<span class="line"><span>LOAD_AS_FILE(X)</span></span>
<span class="line"><span>1. Se X è un file, carica X come il suo formato di estensione del file. FERMA</span></span>
<span class="line"><span>2. Se X.js è un file,</span></span>
<span class="line"><span>    a. Trova l&#39;ambito del pacchetto SCOPE più vicino a X.</span></span>
<span class="line"><span>    b. Se non è stato trovato alcun ambito</span></span>
<span class="line"><span>      1. MAYBE_DETECT_AND_LOAD(X.js)</span></span>
<span class="line"><span>    c. Se SCOPE/package.json contiene il campo &quot;type&quot;,</span></span>
<span class="line"><span>      1. Se il campo &quot;type&quot; è &quot;module&quot;, carica X.js come un modulo ECMAScript. FERMA.</span></span>
<span class="line"><span>      2. Se il campo &quot;type&quot; è &quot;commonjs&quot;, carica X.js come un modulo CommonJS. FERMA.</span></span>
<span class="line"><span>    d. MAYBE_DETECT_AND_LOAD(X.js)</span></span>
<span class="line"><span>3. Se X.json è un file, carica X.json in un oggetto JavaScript. FERMA</span></span>
<span class="line"><span>4. Se X.node è un file, carica X.node come addon binario. FERMA</span></span>
<span class="line"><span></span></span>
<span class="line"><span>LOAD_INDEX(X)</span></span>
<span class="line"><span>1. Se X/index.js è un file</span></span>
<span class="line"><span>    a. Trova l&#39;ambito del pacchetto SCOPE più vicino a X.</span></span>
<span class="line"><span>    b. Se non è stato trovato alcun ambito, carica X/index.js come un modulo CommonJS. FERMA.</span></span>
<span class="line"><span>    c. Se SCOPE/package.json contiene il campo &quot;type&quot;,</span></span>
<span class="line"><span>      1. Se il campo &quot;type&quot; è &quot;module&quot;, carica X/index.js come un modulo ECMAScript. FERMA.</span></span>
<span class="line"><span>      2. Altrimenti, carica X/index.js come un modulo CommonJS. FERMA.</span></span>
<span class="line"><span>2. Se X/index.json è un file, analizza X/index.json in un oggetto JavaScript. FERMA</span></span>
<span class="line"><span>3. Se X/index.node è un file, carica X/index.node come addon binario. FERMA</span></span>
<span class="line"><span></span></span>
<span class="line"><span>LOAD_AS_DIRECTORY(X)</span></span>
<span class="line"><span>1. Se X/package.json è un file,</span></span>
<span class="line"><span>   a. Analizza X/package.json e cerca il campo &quot;main&quot;.</span></span>
<span class="line"><span>   b. Se &quot;main&quot; è un valore falsy, VAI A 2.</span></span>
<span class="line"><span>   c. sia M = X + (campo main json)</span></span>
<span class="line"><span>   d. LOAD_AS_FILE(M)</span></span>
<span class="line"><span>   e. LOAD_INDEX(M)</span></span>
<span class="line"><span>   f. LOAD_INDEX(X) DEPRECATO</span></span>
<span class="line"><span>   g. LANCIA &quot;non trovato&quot;</span></span>
<span class="line"><span>2. LOAD_INDEX(X)</span></span>
<span class="line"><span></span></span>
<span class="line"><span>LOAD_NODE_MODULES(X, START)</span></span>
<span class="line"><span>1. sia DIRS = NODE_MODULES_PATHS(START)</span></span>
<span class="line"><span>2. per ogni DIR in DIRS:</span></span>
<span class="line"><span>   a. LOAD_PACKAGE_EXPORTS(X, DIR)</span></span>
<span class="line"><span>   b. LOAD_AS_FILE(DIR/X)</span></span>
<span class="line"><span>   c. LOAD_AS_DIRECTORY(DIR/X)</span></span>
<span class="line"><span></span></span>
<span class="line"><span>NODE_MODULES_PATHS(START)</span></span>
<span class="line"><span>1. sia PARTS = path split(START)</span></span>
<span class="line"><span>2. sia I = conteggio di PARTS - 1</span></span>
<span class="line"><span>3. sia DIRS = []</span></span>
<span class="line"><span>4. finché I &gt;= 0,</span></span>
<span class="line"><span>   a. se PARTS[I] = &quot;node_modules&quot;, VAI A d.</span></span>
<span class="line"><span>   b. DIR = path join(PARTS[0 .. I] + &quot;node_modules&quot;)</span></span>
<span class="line"><span>   c. DIRS = DIR + DIRS</span></span>
<span class="line"><span>   d. sia I = I - 1</span></span>
<span class="line"><span>5. restituisci DIRS + GLOBAL_FOLDERS</span></span>
<span class="line"><span></span></span>
<span class="line"><span>LOAD_PACKAGE_IMPORTS(X, DIR)</span></span>
<span class="line"><span>1. Trova l&#39;ambito del pacchetto SCOPE più vicino a DIR.</span></span>
<span class="line"><span>2. Se non è stato trovato alcun ambito, restituisci.</span></span>
<span class="line"><span>3. Se &quot;imports&quot; in SCOPE/package.json è null o undefined, restituisci.</span></span>
<span class="line"><span>4. Se \`--experimental-require-module\` è abilitato</span></span>
<span class="line"><span>  a. sia CONDITIONS = [&quot;node&quot;, &quot;require&quot;, &quot;module-sync&quot;]</span></span>
<span class="line"><span>  b. Altrimenti, sia CONDITIONS = [&quot;node&quot;, &quot;require&quot;]</span></span>
<span class="line"><span>5. sia MATCH = PACKAGE_IMPORTS_RESOLVE(X, pathToFileURL(SCOPE),</span></span>
<span class="line"><span>  CONDITIONS) &lt;a href=&quot;esm.md#resolver-algorithm-specification&quot;&gt;definito nel resolver ESM&lt;/a&gt;.</span></span>
<span class="line"><span>6. RESOLVE_ESM_MATCH(MATCH).</span></span>
<span class="line"><span></span></span>
<span class="line"><span>LOAD_PACKAGE_EXPORTS(X, DIR)</span></span>
<span class="line"><span>1. Prova a interpretare X come una combinazione di NAME e SUBPATH dove il nome</span></span>
<span class="line"><span>   potrebbe avere un prefisso @scope/ e il sottopercorso inizia con una barra (\`/\`).</span></span>
<span class="line"><span>2. Se X non corrisponde a questo modello o DIR/NAME/package.json non è un file,</span></span>
<span class="line"><span>   restituisci.</span></span>
<span class="line"><span>3. Analizza DIR/NAME/package.json e cerca il campo &quot;exports&quot;.</span></span>
<span class="line"><span>4. Se &quot;exports&quot; è null o undefined, restituisci.</span></span>
<span class="line"><span>5. Se \`--experimental-require-module\` è abilitato</span></span>
<span class="line"><span>  a. sia CONDITIONS = [&quot;node&quot;, &quot;require&quot;, &quot;module-sync&quot;]</span></span>
<span class="line"><span>  b. Altrimenti, sia CONDITIONS = [&quot;node&quot;, &quot;require&quot;]</span></span>
<span class="line"><span>6. sia MATCH = PACKAGE_EXPORTS_RESOLVE(pathToFileURL(DIR/NAME), &quot;.&quot; + SUBPATH,</span></span>
<span class="line"><span>   &quot;exports&quot; in \`package.json\`, CONDITIONS) &lt;a href=&quot;esm.md#resolver-algorithm-specification&quot;&gt;definito nel resolver ESM&lt;/a&gt;.</span></span>
<span class="line"><span>7. RESOLVE_ESM_MATCH(MATCH)</span></span>
<span class="line"><span></span></span>
<span class="line"><span>LOAD_PACKAGE_SELF(X, DIR)</span></span>
<span class="line"><span>1. Trova l&#39;ambito del pacchetto SCOPE più vicino a DIR.</span></span>
<span class="line"><span>2. Se non è stato trovato alcun ambito, restituisci.</span></span>
<span class="line"><span>3. Se &quot;exports&quot; in SCOPE/package.json è null o undefined, restituisci.</span></span>
<span class="line"><span>4. Se &quot;name&quot; in SCOPE/package.json non è il primo segmento di X, restituisci.</span></span>
<span class="line"><span>5. sia MATCH = PACKAGE_EXPORTS_RESOLVE(pathToFileURL(SCOPE),</span></span>
<span class="line"><span>   &quot;.&quot; + X.slice(&quot;name&quot;.length), &quot;exports&quot; in \`package.json\`, [&quot;node&quot;, &quot;require&quot;])</span></span>
<span class="line"><span>   &lt;a href=&quot;esm.md#resolver-algorithm-specification&quot;&gt;definito nel resolver ESM&lt;/a&gt;.</span></span>
<span class="line"><span>6. RESOLVE_ESM_MATCH(MATCH)</span></span>
<span class="line"><span></span></span>
<span class="line"><span>RESOLVE_ESM_MATCH(MATCH)</span></span>
<span class="line"><span>1. sia RESOLVED_PATH = fileURLToPath(MATCH)</span></span>
<span class="line"><span>2. Se il file in RESOLVED_PATH esiste, carica RESOLVED_PATH come il suo formato</span></span>
<span class="line"><span>   di estensione. FERMA</span></span>
<span class="line"><span>3. LANCIA &quot;non trovato&quot;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br><span class="line-number">115</span><br><span class="line-number">116</span><br></div></div><h2 id="caching" tabindex="-1">Caching <a class="header-anchor" href="#caching" aria-label="Permalink to “Caching”">​</a></h2><p>I moduli vengono memorizzati nella cache dopo il primo caricamento. Ciò significa (tra le altre cose) che ogni chiamata a <code>require(&#39;foo&#39;)</code> restituirà esattamente lo stesso oggetto, se si risolvesse nello stesso file.</p><p>A condizione che <code>require.cache</code> non venga modificato, più chiamate a <code>require(&#39;foo&#39;)</code> non causeranno l&#39;esecuzione del codice del modulo più volte. Questa è una caratteristica importante. Con esso, è possibile restituire oggetti &quot;parzialmente completati&quot;, consentendo così il caricamento di dipendenze transitive anche quando causerebbero cicli.</p><p>Per fare in modo che un modulo esegua il codice più volte, esporta una funzione e chiama tale funzione.</p><h3 id="module-caching-caveats" tabindex="-1">Avvertenze sulla memorizzazione nella cache dei moduli <a class="header-anchor" href="#module-caching-caveats" aria-label="Permalink to “Avvertenze sulla memorizzazione nella cache dei moduli”">​</a></h3><p>I moduli vengono memorizzati nella cache in base al loro nome file risolto. Poiché i moduli possono risolvere in un nome file diverso in base alla posizione del modulo chiamante (caricamento dalle cartelle <code>node_modules</code>), non è una <em>garanzia</em> che <code>require(&#39;foo&#39;)</code> restituirà sempre esattamente lo stesso oggetto, se si risolvesse in file diversi.</p><p>Inoltre, su file system o sistemi operativi non case-sensitive, diversi nomi file risolti possono puntare allo stesso file, ma la cache li tratterà comunque come moduli diversi e ricaricherà il file più volte. Ad esempio, <code>require(&#39;./foo&#39;)</code> e <code>require(&#39;./FOO&#39;)</code> restituiscono due oggetti diversi, indipendentemente dal fatto che <code>./foo</code> e <code>./FOO</code> siano o meno lo stesso file.</p><h2 id="built-in-modules" tabindex="-1">Moduli integrati <a class="header-anchor" href="#built-in-modules" aria-label="Permalink to “Moduli integrati”">​</a></h2><div class="info custom-block"><p class="custom-block-title">[Cronologia]</p><table tabindex="0"><thead><tr><th>Versione</th><th>Modifiche</th></tr></thead><tbody><tr><td>v16.0.0, v14.18.0</td><td>Aggiunto il supporto per l&#39;importazione <code>node:</code> a <code>require(...)</code>.</td></tr></tbody></table></div><p>Node.js ha diversi moduli compilati nel binario. Questi moduli sono descritti in modo più dettagliato altrove in questa documentazione.</p><p>I moduli integrati sono definiti all&#39;interno del sorgente di Node.js e si trovano nella cartella <code>lib/</code>.</p><p>I moduli integrati possono essere identificati utilizzando il prefisso <code>node:</code>, nel qual caso aggira la cache <code>require</code>. Ad esempio, <code>require(&#39;node:http&#39;)</code> restituirà sempre il modulo HTTP integrato, anche se esiste una voce <code>require.cache</code> con quel nome.</p><p>Alcuni moduli integrati vengono sempre caricati in modo preferenziale se il loro identificatore viene passato a <code>require()</code>. Ad esempio, <code>require(&#39;http&#39;)</code> restituirà sempre il modulo HTTP integrato, anche se esiste un file con quel nome. L&#39;elenco dei moduli integrati che possono essere caricati senza utilizzare il prefisso <code>node:</code> è esposto in <a href="/it/nodejs/api/module#modulebuiltinmodules"><code>module.builtinModules</code></a>, elencato senza il prefisso.</p><h3 id="built-in-modules-with-mandatory-node-prefix" tabindex="-1">Moduli integrati con prefisso <code>node:</code> obbligatorio <a class="header-anchor" href="#built-in-modules-with-mandatory-node-prefix" aria-label="Permalink to “Moduli integrati con prefisso node: obbligatorio”">​</a></h3><p>Quando vengono caricati tramite <code>require()</code>, alcuni moduli integrati devono essere richiesti con il prefisso <code>node:</code>. Questo requisito esiste per evitare che i moduli integrati di nuova introduzione entrino in conflitto con i pacchetti user land che hanno già preso il nome. Attualmente, i moduli integrati che richiedono il prefisso <code>node:</code> sono:</p><ul><li><a href="/it/nodejs/api/single-executable-applications#single-executable-application-api"><code>node:sea</code></a></li><li><a href="/it/nodejs/api/sqlite"><code>node:sqlite</code></a></li><li><a href="/it/nodejs/api/test"><code>node:test</code></a></li><li><a href="/it/nodejs/api/test#test-reporters"><code>node:test/reporters</code></a></li></ul><p>L&#39;elenco di questi moduli è esposto in <a href="/it/nodejs/api/module#modulebuiltinmodules"><code>module.builtinModules</code></a>, incluso il prefisso.</p><h2 id="cycles" tabindex="-1">Cicli <a class="header-anchor" href="#cycles" aria-label="Permalink to “Cicli”">​</a></h2><p>Quando ci sono chiamate <code>require()</code> circolari, un modulo potrebbe non aver terminato l&#39;esecuzione quando viene restituito.</p><p>Considera questa situazione:</p><p><code>a.js</code>:</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;a starting&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">exports</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.done </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> b</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;./b.js&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;in a, b.done = %j&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, b.done);</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">exports</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.done </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;a done&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p><code>b.js</code>:</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;b starting&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">exports</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.done </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> a</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;./a.js&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;in b, a.done = %j&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, a.done);</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">exports</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.done </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;b done&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p><code>main.js</code>:</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;main starting&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> a</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;./a.js&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> b</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;./b.js&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;in main, a.done = %j, b.done = %j&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, a.done, b.done);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>Quando <code>main.js</code> carica <code>a.js</code>, quindi <code>a.js</code> a sua volta carica <code>b.js</code>. A quel punto, <code>b.js</code> tenta di caricare <code>a.js</code>. Per evitare un ciclo infinito, viene restituita al modulo <code>b.js</code> una <strong>copia incompleta</strong> dell&#39;oggetto <code>exports</code> di <code>a.js</code>. <code>b.js</code> quindi termina il caricamento e il suo oggetto <code>exports</code> viene fornito al modulo <code>a.js</code>.</p><p>Quando <code>main.js</code> ha caricato entrambi i moduli, entrambi sono terminati. L&#39;output di questo programma sarebbe quindi:</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> node</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> main.js</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">main</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> starting</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">a</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> starting</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">b</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> starting</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">in b, a.done = false</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">b</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> done</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">in a, b.done = true</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">a</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> done</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">in main, a.done = true, b.done = true</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>È necessaria un&#39;attenta pianificazione per consentire alle dipendenze cicliche dei moduli di funzionare correttamente all&#39;interno di un&#39;applicazione.</p><h2 id="file-modules" tabindex="-1">Moduli file <a class="header-anchor" href="#file-modules" aria-label="Permalink to “Moduli file”">​</a></h2><p>Se il nome file esatto non viene trovato, Node.js tenterà di caricare il nome file richiesto con le estensioni aggiunte: <code>.js</code>, <code>.json</code> e infine <code>.node</code>. Quando si carica un file che ha un&#39;estensione diversa (ad es. <code>.cjs</code>), il suo nome completo deve essere passato a <code>require()</code>, inclusa la sua estensione del file (ad es. <code>require(&#39;./file.cjs&#39;)</code>).</p><p>I file <code>.json</code> vengono analizzati come file di testo JSON, i file <code>.node</code> vengono interpretati come moduli aggiuntivi compilati caricati con <code>process.dlopen()</code>. I file che utilizzano qualsiasi altra estensione (o nessuna estensione) vengono analizzati come file di testo JavaScript. Fare riferimento alla sezione <a href="/it/nodejs/api/packages#determining-module-system">Determinazione del sistema dei moduli</a> per capire quale obiettivo di analisi verrà utilizzato.</p><p>Un modulo richiesto con il prefisso <code>&#39;/&#39;</code> è un percorso assoluto al file. Ad esempio, <code>require(&#39;/home/marco/foo.js&#39;)</code> caricherà il file in <code>/home/marco/foo.js</code>.</p><p>Un modulo richiesto con il prefisso <code>&#39;./&#39;</code> è relativo al file che chiama <code>require()</code>. Cioè, <code>circle.js</code> deve trovarsi nella stessa directory di <code>foo.js</code> affinché <code>require(&#39;./circle&#39;)</code> lo trovi.</p><p>Senza un <code>&#39;/&#39;</code>, <code>&#39;./&#39;</code> o <code>&#39;../&#39;</code> iniziali per indicare un file, il modulo deve essere un modulo principale oppure viene caricato da una cartella <code>node_modules</code>.</p><p>Se il percorso specificato non esiste, <code>require()</code> genererà un errore <a href="/it/nodejs/api/errors#module-not-found"><code>MODULE_NOT_FOUND</code></a>.</p><h2 id="folders-as-modules" tabindex="-1">Cartelle come moduli <a class="header-anchor" href="#folders-as-modules" aria-label="Permalink to “Cartelle come moduli”">​</a></h2><div class="info custom-block"><p class="custom-block-title">[Stabile: 3 - Legacy]</p><p><a href="/it/nodejs/api/documentation#stability-index">Stabile: 3</a> <a href="/it/nodejs/api/documentation#stability-index">Stabilità: 3</a> - Legacy: Utilizzare invece <a href="/it/nodejs/api/packages#subpath-exports">esportazioni di sottopercorso</a> o <a href="/it/nodejs/api/packages#subpath-imports">importazioni di sottopercorso</a>.</p></div><p>Ci sono tre modi in cui una cartella può essere passata a <code>require()</code> come argomento.</p><p>Il primo è creare un file <a href="/it/nodejs/api/packages#nodejs-packagejson-field-definitions"><code>package.json</code></a> nella root della cartella, che specifica un modulo <code>main</code>. Un esempio di file <a href="/it/nodejs/api/packages#nodejs-packagejson-field-definitions"><code>package.json</code></a> potrebbe apparire così:</p><div class="language-json line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{ </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">&quot;name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> : </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;some-library&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;main&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> : </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;./lib/some-library.js&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>Se questo fosse in una cartella in <code>./some-library</code>, allora <code>require(&#39;./some-library&#39;)</code> tenterebbe di caricare <code>./some-library/lib/some-library.js</code>.</p><p>Se non è presente alcun file <a href="/it/nodejs/api/packages#nodejs-packagejson-field-definitions"><code>package.json</code></a> nella directory, o se la voce <a href="/it/nodejs/api/packages#main"><code>&quot;main&quot;</code></a> è mancante o non può essere risolta, allora Node.js tenterà di caricare un file <code>index.js</code> o <code>index.node</code> da quella directory. Ad esempio, se non ci fosse alcun file <a href="/it/nodejs/api/packages#nodejs-packagejson-field-definitions"><code>package.json</code></a> nell&#39;esempio precedente, allora <code>require(&#39;./some-library&#39;)</code> tenterebbe di caricare:</p><ul><li><code>./some-library/index.js</code></li><li><code>./some-library/index.node</code></li></ul><p>Se questi tentativi falliscono, allora Node.js segnalerà l&#39;intero modulo come mancante con l&#39;errore predefinito:</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Error:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Cannot</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> find</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> module</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;some-library&#39;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>In tutti e tre i casi sopra, una chiamata <code>import(&#39;./some-library&#39;)</code> risulterebbe in un errore <a href="/it/nodejs/api/errors#err-unsupported-dir-import"><code>ERR_UNSUPPORTED_DIR_IMPORT</code></a>. L&#39;utilizzo di <a href="/it/nodejs/api/packages#subpath-exports">esportazioni di sottopercorso</a> o <a href="/it/nodejs/api/packages#subpath-imports">importazioni di sottopercorso</a> del pacchetto può fornire gli stessi vantaggi di organizzazione del contenimento delle cartelle come moduli e funzionare sia per <code>require</code> che per <code>import</code>.</p><h2 id="loading-from-node_modules-folders" tabindex="-1">Caricamento dalle cartelle <code>node_modules</code> <a class="header-anchor" href="#loading-from-node_modules-folders" aria-label="Permalink to “Caricamento dalle cartelle node_modules”">​</a></h2><p>Se l&#39;identificatore del modulo passato a <code>require()</code> non è un modulo <a href="/it/nodejs/api/modules#built-in-modules">integrato</a> e non inizia con <code>&#39;/&#39;</code>, <code>&#39;../&#39;</code> o <code>&#39;./&#39;</code>, allora Node.js inizia dalla directory del modulo corrente, aggiunge <code>/node_modules</code> e tenta di caricare il modulo da quella posizione. Node.js non aggiungerà <code>node_modules</code> a un percorso che termina già con <code>node_modules</code>.</p><p>Se non viene trovato lì, si sposta alla directory principale e così via, fino a raggiungere la radice del file system.</p><p>Ad esempio, se il file in <code>&#39;/home/ry/projects/foo.js&#39;</code> chiama <code>require(&#39;bar.js&#39;)</code>, allora Node.js cercherebbe nelle seguenti posizioni, in questo ordine:</p><ul><li><code>/home/ry/projects/node_modules/bar.js</code></li><li><code>/home/ry/node_modules/bar.js</code></li><li><code>/home/node_modules/bar.js</code></li><li><code>/node_modules/bar.js</code></li></ul><p>Ciò consente ai programmi di localizzare le proprie dipendenze, in modo che non si scontrino.</p><p>È possibile richiedere file specifici o sottomoduli distribuiti con un modulo includendo un suffisso di percorso dopo il nome del modulo. Ad esempio, <code>require(&#39;example-module/path/to/file&#39;)</code> risolverebbe <code>path/to/file</code> rispetto a dove si trova <code>example-module</code>. Il percorso con suffisso segue la stessa semantica di risoluzione del modulo.</p><h2 id="loading-from-the-global-folders" tabindex="-1">Caricamento dalle cartelle globali <a class="header-anchor" href="#loading-from-the-global-folders" aria-label="Permalink to “Caricamento dalle cartelle globali”">​</a></h2><p>Se la variabile d&#39;ambiente <code>NODE_PATH</code> è impostata su un elenco di percorsi assoluti delimitati da due punti, allora Node.js cercherà quei percorsi per i moduli se non vengono trovati altrove.</p><p>Su Windows, <code>NODE_PATH</code> è delimitato da punti e virgola (<code>;</code>) invece che da due punti.</p><p><code>NODE_PATH</code> è stato originariamente creato per supportare il caricamento di moduli da percorsi variabili prima che fosse definito l&#39;attuale algoritmo di <a href="/it/nodejs/api/modules#all-together">risoluzione del modulo</a>.</p><p><code>NODE_PATH</code> è ancora supportato, ma è meno necessario ora che l&#39;ecosistema Node.js si è stabilizzato su una convenzione per la localizzazione dei moduli dipendenti. A volte le implementazioni che si basano su <code>NODE_PATH</code> mostrano un comportamento sorprendente quando le persone non sono consapevoli che <code>NODE_PATH</code> deve essere impostato. A volte le dipendenze di un modulo cambiano, causando il caricamento di una versione diversa (o anche di un modulo diverso) durante la ricerca di <code>NODE_PATH</code>.</p><p>Inoltre, Node.js cercherà nel seguente elenco di GLOBAL_FOLDERS:</p><ul><li>1: <code>$HOME/.node_modules</code></li><li>2: <code>$HOME/.node_libraries</code></li><li>3: <code>$PREFIX/lib/node</code></li></ul><p>Dove <code>$HOME</code> è la directory home dell&#39;utente e <code>$PREFIX</code> è il <code>node_prefix</code> configurato di Node.js.</p><p>Questi sono principalmente per motivi storici.</p><p>Si consiglia vivamente di inserire le dipendenze nella cartella <code>node_modules</code> locale. Questi verranno caricati più velocemente e in modo più affidabile.</p><h2 id="the-module-wrapper" tabindex="-1">Il wrapper del modulo <a class="header-anchor" href="#the-module-wrapper" aria-label="Permalink to “Il wrapper del modulo”">​</a></h2><p>Prima che il codice di un modulo venga eseguito, Node.js lo avvolge con un wrapper di funzione che assomiglia al seguente:</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">exports</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">module</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">__filename</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">__dirname</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Il codice del modulo risiede effettivamente qui</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>Facendo questo, Node.js ottiene alcune cose:</p><ul><li>Mantiene le variabili di livello superiore (definite con <code>var</code>, <code>const</code> o <code>let</code>) limitate al modulo piuttosto che all&#39;oggetto globale.</li><li>Aiuta a fornire alcune variabili dall&#39;aspetto globale che sono in realtà specifiche del modulo, come: <ul><li>Gli oggetti <code>module</code> ed <code>exports</code> che l&#39;implementatore può utilizzare per esportare valori dal modulo.</li><li>Le variabili di convenienza <code>__filename</code> e <code>__dirname</code>, contenenti il nome file assoluto e il percorso della directory del modulo.</li></ul></li></ul><h2 id="the-module-scope" tabindex="-1">L&#39;ambito del modulo <a class="header-anchor" href="#the-module-scope" aria-label="Permalink to “L&#39;ambito del modulo”">​</a></h2><h3 id="__dirname" tabindex="-1"><code>__dirname</code> <a class="header-anchor" href="#__dirname" aria-label="Permalink to “__dirname”">​</a></h3><p><strong>Aggiunto in: v0.1.27</strong></p><ul><li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;stringa&gt;</a></li></ul><p>Il nome della directory del modulo corrente. Questo è lo stesso di <a href="/it/nodejs/api/path#pathdirnamepath"><code>path.dirname()</code></a> di <a href="/it/nodejs/api/modules#filename"><code>__filename</code></a>.</p><p>Esempio: eseguire <code>node example.js</code> da <code>/Users/mjr</code></p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(__dirname);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Stampa: /Users/mjr</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(path.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">dirname</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(__filename));</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Stampa: /Users/mjr</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="__filename" tabindex="-1"><code>__filename</code> <a class="header-anchor" href="#__filename" aria-label="Permalink to “__filename”">​</a></h3><p><strong>Aggiunto in: v0.0.1</strong></p><ul><li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;stringa&gt;</a></li></ul><p>Il nome del file del modulo corrente. Questo è il percorso assoluto del file del modulo corrente con i collegamenti simbolici risolti.</p><p>Per un programma principale, questo non è necessariamente lo stesso del nome file utilizzato nella riga di comando.</p><p>Vedi <a href="/it/nodejs/api/modules#dirname"><code>__dirname</code></a> per il nome della directory del modulo corrente.</p><p>Esempi:</p><p>Esecuzione di <code>node example.js</code> da <code>/Users/mjr</code></p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(__filename);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Stampa: /Users/mjr/example.js</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(__dirname);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Stampa: /Users/mjr</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>Dati due moduli: <code>a</code> e <code>b</code>, dove <code>b</code> è una dipendenza di <code>a</code> e c&#39;è una struttura di directory di:</p><ul><li><code>/Users/mjr/app/a.js</code></li><li><code>/Users/mjr/app/node_modules/b/b.js</code></li></ul><p>I riferimenti a <code>__filename</code> all&#39;interno di <code>b.js</code> restituiranno <code>/Users/mjr/app/node_modules/b/b.js</code> mentre i riferimenti a <code>__filename</code> all&#39;interno di <code>a.js</code> restituiranno <code>/Users/mjr/app/a.js</code>.</p><h3 id="exports" tabindex="-1"><code>exports</code> <a class="header-anchor" href="#exports" aria-label="Permalink to “exports”">​</a></h3><p><strong>Aggiunto in: v0.1.12</strong></p><ul><li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noreferrer">&lt;Object&gt;</a></li></ul><p>Un riferimento a <code>module.exports</code> che è più corto da digitare. Vedere la sezione sulla <a href="/it/nodejs/api/modules#exports-shortcut">scorciatoia exports</a> per i dettagli su quando usare <code>exports</code> e quando usare <code>module.exports</code>.</p><h3 id="module" tabindex="-1"><code>module</code> <a class="header-anchor" href="#module" aria-label="Permalink to “module”">​</a></h3><p><strong>Aggiunto in: v0.1.16</strong></p><ul><li><a href="/it/nodejs/api/modules#the-module-object">&lt;module&gt;</a></li></ul><p>Un riferimento al modulo corrente, vedere la sezione sull&#39;oggetto <a href="/it/nodejs/api/modules#the-module-object"><code>module</code></a>. In particolare, <code>module.exports</code> è utilizzato per definire cosa un modulo esporta e rende disponibile tramite <code>require()</code>.</p><h3 id="requireid" tabindex="-1"><code>require(id)</code> <a class="header-anchor" href="#requireid" aria-label="Permalink to “require(id)”">​</a></h3><p><strong>Aggiunto in: v0.1.13</strong></p><ul><li><code>id</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> nome o percorso del modulo</li><li>Restituisce: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Data_types" target="_blank" rel="noreferrer">&lt;any&gt;</a> contenuto del modulo esportato</li></ul><p>Utilizzato per importare moduli, <code>JSON</code> e file locali. I moduli possono essere importati da <code>node_modules</code>. I moduli locali e i file JSON possono essere importati usando un percorso relativo (es. <code>./</code>, <code>./foo</code>, <code>./bar/baz</code>, <code>../foo</code>) che sarà risolto rispetto alla directory denominata da <a href="/it/nodejs/api/modules#dirname"><code>__dirname</code></a> (se definito) o alla directory di lavoro corrente. I percorsi relativi in stile POSIX sono risolti in modo indipendente dal sistema operativo, il che significa che gli esempi sopra funzioneranno su Windows nello stesso modo in cui funzionerebbero sui sistemi Unix.</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Importazione di un modulo locale con un percorso relativo alla \`__dirname\` o alla</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// directory di lavoro corrente. (Su Windows, questo si risolverebbe in .\\path\\myLocalModule.)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> myLocalModule</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;./path/myLocalModule&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Importazione di un file JSON:</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> jsonData</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;./path/filename.json&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Importazione di un modulo da node_modules o da un modulo integrato di Node.js:</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> crypto</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;node:crypto&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h4 id="requirecache" tabindex="-1"><code>require.cache</code> <a class="header-anchor" href="#requirecache" aria-label="Permalink to “require.cache”">​</a></h4><p><strong>Aggiunto in: v0.3.0</strong></p><ul><li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noreferrer">&lt;Object&gt;</a></li></ul><p>I moduli vengono memorizzati nella cache in questo oggetto quando sono richiesti. Eliminando una coppia chiave-valore da questo oggetto, il successivo <code>require</code> ricaricherà il modulo. Questo non si applica agli <a href="/it/nodejs/api/addons">addon nativi</a>, per i quali la ricarica provocherà un errore.</p><p>È anche possibile aggiungere o sostituire voci. Questa cache viene controllata prima dei moduli integrati e se un nome corrispondente a un modulo integrato viene aggiunto alla cache, solo le chiamate require con prefisso <code>node:</code> riceveranno il modulo integrato. Usare con cautela!</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> assert</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;node:assert&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> realFs</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;node:fs&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> fakeFs</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {};</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">require.cache.fs </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { exports: fakeFs };</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">assert.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">strictEqual</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;fs&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">), fakeFs);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">assert.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">strictEqual</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;node:fs&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">), realFs);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h4 id="requireextensions" tabindex="-1"><code>require.extensions</code> <a class="header-anchor" href="#requireextensions" aria-label="Permalink to “require.extensions”">​</a></h4><p><strong>Aggiunto in: v0.3.0</strong></p><p><strong>Deprecato a partire da: v0.10.6</strong></p><div class="danger custom-block"><p class="custom-block-title">[Stabile: 0 - Deprecato]</p><p><a href="/it/nodejs/api/documentation#stability-index">Stabile: 0</a> <a href="/it/nodejs/api/documentation#stability-index">Stabilità: 0</a> - Deprecato</p></div><ul><li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noreferrer">&lt;Object&gt;</a></li></ul><p>Indica a <code>require</code> come gestire determinate estensioni di file.</p><p>Elabora i file con estensione <code>.sjs</code> come <code>.js</code>:</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">require.extensions[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;.sjs&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> require.extensions[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;.js&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">];</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><strong>Deprecato.</strong> In passato, questo elenco è stato utilizzato per caricare moduli non JavaScript in Node.js compilandoli su richiesta. Tuttavia, in pratica, ci sono modi molto migliori per farlo, come caricare i moduli tramite un altro programma Node.js o compilarli in JavaScript in anticipo.</p><p>Evita di usare <code>require.extensions</code>. L&#39;uso potrebbe causare bug sottili e la risoluzione delle estensioni diventa più lenta con ogni estensione registrata.</p><h4 id="requiremain" tabindex="-1"><code>require.main</code> <a class="header-anchor" href="#requiremain" aria-label="Permalink to “require.main”">​</a></h4><p><strong>Aggiunto in: v0.1.17</strong></p><ul><li><a href="/it/nodejs/api/modules#the-module-object">&lt;module&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Undefined_type" target="_blank" rel="noreferrer">&lt;undefined&gt;</a></li></ul><p>L&#39;oggetto <code>Module</code> che rappresenta lo script di entrata caricato all&#39;avvio del processo Node.js, o <code>undefined</code> se il punto di ingresso del programma non è un modulo CommonJS. Vedi <a href="/it/nodejs/api/modules#accessing-the-main-module">&quot;Accesso al modulo principale&quot;</a>.</p><p>Nello script <code>entry.js</code>:</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(require.main);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">node</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> entry.js</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Module {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  id</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;.&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  path</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;/absolute/path/to&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  exports</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {},</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  filename</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;/absolute/path/to/entry.js&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  loaded</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  children</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [],</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  paths</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">   [ </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;/absolute/path/to/node_modules&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">     &#39;/absolute/path/node_modules&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">     &#39;/absolute/node_modules&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">     &#39;/node_modules&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ] }</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h4 id="requireresolverequest-options" tabindex="-1"><code>require.resolve(request[, options])</code> <a class="header-anchor" href="#requireresolverequest-options" aria-label="Permalink to “require.resolve(request[, options])”">​</a></h4><div class="info custom-block"><p class="custom-block-title">[Cronologia]</p><table tabindex="0"><thead><tr><th>Versione</th><th>Modifiche</th></tr></thead><tbody><tr><td>v8.9.0</td><td>L&#39;opzione <code>paths</code> è ora supportata.</td></tr><tr><td>v0.3.0</td><td>Aggiunto in: v0.3.0</td></tr></tbody></table></div><ul><li><p><code>request</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> Il percorso del modulo da risolvere.</p></li><li><p><code>options</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noreferrer">&lt;Object&gt;</a></p><ul><li><code>paths</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string[]&gt;</a> Percorsi da cui risolvere la posizione del modulo. Se presenti, questi percorsi vengono utilizzati al posto dei percorsi di risoluzione predefiniti, ad eccezione di <a href="/it/nodejs/api/modules#loading-from-the-global-folders">GLOBAL_FOLDERS</a> come <code>$HOME/.node_modules</code>, che sono sempre inclusi. Ciascuno di questi percorsi viene utilizzato come punto di partenza per l&#39;algoritmo di risoluzione dei moduli, il che significa che la gerarchia <code>node_modules</code> viene controllata da questa posizione.</li></ul></li><li><p>Restituisce: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a></p></li></ul><p>Utilizza il meccanismo interno <code>require()</code> per cercare la posizione di un modulo, ma invece di caricare il modulo, restituisce semplicemente il nome file risolto.</p><p>Se il modulo non viene trovato, viene generato un errore <code>MODULE_NOT_FOUND</code>.</p><h5 id="requireresolvepathsrequest" tabindex="-1"><code>require.resolve.paths(request)</code> <a class="header-anchor" href="#requireresolvepathsrequest" aria-label="Permalink to “require.resolve.paths(request)”">​</a></h5><p><strong>Aggiunto in: v8.9.0</strong></p><ul><li><code>request</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;stringa&gt;</a> Il percorso del modulo i cui percorsi di ricerca vengono recuperati.</li><li>Restituisce: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;stringa[]&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Null_type" target="_blank" rel="noreferrer">&lt;null&gt;</a></li></ul><p>Restituisce un array contenente i percorsi ricercati durante la risoluzione di <code>request</code> o <code>null</code> se la stringa <code>request</code> fa riferimento a un modulo core, ad esempio <code>http</code> o <code>fs</code>.</p><h2 id="the-module-object" tabindex="-1">L&#39;oggetto <code>module</code> <a class="header-anchor" href="#the-module-object" aria-label="Permalink to “L&#39;oggetto module”">​</a></h2><p><strong>Aggiunto in: v0.1.16</strong></p><ul><li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noreferrer">&lt;Oggetto&gt;</a></li></ul><p>In ciascun modulo, la variabile libera <code>module</code> è un riferimento all&#39;oggetto che rappresenta il modulo corrente. Per comodità, <code>module.exports</code> è accessibile anche tramite il modulo globale <code>exports</code>. <code>module</code> non è in realtà una globale ma piuttosto locale a ciascun modulo.</p><h3 id="modulechildren" tabindex="-1"><code>module.children</code> <a class="header-anchor" href="#modulechildren" aria-label="Permalink to “module.children”">​</a></h3><p><strong>Aggiunto in: v0.1.16</strong></p><ul><li><a href="/it/nodejs/api/modules#the-module-object">&lt;module[]&gt;</a></li></ul><p>Gli oggetti modulo richiesti per la prima volta da questo.</p><h3 id="moduleexports" tabindex="-1"><code>module.exports</code> <a class="header-anchor" href="#moduleexports" aria-label="Permalink to “module.exports”">​</a></h3><p><strong>Aggiunto in: v0.1.16</strong></p><ul><li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noreferrer">&lt;Oggetto&gt;</a></li></ul><p>L&#39;oggetto <code>module.exports</code> viene creato dal sistema <code>Module</code>. A volte questo non è accettabile; molti vogliono che il loro modulo sia un&#39;istanza di qualche classe. Per fare ciò, assegna l&#39;oggetto di esportazione desiderato a <code>module.exports</code>. Assegnare l&#39;oggetto desiderato a <code>exports</code> semplicemente ricollegherà la variabile locale <code>exports</code>, che probabilmente non è ciò che si desidera.</p><p>Ad esempio, supponiamo di creare un modulo chiamato <code>a.js</code>:</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> EventEmitter</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;node:events&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">module</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">exports</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> EventEmitter</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Fai un po&#39; di lavoro e, dopo un po&#39; di tempo, emetti</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// l&#39;evento &#39;ready&#39; dal modulo stesso.</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setTimeout</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  module</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">exports</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">emit</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;ready&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1000</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>Quindi in un altro file potremmo fare:</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> a</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;./a&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">a.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">on</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;ready&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;il modulo &quot;a&quot; è pronto&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>L&#39;assegnazione a <code>module.exports</code> deve essere eseguita immediatamente. Non può essere fatto in alcun callback. Questo non funziona:</p><p><code>x.js</code>:</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setTimeout</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  module</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">exports</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { a: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;hello&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> };</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><code>y.js</code>:</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> x</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;./x&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(x.a);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h4 id="exports-shortcut" tabindex="-1">Scorciatoia <code>exports</code> <a class="header-anchor" href="#exports-shortcut" aria-label="Permalink to “Scorciatoia exports”">​</a></h4><p><strong>Aggiunto in: v0.1.16</strong></p><p>La variabile <code>exports</code> è disponibile all&#39;interno dello scope a livello di file di un modulo e le viene assegnato il valore di <code>module.exports</code> prima che il modulo venga valutato.</p><p>Consente una scorciatoia, in modo che <code>module.exports.f = ...</code> possa essere scritto in modo più succinto come <code>exports.f = ...</code>. Tuttavia, tieni presente che, come qualsiasi variabile, se viene assegnato un nuovo valore a <code>exports</code>, non è più vincolato a <code>module.exports</code>:</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">module</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">exports</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.hello </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Esportato dalla richiesta del modulo</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">exports</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { hello: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> };  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Non esportato, disponibile solo nel modulo</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>Quando la proprietà <code>module.exports</code> viene completamente sostituita da un nuovo oggetto, è comune riassegnare anche <code>exports</code>:</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">module</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">exports</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> exports</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Constructor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // ... ecc.</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>Per illustrare il comportamento, immagina questa ipotetica implementazione di <code>require()</code>, che è abbastanza simile a ciò che viene effettivamente fatto da <code>require()</code>:</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/* ... */</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> module</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { exports: {} };</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  ((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">module</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">exports</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // Codice del modulo qui. In questo esempio, definisci una funzione.</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> someFunc</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {}</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    exports</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> someFunc;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // A questo punto, exports non è più una scorciatoia per module.exports e</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // questo modulo esporterà comunque un oggetto predefinito vuoto.</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    module</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">exports</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> someFunc;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // A questo punto, il modulo esporterà ora someFunc, invece dell&#39;oggetto</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // predefinito.</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  })(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">module</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">module</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">exports</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> module</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">exports</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h3 id="modulefilename" tabindex="-1"><code>module.filename</code> <a class="header-anchor" href="#modulefilename" aria-label="Permalink to “module.filename”">​</a></h3><p><strong>Aggiunto in: v0.1.16</strong></p><ul><li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a></li></ul><p>Il nome file completamente risolto del modulo.</p><h3 id="moduleid" tabindex="-1"><code>module.id</code> <a class="header-anchor" href="#moduleid" aria-label="Permalink to “module.id”">​</a></h3><p><strong>Aggiunto in: v0.1.16</strong></p><ul><li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a></li></ul><p>L&#39;identificatore per il modulo. In genere questo è il nome file completamente risolto.</p><h3 id="moduleispreloading" tabindex="-1"><code>module.isPreloading</code> <a class="header-anchor" href="#moduleispreloading" aria-label="Permalink to “module.isPreloading”">​</a></h3><p><strong>Aggiunto in: v15.4.0, v14.17.0</strong></p><ul><li>Tipo: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" target="_blank" rel="noreferrer">&lt;boolean&gt;</a> <code>true</code> se il modulo è in esecuzione durante la fase di precaricamento di Node.js.</li></ul><h3 id="moduleloaded" tabindex="-1"><code>module.loaded</code> <a class="header-anchor" href="#moduleloaded" aria-label="Permalink to “module.loaded”">​</a></h3><p><strong>Aggiunto in: v0.1.16</strong></p><ul><li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" target="_blank" rel="noreferrer">&lt;boolean&gt;</a></li></ul><p>Indica se il modulo ha terminato il caricamento, o è in fase di caricamento.</p><h3 id="moduleparent" tabindex="-1"><code>module.parent</code> <a class="header-anchor" href="#moduleparent" aria-label="Permalink to “module.parent”">​</a></h3><p><strong>Aggiunto in: v0.1.16</strong></p><p><strong>Deprecato a partire da: v14.6.0, v12.19.0</strong></p><div class="danger custom-block"><p class="custom-block-title">[Stabile: 0 - Deprecato]</p><p><a href="/it/nodejs/api/documentation#stability-index">Stabile: 0</a> <a href="/it/nodejs/api/documentation#stability-index">Stabilità: 0</a> - Deprecato: si prega di utilizzare invece <a href="/it/nodejs/api/modules#requiremain"><code>require.main</code></a> e <a href="/it/nodejs/api/modules#modulechildren"><code>module.children</code></a>.</p></div><ul><li><a href="/it/nodejs/api/modules#the-module-object">&lt;module&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Null_type" target="_blank" rel="noreferrer">&lt;null&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Undefined_type" target="_blank" rel="noreferrer">&lt;undefined&gt;</a></li></ul><p>Il modulo che ha richiesto per primo questo, o <code>null</code> se il modulo corrente è il punto di ingresso del processo corrente, o <code>undefined</code> se il modulo è stato caricato da qualcosa che non è un modulo CommonJS (E.G.: REPL o <code>import</code>).</p><h3 id="modulepath" tabindex="-1"><code>module.path</code> <a class="header-anchor" href="#modulepath" aria-label="Permalink to “module.path”">​</a></h3><p><strong>Aggiunto in: v11.14.0</strong></p><ul><li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a></li></ul><p>Il nome della directory del modulo. Questo è solitamente lo stesso di <a href="/it/nodejs/api/path#pathdirnamepath"><code>path.dirname()</code></a> di <a href="/it/nodejs/api/modules#moduleid"><code>module.id</code></a>.</p><h3 id="modulepaths" tabindex="-1"><code>module.paths</code> <a class="header-anchor" href="#modulepaths" aria-label="Permalink to “module.paths”">​</a></h3><p><strong>Aggiunto in: v0.4.0</strong></p><ul><li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string[]&gt;</a></li></ul><p>I percorsi di ricerca per il modulo.</p><h3 id="modulerequireid" tabindex="-1"><code>module.require(id)</code> <a class="header-anchor" href="#modulerequireid" aria-label="Permalink to “module.require(id)”">​</a></h3><p><strong>Aggiunto in: v0.5.1</strong></p><ul><li><code>id</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a></li><li>Restituisce: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Data_types" target="_blank" rel="noreferrer">&lt;any&gt;</a> contenuto del modulo esportato</li></ul><p>Il metodo <code>module.require()</code> fornisce un modo per caricare un modulo come se <code>require()</code> fosse stato chiamato dal modulo originale.</p><p>Per fare ciò, è necessario ottenere un riferimento all&#39;oggetto <code>module</code>. Poiché <code>require()</code> restituisce <code>module.exports</code> e <code>module</code> è in genere <em>solo</em> disponibile all&#39;interno del codice di un modulo specifico, deve essere esportato esplicitamente per poter essere utilizzato.</p><h2 id="the-module-object_1" tabindex="-1">L&#39;oggetto <code>Module</code> <a class="header-anchor" href="#the-module-object_1" aria-label="Permalink to “L&#39;oggetto Module”">​</a></h2><p>Questa sezione è stata spostata in <a href="/it/nodejs/api/module#the-module-object">Moduli: modulo core <code>module</code></a>.</p><ul><li><a href="/it/nodejs/api/module#modulebuiltinmodules"><code>module.builtinModules</code></a></li><li><a href="/it/nodejs/api/module#modulecreaterequirefilename"><code>module.createRequire(filename)</code></a></li><li><a href="/it/nodejs/api/module#modulesyncbuiltinesmexports"><code>module.syncBuiltinESMExports()</code></a></li></ul><h2 id="source-map-v3-support" tabindex="-1">Supporto per Source map v3 <a class="header-anchor" href="#source-map-v3-support" aria-label="Permalink to “Supporto per Source map v3”">​</a></h2><p>Questa sezione è stata spostata in <a href="/it/nodejs/api/module#source-map-v3-support">Moduli: modulo core <code>module</code></a>.</p><ul><li><a href="/it/nodejs/api/module#modulefindsourcemappath"><code>module.findSourceMap(path)</code></a></li><li><a href="/it/nodejs/api/module#class-modulesourcemap">Classe: <code>module.SourceMap</code></a><ul><li><a href="/it/nodejs/api/module#new-sourcemappayload"><code>new SourceMap(payload)</code></a></li><li><a href="/it/nodejs/api/module#sourcemappayload"><code>sourceMap.payload</code></a></li><li><a href="/it/nodejs/api/module#sourcemapfindentrylinenumber-columnnumber"><code>sourceMap.findEntry(lineNumber, columnNumber)</code></a></li></ul></li></ul>`,269)])}var s=e(a,[[`render`,o]]);export{i as __pageData,s as default};