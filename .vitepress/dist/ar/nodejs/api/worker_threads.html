<!DOCTYPE html>
<html lang="ar" dir="rtl">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>توثيق Node.js - خيوط العاملين | API &amp; الدليل &amp; للمطورين</title>
    <meta name="description" content="توثيق حول كيفية استخدام خيوط العاملين في Node.js للاستفادة من تعدد الخيوط للمهام التي تتطلب وحدة المعالجة المركزية، مع تقديم نظرة عامة على فئة Worker، والتواصل بين الخيوط، وأمثلة على الاستخدام.">
    <meta name="generator" content="VitePress v2.0.0-alpha.5">
    <link rel="preload stylesheet" href="/assets/style.DMJS6Yzr.css" as="style">
    <link rel="preload stylesheet" href="/vp-icons.css" as="style">
    <script type="module" src="/assets/chunks/metadata.b396fbd4.js"></script>
    <script type="module" src="/assets/app.DawBhKzk.js"></script>
    <link rel="modulepreload" href="/assets/chunks/plugin-vue_export-helper.Bts1mPc7.js">
    <link rel="modulepreload" href="/assets/chunks/translation.CRvAmi0k.js">
    <link rel="modulepreload" href="/assets/chunks/VPLocalSearchBox.CiMs7L_f.js">
    <link rel="modulepreload" href="/assets/ar_nodejs_api_worker_threads.md.BtR04kOx.lean.js">
    <link rel="icon" type="image/svg+xml" href="/logo.svg">
    <link rel="icon" type="image/png" href="/logo.png">
    <link rel="shortcut icon" href="/favicon.ico">
    <meta name="theme-color" content="#5f67ee">
    <meta property="og:type" content="website">
    <meta property="og:title" content="iDoc | API &amp; Guide for Developers">
    <meta property="og:site_name" content="iDoc">
    <meta property="og:image" content="https://idoc.dev/logo.svg">
    <meta property="og:url" content="https://idoc.dev/ar/nodejs/api/worker_threads">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="idoc.dev">
    <meta name="twitter:image" content="https://idoc.dev/logo.svg">
    <meta name="twitter:title" content="توثيق Node.js - خيوط العاملين | Node.js - iDoc.dev">
    <meta name="twitter:creator" content="neo@idoc.dev">
    <meta name="twitter:url" content="https://node.idoc.dev/">
    <meta name="twitter:description" content="توثيق حول كيفية استخدام خيوط العاملين في Node.js للاستفادة من تعدد الخيوط للمهام التي تتطلب وحدة المعالجة المركزية، مع تقديم نظرة عامة على فئة Worker، والتواصل بين الخيوط، وأمثلة على الاستخدام.">
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-X0C67TVVXR"></script>
    <script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-X0C67TVVXR");</script>
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3961359407117622" crossorigin="anonymous"></script>
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
    <meta name="og:title" content="توثيق Node.js - خيوط العاملين | Node.js - iDoc.dev">
    <meta name="og:description" content="توثيق حول كيفية استخدام خيوط العاملين في Node.js للاستفادة من تعدد الخيوط للمهام التي تتطلب وحدة المعالجة المركزية، مع تقديم نظرة عامة على فئة Worker، والتواصل بين الخيوط، وأمثلة على الاستخدام.">
    <link rel="canonical" href="https://idoc.dev/ar/nodejs/api/worker_threads">
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-4539713c><!--[--><!--]--><!--[--><span tabindex="-1" data-v-fcbfc0e0></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-fcbfc0e0>Skip to content</a><!--]--><!----><header class="VPNav" data-v-4539713c data-v-7ad780c2><div class="VPNavBar" data-v-7ad780c2 data-v-cb5e22fa><div class="wrapper" data-v-cb5e22fa><div class="container" data-v-cb5e22fa><div class="title" data-v-cb5e22fa><div class="VPNavBarTitle has-sidebar" data-v-cb5e22fa data-v-d4488dd0><a class="title" href="/ar/" data-v-d4488dd0><!--[--><!--]--><!--[--><img class="VPImage logo" src="/logo.svg" width="24" height="24" alt="iDoc.dev" data-v-ab19afbb><!--]--><span data-v-d4488dd0>iDoc</span><!--[--><!--]--></a></div></div><div class="content" data-v-cb5e22fa><div class="content-body" data-v-cb5e22fa><!--[--><!--]--><div class="VPNavBarSearch search" data-v-cb5e22fa><!--[--><!----><div id="local-search"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><span class="vp-icon DocSearch-Search-Icon"></span><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"></kbd><kbd class="DocSearch-Button-Key">K</kbd></span></button></div><!--]--></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-cb5e22fa data-v-020be4db><span id="main-nav-aria-label" class="visually-hidden" data-v-020be4db> Main Navigation </span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink active" href="/ar/nodejs/api/synopsis" tabindex="0" data-v-020be4db data-v-815115f5><!--[--><span data-v-815115f5>مرجع API</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/ar/nodejs/guide/what-is-nodejs" tabindex="0" data-v-020be4db data-v-815115f5><!--[--><span data-v-815115f5>دليل</span><!--]--></a><!--]--><!--]--></nav><div class="VPFlyout VPNavBarTranslations translations" data-v-cb5e22fa data-v-acee064b data-v-9bb987dd><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="اللغات" data-v-9bb987dd><span class="text" data-v-9bb987dd><span class="vpi-languages option-icon" data-v-9bb987dd></span><!----><span class="vpi-chevron-down text-icon" data-v-9bb987dd></span></span></button><div class="menu" data-v-9bb987dd><div class="VPMenu" data-v-9bb987dd data-v-2f78439e><!----><!--[--><!--[--><div class="items" data-v-acee064b><p class="title" data-v-acee064b>العربية</p><!--[--><div class="VPMenuLink" data-v-acee064b data-v-7eeeb2dc><a class="VPLink link" href="/nodejs/api/worker_threads" data-v-7eeeb2dc><!--[--><span data-v-7eeeb2dc>English</span><!--]--></a></div><div class="VPMenuLink" data-v-acee064b data-v-7eeeb2dc><a class="VPLink link" href="/zh/nodejs/api/worker_threads" data-v-7eeeb2dc><!--[--><span data-v-7eeeb2dc>简体中文</span><!--]--></a></div><div class="VPMenuLink" data-v-acee064b data-v-7eeeb2dc><a class="VPLink link" href="/es/nodejs/api/worker_threads" data-v-7eeeb2dc><!--[--><span data-v-7eeeb2dc>Español</span><!--]--></a></div><div class="VPMenuLink" data-v-acee064b data-v-7eeeb2dc><a class="VPLink link" href="/fr/nodejs/api/worker_threads" data-v-7eeeb2dc><!--[--><span data-v-7eeeb2dc>Français</span><!--]--></a></div><div class="VPMenuLink" data-v-acee064b data-v-7eeeb2dc><a class="VPLink link" href="/pt/nodejs/api/worker_threads" data-v-7eeeb2dc><!--[--><span data-v-7eeeb2dc>Português</span><!--]--></a></div><div class="VPMenuLink" data-v-acee064b data-v-7eeeb2dc><a class="VPLink link" href="/de/nodejs/api/worker_threads" data-v-7eeeb2dc><!--[--><span data-v-7eeeb2dc>Deutsch</span><!--]--></a></div><div class="VPMenuLink" data-v-acee064b data-v-7eeeb2dc><a class="VPLink link" href="/it/nodejs/api/worker_threads" data-v-7eeeb2dc><!--[--><span data-v-7eeeb2dc>Italiano</span><!--]--></a></div><div class="VPMenuLink" data-v-acee064b data-v-7eeeb2dc><a class="VPLink link" href="/ja/nodejs/api/worker_threads" data-v-7eeeb2dc><!--[--><span data-v-7eeeb2dc>日本語</span><!--]--></a></div><div class="VPMenuLink" data-v-acee064b data-v-7eeeb2dc><a class="VPLink link" href="/ko/nodejs/api/worker_threads" data-v-7eeeb2dc><!--[--><span data-v-7eeeb2dc>한국어</span><!--]--></a></div><div class="VPMenuLink" data-v-acee064b data-v-7eeeb2dc><a class="VPLink link" href="/ru/nodejs/api/worker_threads" data-v-7eeeb2dc><!--[--><span data-v-7eeeb2dc>Русский</span><!--]--></a></div><!--]--></div><!--]--><!--]--></div></div></div><div class="VPNavBarAppearance appearance" data-v-cb5e22fa data-v-3f90c1a5><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-3f90c1a5 data-v-be9742d9 data-v-b4ccac88><span class="check" data-v-b4ccac88><span class="icon" data-v-b4ccac88><!--[--><span class="vpi-sun sun" data-v-be9742d9></span><span class="vpi-moon moon" data-v-be9742d9></span><!--]--></span></span></button></div><!----><div class="VPFlyout VPNavBarExtra extra" data-v-cb5e22fa data-v-f953d92f data-v-9bb987dd><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-9bb987dd><span class="vpi-more-horizontal icon" data-v-9bb987dd></span></button><div class="menu" data-v-9bb987dd><div class="VPMenu" data-v-9bb987dd data-v-2f78439e><!----><!--[--><!--[--><div class="group translations" data-v-f953d92f><p class="trans-title" data-v-f953d92f>العربية</p><!--[--><div class="VPMenuLink" data-v-f953d92f data-v-7eeeb2dc><a class="VPLink link" href="/nodejs/api/worker_threads" data-v-7eeeb2dc><!--[--><span data-v-7eeeb2dc>English</span><!--]--></a></div><div class="VPMenuLink" data-v-f953d92f data-v-7eeeb2dc><a class="VPLink link" href="/zh/nodejs/api/worker_threads" data-v-7eeeb2dc><!--[--><span data-v-7eeeb2dc>简体中文</span><!--]--></a></div><div class="VPMenuLink" data-v-f953d92f data-v-7eeeb2dc><a class="VPLink link" href="/es/nodejs/api/worker_threads" data-v-7eeeb2dc><!--[--><span data-v-7eeeb2dc>Español</span><!--]--></a></div><div class="VPMenuLink" data-v-f953d92f data-v-7eeeb2dc><a class="VPLink link" href="/fr/nodejs/api/worker_threads" data-v-7eeeb2dc><!--[--><span data-v-7eeeb2dc>Français</span><!--]--></a></div><div class="VPMenuLink" data-v-f953d92f data-v-7eeeb2dc><a class="VPLink link" href="/pt/nodejs/api/worker_threads" data-v-7eeeb2dc><!--[--><span data-v-7eeeb2dc>Português</span><!--]--></a></div><div class="VPMenuLink" data-v-f953d92f data-v-7eeeb2dc><a class="VPLink link" href="/de/nodejs/api/worker_threads" data-v-7eeeb2dc><!--[--><span data-v-7eeeb2dc>Deutsch</span><!--]--></a></div><div class="VPMenuLink" data-v-f953d92f data-v-7eeeb2dc><a class="VPLink link" href="/it/nodejs/api/worker_threads" data-v-7eeeb2dc><!--[--><span data-v-7eeeb2dc>Italiano</span><!--]--></a></div><div class="VPMenuLink" data-v-f953d92f data-v-7eeeb2dc><a class="VPLink link" href="/ja/nodejs/api/worker_threads" data-v-7eeeb2dc><!--[--><span data-v-7eeeb2dc>日本語</span><!--]--></a></div><div class="VPMenuLink" data-v-f953d92f data-v-7eeeb2dc><a class="VPLink link" href="/ko/nodejs/api/worker_threads" data-v-7eeeb2dc><!--[--><span data-v-7eeeb2dc>한국어</span><!--]--></a></div><div class="VPMenuLink" data-v-f953d92f data-v-7eeeb2dc><a class="VPLink link" href="/ru/nodejs/api/worker_threads" data-v-7eeeb2dc><!--[--><span data-v-7eeeb2dc>Русский</span><!--]--></a></div><!--]--></div><div class="group" data-v-f953d92f><div class="item appearance" data-v-f953d92f><p class="label" data-v-f953d92f>الوضع الداكن</p><div class="appearance-action" data-v-f953d92f><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-f953d92f data-v-be9742d9 data-v-b4ccac88><span class="check" data-v-b4ccac88><span class="icon" data-v-b4ccac88><!--[--><span class="vpi-sun sun" data-v-be9742d9></span><span class="vpi-moon moon" data-v-be9742d9></span><!--]--></span></span></button></div></div></div><!----><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-cb5e22fa data-v-6bee1efd><span class="container" data-v-6bee1efd><span class="top" data-v-6bee1efd></span><span class="middle" data-v-6bee1efd></span><span class="bottom" data-v-6bee1efd></span></span></button></div></div></div></div><div class="divider" data-v-cb5e22fa><div class="divider-line" data-v-cb5e22fa></div></div></div><!----></header><div class="VPLocalNav has-sidebar empty" data-v-4539713c data-v-6c0451ca><div class="container" data-v-6c0451ca><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-6c0451ca><span class="vpi-align-left menu-icon" data-v-6c0451ca></span><span class="menu-text" data-v-6c0451ca>القائمة</span></button><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-6c0451ca data-v-92b7576c><button data-v-92b7576c>الرجوع إلى الأعلى</button><!----></div></div></div><aside class="VPSidebar" data-v-4539713c data-v-606f96d3><div class="curtain" data-v-606f96d3></div><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-606f96d3><span class="visually-hidden" id="sidebar-aria-label" data-v-606f96d3> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="no-transition group" data-v-a84b7c21><section class="VPSidebarItem level-0 collapsible collapsed" data-v-a84b7c21 data-v-6b36a2fd><div class="item" role="button" tabindex="0" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><h2 class="text" data-v-6b36a2fd>دليل البدء</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-6b36a2fd><span class="vpi-chevron-right caret-icon" data-v-6b36a2fd></span></div></div><div class="items" data-v-6b36a2fd><!--[--><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/ar/nodejs/api/documentation" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>حول هذه الوثيقة</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/ar/nodejs/api/synopsis" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>الاستخدام والأمثلة</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-a84b7c21><section class="VPSidebarItem level-0 collapsible collapsed" data-v-a84b7c21 data-v-6b36a2fd><div class="item" role="button" tabindex="0" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><h2 class="text" data-v-6b36a2fd>الوحدات</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-6b36a2fd><span class="vpi-chevron-right caret-icon" data-v-6b36a2fd></span></div></div><div class="items" data-v-6b36a2fd><!--[--><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/ar/nodejs/api/module" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>API node:module</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/ar/nodejs/api/modules" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>الوحدات CommonJS</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/ar/nodejs/api/typescript" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>وحدات TypeScript</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/ar/nodejs/api/esm" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>وحدات ECMAScript</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/ar/nodejs/api/packages" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>إدارة الحزم</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/ar/nodejs/api/corepack" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>Corepack</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-a84b7c21><section class="VPSidebarItem level-0 collapsible collapsed" data-v-a84b7c21 data-v-6b36a2fd><div class="item" role="button" tabindex="0" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><h2 class="text" data-v-6b36a2fd>HTTP والشبكات</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-6b36a2fd><span class="vpi-chevron-right caret-icon" data-v-6b36a2fd></span></div></div><div class="items" data-v-6b36a2fd><!--[--><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/ar/nodejs/api/http" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>HTTP</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/ar/nodejs/api/http2" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>HTTP/2</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/ar/nodejs/api/https" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>HTTPS</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/ar/nodejs/api/net" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>Net</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/ar/nodejs/api/tls" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>TLS (SSL)</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/ar/nodejs/api/dgram" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>UDP/مقابس داتاغرام</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/ar/nodejs/api/dns" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>DNS</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/ar/nodejs/api/tty" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>TTY</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/ar/nodejs/api/url" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>URL</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/ar/nodejs/api/domain" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>النطاق</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-a84b7c21><section class="VPSidebarItem level-0 collapsible collapsed" data-v-a84b7c21 data-v-6b36a2fd><div class="item" role="button" tabindex="0" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><h2 class="text" data-v-6b36a2fd>نظام الملفات والمسارات</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-6b36a2fd><span class="vpi-chevron-right caret-icon" data-v-6b36a2fd></span></div></div><div class="items" data-v-6b36a2fd><!--[--><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/ar/nodejs/api/fs" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>نظام الملفات</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/ar/nodejs/api/path" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>المسارات</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-a84b7c21><section class="VPSidebarItem level-0 collapsible collapsed" data-v-a84b7c21 data-v-6b36a2fd><div class="item" role="button" tabindex="0" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><h2 class="text" data-v-6b36a2fd>التدفقات، المخازن وWASI</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-6b36a2fd><span class="vpi-chevron-right caret-icon" data-v-6b36a2fd></span></div></div><div class="items" data-v-6b36a2fd><!--[--><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/ar/nodejs/api/stream" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>التدفقات</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/ar/nodejs/api/webstreams" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>API التدفقات الويب</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/ar/nodejs/api/buffer" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>المخزن</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/ar/nodejs/api/wasi" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>واجهة WebAssembly System (WASI)</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-a84b7c21><section class="VPSidebarItem level-0 collapsible collapsed" data-v-a84b7c21 data-v-6b36a2fd><div class="item" role="button" tabindex="0" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><h2 class="text" data-v-6b36a2fd>الأحداث، القنوات والمزالج غير المتزامنة</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-6b36a2fd><span class="vpi-chevron-right caret-icon" data-v-6b36a2fd></span></div></div><div class="items" data-v-6b36a2fd><!--[--><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/ar/nodejs/api/events" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>الأحداث</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/ar/nodejs/api/tracing" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>تتبع الأحداث</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/ar/nodejs/api/diagnostics_channel" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>قناة التشخيص</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/ar/nodejs/api/async_hooks" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>المزالج غير المتزامنة</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/ar/nodejs/api/async_context" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>تتبع السياق غير المتزامن</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-a84b7c21><section class="VPSidebarItem level-0 collapsible collapsed has-active" data-v-a84b7c21 data-v-6b36a2fd><div class="item" role="button" tabindex="0" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><h2 class="text" data-v-6b36a2fd>العمليات، العنقود والخيوط</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-6b36a2fd><span class="vpi-chevron-right caret-icon" data-v-6b36a2fd></span></div></div><div class="items" data-v-6b36a2fd><!--[--><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/ar/nodejs/api/process" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>العمليات</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/ar/nodejs/api/child_process" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>العمليات الفرعية</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/ar/nodejs/api/cluster" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>العنقود</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/ar/nodejs/api/worker_threads" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>خيوط العمل</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/ar/nodejs/api/permissions" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>الأذونات</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-a84b7c21><section class="VPSidebarItem level-0 collapsible collapsed" data-v-a84b7c21 data-v-6b36a2fd><div class="item" role="button" tabindex="0" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><h2 class="text" data-v-6b36a2fd>إضافات C++ وAPI التكامل</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-6b36a2fd><span class="vpi-chevron-right caret-icon" data-v-6b36a2fd></span></div></div><div class="items" data-v-6b36a2fd><!--[--><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/ar/nodejs/api/addons" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>إضافات C++</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/ar/nodejs/api/n-api" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>إضافات C/C++ باستخدام Node-API</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/ar/nodejs/api/embedding" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>API التكامل C++</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-a84b7c21><section class="VPSidebarItem level-0 collapsible collapsed" data-v-a84b7c21 data-v-6b36a2fd><div class="item" role="button" tabindex="0" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><h2 class="text" data-v-6b36a2fd>الاختبارات وتصحيح الأخطاء</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-6b36a2fd><span class="vpi-chevron-right caret-icon" data-v-6b36a2fd></span></div></div><div class="items" data-v-6b36a2fd><!--[--><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/ar/nodejs/api/cli" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>خيارات سطر الأوامر</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/ar/nodejs/api/test" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>منفذ الاختبارات</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/ar/nodejs/api/assert" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>اختبارات التحقق</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/ar/nodejs/api/debugger" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>أداة التصحيح</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/ar/nodejs/api/console" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>وحدة التحكم</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/ar/nodejs/api/errors" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>إدارة الأخطاء</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/ar/nodejs/api/timers" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>مؤقتات</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/ar/nodejs/api/inspector" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>أداة الفحص</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/ar/nodejs/api/report" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>التقرير</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/ar/nodejs/api/repl" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>REPL</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/ar/nodejs/api/readline" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>Readline</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/ar/nodejs/api/perf_hooks" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>المزالج الخاصة بالأداء</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-a84b7c21><section class="VPSidebarItem level-0 collapsible collapsed" data-v-a84b7c21 data-v-6b36a2fd><div class="item" role="button" tabindex="0" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><h2 class="text" data-v-6b36a2fd>الأدوات والمرافق</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-6b36a2fd><span class="vpi-chevron-right caret-icon" data-v-6b36a2fd></span></div></div><div class="items" data-v-6b36a2fd><!--[--><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/ar/nodejs/api/util" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>المرافق</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/ar/nodejs/api/crypto" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>التشفير</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/ar/nodejs/api/webcrypto" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>تشفير الويب</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/ar/nodejs/api/zlib" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>Zlib</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/ar/nodejs/api/querystring" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>سلسلة الاستعلام</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/ar/nodejs/api/string_decoder" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>أداة فك الشيفرة النصية</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/ar/nodejs/api/sqlite" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>SQLite</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-a84b7c21><section class="VPSidebarItem level-0 collapsible collapsed" data-v-a84b7c21 data-v-6b36a2fd><div class="item" role="button" tabindex="0" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><h2 class="text" data-v-6b36a2fd>أخرى</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-6b36a2fd><span class="vpi-chevron-right caret-icon" data-v-6b36a2fd></span></div></div><div class="items" data-v-6b36a2fd><!--[--><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/ar/nodejs/api/intl" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>التدويل</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/ar/nodejs/api/globals" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>الكائنات العالمية</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/ar/nodejs/api/single-executable-applications" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>التطبيقات التنفيذية الوحيدة</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/ar/nodejs/api/os" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>نظام التشغيل</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/ar/nodejs/api/v8" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>محرك V8</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/ar/nodejs/api/vm" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>وحدة VM</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/ar/nodejs/api/punycode" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>Punycode</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/ar/nodejs/api/deprecations" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>API المتقادمة</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-4539713c data-v-2652e39a><div class="VPDoc has-sidebar has-aside" data-v-2652e39a data-v-d668f7cc><!--[--><!--]--><div class="container" data-v-d668f7cc><div class="aside" data-v-d668f7cc><div class="aside-curtain" data-v-d668f7cc></div><div class="aside-container" data-v-d668f7cc><div class="aside-content" data-v-d668f7cc><div class="VPDocAside" data-v-d668f7cc data-v-cb998dce><!--[--><!--[--><!--[--><!--[--><div class="share"><div class="share-item"><a href="https://twitter.com/intent/tweet?text=%D8%AA%D9%88%D8%AB%D9%8A%D9%82%20Node.js%20-%20%D8%AE%D9%8A%D9%88%D8%B7%20%D8%A7%D9%84%D8%B9%D8%A7%D9%85%D9%84%D9%8A%D9%86%20%7C%20API%20%26%20%D8%A7%D9%84%D8%AF%D9%84%D9%8A%D9%84%20%26%20%D9%84%D9%84%D9%85%D8%B7%D9%88%D8%B1%D9%8A%D9%86&amp;url=https%3A%2F%2Fidoc.dev%2Far%2Fnodejs%2Fapi%2Fworker_threads" target="_blank" title="مشاركة في X"><img src="https://idoc.dev/x-logo.svg" alt="X" class="logo x-logo"></a></div><div class="share-item"><a href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Fidoc.dev%2Far%2Fnodejs%2Fapi%2Fworker_threads" target="_blank" title="مشاركة في Facebook"><img src="https://idoc.dev/fb-logo.svg" alt="Facebook" class="logo fb-logo"></a></div></div><!--]--><!--]--><!--]--><!--]--><!--[--><!--]--><nav aria-labelledby="doc-outline-aria-label" class="VPDocAsideOutline" data-v-cb998dce data-v-c8b19031><div class="content" data-v-c8b19031><div class="outline-marker" data-v-c8b19031></div><div aria-level="2" class="outline-title" id="doc-outline-aria-label" role="heading" data-v-c8b19031>تنقل الصفحة</div><ul class="VPDocOutlineItem root" data-v-c8b19031 data-v-b7d7ef80><!--[--><!--]--></ul></div></nav><!--[--><!--]--><div class="spacer" data-v-cb998dce></div><!--[--><!--[--><!--[--><!--[--><ins class="adsbygoogle" style="display:block;" data-ad-client="ca-pub-3961359407117622" data-ad-slot="4724601302" data-ad-format="auto" data-full-width-responsive="true"></ins><!--]--><!--]--><!--]--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-d668f7cc><div class="content-container" data-v-d668f7cc><!--[--><!--]--><main class="main" data-v-d668f7cc><div style="position:relative;" class="vp-doc _ar_nodejs_api_worker_threads" data-v-d668f7cc><div><h1 id="worker-threads" tabindex="-1">سلاسل العمل <a class="header-anchor" href="#worker-threads" aria-label="Permalink to “سلاسل العمل”">​</a></h1><div class="tip custom-block"><p class="custom-block-title">[مستقر: 2 - مستقر]</p><p><a href="/ar/nodejs/api/documentation#stability-index">مستقر: 2</a> <a href="/ar/nodejs/api/documentation#stability-index">الاستقرار: 2</a> - مستقر</p></div><p><strong>كود المصدر:</strong> <a href="https://github.com/nodejs/node/blob/v23.5.0/lib/worker_threads.js" target="_blank" rel="noreferrer">lib/worker_threads.js</a></p><p>تتيح وحدة <code>node:worker_threads</code> استخدام سلاسل العمل التي تنفذ JavaScript بالتوازي. للوصول إليها:</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> worker</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;node:worker_threads&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>تعتبر سلاسل العمل (threads) مفيدة لتنفيذ عمليات JavaScript المكثفة لوحدة المعالجة المركزية (CPU). لا تساعد كثيرًا في العمليات المكثفة للإدخال/الإخراج (I/O). عمليات الإدخال/الإخراج غير المتزامنة المدمجة في Node.js أكثر كفاءة من سلاسل العمل.</p><p>على عكس <code>child_process</code> أو <code>cluster</code>، يمكن لـ <code>worker_threads</code> مشاركة الذاكرة. يفعلون ذلك عن طريق نقل مثيلات <code>ArrayBuffer</code> أو مشاركة مثيلات <code>SharedArrayBuffer</code>.</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  Worker</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">isMainThread</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">parentPort</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">workerData</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">} </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;node:worker_threads&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (isMainThread) {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  module</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">exports</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> parseJSAsync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">script</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> Promise</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">resolve</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">reject</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> worker</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Worker</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(__filename, {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        workerData: script,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      worker.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">on</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;message&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, resolve);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      worker.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">on</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;error&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, reject);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      worker.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">on</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;exit&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">code</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (code </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!==</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">          reject</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">`Worker stopped with exit code ${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">code</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">));</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  };</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">} </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">else</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">parse</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;some-js-parsing-library&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> script</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> workerData;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  parentPort.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">postMessage</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">parse</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(script));</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><p>يقوم المثال أعلاه بإنشاء سلسلة عمل (Worker thread) لكل استدعاء <code>parseJSAsync()</code>. من الناحية العملية، استخدم مجموعة من سلاسل العمل لهذه الأنواع من المهام. بخلاف ذلك، من المحتمل أن تتجاوز تكلفة إنشاء سلاسل العمل فائدتها.</p><p>عند تنفيذ تجمع لسلاسل العمل، استخدم واجهة برمجة التطبيقات <a href="/ar/nodejs/api/async_hooks#class-asyncresource"><code>AsyncResource</code></a> لإبلاغ أدوات التشخيص (على سبيل المثال، لتوفير تتبعات مكدس غير متزامنة) حول العلاقة بين المهام ونتائجها. راجع <a href="/ar/nodejs/api/async_context#using-asyncresource-for-a-worker-thread-pool">&quot;استخدام <code>AsyncResource</code> لتجمع سلاسل عمل <code>Worker</code>&quot;</a> في وثائق <code>async_hooks</code> للحصول على مثال على التنفيذ.</p><p>ترث سلاسل العمل خيارات غير خاصة بالعملية افتراضيًا. راجع <a href="/ar/nodejs/api/worker_threads#new-workerfilename-options"><code>خيارات منشئ Worker</code></a> لمعرفة كيفية تخصيص خيارات سلسلة العمل، وتحديدًا خياري <code>argv</code> و <code>execArgv</code>.</p><h2 id="workergetenvironmentdatakey" tabindex="-1"><code>worker.getEnvironmentData(key)</code> <a class="header-anchor" href="#workergetenvironmentdatakey" aria-label="Permalink to “worker.getEnvironmentData(key)”">​</a></h2><div class="info custom-block"><p class="custom-block-title">[السجل]</p><table tabindex="0"><thead><tr><th>الإصدار</th><th>التغييرات</th></tr></thead><tbody><tr><td>v17.5.0, v16.15.0</td><td>لم يعد تجريبيًا.</td></tr><tr><td>v15.12.0, v14.18.0</td><td>تمت إضافته في: v15.12.0, v14.18.0</td></tr></tbody></table></div><ul><li><code>key</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Data_types" target="_blank" rel="noreferrer">&lt;any&gt;</a> أي قيمة JavaScript اعتباطية وقابلة للاستنساخ يمكن استخدامها كمفتاح <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Map" target="_blank" rel="noreferrer">&lt;Map&gt;</a>.</li><li>الإرجاع: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Data_types" target="_blank" rel="noreferrer">&lt;any&gt;</a></li></ul><p>داخل سلسلة عامل، تُرجع <code>worker.getEnvironmentData()</code> نسخة مُستنسخة من البيانات التي تم تمريرها إلى <code>worker.setEnvironmentData()</code> في سلسلة الإنشاء. يتلقى كل <code>Worker</code> جديد نسخة خاصة به من بيانات البيئة تلقائيًا.</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  Worker</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  isMainThread</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  setEnvironmentData</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  getEnvironmentData</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">} </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;node:worker_threads&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (isMainThread) {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  setEnvironmentData</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;Hello&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;World!&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> worker</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Worker</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(__filename);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">} </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">else</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getEnvironmentData</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;Hello&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">));  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// طباعة &#39;World!&#39;.</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h2 id="workerismainthread" tabindex="-1"><code>worker.isMainThread</code> <a class="header-anchor" href="#workerismainthread" aria-label="Permalink to “worker.isMainThread”">​</a></h2><p><strong>تمت إضافته في: v10.5.0</strong></p><ul><li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" target="_blank" rel="noreferrer">&lt;boolean&gt;</a></li></ul><p>يكون <code>true</code> إذا لم يكن هذا الرمز قيد التشغيل داخل سلسلة <a href="/ar/nodejs/api/worker_threads#class-worker"><code>Worker</code></a>.</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Worker</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">isMainThread</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;node:worker_threads&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (isMainThread) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // تعيد هذه العملية تحميل الملف الحالي داخل مثيل العامل.</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Worker</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(__filename);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">} </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">else</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;داخل العامل!&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(isMainThread);  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// طباعة &#39;false&#39;.</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h2 id="workermarkasuntransferableobject" tabindex="-1"><code>worker.markAsUntransferable(object)</code> <a class="header-anchor" href="#workermarkasuntransferableobject" aria-label="Permalink to “worker.markAsUntransferable(object)”">​</a></h2><p><strong>تمت إضافته في: v14.5.0, v12.19.0</strong></p><ul><li><code>object</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Data_types" target="_blank" rel="noreferrer">&lt;any&gt;</a> أي قيمة JavaScript اعتباطية.</li></ul><p>ضع علامة على كائن على أنه غير قابل للتحويل. إذا ظهر <code>object</code> في قائمة التحويل الخاصة باستدعاء <a href="/ar/nodejs/api/worker_threads#portpostmessagevalue-transferlist"><code>port.postMessage()</code></a>، فسيتم طرح خطأ. هذا الإجراء لا يفعل شيئًا إذا كانت <code>object</code> قيمة بدائية.</p><p>على وجه الخصوص، يكون هذا منطقيًا للكائنات التي يمكن استنساخها بدلاً من نقلها، والتي تستخدمها كائنات أخرى على الجانب المرسل. على سبيل المثال، تضع Node.js علامة على <a href="/ar/nodejs/api/buffer#static-method-bufferallocunsafesize"><code>ArrayBuffer</code></a> التي تستخدمها لمجموعة <a href="/ar/nodejs/api/buffer#static-method-bufferallocunsafesize"><code>Buffer</code></a> الخاصة بها بهذا.</p><p>لا يمكن التراجع عن هذه العملية.</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">MessageChannel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">markAsUntransferable</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;node:worker_threads&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> pooledBuffer</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ArrayBuffer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">8</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> typedArray1</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Uint8Array</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(pooledBuffer);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> typedArray2</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Float64Array</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(pooledBuffer);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">markAsUntransferable</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(pooledBuffer);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">port1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> MessageChannel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">try</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // سيؤدي هذا إلى طرح خطأ، لأن pooledBuffer غير قابل للتحويل.</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  port1.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">postMessage</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(typedArray1, [ typedArray1.buffer ]);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">} </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">catch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (error) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // error.name === &#39;DataCloneError&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// يطبع السطر التالي محتويات typedArray1 -- لا يزال يمتلك</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// ذاكرته ولم يتم نقله. بدون</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// `markAsUntransferable()`، سيتم طباعة Uint8Array فارغ و</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// سيتم استدعاء postMessage بنجاح.</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// typedArray2 سليم أيضًا.</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(typedArray1);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(typedArray2);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><p>لا يوجد ما يعادل واجهة برمجة التطبيقات هذه في المتصفحات.</p><h2 id="workerismarkedasuntransferableobject" tabindex="-1">‏‎<code>worker.isMarkedAsUntransferable(object)</code>‎‏ <a class="header-anchor" href="#workerismarkedasuntransferableobject" aria-label="Permalink to “‏‎worker.isMarkedAsUntransferable(object)‎‏”">​</a></h2><p><strong>أُضيف في:</strong> ‏v21.0.0</p><ul><li>‏<code>object</code> ‏‎<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Data_types" target="_blank" rel="noreferrer">&lt;any&gt;</a>‎‏ أي قيمة JavaScript.</li><li>المرتجعات: ‏‎<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" target="_blank" rel="noreferrer">&lt;boolean&gt;</a>‎‏</li></ul><p>تحقق مما إذا كان الكائن مصنفًا على أنه غير قابل للنقل باستخدام ‏‎<a href="/ar/nodejs/api/worker_threads#workermarkasuntransferableobject"><code>markAsUntransferable()</code></a>‎‏.</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">markAsUntransferable</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">isMarkedAsUntransferable</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;node:worker_threads&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> pooledBuffer</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ArrayBuffer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">8</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">markAsUntransferable</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(pooledBuffer);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">isMarkedAsUntransferable</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(pooledBuffer);  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Returns true.</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>لا يوجد ما يعادل هذا الـ API في المتصفحات.</p><h2 id="workermarkasuncloneableobject" tabindex="-1">‏‎<code>worker.markAsUncloneable(object)</code>‎‏ <a class="header-anchor" href="#workermarkasuncloneableobject" aria-label="Permalink to “‏‎worker.markAsUncloneable(object)‎‏”">​</a></h2><p><strong>أُضيف في:</strong> ‏v23.0.0</p><ul><li>‏<code>object</code> ‏‎<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Data_types" target="_blank" rel="noreferrer">&lt;any&gt;</a>‎‏ أي قيمة JavaScript اعتباطية.</li></ul><p>ضع علامة على كائن على أنه غير قابل للاستنساخ. إذا تم استخدام ‏<code>object</code>‏ كـ ‏‎<a href="/ar/nodejs/api/worker_threads#event-message"><code>message</code></a>‎‏ في استدعاء ‏‎<a href="/ar/nodejs/api/worker_threads#portpostmessagevalue-transferlist"><code>port.postMessage()</code></a>‎‏، فسيتم طرح خطأ. هذا ليس له أي تأثير إذا كان ‏<code>object</code>‏ قيمة بدائية.</p><p>هذا ليس له أي تأثير على ‏<code>ArrayBuffer</code>‏، أو أي كائنات شبيهة بـ ‏<code>Buffer</code>‏.</p><p>لا يمكن التراجع عن هذه العملية.</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">markAsUncloneable</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;node:worker_threads&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> anyObject</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { foo: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;bar&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> };</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">markAsUncloneable</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(anyObject);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">port1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> MessageChannel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">try</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // This will throw an error, because anyObject is not cloneable.</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  port1.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">postMessage</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(anyObject);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">} </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">catch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (error) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // error.name === &#39;DataCloneError&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>لا يوجد ما يعادل هذا الـ API في المتصفحات.</p><h2 id="workermovemessageporttocontextport-contextifiedsandbox" tabindex="-1">‏‎<code>worker.moveMessagePortToContext(port, contextifiedSandbox)</code>‎‏ <a class="header-anchor" href="#workermovemessageporttocontextport-contextifiedsandbox" aria-label="Permalink to “‏‎worker.moveMessagePortToContext(port, contextifiedSandbox)‎‏”">​</a></h2><p><strong>أُضيف في:</strong> ‏v11.13.0</p><ul><li>‏<code>port</code> ‏‎<a href="/ar/nodejs/api/worker_threads#class-messageport">&lt;MessagePort&gt;</a>‎‏ منفذ الرسائل المراد نقله.</li><li>‏<code>contextifiedSandbox</code> ‏‎<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noreferrer">&lt;Object&gt;</a>‎‏ كائن <a href="/ar/nodejs/api/vm#what-does-it-mean-to-contextify-an-object">مضاف إلى السياق</a> كما تم إرجاعه بواسطة طريقة ‏‎<code>vm.createContext()</code>‎‏.</li><li>المرتجعات: ‏‎<a href="/ar/nodejs/api/worker_threads#class-messageport">&lt;MessagePort&gt;</a>‎‏</li></ul><p>انقل ‏<code>MessagePort</code>‏ إلى ‏<code>vm</code>‏ مختلف <a href="/ar/nodejs/api/vm">سياق</a>. يتم جعل كائن ‏<code>port</code>‏ الأصلي غير قابل للاستخدام، ويحل مثيل ‏<code>MessagePort</code>‏ المرتجع مكانه.</p><p>إن ‏<code>MessagePort</code>‏ المرتجع هو كائن في السياق المستهدف ويرث من فئة ‏<code>Object</code>‏ العالمية الخاصة به. يتم أيضًا إنشاء الكائنات التي تم تمريرها إلى المستمع ‏‎<a href="https://developer.mozilla.org/en-US/docs/Web/API/MessagePort/onmessage" target="_blank" rel="noreferrer"><code>port.onmessage()</code></a>‎‏ في السياق المستهدف وترث من فئة ‏<code>Object</code>‏ العالمية الخاصة به.</p><p>ومع ذلك، لم يعد ‏<code>MessagePort</code>‏ الذي تم إنشاؤه يرث من ‏‎<a href="https://developer.mozilla.org/en-US/docs/Web/API/EventTarget" target="_blank" rel="noreferrer"><code>EventTarget</code></a>‎‏، ويمكن استخدام ‏‎<a href="https://developer.mozilla.org/en-US/docs/Web/API/MessagePort/onmessage" target="_blank" rel="noreferrer"><code>port.onmessage()</code></a>‎‏ فقط لتلقي الأحداث باستخدامه.</p><h2 id="workerparentport" tabindex="-1"><code>worker.parentPort</code> <a class="header-anchor" href="#workerparentport" aria-label="Permalink to “worker.parentPort”">​</a></h2><p><strong>تمت إضافته في: v10.5.0</strong></p><ul><li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Null_type" target="_blank" rel="noreferrer">&lt;null&gt;</a> | <a href="/ar/nodejs/api/worker_threads#class-messageport">&lt;MessagePort&gt;</a></li></ul><p>إذا كان هذا المسار هو <a href="/ar/nodejs/api/worker_threads#class-worker"><code>Worker</code></a>، فهذا هو <a href="/ar/nodejs/api/worker_threads#class-messageport"><code>MessagePort</code></a> الذي يسمح بالاتصال بالمسار الرئيسي. الرسائل المرسلة باستخدام <code>parentPort.postMessage()</code> متاحة في المسار الرئيسي باستخدام <code>worker.on(&#39;message&#39;)</code>، والرسائل المرسلة من المسار الرئيسي باستخدام <code>worker.postMessage()</code> متاحة في هذا المسار باستخدام <code>parentPort.on(&#39;message&#39;)</code>.</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Worker</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">isMainThread</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">parentPort</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;node:worker_threads&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (isMainThread) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> worker</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Worker</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(__filename);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  worker.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">once</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;message&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">message</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(message);  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Prints &#39;Hello, world!&#39;.</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  worker.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">postMessage</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;Hello, world!&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">} </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">else</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // When a message from the parent thread is received, send it back:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  parentPort.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">once</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;message&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">message</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    parentPort.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">postMessage</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(message);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h2 id="workerpostmessagetothreadthreadid-value-transferlist-timeout" tabindex="-1"><code>worker.postMessageToThread(threadId, value[, transferList][, timeout])</code> <a class="header-anchor" href="#workerpostmessagetothreadthreadid-value-transferlist-timeout" aria-label="Permalink to “worker.postMessageToThread(threadId, value[, transferList][, timeout])”">​</a></h2><p><strong>تمت إضافته في: v22.5.0</strong></p><div class="warning custom-block"><p class="custom-block-title">[ثابت: 1 - تجريبي]</p><p><a href="/ar/nodejs/api/documentation#stability-index">ثابت: 1</a> <a href="/ar/nodejs/api/documentation#stability-index">الاستقرار: 1</a>.1 - تطوير نشط</p></div><ul><li><code>threadId</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;number&gt;</a> معرّف المسار المستهدف. إذا كان معرّف المسار غير صالح، فسيتم طرح خطأ <a href="/ar/nodejs/api/errors#err-worker-messaging-failed"><code>ERR_WORKER_MESSAGING_FAILED</code></a>. إذا كان معرّف المسار المستهدف هو معرّف المسار الحالي، فسيتم طرح خطأ <a href="/ar/nodejs/api/errors#err-worker-messaging-same-thread"><code>ERR_WORKER_MESSAGING_SAME_THREAD</code></a>.</li><li><code>value</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Data_types" target="_blank" rel="noreferrer">&lt;any&gt;</a> القيمة المراد إرسالها.</li><li><code>transferList</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noreferrer">&lt;Object[]&gt;</a> إذا تم تمرير كائن واحد أو أكثر من كائنات تشبه <code>MessagePort</code> في <code>value</code>، فإن <code>transferList</code> مطلوب لتلك العناصر وإلا فسيتم طرح <a href="/ar/nodejs/api/errors#err-missing-message-port-in-transfer-list"><code>ERR_MISSING_MESSAGE_PORT_IN_TRANSFER_LIST</code></a>. راجع <a href="/ar/nodejs/api/worker_threads#portpostmessagevalue-transferlist"><code>port.postMessage()</code></a> لمزيد من المعلومات.</li><li><code>timeout</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;number&gt;</a> الوقت المستغرق لانتظار تسليم الرسالة بالمللي ثانية. افتراضيًا يكون <code>undefined</code>، مما يعني الانتظار إلى الأبد. إذا انتهت مهلة العملية، فسيتم طرح خطأ <a href="/ar/nodejs/api/errors#err-worker-messaging-timeout"><code>ERR_WORKER_MESSAGING_TIMEOUT</code></a>.</li><li>الإرجاع: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" target="_blank" rel="noreferrer">&lt;Promise&gt;</a> وعد يتم تحقيقه إذا تمت معالجة الرسالة بنجاح بواسطة المسار الوجهة.</li></ul><p>يرسل قيمة إلى عامل آخر، يتم تحديده بواسطة معرّف مساره.</p><p>إذا لم يكن لدى المسار المستهدف مستمع لحدث <code>workerMessage</code>، فستطرح العملية خطأ <a href="/ar/nodejs/api/errors#err-worker-messaging-failed"><code>ERR_WORKER_MESSAGING_FAILED</code></a>.</p><p>إذا طرح المسار المستهدف خطأ أثناء معالجة حدث <code>workerMessage</code>، فستطرح العملية خطأ <a href="/ar/nodejs/api/errors#err-worker-messaging-errored"><code>ERR_WORKER_MESSAGING_ERRORED</code></a>.</p><p>يجب استخدام هذه الطريقة عندما لا يكون المسار المستهدف هو الأصل أو الطفل المباشر للمسار الحالي. إذا كان المساران أصليين-طفلين، فاستخدم <a href="/ar/nodejs/api/worker_threads#workerpostmessagevalue-transferlist"><code>require(&#39;node:worker_threads&#39;).parentPort.postMessage()</code></a> و <a href="/ar/nodejs/api/worker_threads#workerpostmessagevalue-transferlist"><code>worker.postMessage()</code></a> للسماح للمسارات بالاتصال.</p><p>يوضح المثال أدناه استخدام <code>postMessageToThread</code>: فهو ينشئ 10 مسارات متداخلة، وسيحاول المسار الأخير الاتصال بالمسار الرئيسي.</p><div class="vp-code-group"><div class="tabs"><input type="radio" name="group-278" id="tab-279" checked><label data-title="ESM" for="tab-279">ESM</label><input type="radio" name="group-278" id="tab-280"><label data-title="CJS" for="tab-280">CJS</label></div><div class="blocks"><div class="language-js active line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { fileURLToPath } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;node:url&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> process </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;node:process&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  postMessageToThread,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  threadId,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  workerData,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  Worker,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">} </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;node:worker_threads&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> channel</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> BroadcastChannel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;sync&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> level</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> workerData?.level </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">??</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (level </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 10</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> worker</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Worker</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">fileURLToPath</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">meta</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.url), {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    workerData: { level: level </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (level </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">===</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  process.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">on</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;workerMessage&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">value</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">source</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">`${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">source</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">} -&gt; ${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">threadId</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}:`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, value);</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    postMessageToThread</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(source, { message: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;pong&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">} </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">else</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (level </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">===</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 10</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  process.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">on</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;workerMessage&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">value</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">source</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">`${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">source</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">} -&gt; ${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">threadId</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}:`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, value);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    channel.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">postMessage</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;done&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    channel.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">close</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  });</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> postMessageToThread</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, { message: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;ping&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">channel.onmessage </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> channel.close;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br></div></div><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  postMessageToThread</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  threadId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  workerData</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  Worker</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">} </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;node:worker_threads&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> channel</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> BroadcastChannel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;sync&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> level</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> workerData?.level </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">??</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (level </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 10</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> worker</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Worker</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(__filename, {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    workerData: { level: level </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (level </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">===</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  process.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">on</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;workerMessage&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">value</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">source</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">`${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">source</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">} -&gt; ${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">threadId</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}:`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, value);</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    postMessageToThread</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(source, { message: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;pong&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">} </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">else</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (level </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">===</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 10</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  process.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">on</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;workerMessage&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">value</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">source</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">`${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">source</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">} -&gt; ${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">threadId</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}:`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, value);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    channel.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">postMessage</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;done&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    channel.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">close</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  });</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  postMessageToThread</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, { message: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;ping&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">channel.onmessage </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> channel.close;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br></div></div></div></div><h2 id="workerreceivemessageonportport" tabindex="-1"><code>worker.receiveMessageOnPort(port)</code> <a class="header-anchor" href="#workerreceivemessageonportport" aria-label="Permalink to “worker.receiveMessageOnPort(port)”">​</a></h2><div class="info custom-block"><p class="custom-block-title">[السجل]</p><table tabindex="0"><thead><tr><th>الإصدار</th><th>التغييرات</th></tr></thead><tbody><tr><td>v15.12.0</td><td>يمكن الآن أن يشير وسيط <code>port</code> أيضًا إلى <code>BroadcastChannel</code>.</td></tr><tr><td>v12.3.0</td><td>تمت الإضافة في: v12.3.0</td></tr></tbody></table></div><ul><li><code>port</code> <a href="/ar/nodejs/api/worker_threads#class-messageport">&lt;MessagePort&gt;</a> | <a href="/ar/nodejs/api/worker_threads#class-broadcastchannel-extends-eventtarget">&lt;BroadcastChannel&gt;</a></li><li>الإرجاع: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noreferrer">&lt;Object&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Undefined_type" target="_blank" rel="noreferrer">&lt;undefined&gt;</a></li></ul><p>تلقي رسالة واحدة من <code>MessagePort</code> معينة. إذا لم تكن هناك رسالة متاحة، يتم إرجاع <code>undefined</code>، وإلا يتم إرجاع كائن يحتوي على خاصية <code>message</code> واحدة تحتوي على حمولة الرسالة، المطابقة لأقدم رسالة في قائمة انتظار <code>MessagePort</code>.</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">MessageChannel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">receiveMessageOnPort</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;node:worker_threads&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">port1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">port2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> MessageChannel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">port1.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">postMessage</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({ hello: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;world&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> });</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">receiveMessageOnPort</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(port2));</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// طباعة: { message: { hello: &#39;world&#39; } }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">receiveMessageOnPort</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(port2));</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// طباعة: غير معرف</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>عند استخدام هذه الدالة، لا يتم إطلاق أي حدث <code>&#39;message&#39;</code> ولا يتم استدعاء المستمع <code>onmessage</code>.</p><h2 id="workerresourcelimits" tabindex="-1"><code>worker.resourceLimits</code> <a class="header-anchor" href="#workerresourcelimits" aria-label="Permalink to “worker.resourceLimits”">​</a></h2><p><strong>تمت الإضافة في: v13.2.0, v12.16.0</strong></p><ul><li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noreferrer">&lt;Object&gt;</a><ul><li><code>maxYoungGenerationSizeMb</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;number&gt;</a></li><li><code>maxOldGenerationSizeMb</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;number&gt;</a></li><li><code>codeRangeSizeMb</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;number&gt;</a></li><li><code>stackSizeMb</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;number&gt;</a></li></ul></li></ul><p>يوفر مجموعة قيود موارد محرك JS داخل سلسلة Worker هذه. إذا تم تمرير خيار <code>resourceLimits</code> إلى الدالة البنائية <a href="/ar/nodejs/api/worker_threads#class-worker"><code>Worker</code></a>، فإن هذا يطابق قيمه.</p><p>إذا تم استخدام هذا في سلسلة التعليمات الرئيسية، فإن قيمته هي كائن فارغ.</p><h2 id="workershare_env" tabindex="-1"><code>worker.SHARE_ENV</code> <a class="header-anchor" href="#workershare_env" aria-label="Permalink to “worker.SHARE_ENV”">​</a></h2><p><strong>تمت الإضافة في: الإصدار 11.14.0</strong></p><ul><li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Symbol_type" target="_blank" rel="noreferrer">&lt;symbol&gt;</a></li></ul><p>قيمة خاصة يمكن تمريرها كخيار <code>env</code> لمنشئ <a href="/ar/nodejs/api/worker_threads#class-worker"><code>Worker</code></a>، للإشارة إلى أنه يجب على الخيط الحالي وخيط Worker مشاركة الوصول للقراءة والكتابة إلى نفس مجموعة متغيرات البيئة.</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Worker</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">SHARE_ENV</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;node:worker_threads&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Worker</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;process.env.SET_IN_WORKER = &quot;foo&quot;&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, { eval: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, env: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">SHARE_ENV</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> })</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  .</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">on</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;exit&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(process.env.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">SET_IN_WORKER</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// يطبع &#39;foo&#39;.</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  });</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h2 id="workersetenvironmentdatakey-value" tabindex="-1"><code>worker.setEnvironmentData(key[, value])</code> <a class="header-anchor" href="#workersetenvironmentdatakey-value" aria-label="Permalink to “worker.setEnvironmentData(key[, value])”">​</a></h2><div class="info custom-block"><p class="custom-block-title">[السجل]</p><table tabindex="0"><thead><tr><th>الإصدار</th><th>التغييرات</th></tr></thead><tbody><tr><td>v17.5.0, v16.15.0</td><td>لم يعد تجريبيًا.</td></tr><tr><td>v15.12.0, v14.18.0</td><td>تمت الإضافة في: v15.12.0, v14.18.0</td></tr></tbody></table></div><ul><li><code>key</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Data_types" target="_blank" rel="noreferrer">&lt;any&gt;</a> أي قيمة JavaScript عشوائية قابلة للاستنساخ يمكن استخدامها كمفتاح <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Map" target="_blank" rel="noreferrer">&lt;Map&gt;</a>.</li><li><code>value</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Data_types" target="_blank" rel="noreferrer">&lt;any&gt;</a> أي قيمة JavaScript عشوائية قابلة للاستنساخ سيتم استنساخها وتمريرها تلقائيًا إلى جميع مثيلات <code>Worker</code> الجديدة. إذا تم تمرير <code>value</code> كـ <code>undefined</code>، فسيتم حذف أي قيمة تم تعيينها مسبقًا لـ <code>key</code>.</li></ul><p>تضبط واجهة برمجة التطبيقات <code>worker.setEnvironmentData()</code> محتوى <code>worker.getEnvironmentData()</code> في الخيط الحالي وجميع مثيلات <code>Worker</code> الجديدة التي يتم إنشاؤها من السياق الحالي.</p><h2 id="workerthreadid" tabindex="-1"><code>worker.threadId</code> <a class="header-anchor" href="#workerthreadid" aria-label="Permalink to “worker.threadId”">​</a></h2><p><strong>تمت الإضافة في: الإصدار 10.5.0</strong></p><ul><li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;integer&gt;</a></li></ul><p>معرف عدد صحيح للخيط الحالي. في كائن worker المقابل (إن وجد)، يتوفر كـ <a href="/ar/nodejs/api/worker_threads#workerthreadid-1"><code>worker.threadId</code></a>. هذه القيمة فريدة لكل مثيل <a href="/ar/nodejs/api/worker_threads#class-worker"><code>Worker</code></a> داخل عملية واحدة.</p><h2 id="workerworkerdata" tabindex="-1">‏<code>worker.workerData</code> <a class="header-anchor" href="#workerworkerdata" aria-label="Permalink to “‏worker.workerData”">​</a></h2><p><strong>تمت إضافته في: الإصدار 10.5.0</strong></p><p>قيمة JavaScript عشوائية تحتوي على نسخة مستنسخة من البيانات التي تم تمريرها إلى مُنشئ <code>Worker</code> لهذا الخيط.</p><p>يتم استنساخ البيانات كما لو تم استخدام <a href="/ar/nodejs/api/worker_threads#portpostmessagevalue-transferlist"><code>postMessage()</code></a>، وفقًا لـ <a href="https://developer.mozilla.org/en-US/docs/Web/API/Web_Workers_API/Structured_clone_algorithm" target="_blank" rel="noreferrer">خوارزمية الاستنساخ المنظم HTML</a>.</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Worker</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">isMainThread</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">workerData</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;node:worker_threads&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (isMainThread) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> worker</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Worker</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(__filename, { workerData: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;Hello, world!&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">} </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">else</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(workerData);  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Prints &#39;Hello, world!&#39;.</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h2 id="class-broadcastchannel-extends-eventtarget" tabindex="-1">الفئة: ‏<code>BroadcastChannel extends EventTarget</code> <a class="header-anchor" href="#class-broadcastchannel-extends-eventtarget" aria-label="Permalink to “الفئة: ‏BroadcastChannel extends EventTarget”">​</a></h2><div class="info custom-block"><p class="custom-block-title">[السجل]</p><table tabindex="0"><thead><tr><th>الإصدار</th><th>التغييرات</th></tr></thead><tbody><tr><td>الإصدار 18.0.0</td><td>لم تعد تجريبية.</td></tr><tr><td>الإصدار 15.4.0</td><td>تمت إضافتها في: الإصدار 15.4.0</td></tr></tbody></table></div><p>تسمح مثيلات <code>BroadcastChannel</code> بالاتصال غير المتزامن من واحد إلى متعدد مع جميع مثيلات <code>BroadcastChannel</code> الأخرى المرتبطة بنفس اسم القناة.</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;use strict&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  isMainThread</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  BroadcastChannel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  Worker</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">} </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;node:worker_threads&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> bc</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> BroadcastChannel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;hello&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (isMainThread) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> c </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  bc.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">onmessage</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">event</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(event.data);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">++</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">c </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">===</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 10</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) bc.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">close</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  };</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> n </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; n </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 10</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; n</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">++</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Worker</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(__filename);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">} </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">else</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  bc.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">postMessage</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;hello from every worker&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  bc.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">close</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><h3 id="new-broadcastchannelname" tabindex="-1">‏<code>new BroadcastChannel(name)</code> <a class="header-anchor" href="#new-broadcastchannelname" aria-label="Permalink to “‏new BroadcastChannel(name)”">​</a></h3><p><strong>تمت إضافتها في: الإصدار 15.4.0</strong></p><ul><li><code>name</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Data_types" target="_blank" rel="noreferrer">&lt;any&gt;</a> اسم القناة المراد الاتصال بها. يُسمح بأي قيمة JavaScript يمكن تحويلها إلى سلسلة باستخدام <code>${name}</code>.</li></ul><h3 id="broadcastchannelclose" tabindex="-1">‏<code>broadcastChannel.close()</code> <a class="header-anchor" href="#broadcastchannelclose" aria-label="Permalink to “‏broadcastChannel.close()”">​</a></h3><p><strong>تمت إضافتها في: الإصدار 15.4.0</strong></p><p>يُغلق اتصال <code>BroadcastChannel</code>.</p><h3 id="broadcastchannelonmessage" tabindex="-1">‏<code>broadcastChannel.onmessage</code> <a class="header-anchor" href="#broadcastchannelonmessage" aria-label="Permalink to “‏broadcastChannel.onmessage”">​</a></h3><p><strong>تمت إضافتها في: الإصدار 15.4.0</strong></p><ul><li>النوع: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function" target="_blank" rel="noreferrer">&lt;Function&gt;</a> يتم استدعاؤها مع وسيطة <code>MessageEvent</code> واحدة عند استقبال رسالة.</li></ul><h3 id="broadcastchannelonmessageerror" tabindex="-1"><code>broadcastChannel.onmessageerror</code> <a class="header-anchor" href="#broadcastchannelonmessageerror" aria-label="Permalink to “broadcastChannel.onmessageerror”">​</a></h3><p><strong>أُضيف في: الإصدار 15.4.0</strong></p><ul><li>النوع: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function" target="_blank" rel="noreferrer">&lt;دالة&gt;</a> يتم استدعاؤه عند استقبال رسالة لا يمكن إلغاء تسلسلها.</li></ul><h3 id="broadcastchannelpostmessagemessage" tabindex="-1"><code>broadcastChannel.postMessage(message)</code> <a class="header-anchor" href="#broadcastchannelpostmessagemessage" aria-label="Permalink to “broadcastChannel.postMessage(message)”">​</a></h3><p><strong>أُضيف في: الإصدار 15.4.0</strong></p><ul><li><code>message</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Data_types" target="_blank" rel="noreferrer">&lt;أي نوع&gt;</a> أي قيمة JavaScript قابلة للاستنساخ.</li></ul><h3 id="broadcastchannelref" tabindex="-1"><code>broadcastChannel.ref()</code> <a class="header-anchor" href="#broadcastchannelref" aria-label="Permalink to “broadcastChannel.ref()”">​</a></h3><p><strong>أُضيف في: الإصدار 15.4.0</strong></p><p>عكس <code>unref()</code>. استدعاء <code>ref()</code> على BroadcastChannel تم عمل <code>unref()</code> له مسبقًا لا يسمح للبرنامج بالخروج إذا كان هو المؤشر النشط الوحيد المتبقي (السلوك الافتراضي). إذا كان المنفذ <code>ref()</code>ed، فإن استدعاء <code>ref()</code> مرة أخرى ليس له أي تأثير.</p><h3 id="broadcastchannelunref" tabindex="-1"><code>broadcastChannel.unref()</code> <a class="header-anchor" href="#broadcastchannelunref" aria-label="Permalink to “broadcastChannel.unref()”">​</a></h3><p><strong>أُضيف في: الإصدار 15.4.0</strong></p><p>استدعاء <code>unref()</code> على BroadcastChannel يسمح للخيط بالخروج إذا كان هذا هو المؤشر النشط الوحيد في نظام الأحداث. إذا كان BroadcastChannel بالفعل <code>unref()</code>ed، فإن استدعاء <code>unref()</code> مرة أخرى ليس له أي تأثير.</p><h2 id="class-messagechannel" tabindex="-1">الصنف: <code>MessageChannel</code> <a class="header-anchor" href="#class-messagechannel" aria-label="Permalink to “الصنف: MessageChannel”">​</a></h2><p><strong>أُضيف في: الإصدار 10.5.0</strong></p><p>تمثل مثيلات الصنف <code>worker.MessageChannel</code> قناة اتصالات غير متزامنة ثنائية الاتجاه. لا يحتوي <code>MessageChannel</code> على أي طرق خاصة به. ينتج <code>new MessageChannel()</code> كائنًا بخصائص <code>port1</code> و <code>port2</code>، والتي تشير إلى مثيلات <a href="/ar/nodejs/api/worker_threads#class-messageport"><code>MessagePort</code></a> المرتبطة.</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">MessageChannel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;node:worker_threads&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">port1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">port2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> MessageChannel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">port1.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">on</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;message&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">message</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;received&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, message));</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">port2.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">postMessage</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({ foo: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;bar&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> });</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Prints: received { foo: &#39;bar&#39; } from the `port1.on(&#39;message&#39;)` listener</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// يطبع: استقبل { foo: &#39;bar&#39; } من مستمع `port1.on(&#39;message&#39;)`</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h2 id="class-messageport" tabindex="-1">الصنف: <code>MessagePort</code> <a class="header-anchor" href="#class-messageport" aria-label="Permalink to “الصنف: MessagePort”">​</a></h2><div class="info custom-block"><p class="custom-block-title">[التاريخ]</p><table tabindex="0"><thead><tr><th>الإصدار</th><th>التغييرات</th></tr></thead><tbody><tr><td>الإصدار 14.7.0</td><td>يرث هذا الصنف الآن من <code>EventTarget</code> بدلاً من <code>EventEmitter</code>.</td></tr><tr><td>الإصدار 10.5.0</td><td>أُضيف في: الإصدار 10.5.0</td></tr></tbody></table></div><ul><li>يمتد: <a href="/ar/nodejs/api/events#class-eventtarget">&lt;EventTarget&gt;</a></li></ul><p>تمثل مثيلات الصنف <code>worker.MessagePort</code> أحد طرفي قناة اتصالات غير متزامنة ثنائية الاتجاه. يمكن استخدامه لنقل البيانات المهيكلة ومناطق الذاكرة و <code>MessagePort</code>s الأخرى بين <a href="/ar/nodejs/api/worker_threads#class-worker"><code>Worker</code></a>s مختلفة.</p><p>يتطابق هذا التنفيذ مع <a href="https://developer.mozilla.org/en-US/docs/Web/API/MessagePort" target="_blank" rel="noreferrer"><code>MessagePort</code> المتصفح</a>.</p><h3 id="event-close" tabindex="-1">الحدث: <code>&#39;close&#39;</code> <a class="header-anchor" href="#event-close" aria-label="Permalink to “الحدث: &#39;close&#39;”">​</a></h3><p><strong>تمت إضافته في: الإصدار v10.5.0</strong></p><p>يتم إطلاق الحدث <code>&#39;close&#39;</code> بمجرد قطع الاتصال بأحد جانبي القناة.</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">MessageChannel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;node:worker_threads&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">port1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">port2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> MessageChannel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// يطبع:</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//   foobar</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//   closed!</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">port2.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">on</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;message&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">message</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(message));</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">port2.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">on</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;close&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;closed!&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">));</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">port1.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">postMessage</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;foobar&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">port1.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">close</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h3 id="event-message" tabindex="-1">الحدث: <code>&#39;message&#39;</code> <a class="header-anchor" href="#event-message" aria-label="Permalink to “الحدث: &#39;message&#39;”">​</a></h3><p><strong>تمت إضافته في: الإصدار v10.5.0</strong></p><ul><li><code>value</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Data_types" target="_blank" rel="noreferrer">&lt;any&gt;</a> القيمة المرسلة</li></ul><p>يتم إطلاق الحدث <code>&#39;message&#39;</code> لأي رسالة واردة، تحتوي على النسخة المستنسخة من مدخلات <a href="/ar/nodejs/api/worker_threads#portpostmessagevalue-transferlist"><code>port.postMessage()</code></a>.</p><p>يتلقى المستمعون لهذا الحدث نسخة مستنسخة من معلمة <code>value</code> كما تم تمريرها إلى <code>postMessage()</code> ولا توجد وسيطات أخرى.</p><h3 id="event-messageerror" tabindex="-1">الحدث: <code>&#39;messageerror&#39;</code> <a class="header-anchor" href="#event-messageerror" aria-label="Permalink to “الحدث: &#39;messageerror&#39;”">​</a></h3><p><strong>تمت إضافته في: الإصدار v14.5.0, v12.19.0</strong></p><ul><li><code>error</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error" target="_blank" rel="noreferrer">&lt;Error&gt;</a> كائن خطأ</li></ul><p>يتم إطلاق الحدث <code>&#39;messageerror&#39;</code> عندما يفشل إلغاء تسلسل رسالة.</p><p>حاليًا، يتم إطلاق هذا الحدث عندما يحدث خطأ أثناء إنشاء كائن JS المنشور على الطرف المتلقي. هذه المواقف نادرة، ولكن يمكن أن تحدث، على سبيل المثال، عندما يتم استلام بعض كائنات Node.js API في <code>vm.Context</code> (حيث لا تتوفر واجهات برمجة تطبيقات Node.js حاليًا).</p><h3 id="portclose" tabindex="-1"><code>port.close()</code> <a class="header-anchor" href="#portclose" aria-label="Permalink to “port.close()”">​</a></h3><p><strong>تمت إضافته في: الإصدار v10.5.0</strong></p><p>يعطل إرسال المزيد من الرسائل على أي من جانبي الاتصال. يمكن استدعاء هذه الطريقة عندما لا تحدث المزيد من الاتصالات عبر <code>MessagePort</code>.</p><p>يتم إطلاق <a href="/ar/nodejs/api/worker_threads#event-close"><code>&#39;close&#39;</code> event</a> على كلا مثيلي <code>MessagePort</code> اللذين يمثلان جزءًا من القناة.</p><h3 id="portpostmessagevalue-transferlist" tabindex="-1"><code>port.postMessage(value[, transferList])</code> <a class="header-anchor" href="#portpostmessagevalue-transferlist" aria-label="Permalink to “port.postMessage(value[, transferList])”">​</a></h3><div class="info custom-block"><p class="custom-block-title">[السجل]</p><table tabindex="0"><thead><tr><th>الإصدار</th><th>التغييرات</th></tr></thead><tbody><tr><td>v21.0.0</td><td>يتم طرح خطأ عندما يكون هناك كائن غير قابل للنقل في قائمة النقل.</td></tr><tr><td>v15.6.0</td><td>تمت إضافة <code>X509Certificate</code> إلى قائمة الأنواع القابلة للاستنساخ.</td></tr><tr><td>v15.0.0</td><td>تمت إضافة <code>CryptoKey</code> إلى قائمة الأنواع القابلة للاستنساخ.</td></tr><tr><td>v15.14.0, v14.18.0</td><td>تمت إضافة &#39;BlockList&#39; إلى قائمة الأنواع القابلة للاستنساخ.</td></tr><tr><td>v15.9.0, v14.18.0</td><td>تمت إضافة أنواع &#39;Histogram&#39; إلى قائمة الأنواع القابلة للاستنساخ.</td></tr><tr><td>v14.5.0, v12.19.0</td><td>تمت إضافة <code>KeyObject</code> إلى قائمة الأنواع القابلة للاستنساخ.</td></tr><tr><td>v14.5.0, v12.19.0</td><td>تمت إضافة <code>FileHandle</code> إلى قائمة الأنواع القابلة للنقل.</td></tr><tr><td>v10.5.0</td><td>تمت إضافته في: الإصدار v10.5.0</td></tr></tbody></table></div><ul><li><code>value</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Data_types" target="_blank" rel="noreferrer">&lt;any&gt;</a></li><li><code>transferList</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noreferrer">&lt;Object[]&gt;</a></li></ul><p>يرسل قيمة JavaScript إلى الجانب المتلقي من هذه القناة. يتم نقل <code>value</code> بطريقة متوافقة مع <a href="https://developer.mozilla.org/en-US/docs/Web/API/Web_Workers_API/Structured_clone_algorithm" target="_blank" rel="noreferrer">خوارزمية الاستنساخ المنظمة HTML</a>.</p><p>على وجه الخصوص، الاختلافات الهامة في <code>JSON</code> هي:</p><ul><li>قد تحتوي <code>value</code> على مراجع دائرية.</li><li>قد تحتوي <code>value</code> على مثيلات لأنواع JS المضمنة مثل <code>RegExp</code>s و <code>BigInt</code>s و <code>Map</code>s و <code>Set</code>s وما إلى ذلك.</li><li>قد تحتوي <code>value</code> على مصفوفات مكتوبة، باستخدام كل من <code>ArrayBuffer</code>s و <code>SharedArrayBuffer</code>s.</li><li>قد تحتوي <code>value</code> على مثيلات <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/WebAssembly/Module" target="_blank" rel="noreferrer"><code>WebAssembly.Module</code></a>.</li><li>قد لا تحتوي <code>value</code> على كائنات أصلية (مدعومة بـ C++) بخلاف: <ul><li><a href="/ar/nodejs/api/webcrypto#class-cryptokey">&lt;CryptoKey&gt;</a>s،</li><li><a href="/ar/nodejs/api/fs#class-filehandle">&lt;FileHandle&gt;</a>s،</li><li><a href="/ar/nodejs/api/perf_hooks#class-histogram">&lt;Histogram&gt;</a>s،</li><li><a href="/ar/nodejs/api/crypto#class-keyobject">&lt;KeyObject&gt;</a>s،</li><li><a href="/ar/nodejs/api/worker_threads#class-messageport">&lt;MessagePort&gt;</a>s،</li><li><a href="/ar/nodejs/api/net#class-netblocklist">&lt;net.BlockList&gt;</a>s،</li><li><a href="/ar/nodejs/api/net#class-netsocketaddress">&lt;net.SocketAddress&gt;</a>es،</li><li><a href="/ar/nodejs/api/crypto#class-x509certificate">&lt;X509Certificate&gt;</a>s.</li></ul></li></ul><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">MessageChannel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;node:worker_threads&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">port1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">port2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> MessageChannel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">port1.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">on</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;message&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">message</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(message));</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> circularData</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {};</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">circularData.foo </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> circularData;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// يطبع: { foo: [Circular] }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">port2.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">postMessage</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(circularData);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>قد تكون <code>transferList</code> قائمة بكائنات <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/ArrayBuffer" target="_blank" rel="noreferrer"><code>ArrayBuffer</code></a> و <a href="/ar/nodejs/api/worker_threads#class-messageport"><code>MessagePort</code></a> و <a href="/ar/nodejs/api/fs#class-filehandle"><code>FileHandle</code></a>. بعد النقل، لا يمكن استخدامها على الجانب المرسل من القناة بعد الآن (حتى لو لم تكن موجودة في <code>value</code>). على عكس <a href="/ar/nodejs/api/child_process">العمليات الفرعية</a>، فإن نقل المؤشرات مثل مآخذ توصيل الشبكة غير مدعوم حاليًا.</p><p>إذا كانت <code>value</code> تحتوي على مثيلات <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/SharedArrayBuffer" target="_blank" rel="noreferrer"><code>SharedArrayBuffer</code></a>، فيمكن الوصول إليها من أي من الخيطين. لا يمكن إدراجها في <code>transferList</code>.</p><p>قد تظل <code>value</code> تحتوي على مثيلات <code>ArrayBuffer</code> غير موجودة في <code>transferList</code>؛ في هذه الحالة، يتم نسخ الذاكرة الأساسية بدلاً من نقلها.</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">MessageChannel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;node:worker_threads&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">port1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">port2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> MessageChannel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">port1.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">on</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;message&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">message</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(message));</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> uint8Array</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Uint8Array</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">([ </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">4</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ]);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// هذا ينشر نسخة من `uint8Array`:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">port2.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">postMessage</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(uint8Array);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// هذا لا ينسخ البيانات، ولكنه يجعل `uint8Array` غير قابل للاستخدام:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">port2.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">postMessage</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(uint8Array, [ uint8Array.buffer ]);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// يمكن الوصول إلى الذاكرة الخاصة بـ `sharedUint8Array` من كل من</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// الأصل والنسخة المستلمة بواسطة `.on(&#39;message&#39;)`:</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> sharedUint8Array</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Uint8Array</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> SharedArrayBuffer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">4</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">));</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">port2.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">postMessage</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(sharedUint8Array);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// هذا ينقل منفذ رسالة تم إنشاؤه حديثًا إلى جهاز الاستقبال.</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// يمكن استخدام هذا، على سبيل المثال، لإنشاء قنوات اتصال بين</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// خيوط `Worker` المتعددة التي هي أطفال لنفس الخيط الأصل.</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> otherChannel</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> MessageChannel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">port2.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">postMessage</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({ port: otherChannel.port1 }, [ otherChannel.port1 ]);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><p>يتم استنساخ كائن الرسالة على الفور، ويمكن تعديله بعد النشر دون آثار جانبية.</p><p>لمزيد من المعلومات حول آليات التسلسل وإلغاء التسلسل الموجودة وراء واجهة برمجة التطبيقات هذه، راجع <a href="/ar/nodejs/api/v8#serialization-api">واجهة برمجة تطبيقات التسلسل لوحدة <code>node:v8</code></a>.</p><h4 id="considerations-when-transferring-typedarrays-and-buffers" tabindex="-1">اعتبارات عند نقل TypedArrays و Buffers <a class="header-anchor" href="#considerations-when-transferring-typedarrays-and-buffers" aria-label="Permalink to “اعتبارات عند نقل TypedArrays و Buffers”">​</a></h4><p>جميع مثيلات <code>TypedArray</code> و <code>Buffer</code> هي طرق عرض فوق <code>ArrayBuffer</code> أساسي. وهذا يعني أن <code>ArrayBuffer</code> هو الذي يخزن البيانات الأولية فعليًا بينما توفر كائنات <code>TypedArray</code> و <code>Buffer</code> طريقة لعرض البيانات ومعالجتها. من الممكن والشائع إنشاء طرق عرض متعددة فوق نفس مثيل <code>ArrayBuffer</code>. يجب توخي الحذر الشديد عند استخدام قائمة النقل لنقل <code>ArrayBuffer</code> لأن القيام بذلك يتسبب في أن تصبح جميع مثيلات <code>TypedArray</code> و <code>Buffer</code> التي تشترك في نفس <code>ArrayBuffer</code> غير قابلة للاستخدام.</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> ab</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ArrayBuffer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">10</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> u1</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Uint8Array</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(ab);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> u2</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Uint16Array</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(ab);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(u2.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">length</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// يطبع 5</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">port.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">postMessage</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(u1, [u1.buffer]);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(u2.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">length</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// يطبع 0</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>بالنسبة لمثيلات <code>Buffer</code> على وجه التحديد، يعتمد ما إذا كان يمكن نقل أو استنساخ <code>ArrayBuffer</code> الأساسي كليًا على كيفية إنشاء المثيلات، وهو ما لا يمكن تحديده بشكل موثوق في كثير من الأحيان.</p><p>يمكن وضع علامة على <code>ArrayBuffer</code> باستخدام <a href="/ar/nodejs/api/worker_threads#workermarkasuntransferableobject"><code>markAsUntransferable()</code></a> للإشارة إلى أنه يجب دائمًا استنساخه وعدم نقله أبدًا.</p><p>اعتمادًا على كيفية إنشاء مثيل <code>Buffer</code>، قد يمتلك أو لا يمتلك <code>ArrayBuffer</code> الأساسي الخاص به. يجب عدم نقل <code>ArrayBuffer</code> إلا إذا كان من المعروف أن مثيل <code>Buffer</code> يمتلكه. على وجه الخصوص، بالنسبة إلى <code>Buffer</code>s التي تم إنشاؤها من تجمع <code>Buffer</code> الداخلي (باستخدام، على سبيل المثال <code>Buffer.from()</code> أو <code>Buffer.allocUnsafe()</code>)، فإن نقلها غير ممكن ويتم استنساخها دائمًا، مما يرسل نسخة من تجمع <code>Buffer</code> بأكمله. قد يأتي هذا السلوك مصحوبًا باستخدام غير مقصود للذاكرة بشكل أكبر ومخاوف أمنية محتملة.</p><p>راجع <a href="/ar/nodejs/api/buffer#static-method-bufferallocunsafesize"><code>Buffer.allocUnsafe()</code></a> للحصول على مزيد من التفاصيل حول تجميع <code>Buffer</code>.</p><p>يمكن دائمًا نقل <code>ArrayBuffer</code>s لمثيلات <code>Buffer</code> التي تم إنشاؤها باستخدام <code>Buffer.alloc()</code> أو <code>Buffer.allocUnsafeSlow()</code> ولكن القيام بذلك يجعل جميع طرق العرض الأخرى الموجودة لتلك <code>ArrayBuffer</code>s غير قابلة للاستخدام.</p><h4 id="considerations-when-cloning-objects-with-prototypes-classes-and-accessors" tabindex="-1">اعتبارات عند استنساخ الكائنات ذات النماذج الأولية، والفئات، والوصولات <a class="header-anchor" href="#considerations-when-cloning-objects-with-prototypes-classes-and-accessors" aria-label="Permalink to “اعتبارات عند استنساخ الكائنات ذات النماذج الأولية، والفئات، والوصولات”">​</a></h4><p>نظرًا لأن استنساخ الكائنات يستخدم <a href="https://developer.mozilla.org/en-US/docs/Web/API/Web_Workers_API/Structured_clone_algorithm" target="_blank" rel="noreferrer">خوارزمية الاستنساخ المهيكل HTML</a>، لا يتم الحفاظ على الخصائص غير القابلة للتعداد، وواصفات خصائص الوصول، والنماذج الأولية للكائنات. على وجه الخصوص، سيتم قراءة كائنات <a href="/ar/nodejs/api/buffer"><code>Buffer</code></a> كـ <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Uint8Array" target="_blank" rel="noreferrer"><code>Uint8Array</code></a> عادية على الجانب المتلقي، وسيتم استنساخ مثيلات فئات JavaScript ككائنات JavaScript عادية.</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> b</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Symbol</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;b&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Foo</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">  #a</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  constructor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[b] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    this</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.c </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  get</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> d</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() { </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 4</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">port1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">port2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> MessageChannel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">port1.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">onmessage</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ({ </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">data</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(data);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">port2.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">postMessage</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Foo</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">());</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Prints: { c: 3 }</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><p>يمتد هذا القيد إلى العديد من الكائنات المضمنة، مثل كائن <code>URL</code> العام:</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">port1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">port2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> MessageChannel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">port1.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">onmessage</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ({ </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">data</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(data);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">port2.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">postMessage</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> URL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;https://example.org&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">));</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Prints: { }</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="porthasref" tabindex="-1"><code>port.hasRef()</code> <a class="header-anchor" href="#porthasref" aria-label="Permalink to “port.hasRef()”">​</a></h3><p><strong>تمت الإضافة في: v18.1.0, v16.17.0</strong></p><div class="warning custom-block"><p class="custom-block-title">[مستقر: 1 - تجريبي]</p><p><a href="/ar/nodejs/api/documentation#stability-index">مستقر: 1</a> <a href="/ar/nodejs/api/documentation#stability-index">الاستقرار: 1</a> - تجريبي</p></div><ul><li>Returns: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" target="_blank" rel="noreferrer">&lt;boolean&gt;</a></li></ul><p>إذا كانت القيمة true، فسيحافظ كائن <code>MessagePort</code> على نشاط حلقة أحداث Node.js.</p><h3 id="portref" tabindex="-1"><code>port.ref()</code> <a class="header-anchor" href="#portref" aria-label="Permalink to “port.ref()”">​</a></h3><p><strong>تمت الإضافة في: v10.5.0</strong></p><p>عكس <code>unref()</code>. استدعاء <code>ref()</code> على منفذ <code>unref()</code>ed مسبقًا <em>لا</em> يسمح للبرنامج بالخروج إذا كان هو المقبض النشط الوحيد المتبقي (السلوك الافتراضي). إذا كان المنفذ <code>ref()</code>ed، فإن استدعاء <code>ref()</code> مرة أخرى ليس له أي تأثير.</p><p>إذا تم إرفاق المستمعين أو إزالتهم باستخدام <code>.on(&#39;message&#39;)</code>، فسيتم <code>ref()</code>ed و <code>unref()</code>ed المنفذ تلقائيًا اعتمادًا على ما إذا كانت المستمعين للحدث موجودين أم لا.</p><h3 id="portstart" tabindex="-1"><code>port.start()</code> <a class="header-anchor" href="#portstart" aria-label="Permalink to “port.start()”">​</a></h3><p><strong>تمت الإضافة في: v10.5.0</strong></p><p>يبدأ في استقبال الرسائل على <code>MessagePort</code> هذا. عند استخدام هذا المنفذ كباعث حدث، يتم استدعاء هذا تلقائيًا بمجرد إرفاق مستمعي <code>&#39;message&#39;</code>.</p><p>توجد هذه الطريقة للتكافؤ مع واجهة برمجة تطبيقات Web <code>MessagePort</code>. في Node.js، يكون هذا مفيدًا فقط لتجاهل الرسائل في حالة عدم وجود مستمع أحداث. يختلف Node.js أيضًا في معالجته لـ <code>.onmessage</code>. يؤدي تعيينه تلقائيًا إلى استدعاء <code>.start()</code>، ولكن إلغاء تعيينه يسمح للرسائل بالوقوف في قائمة الانتظار حتى يتم تعيين معالج جديد أو يتم تجاهل المنفذ.</p><h3 id="portunref" tabindex="-1"><code>port.unref()</code> <a class="header-anchor" href="#portunref" aria-label="Permalink to “port.unref()”">​</a></h3><p><strong>تمت الإضافة في: v10.5.0</strong></p><p>يسمح استدعاء <code>unref()</code> على منفذ للترخيص بالخروج إذا كان هذا هو المقبض النشط الوحيد في نظام الأحداث. إذا كان المنفذ <code>unref()</code>ed بالفعل، فإن استدعاء <code>unref()</code> مرة أخرى لا يؤثر.</p><p>إذا تم إرفاق المستمعين أو إزالتهم باستخدام <code>.on(&#39;message&#39;)</code>، فسيتم <code>ref()</code> و <code>unref()</code> للمنفذ تلقائيًا اعتمادًا على ما إذا كان المستمعون للحدث موجودين أم لا.</p><h2 id="class-worker" tabindex="-1">Class: <code>Worker</code> <a class="header-anchor" href="#class-worker" aria-label="Permalink to “Class: Worker”">​</a></h2><p><strong>تمت الإضافة في: v10.5.0</strong></p><ul><li>يمتد: <a href="/ar/nodejs/api/events#class-eventemitter">&lt;EventEmitter&gt;</a></li></ul><p>تمثل الفئة <code>Worker</code> سلسلة تنفيذ JavaScript مستقلة. تتوفر معظم واجهات برمجة تطبيقات Node.js داخلها.</p><p>الاختلافات الملحوظة داخل بيئة Worker هي:</p><ul><li>يمكن إعادة توجيه تدفقات <a href="/ar/nodejs/api/process#processstdin"><code>process.stdin</code></a> و <a href="/ar/nodejs/api/process#processstdout"><code>process.stdout</code></a> و <a href="/ar/nodejs/api/process#processstderr"><code>process.stderr</code></a> بواسطة الترخيص الأصل.</li><li>تم تعيين الخاصية <a href="/ar/nodejs/api/worker_threads#workerismainthread"><code>require(&#39;node:worker_threads&#39;).isMainThread</code></a> على <code>false</code>.</li><li>منفذ رسائل <a href="/ar/nodejs/api/worker_threads#workerparentport"><code>require(&#39;node:worker_threads&#39;).parentPort</code></a> متاح.</li><li><a href="/ar/nodejs/api/process#processexitcode"><code>process.exit()</code></a> لا يوقف البرنامج بأكمله، فقط السلسلة الواحدة، و <a href="/ar/nodejs/api/process#processabort"><code>process.abort()</code></a> غير متاح.</li><li><a href="/ar/nodejs/api/process#processchdirdirectory"><code>process.chdir()</code></a> وطرق <code>process</code> التي تعين معرفات المجموعة أو المستخدم غير متاحة.</li><li><a href="/ar/nodejs/api/process#processenv"><code>process.env</code></a> عبارة عن نسخة من متغيرات بيئة الترخيص الأصل، ما لم يتم تحديد خلاف ذلك. التغييرات التي يتم إجراؤها على نسخة واحدة غير مرئية في التراخيص الأخرى، وغير مرئية للإضافات الأصلية (ما لم يتم تمرير <a href="/ar/nodejs/api/worker_threads#workershare-env"><code>worker.SHARE_ENV</code></a> كخيار <code>env</code> إلى مُنشئ <a href="/ar/nodejs/api/worker_threads#class-worker"><code>Worker</code></a>). في Windows، على عكس الترخيص الرئيسي، تعمل نسخة من متغيرات البيئة بطريقة حساسة لحالة الأحرف.</li><li>لا يمكن تعديل <a href="/ar/nodejs/api/process#processtitle"><code>process.title</code></a>.</li><li>لا يتم تسليم الإشارات من خلال <a href="/ar/nodejs/api/process#signal-events"><code>process.on(&#39;...&#39;)</code></a>.</li><li>قد يتوقف التنفيذ في أي لحظة نتيجة لاستدعاء <a href="/ar/nodejs/api/worker_threads#workerterminate"><code>worker.terminate()</code></a>.</li><li>قنوات IPC من التراخيص الأصل غير قابلة للوصول.</li><li>وحدة <a href="/ar/nodejs/api/tracing"><code>trace_events</code></a> غير مدعومة.</li><li>يمكن تحميل الإضافات الأصلية فقط من تراخيص متعددة إذا كانت تفي بـ <a href="/ar/nodejs/api/addons#worker-support">شروط معينة</a>.</li></ul><p>من الممكن إنشاء مثيلات <code>Worker</code> داخل <code>Worker</code>s أخرى.</p><p>مثل <a href="https://developer.mozilla.org/en-US/docs/Web/API/Web_Workers_API" target="_blank" rel="noreferrer">Web Workers</a> ووحدة <a href="/ar/nodejs/api/cluster"><code>node:cluster</code> module</a>، يمكن تحقيق اتصال ثنائي الاتجاه من خلال تمرير الرسائل بين التراخيص. داخليًا، يحتوي <code>Worker</code> على زوج مدمج من <a href="/ar/nodejs/api/worker_threads#class-messageport"><code>MessagePort</code></a>s المرتبطين بالفعل ببعضهما البعض عند إنشاء <code>Worker</code>. على الرغم من أن كائن <code>MessagePort</code> على جانب الأصل غير معروض بشكل مباشر، إلا أن وظائفه معروضة من خلال <a href="/ar/nodejs/api/worker_threads#workerpostmessagevalue-transferlist"><code>worker.postMessage()</code></a> وحدث <a href="/ar/nodejs/api/worker_threads#event-message-1"><code>worker.on(&#39;message&#39;)</code></a> على كائن <code>Worker</code> للترخيص الأصل.</p><p>لإنشاء قنوات مراسلة مخصصة (والتي يتم تشجيعها على استخدام القناة العامة الافتراضية لأنها تسهل فصل الاهتمامات)، يمكن للمستخدمين إنشاء كائن <code>MessageChannel</code> على أي من الترخيصين وتمرير أحد <code>MessagePort</code>s على <code>MessageChannel</code> هذا إلى الترخيص الآخر من خلال قناة موجودة مسبقًا، مثل القناة العامة.</p><p>راجع <a href="/ar/nodejs/api/worker_threads#portpostmessagevalue-transferlist"><code>port.postMessage()</code></a> لمزيد من المعلومات حول كيفية تمرير الرسائل، وأنواع قيم JavaScript التي يمكن نقلها بنجاح عبر حاجز الترخيص.</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> assert</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;node:assert&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  Worker</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">MessageChannel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">MessagePort</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">isMainThread</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">parentPort</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">} </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;node:worker_threads&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (isMainThread) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> worker</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Worker</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(__filename);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> subChannel</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> MessageChannel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  worker.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">postMessage</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({ hereIsYourPort: subChannel.port1 }, [subChannel.port1]);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  subChannel.port2.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">on</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;message&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">value</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;received:&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, value);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">} </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">else</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  parentPort.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">once</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;message&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">value</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">    assert</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(value.hereIsYourPort </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">instanceof</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> MessagePort</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    value.hereIsYourPort.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">postMessage</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;the worker is sending this&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    value.hereIsYourPort.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">close</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><h3 id="new-workerfilename-options" tabindex="-1"><code>new Worker(filename[, options])</code> <a class="header-anchor" href="#new-workerfilename-options" aria-label="Permalink to “new Worker(filename[, options])”">​</a></h3><div class="info custom-block"><p class="custom-block-title">[السجل]</p><table tabindex="0"><thead><tr><th>الإصدار</th><th>التغييرات</th></tr></thead><tbody><tr><td>v19.8.0, v18.16.0</td><td>تمت إضافة دعم لخيار <code>name</code>، والذي يسمح بإضافة اسم إلى عنوان العامل لأغراض التصحيح.</td></tr><tr><td>v14.9.0</td><td>يمكن أن يكون المعامل <code>filename</code> كائن WHATWG <code>URL</code> باستخدام بروتوكول <code>data:</code>.</td></tr><tr><td>v14.9.0</td><td>تم تعيين الخيار <code>trackUnmanagedFds</code> على <code>true</code> افتراضيًا.</td></tr><tr><td>v14.6.0, v12.19.0</td><td>تم تقديم الخيار <code>trackUnmanagedFds</code>.</td></tr><tr><td>v13.13.0, v12.17.0</td><td>تم تقديم الخيار <code>transferList</code>.</td></tr><tr><td>v13.12.0, v12.17.0</td><td>يمكن أن يكون المعامل <code>filename</code> كائن WHATWG <code>URL</code> باستخدام بروتوكول <code>file:</code>.</td></tr><tr><td>v13.4.0, v12.16.0</td><td>تم تقديم الخيار <code>argv</code>.</td></tr><tr><td>v13.2.0, v12.16.0</td><td>تم تقديم الخيار <code>resourceLimits</code>.</td></tr><tr><td>v10.5.0</td><td>تمت الإضافة في: v10.5.0</td></tr></tbody></table></div><ul><li><code>filename</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> | <a href="/ar/nodejs/api/url#the-whatwg-url-api">&lt;URL&gt;</a> مسار البرنامج النصي أو الوحدة الرئيسية للعامل. يجب أن يكون إما مسارًا مطلقًا أو مسارًا نسبيًا (أي بالنسبة إلى دليل العمل الحالي) يبدأ بـ <code>./</code> أو <code>../</code>، أو كائن WHATWG <code>URL</code> باستخدام بروتوكول <code>file:</code> أو <code>data:</code>. عند استخدام <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/Data_URIs" target="_blank" rel="noreferrer"><code>data:</code> URL</a>، يتم تفسير البيانات بناءً على نوع MIME باستخدام <a href="/ar/nodejs/api/esm#data-imports">محمل وحدة ECMAScript النمطية</a>. إذا كان <code>options.eval</code> هو <code>true</code>، فسيكون هذا عبارة عن سلسلة تحتوي على كود JavaScript بدلاً من مسار.</li><li><code>options</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noreferrer">&lt;Object&gt;</a><ul><li><p><code>argv</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Data_types" target="_blank" rel="noreferrer">&lt;any[]&gt;</a> قائمة بالوسائط التي سيتم تحويلها إلى سلسلة وإلحاقها بـ <code>process.argv</code> في العامل. يشبه هذا إلى حد كبير <code>workerData</code> ولكن القيم متاحة على <code>process.argv</code> العام كما لو تم تمريرها كخيارات CLI إلى البرنامج النصي.</p></li><li><p><code>env</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noreferrer">&lt;Object&gt;</a> إذا تم تعيينه، فإنه يحدد القيمة الأولية لـ <code>process.env</code> داخل سلسلة العامل. كقيمة خاصة، يمكن استخدام <a href="/ar/nodejs/api/worker_threads#workershare-env"><code>worker.SHARE_ENV</code></a> لتحديد أنه يجب على سلسلة الأصل والسلسلة الفرعية مشاركة متغيرات البيئة الخاصة بهما؛ في هذه الحالة، تؤثر التغييرات التي تطرأ على كائن <code>process.env</code> لسلسلة واحدة على السلسلة الأخرى أيضًا. <strong>الافتراضي:</strong> <code>process.env</code>.</p></li><li><p><code>eval</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" target="_blank" rel="noreferrer">&lt;boolean&gt;</a> إذا كانت <code>true</code> والوسيطة الأولى عبارة عن <code>string</code>، ففسر الوسيطة الأولى للمنشئ على أنها برنامج نصي يتم تنفيذه بمجرد اتصال العامل بالإنترنت.</p></li><li><p><code>execArgv</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string[]&gt;</a> قائمة بخيارات node CLI التي تم تمريرها إلى العامل. خيارات V8 (مثل <code>--max-old-space-size</code>) والخيارات التي تؤثر على العملية (مثل <code>--title</code>) غير مدعومة. إذا تم تعيينه، فسيتم توفير ذلك كـ <a href="/ar/nodejs/api/process#processexecargv"><code>process.execArgv</code></a> داخل العامل. بشكل افتراضي، يتم توريث الخيارات من سلسلة الأصل.</p></li><li><p><code>stdin</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" target="_blank" rel="noreferrer">&lt;boolean&gt;</a> إذا تم تعيين هذا على <code>true</code>، فستوفر <code>worker.stdin</code> دفقًا قابلاً للكتابة تظهر محتوياته كـ <code>process.stdin</code> داخل العامل. بشكل افتراضي، لا يتم توفير أي بيانات.</p></li><li><p><code>stdout</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" target="_blank" rel="noreferrer">&lt;boolean&gt;</a> إذا تم تعيين هذا على <code>true</code>، فلن يتم توجيه <code>worker.stdout</code> تلقائيًا إلى <code>process.stdout</code> في الأصل.</p></li><li><p><code>stderr</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" target="_blank" rel="noreferrer">&lt;boolean&gt;</a> إذا تم تعيين هذا على <code>true</code>، فلن يتم توجيه <code>worker.stderr</code> تلقائيًا إلى <code>process.stderr</code> في الأصل.</p></li><li><p><code>workerData</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Data_types" target="_blank" rel="noreferrer">&lt;any&gt;</a> أي قيمة JavaScript يتم استنساخها وإتاحتها كـ <a href="/ar/nodejs/api/worker_threads#workerworkerdata"><code>require(&#39;node:worker_threads&#39;).workerData</code></a>. يحدث الاستنساخ كما هو موضح في <a href="https://developer.mozilla.org/en-US/docs/Web/API/Web_Workers_API/Structured_clone_algorithm" target="_blank" rel="noreferrer">خوارزمية الاستنساخ المنظم HTML</a>، ويتم طرح خطأ إذا تعذر استنساخ الكائن (على سبيل المثال لأنه يحتوي على <code>function</code>s).</p></li><li><p><code>trackUnmanagedFds</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" target="_blank" rel="noreferrer">&lt;boolean&gt;</a> إذا تم تعيين هذا على <code>true</code>، فسيتعقب العامل واصفات الملفات الأولية التي تتم إدارتها من خلال <a href="/ar/nodejs/api/fs#fsopenpath-flags-mode-callback"><code>fs.open()</code></a> و <a href="/ar/nodejs/api/fs#fsclosefd-callback"><code>fs.close()</code></a>، ويغلقها عند خروج العامل، على غرار الموارد الأخرى مثل مآخذ توصيل الشبكة أو واصفات الملفات التي تتم إدارتها من خلال واجهة برمجة التطبيقات <a href="/ar/nodejs/api/fs#class-filehandle"><code>FileHandle</code></a>. يتم توريث هذا الخيار تلقائيًا بواسطة جميع <code>Worker</code>s المتداخلة. <strong>الافتراضي:</strong> <code>true</code>.</p></li><li><p><code>transferList</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noreferrer">&lt;Object[]&gt;</a> إذا تم تمرير كائن واحد أو أكثر يشبه <code>MessagePort</code> في <code>workerData</code>، فإن <code>transferList</code> مطلوب لهذه العناصر أو <a href="/ar/nodejs/api/errors#err-missing-message-port-in-transfer-list"><code>ERR_MISSING_MESSAGE_PORT_IN_TRANSFER_LIST</code></a> يتم طرحه. راجع <a href="/ar/nodejs/api/worker_threads#portpostmessagevalue-transferlist"><code>port.postMessage()</code></a> لمزيد من المعلومات.</p></li><li><p><code>resourceLimits</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noreferrer">&lt;Object&gt;</a> مجموعة اختيارية من حدود الموارد لمثيل محرك JS الجديد. يؤدي الوصول إلى هذه الحدود إلى إنهاء مثيل <code>Worker</code>. تؤثر هذه الحدود فقط على محرك JS، وليس على أي بيانات خارجية، بما في ذلك عدم وجود <code>ArrayBuffer</code>s. حتى إذا تم تعيين هذه الحدود، فقد يتم إحباط العملية إذا واجهت حالة نفاد الذاكرة العمومية.</p></li><li><p><code>maxOldGenerationSizeMb</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;number&gt;</a> الحجم الأقصى للكومة الرئيسية بالميغابايت. إذا تم تعيين وسيطة سطر الأوامر <a href="/ar/nodejs/api/cli#max-old-space-sizesize-in-mib"><code>--max-old-space-size</code></a>، فإنها تتجاوز هذا الإعداد.</p></li><li><p><code>maxYoungGenerationSizeMb</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;number&gt;</a> الحجم الأقصى لمساحة الكومة للكائنات التي تم إنشاؤها مؤخرًا. إذا تم تعيين وسيطة سطر الأوامر <a href="/ar/nodejs/api/cli#max-semi-space-sizesize-in-mib"><code>--max-semi-space-size</code></a>، فإنها تتجاوز هذا الإعداد.</p></li><li><p><code>codeRangeSizeMb</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;number&gt;</a> حجم نطاق الذاكرة المخصص مسبقًا المستخدم للكود الذي تم إنشاؤه.</p></li><li><p><code>stackSizeMb</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;number&gt;</a> الحد الأقصى لحجم المكدس الافتراضي للسلسلة. قد تؤدي القيم الصغيرة إلى مثيلات عامل غير قابلة للاستخدام. <strong>الافتراضي:</strong> <code>4</code>.</p></li><li><p><code>name</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> <code>name</code> اختياري لإلحاقه بعنوان العامل لأغراض التصحيح/التعريف، مما يجعل العنوان النهائي كـ <code>[worker ${id}] ${name}</code>. <strong>الافتراضي:</strong> <code>&#39;&#39;</code>.</p></li></ul></li></ul><h3 id="event-error" tabindex="-1">الحدث: <code>&#39;error&#39;</code> <a class="header-anchor" href="#event-error" aria-label="Permalink to “الحدث: &#39;error&#39;”">​</a></h3><p><strong>أضيف في: v10.5.0</strong></p><ul><li><code>err</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error" target="_blank" rel="noreferrer">&lt;Error&gt;</a></li></ul><p>يتم إطلاق الحدث <code>&#39;error&#39;</code> إذا طرح مؤشر الترابط العامل استثناءً غير معالج. في هذه الحالة، يتم إنهاء العامل.</p><h3 id="event-exit" tabindex="-1">الحدث: <code>&#39;exit&#39;</code> <a class="header-anchor" href="#event-exit" aria-label="Permalink to “الحدث: &#39;exit&#39;”">​</a></h3><p><strong>أضيف في: v10.5.0</strong></p><ul><li><code>exitCode</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;integer&gt;</a></li></ul><p>يتم إطلاق الحدث <code>&#39;exit&#39;</code> بمجرد توقف العامل. إذا خرج العامل عن طريق استدعاء <a href="/ar/nodejs/api/process#processexitcode"><code>process.exit()</code></a>، فإن المعامل <code>exitCode</code> هو رمز الخروج الذي تم تمريره. إذا تم إنهاء العامل، فإن المعامل <code>exitCode</code> هو <code>1</code>.</p><p>هذا هو الحدث الأخير الذي يتم إطلاقه بواسطة أي مثيل <code>Worker</code>.</p><h3 id="event-message_1" tabindex="-1">الحدث: <code>&#39;message&#39;</code> <a class="header-anchor" href="#event-message_1" aria-label="Permalink to “الحدث: &#39;message&#39;”">​</a></h3><p><strong>أضيف في: v10.5.0</strong></p><ul><li><code>value</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Data_types" target="_blank" rel="noreferrer">&lt;any&gt;</a> القيمة المرسلة</li></ul><p>يتم إطلاق الحدث <code>&#39;message&#39;</code> عندما يستدعي مؤشر الترابط العامل <a href="/ar/nodejs/api/worker_threads#workerpostmessagevalue-transferlist"><code>require(&#39;node:worker_threads&#39;).parentPort.postMessage()</code></a>. راجع الحدث <a href="/ar/nodejs/api/worker_threads#event-message"><code>port.on(&#39;message&#39;)</code></a> لمزيد من التفاصيل.</p><p>يتم إطلاق جميع الرسائل المرسلة من مؤشر الترابط العامل قبل إطلاق <a href="/ar/nodejs/api/worker_threads#event-exit"><code>الحدث &#39;exit&#39;</code></a> على كائن <code>Worker</code>.</p><h3 id="event-messageerror_1" tabindex="-1">الحدث: <code>&#39;messageerror&#39;</code> <a class="header-anchor" href="#event-messageerror_1" aria-label="Permalink to “الحدث: &#39;messageerror&#39;”">​</a></h3><p><strong>أضيف في: v14.5.0, v12.19.0</strong></p><ul><li><code>error</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error" target="_blank" rel="noreferrer">&lt;Error&gt;</a> كائن خطأ</li></ul><p>يتم إطلاق الحدث <code>&#39;messageerror&#39;</code> عند فشل إلغاء تسلسل الرسالة.</p><h3 id="event-online" tabindex="-1">الحدث: <code>&#39;online&#39;</code> <a class="header-anchor" href="#event-online" aria-label="Permalink to “الحدث: &#39;online&#39;”">​</a></h3><p><strong>أضيف في: v10.5.0</strong></p><p>يتم إطلاق الحدث <code>&#39;online&#39;</code> عندما يبدأ مؤشر الترابط العامل في تنفيذ كود JavaScript.</p><h3 id="workergetheapsnapshotoptions" tabindex="-1"><code>worker.getHeapSnapshot([options])</code> <a class="header-anchor" href="#workergetheapsnapshotoptions" aria-label="Permalink to “worker.getHeapSnapshot([options])”">​</a></h3><div class="info custom-block"><p class="custom-block-title">[السجل]</p><table tabindex="0"><thead><tr><th>الإصدار</th><th>التغييرات</th></tr></thead><tbody><tr><td>v19.1.0</td><td>دعم الخيارات لتهيئة لقطة الذاكرة الرئيسية.</td></tr><tr><td>v13.9.0, v12.17.0</td><td>أضيف في: v13.9.0, v12.17.0</td></tr></tbody></table></div><ul><li><p><code>options</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noreferrer">&lt;Object&gt;</a></p><ul><li><code>exposeInternals</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" target="_blank" rel="noreferrer">&lt;boolean&gt;</a> إذا كانت القيمة true، فسيتم الكشف عن العناصر الداخلية في لقطة الذاكرة الرئيسية. <strong>افتراضي:</strong> <code>false</code>.</li><li><code>exposeNumericValues</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" target="_blank" rel="noreferrer">&lt;boolean&gt;</a> إذا كانت القيمة true، فسيتم الكشف عن القيم الرقمية في الحقول الاصطناعية. <strong>افتراضي:</strong> <code>false</code>.</li></ul></li><li><p>الإرجاع: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" target="_blank" rel="noreferrer">&lt;Promise&gt;</a> وعد لتدفق قابل للقراءة يحتوي على لقطة ذاكرة رئيسية V8</p></li></ul><p>إرجاع دفق قابل للقراءة للقطة V8 للحالة الحالية للعامل. راجع <a href="/ar/nodejs/api/v8#v8getheapsnapshotoptions"><code>v8.getHeapSnapshot()</code></a> لمزيد من التفاصيل.</p><p>إذا كان مؤشر الترابط العامل لم يعد قيد التشغيل، وهو ما قد يحدث قبل إطلاق <a href="/ar/nodejs/api/worker_threads#event-exit"><code>الحدث &#39;exit&#39;</code></a>، فسيتم رفض <code>الوعد</code> الذي تم إرجاعه على الفور مع خطأ <a href="/ar/nodejs/api/errors#err-worker-not-running"><code>ERR_WORKER_NOT_RUNNING</code></a>.</p><h3 id="workerperformance" tabindex="-1"><code>worker.performance</code> <a class="header-anchor" href="#workerperformance" aria-label="Permalink to “worker.performance”">​</a></h3><p><strong>أُضيف في:</strong> v15.1.0, v14.17.0, v12.22.0</p><p>كائن يمكن استخدامه للاستعلام عن معلومات الأداء من مثيل عامل. مشابه لـ <a href="/ar/nodejs/api/perf_hooks#perf-hooksperformance"><code>perf_hooks.performance</code></a>.</p><h4 id="performanceeventlooputilizationutilization1-utilization2" tabindex="-1"><code>performance.eventLoopUtilization([utilization1[, utilization2]])</code> <a class="header-anchor" href="#performanceeventlooputilizationutilization1-utilization2" aria-label="Permalink to “performance.eventLoopUtilization([utilization1[, utilization2]])”">​</a></h4><p><strong>أُضيف في:</strong> v15.1.0, v14.17.0, v12.22.0</p><ul><li><code>utilization1</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noreferrer">&lt;Object&gt;</a> نتيجة استدعاء سابق لـ <code>eventLoopUtilization()</code>.</li><li><code>utilization2</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noreferrer">&lt;Object&gt;</a> نتيجة استدعاء سابق لـ <code>eventLoopUtilization()</code> قبل <code>utilization1</code>.</li><li>إرجاع: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noreferrer">&lt;Object&gt;</a><ul><li><code>idle</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;number&gt;</a></li><li><code>active</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;number&gt;</a></li><li><code>utilization</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;number&gt;</a></li></ul></li></ul><p>نفس الاستدعاء مثل <a href="/ar/nodejs/api/perf_hooks#performanceeventlooputilizationutilization1-utilization2"><code>perf_hooks</code> <code>eventLoopUtilization()</code></a>، باستثناء أن قيم مثيل العامل يتم إرجاعها.</p><p>أحد الاختلافات هو أنه على عكس الخيط الرئيسي، يتم إجراء التهيئة (bootstrapping) داخل العامل داخل حلقة الأحداث. لذلك، يصبح استخدام حلقة الأحداث متاحًا على الفور بمجرد أن يبدأ البرنامج النصي للعامل في التنفيذ.</p><p>إن وقت <code>idle</code> الذي لا يزيد لا يشير إلى أن العامل عالق في التهيئة. توضح الأمثلة التالية كيف أن العمر الكامل للعامل لا يجمع أي وقت <code>idle</code>، ولكنه لا يزال قادرًا على معالجة الرسائل.</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Worker</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">isMainThread</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">parentPort</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;node:worker_threads&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (isMainThread) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> worker</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Worker</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(__filename);</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  setInterval</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    worker.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">postMessage</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;hi&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(worker.performance.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">eventLoopUtilization</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">());</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">100</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">unref</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">parentPort.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">on</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;message&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, () </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;msg&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">unref</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> r</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">n</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">--</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">n </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> t</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Date.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">now</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  while</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (Date.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">now</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> t </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 300</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  setImmediate</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(r, n);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">10</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><p>يتوفر استخدام حلقة الأحداث للعامل فقط بعد انبعاث <a href="/ar/nodejs/api/worker_threads#event-online"><code>&#39;online&#39;</code> event</a>، وإذا تم استدعاؤه قبل ذلك، أو بعد <a href="/ar/nodejs/api/worker_threads#event-exit"><code>&#39;exit&#39;</code> event</a>، فإن جميع الخصائص لها القيمة <code>0</code>.</p><h3 id="workerpostmessagevalue-transferlist" tabindex="-1"><code>worker.postMessage(value[, transferList])</code> <a class="header-anchor" href="#workerpostmessagevalue-transferlist" aria-label="Permalink to “worker.postMessage(value[, transferList])”">​</a></h3><p><strong>تمت الإضافة في: v10.5.0</strong></p><ul><li><code>value</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Data_types" target="_blank" rel="noreferrer">&lt;any&gt;</a></li><li><code>transferList</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noreferrer">&lt;Object[]&gt;</a></li></ul><p>إرسال رسالة إلى العامل يتم استقبالها عبر <a href="/ar/nodejs/api/worker_threads#event-message"><code>require(&#39;node:worker_threads&#39;).parentPort.on(&#39;message&#39;)</code></a>. انظر <a href="/ar/nodejs/api/worker_threads#portpostmessagevalue-transferlist"><code>port.postMessage()</code></a> لمزيد من التفاصيل.</p><h3 id="workerref" tabindex="-1"><code>worker.ref()</code> <a class="header-anchor" href="#workerref" aria-label="Permalink to “worker.ref()”">​</a></h3><p><strong>تمت الإضافة في: v10.5.0</strong></p><p>عكس <code>unref()</code>، استدعاء <code>ref()</code> على عامل تم تطبيق <code>unref()</code> عليه سابقًا <em>لا</em> يسمح للبرنامج بالخروج إذا كان هو المقبض النشط الوحيد المتبقي (السلوك الافتراضي). إذا تم تطبيق <code>ref()</code> على العامل، فإن استدعاء <code>ref()</code> مرة أخرى ليس له أي تأثير.</p><h3 id="workerresourcelimits_1" tabindex="-1"><code>worker.resourceLimits</code> <a class="header-anchor" href="#workerresourcelimits_1" aria-label="Permalink to “worker.resourceLimits”">​</a></h3><p><strong>تمت الإضافة في: v13.2.0, v12.16.0</strong></p><ul><li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noreferrer">&lt;Object&gt;</a><ul><li><code>maxYoungGenerationSizeMb</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;number&gt;</a></li><li><code>maxOldGenerationSizeMb</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;number&gt;</a></li><li><code>codeRangeSizeMb</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;number&gt;</a></li><li><code>stackSizeMb</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;number&gt;</a></li></ul></li></ul><p>يوفر مجموعة قيود موارد محرك JS لسلسلة العامل هذه. إذا تم تمرير الخيار <code>resourceLimits</code> إلى مُنشئ <a href="/ar/nodejs/api/worker_threads#class-worker"><code>Worker</code></a>، فإن هذا يطابق قيمه.</p><p>إذا توقف العامل، فإن القيمة المعادة هي كائن فارغ.</p><h3 id="workerstderr" tabindex="-1"><code>worker.stderr</code> <a class="header-anchor" href="#workerstderr" aria-label="Permalink to “worker.stderr”">​</a></h3><p><strong>تمت الإضافة في: v10.5.0</strong></p><ul><li><a href="/ar/nodejs/api/stream#class-streamreadable">&lt;stream.Readable&gt;</a></li></ul><p>هذا هو دفق قابل للقراءة يحتوي على بيانات مكتوبة إلى <a href="/ar/nodejs/api/process#processstderr"><code>process.stderr</code></a> داخل سلسلة العامل. إذا لم يتم تمرير <code>stderr: true</code> إلى مُنشئ <a href="/ar/nodejs/api/worker_threads#class-worker"><code>Worker</code></a>، فسيتم توجيه البيانات إلى دفق <a href="/ar/nodejs/api/process#processstderr"><code>process.stderr</code></a> للسلسلة الأصل.</p><h3 id="workerstdin" tabindex="-1">‏<code>worker.stdin</code> <a class="header-anchor" href="#workerstdin" aria-label="Permalink to “‏worker.stdin”">​</a></h3><p><strong>تمت إضافته في: الإصدار v10.5.0</strong></p><ul><li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Null_type" target="_blank" rel="noreferrer">&lt;null&gt;</a> | <a href="/ar/nodejs/api/stream#class-streamwritable">&lt;stream.Writable&gt;</a></li></ul><p>إذا تم تمرير <code>stdin: true</code> إلى مُنشئ <a href="/ar/nodejs/api/worker_threads#class-worker"><code>Worker</code></a>، فسيكون هذا دفقًا قابلاً للكتابة. ستتاح البيانات المكتوبة في هذا الدفق في سلسلة العمل كـ <a href="/ar/nodejs/api/process#processstdin"><code>process.stdin</code></a>.</p><h3 id="workerstdout" tabindex="-1">‏<code>worker.stdout</code> <a class="header-anchor" href="#workerstdout" aria-label="Permalink to “‏worker.stdout”">​</a></h3><p><strong>تمت إضافته في: الإصدار v10.5.0</strong></p><ul><li><a href="/ar/nodejs/api/stream#class-streamreadable">&lt;stream.Readable&gt;</a></li></ul><p>هذا دفق قابل للقراءة يحتوي على بيانات مكتوبة إلى <a href="/ar/nodejs/api/process#processstdout"><code>process.stdout</code></a> داخل سلسلة العمل. إذا لم يتم تمرير <code>stdout: true</code> إلى مُنشئ <a href="/ar/nodejs/api/worker_threads#class-worker"><code>Worker</code></a>، فستُرسل البيانات إلى دفق <a href="/ar/nodejs/api/process#processstdout"><code>process.stdout</code></a> الخاص بالسلسلة الأصلية.</p><h3 id="workerterminate" tabindex="-1">‏<code>worker.terminate()</code> <a class="header-anchor" href="#workerterminate" aria-label="Permalink to “‏worker.terminate()”">​</a></h3><div class="info custom-block"><p class="custom-block-title">[سجل التغييرات]</p><table tabindex="0"><thead><tr><th>الإصدار</th><th>التغييرات</th></tr></thead><tbody><tr><td>v12.5.0</td><td>تُرجع هذه الدالة الآن Promise. تمرير استدعاء رد نداء مهمل، وكان عديم الفائدة حتى هذا الإصدار، حيث تم إنهاء العامل بشكل متزامن بالفعل. الإنهاء الآن عملية غير متزامنة بالكامل.</td></tr><tr><td>v10.5.0</td><td>تمت إضافته في: الإصدار v10.5.0</td></tr></tbody></table></div><ul><li>الإرجاع: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise" target="_blank" rel="noreferrer">&lt;Promise&gt;</a></li></ul><p>أوقف جميع عمليات تنفيذ JavaScript في سلسلة العمل في أقرب وقت ممكن. يُرجع Promise لرمز الخروج الذي يتحقق عند إصدار <a href="/ar/nodejs/api/worker_threads#event-exit"><code>&#39;exit&#39;</code> event</a>.</p><h3 id="workerthreadid_1" tabindex="-1">‏<code>worker.threadId</code> <a class="header-anchor" href="#workerthreadid_1" aria-label="Permalink to “‏worker.threadId”">​</a></h3><p><strong>تمت إضافته في: الإصدار v10.5.0</strong></p><ul><li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;integer&gt;</a></li></ul><p>معرف عدد صحيح للسلسلة المرجعية. داخل سلسلة العمل، يتوفر كـ <a href="/ar/nodejs/api/worker_threads#workerthreadid"><code>require(&#39;node:worker_threads&#39;).threadId</code></a>. هذه القيمة فريدة لكل مثيل <code>Worker</code> داخل عملية واحدة.</p><h3 id="workerunref" tabindex="-1">‏<code>worker.unref()</code> <a class="header-anchor" href="#workerunref" aria-label="Permalink to “‏worker.unref()”">​</a></h3><p><strong>تمت إضافته في: الإصدار v10.5.0</strong></p><p>يسمح استدعاء <code>unref()</code> على عامل للسلسلة بالخروج إذا كان هذا هو المؤشر النشط الوحيد في نظام الأحداث. إذا كان العامل <code>unref()</code> بالفعل، فإن استدعاء <code>unref()</code> مرة أخرى ليس له أي تأثير.</p><h2 id="notes" tabindex="-1">ملاحظات <a class="header-anchor" href="#notes" aria-label="Permalink to “ملاحظات”">​</a></h2><h3 id="synchronous-blocking-of-stdio" tabindex="-1">الحظر المتزامن لـ stdio <a class="header-anchor" href="#synchronous-blocking-of-stdio" aria-label="Permalink to “الحظر المتزامن لـ stdio”">​</a></h3><p>تستخدم <code>Worker</code> تمرير الرسائل عبر <a href="/ar/nodejs/api/worker_threads#class-messageport">&lt;MessagePort&gt;</a> لتنفيذ التفاعلات مع <code>stdio</code>. هذا يعني أن إخراج <code>stdio</code> الصادر من <code>Worker</code> يمكن أن يتم حجبه بواسطة التعليمات البرمجية المتزامنة على الطرف المتلقي التي تحجب حلقة أحداث Node.js.</p><div class="vp-code-group"><div class="tabs"><input type="radio" name="group-1669" id="tab-1670" checked><label data-title="ESM" for="tab-1670">ESM</label><input type="radio" name="group-1669" id="tab-1671"><label data-title="CJS" for="tab-1671">CJS</label></div><div class="blocks"><div class="language-js active line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  Worker,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  isMainThread,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">} </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;node:worker_threads&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (isMainThread) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Worker</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> URL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">meta</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.url));</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> n </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; n </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1e10</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; n</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">++</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // التكرار لمحاكاة العمل.</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">} </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">else</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // سيتم حظر هذا الإخراج بواسطة حلقة for في مؤشر الترابط الرئيسي.</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;foo&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;use strict&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  Worker</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  isMainThread</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">} </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;node:worker_threads&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (isMainThread) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Worker</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(__filename);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> n </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; n </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1e10</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; n</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">++</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // التكرار لمحاكاة العمل.</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">} </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">else</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // سيتم حظر هذا الإخراج بواسطة حلقة for في مؤشر الترابط الرئيسي.</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;foo&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div></div></div><h3 id="launching-worker-threads-from-preload-scripts" tabindex="-1">إطلاق سلاسل عمليات العامل من نصوص التحميل المسبق <a class="header-anchor" href="#launching-worker-threads-from-preload-scripts" aria-label="Permalink to “إطلاق سلاسل عمليات العامل من نصوص التحميل المسبق”">​</a></h3><p>توخ الحذر عند إطلاق سلاسل عمليات العامل من نصوص التحميل المسبق (النصوص التي يتم تحميلها وتشغيلها باستخدام علامة سطر الأوامر <code>-r</code>). ما لم يتم تعيين خيار <code>execArgv</code> بشكل صريح، فإن سلاسل عمليات Worker الجديدة ترث تلقائيًا علامات سطر الأوامر من العملية قيد التشغيل وستقوم بتحميل نفس نصوص التحميل المسبق مثل سلسلة العمليات الرئيسية. إذا كان نص التحميل المسبق يطلق سلسلة عمليات عامل بشكل غير مشروط، فستقوم كل سلسلة عمليات يتم إنشاؤها بإنشاء أخرى حتى يتعطل التطبيق.</p></div></div></main><footer class="VPDocFooter" data-v-d668f7cc data-v-1bcd8184><!--[--><!--]--><div class="edit-info" data-v-1bcd8184><!----><div class="last-updated" data-v-1bcd8184><p class="VPLastUpdated" data-v-1bcd8184 data-v-1bb0c8a8>آخر تحديث: <time datetime="2025-06-09T10:21:38.000Z" data-v-1bb0c8a8></time></p></div></div><nav class="prev-next" aria-labelledby="doc-footer-aria-label" data-v-1bcd8184><span class="visually-hidden" id="doc-footer-aria-label" data-v-1bcd8184>Pager</span><div class="pager" data-v-1bcd8184><a class="VPLink link pager-link prev" href="/ar/nodejs/api/cluster" data-v-1bcd8184><!--[--><span class="desc" data-v-1bcd8184>الصفحة السابقة</span><span class="title" data-v-1bcd8184>العنقود</span><!--]--></a></div><div class="pager" data-v-1bcd8184><a class="VPLink link pager-link next" href="/ar/nodejs/api/permissions" data-v-1bcd8184><!--[--><span class="desc" data-v-1bcd8184>الصفحة التالية</span><span class="title" data-v-1bcd8184>الأذونات</span><!--]--></a></div></nav></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><footer class="VPFooter has-sidebar" data-v-4539713c data-v-5b9946f5><div class="container" data-v-5b9946f5><p class="message" data-v-5b9946f5><a href="https://idoc.dev/ar/privacy">سياسة الخصوصية</a></p><p class="copyright" data-v-5b9946f5>جميع الحقوق محفوظة © 2024-الحاضر <a href="https://idoc.dev/ar/">iDoc.dev</a></p></div></footer><!--[--><!--]--></div></div>
    
    
  </body>
</html>