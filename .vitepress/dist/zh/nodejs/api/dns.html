<!DOCTYPE html>
<html lang="zh" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Node.js 文档 - DNS | API &amp; 指南 &amp; 开发者的文档中心</title>
    <meta name="description" content="Node.js 文档的这一部分介绍了 DNS（域名系统）模块，该模块提供异步网络名称解析功能。包括将域名解析为IP地址、反向查找和DNS记录查询的方法。">
    <meta name="generator" content="VitePress v2.0.0-alpha.5">
    <link rel="preload stylesheet" href="/assets/style.4-HONZjt.css" as="style">
    <link rel="preload stylesheet" href="/vp-icons.css" as="style">
    <script type="module" src="/assets/chunks/metadata.b396fbd4.js"></script>
    <script type="module" src="/assets/app.NvFkMFIO.js"></script>
    <link rel="modulepreload" href="/assets/chunks/plugin-vue_export-helper.Bts1mPc7.js">
    <link rel="modulepreload" href="/assets/chunks/translation.CRvAmi0k.js">
    <link rel="modulepreload" href="/assets/chunks/VPLocalSearchBox.DEL5Gh-3.js">
    <link rel="modulepreload" href="/assets/zh_nodejs_api_dns.md.B8kEh8xr.lean.js">
    <link rel="icon" type="image/svg+xml" href="/logo.svg">
    <link rel="icon" type="image/png" href="/logo.png">
    <link rel="shortcut icon" href="/favicon.ico">
    <meta name="theme-color" content="#5f67ee">
    <meta property="og:type" content="website">
    <meta property="og:title" content="iDoc | API &amp; Guide for Developers">
    <meta property="og:site_name" content="iDoc">
    <meta property="og:image" content="https://idoc.dev/logo.svg">
    <meta property="og:url" content="https://idoc.dev/zh/nodejs/api/dns">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="idoc.dev">
    <meta name="twitter:image" content="https://idoc.dev/logo.svg">
    <meta name="twitter:title" content="Node.js 文档 - DNS | Node.js - iDoc.dev">
    <meta name="twitter:creator" content="neo@idoc.dev">
    <meta name="twitter:url" content="https://node.idoc.dev/">
    <meta name="twitter:description" content="Node.js 文档的这一部分介绍了 DNS（域名系统）模块，该模块提供异步网络名称解析功能。包括将域名解析为IP地址、反向查找和DNS记录查询的方法。">
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-X0C67TVVXR"></script>
    <script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-X0C67TVVXR");</script>
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3961359407117622" crossorigin="anonymous"></script>
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
    <meta name="og:title" content="Node.js 文档 - DNS | Node.js - iDoc.dev">
    <meta name="og:description" content="Node.js 文档的这一部分介绍了 DNS（域名系统）模块，该模块提供异步网络名称解析功能。包括将域名解析为IP地址、反向查找和DNS记录查询的方法。">
    <link rel="canonical" href="https://idoc.dev/zh/nodejs/api/dns">
    <link rel="canonical" href="https://idoc.dev/zh/nodejs/api/dns">
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-4539713c><!--[--><!--]--><!--[--><span tabindex="-1" data-v-fcbfc0e0></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-fcbfc0e0>Skip to content</a><!--]--><!----><header class="VPNav" data-v-4539713c data-v-7ad780c2><div class="VPNavBar" data-v-7ad780c2 data-v-cb5e22fa><div class="wrapper" data-v-cb5e22fa><div class="container" data-v-cb5e22fa><div class="title" data-v-cb5e22fa><div class="VPNavBarTitle has-sidebar" data-v-cb5e22fa data-v-d4488dd0><a class="title" href="/zh/" data-v-d4488dd0><!--[--><!--]--><!--[--><img class="VPImage logo" src="/logo.svg" width="24" height="24" alt="iDoc.dev" data-v-ab19afbb><!--]--><span data-v-d4488dd0>iDoc</span><!--[--><!--]--></a></div></div><div class="content" data-v-cb5e22fa><div class="content-body" data-v-cb5e22fa><!--[--><!--]--><div class="VPNavBarSearch search" data-v-cb5e22fa><!--[--><!----><div id="local-search"><button type="button" class="DocSearch DocSearch-Button" aria-label="搜索文档"><span class="DocSearch-Button-Container"><span class="vp-icon DocSearch-Search-Icon"></span><span class="DocSearch-Button-Placeholder">搜索文档</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"></kbd><kbd class="DocSearch-Button-Key">K</kbd></span></button></div><!--]--></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-cb5e22fa data-v-020be4db><span id="main-nav-aria-label" class="visually-hidden" data-v-020be4db> Main Navigation </span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink active" href="/zh/nodejs/api/synopsis" tabindex="0" data-v-020be4db data-v-815115f5><!--[--><span data-v-815115f5>API 参考</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/zh/nodejs/guide/what-is-nodejs" tabindex="0" data-v-020be4db data-v-815115f5><!--[--><span data-v-815115f5>指南</span><!--]--></a><!--]--><!--]--></nav><div class="VPFlyout VPNavBarTranslations translations" data-v-cb5e22fa data-v-acee064b data-v-9bb987dd><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="多语言" data-v-9bb987dd><span class="text" data-v-9bb987dd><span class="vpi-languages option-icon" data-v-9bb987dd></span><!----><span class="vpi-chevron-down text-icon" data-v-9bb987dd></span></span></button><div class="menu" data-v-9bb987dd><div class="VPMenu" data-v-9bb987dd data-v-2f78439e><!----><!--[--><!--[--><div class="items" data-v-acee064b><p class="title" data-v-acee064b>简体中文</p><!--[--><div class="VPMenuLink" data-v-acee064b data-v-7eeeb2dc><a class="VPLink link" href="/nodejs/api/dns" data-v-7eeeb2dc><!--[--><span data-v-7eeeb2dc>English</span><!--]--></a></div><div class="VPMenuLink" data-v-acee064b data-v-7eeeb2dc><a class="VPLink link" href="/es/nodejs/api/dns" data-v-7eeeb2dc><!--[--><span data-v-7eeeb2dc>Español</span><!--]--></a></div><div class="VPMenuLink" data-v-acee064b data-v-7eeeb2dc><a class="VPLink link" href="/fr/nodejs/api/dns" data-v-7eeeb2dc><!--[--><span data-v-7eeeb2dc>Français</span><!--]--></a></div><div class="VPMenuLink" data-v-acee064b data-v-7eeeb2dc><a class="VPLink link" href="/pt/nodejs/api/dns" data-v-7eeeb2dc><!--[--><span data-v-7eeeb2dc>Português</span><!--]--></a></div><div class="VPMenuLink" data-v-acee064b data-v-7eeeb2dc><a class="VPLink link" href="/de/nodejs/api/dns" data-v-7eeeb2dc><!--[--><span data-v-7eeeb2dc>Deutsch</span><!--]--></a></div><div class="VPMenuLink" data-v-acee064b data-v-7eeeb2dc><a class="VPLink link" href="/it/nodejs/api/dns" data-v-7eeeb2dc><!--[--><span data-v-7eeeb2dc>Italiano</span><!--]--></a></div><div class="VPMenuLink" data-v-acee064b data-v-7eeeb2dc><a class="VPLink link" href="/ja/nodejs/api/dns" data-v-7eeeb2dc><!--[--><span data-v-7eeeb2dc>日本語</span><!--]--></a></div><div class="VPMenuLink" data-v-acee064b data-v-7eeeb2dc><a class="VPLink link" href="/ko/nodejs/api/dns" data-v-7eeeb2dc><!--[--><span data-v-7eeeb2dc>한국어</span><!--]--></a></div><div class="VPMenuLink" data-v-acee064b data-v-7eeeb2dc><a class="VPLink link" href="/ru/nodejs/api/dns" data-v-7eeeb2dc><!--[--><span data-v-7eeeb2dc>Русский</span><!--]--></a></div><div class="VPMenuLink" data-v-acee064b data-v-7eeeb2dc><a class="VPLink link" href="/ar/nodejs/api/dns" data-v-7eeeb2dc><!--[--><span data-v-7eeeb2dc>العربية</span><!--]--></a></div><!--]--></div><!--]--><!--]--></div></div></div><div class="VPNavBarAppearance appearance" data-v-cb5e22fa data-v-3f90c1a5><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-3f90c1a5 data-v-be9742d9 data-v-b4ccac88><span class="check" data-v-b4ccac88><span class="icon" data-v-b4ccac88><!--[--><span class="vpi-sun sun" data-v-be9742d9></span><span class="vpi-moon moon" data-v-be9742d9></span><!--]--></span></span></button></div><!----><div class="VPFlyout VPNavBarExtra extra" data-v-cb5e22fa data-v-f953d92f data-v-9bb987dd><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-9bb987dd><span class="vpi-more-horizontal icon" data-v-9bb987dd></span></button><div class="menu" data-v-9bb987dd><div class="VPMenu" data-v-9bb987dd data-v-2f78439e><!----><!--[--><!--[--><div class="group translations" data-v-f953d92f><p class="trans-title" data-v-f953d92f>简体中文</p><!--[--><div class="VPMenuLink" data-v-f953d92f data-v-7eeeb2dc><a class="VPLink link" href="/nodejs/api/dns" data-v-7eeeb2dc><!--[--><span data-v-7eeeb2dc>English</span><!--]--></a></div><div class="VPMenuLink" data-v-f953d92f data-v-7eeeb2dc><a class="VPLink link" href="/es/nodejs/api/dns" data-v-7eeeb2dc><!--[--><span data-v-7eeeb2dc>Español</span><!--]--></a></div><div class="VPMenuLink" data-v-f953d92f data-v-7eeeb2dc><a class="VPLink link" href="/fr/nodejs/api/dns" data-v-7eeeb2dc><!--[--><span data-v-7eeeb2dc>Français</span><!--]--></a></div><div class="VPMenuLink" data-v-f953d92f data-v-7eeeb2dc><a class="VPLink link" href="/pt/nodejs/api/dns" data-v-7eeeb2dc><!--[--><span data-v-7eeeb2dc>Português</span><!--]--></a></div><div class="VPMenuLink" data-v-f953d92f data-v-7eeeb2dc><a class="VPLink link" href="/de/nodejs/api/dns" data-v-7eeeb2dc><!--[--><span data-v-7eeeb2dc>Deutsch</span><!--]--></a></div><div class="VPMenuLink" data-v-f953d92f data-v-7eeeb2dc><a class="VPLink link" href="/it/nodejs/api/dns" data-v-7eeeb2dc><!--[--><span data-v-7eeeb2dc>Italiano</span><!--]--></a></div><div class="VPMenuLink" data-v-f953d92f data-v-7eeeb2dc><a class="VPLink link" href="/ja/nodejs/api/dns" data-v-7eeeb2dc><!--[--><span data-v-7eeeb2dc>日本語</span><!--]--></a></div><div class="VPMenuLink" data-v-f953d92f data-v-7eeeb2dc><a class="VPLink link" href="/ko/nodejs/api/dns" data-v-7eeeb2dc><!--[--><span data-v-7eeeb2dc>한국어</span><!--]--></a></div><div class="VPMenuLink" data-v-f953d92f data-v-7eeeb2dc><a class="VPLink link" href="/ru/nodejs/api/dns" data-v-7eeeb2dc><!--[--><span data-v-7eeeb2dc>Русский</span><!--]--></a></div><div class="VPMenuLink" data-v-f953d92f data-v-7eeeb2dc><a class="VPLink link" href="/ar/nodejs/api/dns" data-v-7eeeb2dc><!--[--><span data-v-7eeeb2dc>العربية</span><!--]--></a></div><!--]--></div><div class="group" data-v-f953d92f><div class="item appearance" data-v-f953d92f><p class="label" data-v-f953d92f>主题</p><div class="appearance-action" data-v-f953d92f><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-f953d92f data-v-be9742d9 data-v-b4ccac88><span class="check" data-v-b4ccac88><span class="icon" data-v-b4ccac88><!--[--><span class="vpi-sun sun" data-v-be9742d9></span><span class="vpi-moon moon" data-v-be9742d9></span><!--]--></span></span></button></div></div></div><!----><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-cb5e22fa data-v-6bee1efd><span class="container" data-v-6bee1efd><span class="top" data-v-6bee1efd></span><span class="middle" data-v-6bee1efd></span><span class="bottom" data-v-6bee1efd></span></span></button></div></div></div></div><div class="divider" data-v-cb5e22fa><div class="divider-line" data-v-cb5e22fa></div></div></div><!----></header><div class="VPLocalNav has-sidebar empty" data-v-4539713c data-v-6c0451ca><div class="container" data-v-6c0451ca><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-6c0451ca><span class="vpi-align-left menu-icon" data-v-6c0451ca></span><span class="menu-text" data-v-6c0451ca>菜单</span></button><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-6c0451ca data-v-92b7576c><button data-v-92b7576c>回到顶部</button><!----></div></div></div><aside class="VPSidebar" data-v-4539713c data-v-606f96d3><div class="curtain" data-v-606f96d3></div><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-606f96d3><span class="visually-hidden" id="sidebar-aria-label" data-v-606f96d3> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="no-transition group" data-v-a84b7c21><section class="VPSidebarItem level-0 collapsible collapsed" data-v-a84b7c21 data-v-6b36a2fd><div class="item" role="button" tabindex="0" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><h2 class="text" data-v-6b36a2fd>入门指南</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-6b36a2fd><span class="vpi-chevron-right caret-icon" data-v-6b36a2fd></span></div></div><div class="items" data-v-6b36a2fd><!--[--><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/zh/nodejs/api/documentation" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>关于此文档</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/zh/nodejs/api/synopsis" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>使用与示例</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-a84b7c21><section class="VPSidebarItem level-0 collapsible collapsed" data-v-a84b7c21 data-v-6b36a2fd><div class="item" role="button" tabindex="0" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><h2 class="text" data-v-6b36a2fd>模块</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-6b36a2fd><span class="vpi-chevron-right caret-icon" data-v-6b36a2fd></span></div></div><div class="items" data-v-6b36a2fd><!--[--><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/zh/nodejs/api/module" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>node:module API</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/zh/nodejs/api/modules" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>CommonJS 模块</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/zh/nodejs/api/typescript" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>TypeScript 模块</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/zh/nodejs/api/esm" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>ECMAScript 模块</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/zh/nodejs/api/packages" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>包管理</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/zh/nodejs/api/corepack" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>Corepack</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-a84b7c21><section class="VPSidebarItem level-0 collapsible collapsed has-active" data-v-a84b7c21 data-v-6b36a2fd><div class="item" role="button" tabindex="0" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><h2 class="text" data-v-6b36a2fd>HTTP 与网络</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-6b36a2fd><span class="vpi-chevron-right caret-icon" data-v-6b36a2fd></span></div></div><div class="items" data-v-6b36a2fd><!--[--><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/zh/nodejs/api/http" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>HTTP</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/zh/nodejs/api/http2" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>HTTP/2</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/zh/nodejs/api/https" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>HTTPS</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/zh/nodejs/api/net" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>Net</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/zh/nodejs/api/tls" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>TLS (SSL)</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/zh/nodejs/api/dgram" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>UDP/数据报套接字</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/zh/nodejs/api/dns" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>DNS</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/zh/nodejs/api/tty" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>TTY</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/zh/nodejs/api/url" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>URL</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/zh/nodejs/api/domain" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>Domain</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-a84b7c21><section class="VPSidebarItem level-0 collapsible collapsed" data-v-a84b7c21 data-v-6b36a2fd><div class="item" role="button" tabindex="0" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><h2 class="text" data-v-6b36a2fd>文件系统与路径</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-6b36a2fd><span class="vpi-chevron-right caret-icon" data-v-6b36a2fd></span></div></div><div class="items" data-v-6b36a2fd><!--[--><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/zh/nodejs/api/fs" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>文件系统</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/zh/nodejs/api/path" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>路径</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-a84b7c21><section class="VPSidebarItem level-0 collapsible collapsed" data-v-a84b7c21 data-v-6b36a2fd><div class="item" role="button" tabindex="0" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><h2 class="text" data-v-6b36a2fd>流、缓冲区与WASI</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-6b36a2fd><span class="vpi-chevron-right caret-icon" data-v-6b36a2fd></span></div></div><div class="items" data-v-6b36a2fd><!--[--><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/zh/nodejs/api/stream" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>流</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/zh/nodejs/api/webstreams" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>Web 流 API</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/zh/nodejs/api/buffer" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>缓冲区</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/zh/nodejs/api/wasi" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>WebAssembly 系统接口 (WASI)</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-a84b7c21><section class="VPSidebarItem level-0 collapsible collapsed" data-v-a84b7c21 data-v-6b36a2fd><div class="item" role="button" tabindex="0" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><h2 class="text" data-v-6b36a2fd>事件、通道与异步钩子</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-6b36a2fd><span class="vpi-chevron-right caret-icon" data-v-6b36a2fd></span></div></div><div class="items" data-v-6b36a2fd><!--[--><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/zh/nodejs/api/events" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>事件</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/zh/nodejs/api/tracing" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>跟踪事件</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/zh/nodejs/api/diagnostics_channel" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>诊断通道</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/zh/nodejs/api/async_hooks" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>异步钩子</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/zh/nodejs/api/async_context" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>异步上下文追踪</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-a84b7c21><section class="VPSidebarItem level-0 collapsible collapsed" data-v-a84b7c21 data-v-6b36a2fd><div class="item" role="button" tabindex="0" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><h2 class="text" data-v-6b36a2fd>进程、集群与工作线程</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-6b36a2fd><span class="vpi-chevron-right caret-icon" data-v-6b36a2fd></span></div></div><div class="items" data-v-6b36a2fd><!--[--><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/zh/nodejs/api/process" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>进程</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/zh/nodejs/api/child_process" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>子进程</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/zh/nodejs/api/cluster" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>集群</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/zh/nodejs/api/worker_threads" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>工作线程</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/zh/nodejs/api/permissions" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>权限</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-a84b7c21><section class="VPSidebarItem level-0 collapsible collapsed" data-v-a84b7c21 data-v-6b36a2fd><div class="item" role="button" tabindex="0" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><h2 class="text" data-v-6b36a2fd>C++ 插件与嵌入 API</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-6b36a2fd><span class="vpi-chevron-right caret-icon" data-v-6b36a2fd></span></div></div><div class="items" data-v-6b36a2fd><!--[--><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/zh/nodejs/api/addons" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>C++ 插件</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/zh/nodejs/api/n-api" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>使用 Node-API 的 C/C++ 插件</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/zh/nodejs/api/embedding" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>C++ 嵌入 API</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-a84b7c21><section class="VPSidebarItem level-0 collapsible collapsed" data-v-a84b7c21 data-v-6b36a2fd><div class="item" role="button" tabindex="0" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><h2 class="text" data-v-6b36a2fd>测试与调试</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-6b36a2fd><span class="vpi-chevron-right caret-icon" data-v-6b36a2fd></span></div></div><div class="items" data-v-6b36a2fd><!--[--><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/zh/nodejs/api/cli" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>命令行选项</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/zh/nodejs/api/test" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>测试运行器</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/zh/nodejs/api/assert" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>断言测试</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/zh/nodejs/api/debugger" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>调试器</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/zh/nodejs/api/console" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>控制台</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/zh/nodejs/api/errors" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>错误处理</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/zh/nodejs/api/timers" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>计时器</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/zh/nodejs/api/inspector" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>检查器</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/zh/nodejs/api/report" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>报告</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/zh/nodejs/api/repl" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>REPL</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/zh/nodejs/api/readline" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>Readline</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/zh/nodejs/api/perf_hooks" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>性能钩子</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-a84b7c21><section class="VPSidebarItem level-0 collapsible collapsed" data-v-a84b7c21 data-v-6b36a2fd><div class="item" role="button" tabindex="0" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><h2 class="text" data-v-6b36a2fd>工具与实用程序</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-6b36a2fd><span class="vpi-chevron-right caret-icon" data-v-6b36a2fd></span></div></div><div class="items" data-v-6b36a2fd><!--[--><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/zh/nodejs/api/util" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>实用工具</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/zh/nodejs/api/crypto" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>加密</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/zh/nodejs/api/webcrypto" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>Web 加密</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/zh/nodejs/api/zlib" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>Zlib</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/zh/nodejs/api/querystring" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>查询字符串</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/zh/nodejs/api/string_decoder" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>字符串解码器</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/zh/nodejs/api/sqlite" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>SQLite</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-a84b7c21><section class="VPSidebarItem level-0 collapsible collapsed" data-v-a84b7c21 data-v-6b36a2fd><div class="item" role="button" tabindex="0" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><h2 class="text" data-v-6b36a2fd>其他</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-6b36a2fd><span class="vpi-chevron-right caret-icon" data-v-6b36a2fd></span></div></div><div class="items" data-v-6b36a2fd><!--[--><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/zh/nodejs/api/intl" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>国际化</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/zh/nodejs/api/globals" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>全局对象</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/zh/nodejs/api/single-executable-applications" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>单个可执行应用程序</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/zh/nodejs/api/os" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>操作系统</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/zh/nodejs/api/v8" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>V8 引擎</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/zh/nodejs/api/vm" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>VM 模块</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/zh/nodejs/api/punycode" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>Punycode</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/zh/nodejs/api/deprecations" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>弃用的 API</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-4539713c data-v-2652e39a><div class="VPDoc has-sidebar has-aside" data-v-2652e39a data-v-d668f7cc><!--[--><!--]--><div class="container" data-v-d668f7cc><div class="aside" data-v-d668f7cc><div class="aside-curtain" data-v-d668f7cc></div><div class="aside-container" data-v-d668f7cc><div class="aside-content" data-v-d668f7cc><div class="VPDocAside" data-v-d668f7cc data-v-cb998dce><!--[--><!--]--><!--[--><!--]--><nav aria-labelledby="doc-outline-aria-label" class="VPDocAsideOutline" data-v-cb998dce data-v-c8b19031><div class="content" data-v-c8b19031><div class="outline-marker" data-v-c8b19031></div><div aria-level="2" class="outline-title" id="doc-outline-aria-label" role="heading" data-v-c8b19031>页面导航</div><ul class="VPDocOutlineItem root" data-v-c8b19031 data-v-b7d7ef80><!--[--><!--]--></ul></div></nav><!--[--><!--]--><div class="spacer" data-v-cb998dce></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-d668f7cc><div class="content-container" data-v-d668f7cc><!--[--><!--]--><main class="main" data-v-d668f7cc><div style="position:relative;" class="vp-doc _zh_nodejs_api_dns" data-v-d668f7cc><div><h1 id="dns" tabindex="-1">DNS <a class="header-anchor" href="#dns" aria-label="Permalink to “DNS”">​</a></h1><div class="tip custom-block"><p class="custom-block-title">[稳定度: 2 - 稳定]</p><p><a href="/zh/nodejs/api/documentation#stability-index">稳定度: 2</a> <a href="/zh/nodejs/api/documentation#stability-index">Stability: 2</a> - 稳定</p></div><p><strong>源码:</strong> <a href="https://github.com/nodejs/node/blob/v23.5.0/lib/dns.js" target="_blank" rel="noreferrer">lib/dns.js</a></p><p><code>node:dns</code> 模块启用名称解析。 例如，使用它来查找主机名的 IP 地址。</p><p>虽然以 <a href="https://en.wikipedia.org/wiki/Domain_Name_System" target="_blank" rel="noreferrer">域名系统 (DNS)</a> 命名，但它并不总是使用 DNS 协议进行查找。 <a href="/zh/nodejs/api/dns#dnslookuphostname-options-callback"><code>dns.lookup()</code></a> 使用操作系统工具来执行名称解析。 它可能不需要执行任何网络通信。 要以与同一系统上的其他应用程序相同的方式执行名称解析，请使用 <a href="/zh/nodejs/api/dns#dnslookuphostname-options-callback"><code>dns.lookup()</code></a>。</p><div class="vp-code-group"><div class="tabs"><input type="radio" name="group-17" id="tab-18" checked><label data-title="ESM" for="tab-18">ESM</label><input type="radio" name="group-17" id="tab-19"><label data-title="CJS" for="tab-19">CJS</label></div><div class="blocks"><div class="language-js active line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> dns </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;node:dns&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">dns.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">lookup</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;example.org&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">err</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">address</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">family</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;address: %j family: IPv%s&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, address, family);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// address: &quot;2606:2800:21f:cb07:6820:80da:af6b:8b2c&quot; family: IPv6</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> dns</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;node:dns&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">dns.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">lookup</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;example.org&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">err</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">address</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">family</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;address: %j family: IPv%s&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, address, family);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// address: &quot;2606:2800:21f:cb07:6820:80da:af6b:8b2c&quot; family: IPv6</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div></div></div><p><code>node:dns</code> 模块中的所有其他函数都连接到实际的 DNS 服务器以执行名称解析。 它们将始终使用网络执行 DNS 查询。 这些函数不使用与 <a href="/zh/nodejs/api/dns#dnslookuphostname-options-callback"><code>dns.lookup()</code></a> 相同的配置文件集（例如 <code>/etc/hosts</code>）。 使用这些函数始终执行 DNS 查询，绕过其他名称解析工具。</p><div class="vp-code-group"><div class="tabs"><input type="radio" name="group-24" id="tab-25" checked><label data-title="ESM" for="tab-25">ESM</label><input type="radio" name="group-24" id="tab-26"><label data-title="CJS" for="tab-26">CJS</label></div><div class="blocks"><div class="language-js active line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> dns </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;node:dns&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">dns.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">resolve4</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;archive.org&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">err</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">addresses</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (err) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">throw</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> err;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">`addresses: ${</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">JSON</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">stringify</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">addresses</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">)</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  addresses.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">forEach</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">a</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    dns.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">reverse</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(a, (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">err</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">hostnames</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (err) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        throw</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> err;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">`reverse for ${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">a</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}: ${</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">JSON</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">stringify</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">hostnames</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">)</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> dns</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;node:dns&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">dns.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">resolve4</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;archive.org&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">err</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">addresses</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (err) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">throw</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> err;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">`addresses: ${</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">JSON</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">stringify</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">addresses</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">)</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  addresses.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">forEach</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">a</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    dns.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">reverse</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(a, (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">err</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">hostnames</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (err) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        throw</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> err;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">`reverse for ${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">a</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}: ${</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">JSON</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">stringify</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">(</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">hostnames</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">)</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div></div></div><p>有关更多信息，请参阅 <a href="/zh/nodejs/api/dns#implementation-considerations">实现注意事项部分</a>。</p><h2 id="class-dnsresolver" tabindex="-1">类: <code>dns.Resolver</code> <a class="header-anchor" href="#class-dnsresolver" aria-label="Permalink to “类: dns.Resolver”">​</a></h2><p><strong>添加于: v8.3.0</strong></p><p>用于 DNS 请求的独立解析器。</p><p>创建新的解析器会使用默认的服务器设置。使用 <a href="/zh/nodejs/api/dns#dnssetserversservers"><code>resolver.setServers()</code></a> 设置用于解析器的服务器不会影响其他解析器：</p><div class="vp-code-group"><div class="tabs"><input type="radio" name="group-43" id="tab-44" checked><label data-title="ESM" for="tab-44">ESM</label><input type="radio" name="group-43" id="tab-45"><label data-title="CJS" for="tab-45">CJS</label></div><div class="blocks"><div class="language-js active line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { Resolver } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;node:dns&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> resolver</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Resolver</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">resolver.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setServers</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">([</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;4.4.4.4&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 此请求将使用 4.4.4.4 上的服务器，独立于全局设置。</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">resolver.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">resolve4</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;example.org&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">err</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">addresses</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // ...</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Resolver</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;node:dns&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> resolver</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Resolver</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">resolver.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setServers</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">([</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;4.4.4.4&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 此请求将使用 4.4.4.4 上的服务器，独立于全局设置。</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">resolver.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">resolve4</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;example.org&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">err</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">addresses</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // ...</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div></div></div><p><code>node:dns</code> 模块中的以下方法可用：</p><ul><li><a href="/zh/nodejs/api/dns#dnsgetservers"><code>resolver.getServers()</code></a></li><li><a href="/zh/nodejs/api/dns#dnsresolvehostname-rrtype-callback"><code>resolver.resolve()</code></a></li><li><a href="/zh/nodejs/api/dns#dnsresolve4hostname-options-callback"><code>resolver.resolve4()</code></a></li><li><a href="/zh/nodejs/api/dns#dnsresolve6hostname-options-callback"><code>resolver.resolve6()</code></a></li><li><a href="/zh/nodejs/api/dns#dnsresolveanyhostname-callback"><code>resolver.resolveAny()</code></a></li><li><a href="/zh/nodejs/api/dns#dnsresolvecaahostname-callback"><code>resolver.resolveCaa()</code></a></li><li><a href="/zh/nodejs/api/dns#dnsresolvecnamehostname-callback"><code>resolver.resolveCname()</code></a></li><li><a href="/zh/nodejs/api/dns#dnsresolvemxhostname-callback"><code>resolver.resolveMx()</code></a></li><li><a href="/zh/nodejs/api/dns#dnsresolvenaptrhostname-callback"><code>resolver.resolveNaptr()</code></a></li><li><a href="/zh/nodejs/api/dns#dnsresolvenshostname-callback"><code>resolver.resolveNs()</code></a></li><li><a href="/zh/nodejs/api/dns#dnsresolveptrhostname-callback"><code>resolver.resolvePtr()</code></a></li><li><a href="/zh/nodejs/api/dns#dnsresolvesoahostname-callback"><code>resolver.resolveSoa()</code></a></li><li><a href="/zh/nodejs/api/dns#dnsresolvesrvhostname-callback"><code>resolver.resolveSrv()</code></a></li><li><a href="/zh/nodejs/api/dns#dnsresolvetxthostname-callback"><code>resolver.resolveTxt()</code></a></li><li><a href="/zh/nodejs/api/dns#dnsreverseip-callback"><code>resolver.reverse()</code></a></li><li><a href="/zh/nodejs/api/dns#dnssetserversservers"><code>resolver.setServers()</code></a></li></ul><h3 id="resolveroptions" tabindex="-1"><code>Resolver([options])</code> <a class="header-anchor" href="#resolveroptions" aria-label="Permalink to “Resolver([options])”">​</a></h3><div class="info custom-block"><p class="custom-block-title">[历史记录]</p><table tabindex="0"><thead><tr><th>版本</th><th>变更</th></tr></thead><tbody><tr><td>v16.7.0, v14.18.0</td><td><code>options</code> 对象现在接受 <code>tries</code> 选项。</td></tr><tr><td>v12.18.3</td><td>构造函数现在接受 <code>options</code> 对象。 支持的唯一选项是 <code>timeout</code>。</td></tr><tr><td>v8.3.0</td><td>添加于: v8.3.0</td></tr></tbody></table></div><p>创建一个新的解析器。</p><ul><li><code>options</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noreferrer">&lt;Object&gt;</a><ul><li><code>timeout</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;integer&gt;</a> 查询超时时间（以毫秒为单位），或 <code>-1</code> 使用默认超时时间。</li><li><code>tries</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;integer&gt;</a> 在放弃之前，解析器将尝试联系每个域名服务器的次数。 <strong>默认:</strong> <code>4</code></li></ul></li></ul><h3 id="resolvercancel" tabindex="-1"><code>resolver.cancel()</code> <a class="header-anchor" href="#resolvercancel" aria-label="Permalink to “resolver.cancel()”">​</a></h3><p><strong>Added in: v8.3.0</strong></p><p>取消此解析器发出的所有未完成的 DNS 查询。 相应的回调函数将被调用，并返回带有代码 <code>ECANCELLED</code> 的错误。</p><h3 id="resolversetlocaladdressipv4-ipv6" tabindex="-1"><code>resolver.setLocalAddress([ipv4][, ipv6])</code> <a class="header-anchor" href="#resolversetlocaladdressipv4-ipv6" aria-label="Permalink to “resolver.setLocalAddress([ipv4][, ipv6])”">​</a></h3><p><strong>Added in: v15.1.0, v14.17.0</strong></p><ul><li><code>ipv4</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> IPv4 地址的字符串表示形式。 <strong>默认值:</strong> <code>&#39;0.0.0.0&#39;</code></li><li><code>ipv6</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> IPv6 地址的字符串表示形式。 <strong>默认值:</strong> <code>&#39;::0&#39;</code></li></ul><p>解析器实例将从指定的 IP 地址发送其请求。 这允许程序在多宿主系统上使用时指定出站接口。</p><p>如果未指定 v4 或 v6 地址，则将其设置为默认值，并且操作系统将自动选择本地地址。</p><p>解析器在向 IPv4 DNS 服务器发出请求时将使用 v4 本地地址，在向 IPv6 DNS 服务器发出请求时将使用 v6 本地地址。 解析请求的 <code>rrtype</code> 对所使用的本地地址没有影响。</p><h2 id="dnsgetservers" tabindex="-1"><code>dns.getServers()</code> <a class="header-anchor" href="#dnsgetservers" aria-label="Permalink to “dns.getServers()”">​</a></h2><p><strong>Added in: v0.11.3</strong></p><ul><li>返回: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string[]&gt;</a></li></ul><p>返回当前为 DNS 解析配置的 IP 地址字符串数组，按照 <a href="https://tools.ietf.org/html/rfc5952#section-6" target="_blank" rel="noreferrer">RFC 5952</a> 格式化。 如果使用了自定义端口，则字符串将包含端口部分。</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  &#39;8.8.8.8&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  &#39;2001:4860:4860::8888&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  &#39;8.8.8.8:1053&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  &#39;[2001:4860:4860::8888]:1053&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h2 id="dnslookuphostname-options-callback" tabindex="-1"><code>dns.lookup(hostname[, options], callback)</code> <a class="header-anchor" href="#dnslookuphostname-options-callback" aria-label="Permalink to “dns.lookup(hostname[, options], callback)”">​</a></h2><div class="info custom-block"><p class="custom-block-title">[History]</p><table tabindex="0"><thead><tr><th>Version</th><th>Changes</th></tr></thead><tbody><tr><td>v22.1.0, v20.13.0</td><td>The <code>verbatim</code> option is now deprecated in favor of the new <code>order</code> option.</td></tr><tr><td>v18.4.0</td><td>For compatibility with <code>node:net</code>, when passing an option object the <code>family</code> option can be the string <code>&#39;IPv4&#39;</code> or the string <code>&#39;IPv6&#39;</code>.</td></tr><tr><td>v18.0.0</td><td>Passing an invalid callback to the <code>callback</code> argument now throws <code>ERR_INVALID_ARG_TYPE</code> instead of <code>ERR_INVALID_CALLBACK</code>.</td></tr><tr><td>v17.0.0</td><td>The <code>verbatim</code> options defaults to <code>true</code> now.</td></tr><tr><td>v8.5.0</td><td>The <code>verbatim</code> option is supported now.</td></tr><tr><td>v1.2.0</td><td>The <code>all</code> option is supported now.</td></tr><tr><td>v0.1.90</td><td>Added in: v0.1.90</td></tr></tbody></table></div><ul><li><p><code>hostname</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a></p></li><li><p><code>options</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;integer&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noreferrer">&lt;Object&gt;</a></p><ul><li><code>family</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;integer&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> 记录族。 必须是 <code>4</code>、<code>6</code> 或 <code>0</code>。 出于向后兼容的原因，<code>&#39;IPv4&#39;</code> 和 <code>&#39;IPv6&#39;</code> 分别被解释为 <code>4</code> 和 <code>6</code>。 值 <code>0</code> 表示返回 IPv4 或 IPv6 地址。 如果将值 <code>0</code> 与 <code>{ all: true }</code> 一起使用（见下文），则返回 IPv4 和 IPv6 地址中的一个或两个，具体取决于系统的 DNS 解析器。 <strong>默认值:</strong> <code>0</code>。</li><li><code>hints</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;number&gt;</a> 一个或多个<a href="/zh/nodejs/api/dns#supported-getaddrinfo-flags">支持的 <code>getaddrinfo</code> 标志</a>。 可以通过按位 <code>OR</code> 运算传递多个标志的值。</li><li><code>all</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" target="_blank" rel="noreferrer">&lt;boolean&gt;</a> 当 <code>true</code> 时，回调函数返回数组中的所有已解析地址。 否则，返回单个地址。 <strong>默认值:</strong> <code>false</code>。</li><li><code>order</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> 当 <code>verbatim</code> 时，返回的已解析地址未排序。 当 <code>ipv4first</code> 时，已解析地址通过将 IPv4 地址置于 IPv6 地址之前进行排序。 当 <code>ipv6first</code> 时，已解析地址通过将 IPv6 地址置于 IPv4 地址之前进行排序。 <strong>默认值:</strong> <code>verbatim</code> (地址未重新排序)。 默认值可以使用 <a href="/zh/nodejs/api/dns#dnssetdefaultresultorderorder"><code>dns.setDefaultResultOrder()</code></a> 或 <a href="/zh/nodejs/api/cli#dns-result-orderorder"><code>--dns-result-order</code></a> 进行配置。</li><li><code>verbatim</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" target="_blank" rel="noreferrer">&lt;boolean&gt;</a> 当 <code>true</code> 时，回调函数接收 DNS 解析器返回的 IPv4 和 IPv6 地址的顺序。 当 <code>false</code> 时，IPv4 地址位于 IPv6 地址之前。 此选项将被弃用，而改用 <code>order</code>。 如果两者都指定，则 <code>order</code> 具有更高的优先级。 新代码应仅使用 <code>order</code>。 <strong>默认值:</strong> <code>true</code> (地址未重新排序)。 默认值可以使用 <a href="/zh/nodejs/api/dns#dnssetdefaultresultorderorder"><code>dns.setDefaultResultOrder()</code></a> 或 <a href="/zh/nodejs/api/cli#dns-result-orderorder"><code>--dns-result-order</code></a> 进行配置。</li></ul></li><li><p><code>callback</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function" target="_blank" rel="noreferrer">&lt;Function&gt;</a></p><ul><li><code>err</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error" target="_blank" rel="noreferrer">&lt;Error&gt;</a></li><li><code>address</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> IPv4 或 IPv6 地址的字符串表示形式。</li><li><code>family</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;integer&gt;</a> <code>4</code> 或 <code>6</code>，表示 <code>address</code> 的族，如果地址不是 IPv4 或 IPv6 地址，则为 <code>0</code>。 <code>0</code> 可能是操作系统使用的名称解析服务中存在错误的指标。</li></ul></li></ul><p>将主机名（例如 <code>&#39;nodejs.org&#39;</code>）解析为找到的第一个 A (IPv4) 或 AAAA (IPv6) 记录。 所有 <code>option</code> 属性都是可选的。 如果 <code>options</code> 是整数，则它必须是 <code>4</code> 或 <code>6</code> – 如果未提供 <code>options</code>，则返回 IPv4 或 IPv6 地址或两者（如果找到）。</p><p>如果 <code>all</code> 选项设置为 <code>true</code>，则 <code>callback</code> 的参数将更改为 <code>(err, addresses)</code>，其中 <code>addresses</code> 是一个对象数组，其属性为 <code>address</code> 和 <code>family</code>。</p><p>如果发生错误，则 <code>err</code> 是一个 <a href="/zh/nodejs/api/errors#class-error"><code>Error</code></a> 对象，其中 <code>err.code</code> 是错误代码。 请记住，仅当主机名不存在时，才会将 <code>err.code</code> 设置为 <code>&#39;ENOTFOUND&#39;</code>，而且当查找以其他方式失败时（例如没有可用的文件描述符）。</p><p><code>dns.lookup()</code> 不一定与 DNS 协议有关。 该实现使用操作系统工具，可以将名称与地址相互关联。 这种实现方式会对任何 Node.js 程序的行为产生微妙但重要的影响。 在使用 <code>dns.lookup()</code> 之前，请花一些时间查阅<a href="/zh/nodejs/api/dns#implementation-considerations">实现注意事项部分</a>。</p><p>用法示例：</p><div class="vp-code-group"><div class="tabs"><input type="radio" name="group-401" id="tab-402" checked><label data-title="ESM" for="tab-402">ESM</label><input type="radio" name="group-401" id="tab-403"><label data-title="CJS" for="tab-403">CJS</label></div><div class="blocks"><div class="language-js active line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> dns </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;node:dns&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> options</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  family: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">6</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  hints: dns.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">ADDRCONFIG</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> dns.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">V4MAPPED</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">dns.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">lookup</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;example.org&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, options, (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">err</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">address</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">family</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;address: %j family: IPv%s&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, address, family));</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// address: &quot;2606:2800:21f:cb07:6820:80da:af6b:8b2c&quot; family: IPv6</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// When options.all is true, the result will be an Array.</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">options.all </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">dns.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">lookup</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;example.org&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, options, (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">err</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">addresses</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;addresses: %j&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, addresses));</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// addresses: [{&quot;address&quot;:&quot;2606:2800:21f:cb07:6820:80da:af6b:8b2c&quot;,&quot;family&quot;:6}]</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> dns</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;node:dns&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> options</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  family: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">6</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  hints: dns.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">ADDRCONFIG</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> dns.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">V4MAPPED</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">dns.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">lookup</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;example.org&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, options, (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">err</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">address</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">family</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;address: %j family: IPv%s&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, address, family));</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// address: &quot;2606:2800:21f:cb07:6820:80da:af6b:8b2c&quot; family: IPv6</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// When options.all is true, the result will be an Array.</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">options.all </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">dns.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">lookup</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;example.org&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, options, (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">err</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">addresses</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;addresses: %j&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, addresses));</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// addresses: [{&quot;address&quot;:&quot;2606:2800:21f:cb07:6820:80da:af6b:8b2c&quot;,&quot;family&quot;:6}]</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div></div></div><p>如果此方法作为其 <a href="/zh/nodejs/api/util#utilpromisifyoriginal"><code>util.promisify()</code></a> 化的版本调用，并且 <code>all</code> 未设置为 <code>true</code>，则它会为具有 <code>address</code> 和 <code>family</code> 属性的 <code>Object</code> 返回 <code>Promise</code>。</p><h3 id="supported-getaddrinfo-flags" tabindex="-1">支持的 getaddrinfo 标志 <a class="header-anchor" href="#supported-getaddrinfo-flags" aria-label="Permalink to “支持的 getaddrinfo 标志”">​</a></h3><div class="info custom-block"><p class="custom-block-title">[历史]</p><table tabindex="0"><thead><tr><th>版本</th><th>变更</th></tr></thead><tbody><tr><td>v13.13.0, v12.17.0</td><td>增加了对 <code>dns.ALL</code> 标志的支持。</td></tr></tbody></table></div><p>以下标志可以作为提示传递给 <a href="/zh/nodejs/api/dns#dnslookuphostname-options-callback"><code>dns.lookup()</code></a>。</p><ul><li><code>dns.ADDRCONFIG</code>: 将返回的地址类型限制为系统上配置的非环回地址的类型。 例如，只有当当前系统至少配置了一个 IPv4 地址时，才会返回 IPv4 地址。</li><li><code>dns.V4MAPPED</code>: 如果指定了 IPv6 族，但没有找到 IPv6 地址，则返回 IPv4 映射的 IPv6 地址。 某些操作系统（例如 FreeBSD 10.1）不支持此功能。</li><li><code>dns.ALL</code>: 如果指定了 <code>dns.V4MAPPED</code>，则返回已解析的 IPv6 地址以及 IPv4 映射的 IPv6 地址。</li></ul><h2 id="dnslookupserviceaddress-port-callback" tabindex="-1"><code>dns.lookupService(address, port, callback)</code> <a class="header-anchor" href="#dnslookupserviceaddress-port-callback" aria-label="Permalink to “dns.lookupService(address, port, callback)”">​</a></h2><div class="info custom-block"><p class="custom-block-title">[历史]</p><table tabindex="0"><thead><tr><th>版本</th><th>变更</th></tr></thead><tbody><tr><td>v18.0.0</td><td>将无效的回调传递给 <code>callback</code> 参数现在会抛出 <code>ERR_INVALID_ARG_TYPE</code> 而不是 <code>ERR_INVALID_CALLBACK</code>。</td></tr><tr><td>v0.11.14</td><td>添加于: v0.11.14</td></tr></tbody></table></div><ul><li><code>address</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a></li><li><code>port</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;number&gt;</a></li><li><code>callback</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function" target="_blank" rel="noreferrer">&lt;Function&gt;</a><ul><li><code>err</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error" target="_blank" rel="noreferrer">&lt;Error&gt;</a></li><li><code>hostname</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> 例如：<code>example.com</code></li><li><code>service</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> 例如：<code>http</code></li></ul></li></ul><p>使用操作系统的底层 <code>getnameinfo</code> 实现将给定的 <code>address</code> 和 <code>port</code> 解析为主机名和服务。</p><p>如果 <code>address</code> 不是有效的 IP 地址，则会抛出 <code>TypeError</code>。 <code>port</code> 将被强制转换为数字。 如果它不是合法的端口，则会抛出 <code>TypeError</code>。</p><p>如果发生错误，<code>err</code> 是一个 <a href="/zh/nodejs/api/errors#class-error"><code>Error</code></a> 对象，其中 <code>err.code</code> 是错误代码。</p><div class="vp-code-group"><div class="tabs"><input type="radio" name="group-533" id="tab-534" checked><label data-title="ESM" for="tab-534">ESM</label><input type="radio" name="group-533" id="tab-535"><label data-title="CJS" for="tab-535">CJS</label></div><div class="blocks"><div class="language-js active line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> dns </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;node:dns&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">dns.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">lookupService</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;127.0.0.1&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">22</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">err</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">hostname</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">service</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(hostname, service);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // Prints: localhost ssh</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> dns</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;node:dns&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">dns.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">lookupService</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;127.0.0.1&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">22</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">err</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">hostname</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">service</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(hostname, service);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // Prints: localhost ssh</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></div></div><p>如果此方法作为其 <a href="/zh/nodejs/api/util#utilpromisifyoriginal"><code>util.promisify()</code></a> 版本调用，它将返回一个 <code>Promise</code>，其值为具有 <code>hostname</code> 和 <code>service</code> 属性的 <code>Object</code>。</p><h2 id="dnsresolvehostname-rrtype-callback" tabindex="-1"><code>dns.resolve(hostname[, rrtype], callback)</code> <a class="header-anchor" href="#dnsresolvehostname-rrtype-callback" aria-label="Permalink to “dns.resolve(hostname[, rrtype], callback)”">​</a></h2><div class="info custom-block"><p class="custom-block-title">[历史记录]</p><table tabindex="0"><thead><tr><th>版本</th><th>变更</th></tr></thead><tbody><tr><td>v18.0.0</td><td>将无效的回调函数传递给 <code>callback</code> 参数现在会抛出 <code>ERR_INVALID_ARG_TYPE</code> 而不是 <code>ERR_INVALID_CALLBACK</code>。</td></tr><tr><td>v0.1.27</td><td>添加于: v0.1.27</td></tr></tbody></table></div><ul><li><code>hostname</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> 要解析的主机名。</li><li><code>rrtype</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> 资源记录类型。<strong>默认:</strong> <code>&#39;A&#39;</code>。</li><li><code>callback</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function" target="_blank" rel="noreferrer">&lt;Function&gt;</a><ul><li><code>err</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error" target="_blank" rel="noreferrer">&lt;Error&gt;</a></li><li><code>records</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string[]&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noreferrer">&lt;Object[]&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noreferrer">&lt;Object&gt;</a></li></ul></li></ul><p>使用 DNS 协议将主机名（例如 <code>&#39;nodejs.org&#39;</code>）解析为资源记录数组。 <code>callback</code> 函数具有参数 <code>(err, records)</code>。 成功时，<code>records</code> 将是一个资源记录数组。 各个结果的类型和结构因 <code>rrtype</code> 而异：</p><table tabindex="0"><thead><tr><th><code>rrtype</code></th><th><code>records</code> 包含</th><th>结果类型</th><th>简写方法</th></tr></thead><tbody><tr><td><code>&#39;A&#39;</code></td><td>IPv4 地址（默认）</td><td><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a></td><td><a href="/zh/nodejs/api/dns#dnsresolve4hostname-options-callback"><code>dns.resolve4()</code></a></td></tr><tr><td><code>&#39;AAAA&#39;</code></td><td>IPv6 地址</td><td><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a></td><td><a href="/zh/nodejs/api/dns#dnsresolve6hostname-options-callback"><code>dns.resolve6()</code></a></td></tr><tr><td><code>&#39;ANY&#39;</code></td><td>任何记录</td><td><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noreferrer">&lt;Object&gt;</a></td><td><a href="/zh/nodejs/api/dns#dnsresolveanyhostname-callback"><code>dns.resolveAny()</code></a></td></tr><tr><td><code>&#39;CAA&#39;</code></td><td>CA 授权记录</td><td><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noreferrer">&lt;Object&gt;</a></td><td><a href="/zh/nodejs/api/dns#dnsresolvecaahostname-callback"><code>dns.resolveCaa()</code></a></td></tr><tr><td><code>&#39;CNAME&#39;</code></td><td>规范名称记录</td><td><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a></td><td><a href="/zh/nodejs/api/dns#dnsresolvecnamehostname-callback"><code>dns.resolveCname()</code></a></td></tr><tr><td><code>&#39;MX&#39;</code></td><td>邮件交换记录</td><td><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noreferrer">&lt;Object&gt;</a></td><td><a href="/zh/nodejs/api/dns#dnsresolvemxhostname-callback"><code>dns.resolveMx()</code></a></td></tr><tr><td><code>&#39;NAPTR&#39;</code></td><td>名称权限指针记录</td><td><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noreferrer">&lt;Object&gt;</a></td><td><a href="/zh/nodejs/api/dns#dnsresolvenaptrhostname-callback"><code>dns.resolveNaptr()</code></a></td></tr><tr><td><code>&#39;NS&#39;</code></td><td>名称服务器记录</td><td><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a></td><td><a href="/zh/nodejs/api/dns#dnsresolvenshostname-callback"><code>dns.resolveNs()</code></a></td></tr><tr><td><code>&#39;PTR&#39;</code></td><td>指针记录</td><td><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a></td><td><a href="/zh/nodejs/api/dns#dnsresolveptrhostname-callback"><code>dns.resolvePtr()</code></a></td></tr><tr><td><code>&#39;SOA&#39;</code></td><td>权限起始记录</td><td><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noreferrer">&lt;Object&gt;</a></td><td><a href="/zh/nodejs/api/dns#dnsresolvesoahostname-callback"><code>dns.resolveSoa()</code></a></td></tr><tr><td><code>&#39;SRV&#39;</code></td><td>服务记录</td><td><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noreferrer">&lt;Object&gt;</a></td><td><a href="/zh/nodejs/api/dns#dnsresolvesrvhostname-callback"><code>dns.resolveSrv()</code></a></td></tr><tr><td><code>&#39;TXT&#39;</code></td><td>文本记录</td><td><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string[]&gt;</a></td><td><a href="/zh/nodejs/api/dns#dnsresolvetxthostname-callback"><code>dns.resolveTxt()</code></a></td></tr></tbody></table><p>出错时，<code>err</code> 是一个 <a href="/zh/nodejs/api/errors#class-error"><code>Error</code></a> 对象，其中 <code>err.code</code> 是 <a href="/zh/nodejs/api/dns#error-codes">DNS 错误代码</a> 之一。</p><h2 id="dnsresolve4hostname-options-callback" tabindex="-1"><code>dns.resolve4(hostname[, options], callback)</code> <a class="header-anchor" href="#dnsresolve4hostname-options-callback" aria-label="Permalink to “dns.resolve4(hostname[, options], callback)”">​</a></h2><div class="info custom-block"><p class="custom-block-title">[历史]</p><table tabindex="0"><thead><tr><th>版本</th><th>变更</th></tr></thead><tbody><tr><td>v18.0.0</td><td>将无效的回调传递给 <code>callback</code> 参数现在会抛出 <code>ERR_INVALID_ARG_TYPE</code> 而不是 <code>ERR_INVALID_CALLBACK</code>。</td></tr><tr><td>v7.2.0</td><td>此方法现在支持传递 <code>options</code>，特别是 <code>options.ttl</code>。</td></tr><tr><td>v0.1.16</td><td>添加于: v0.1.16</td></tr></tbody></table></div><ul><li><p><code>hostname</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> 要解析的主机名。</p></li><li><p><code>options</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noreferrer">&lt;Object&gt;</a></p><ul><li><code>ttl</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" target="_blank" rel="noreferrer">&lt;boolean&gt;</a> 检索每个记录的生存时间 (TTL) 值。 当 <code>true</code> 时，回调接收一个 <code>{ address: &#39;1.2.3.4&#39;, ttl: 60 }</code> 对象数组，而不是一个字符串数组，其中 TTL 以秒为单位表示。</li></ul></li><li><p><code>callback</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function" target="_blank" rel="noreferrer">&lt;Function&gt;</a></p><ul><li><code>err</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error" target="_blank" rel="noreferrer">&lt;Error&gt;</a></li><li><code>addresses</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string[]&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noreferrer">&lt;Object[]&gt;</a></li></ul></li></ul><p>使用 DNS 协议解析 <code>hostname</code> 的 IPv4 地址（<code>A</code> 记录）。 传递给 <code>callback</code> 函数的 <code>addresses</code> 参数将包含一个 IPv4 地址数组（例如 <code>[&#39;74.125.79.104&#39;, &#39;74.125.79.105&#39;, &#39;74.125.79.106&#39;]</code>）。</p><h2 id="dnsresolve6hostname-options-callback" tabindex="-1"><code>dns.resolve6(hostname[, options], callback)</code> <a class="header-anchor" href="#dnsresolve6hostname-options-callback" aria-label="Permalink to “dns.resolve6(hostname[, options], callback)”">​</a></h2><div class="info custom-block"><p class="custom-block-title">[历史]</p><table tabindex="0"><thead><tr><th>版本</th><th>变更</th></tr></thead><tbody><tr><td>v18.0.0</td><td>将无效的回调传递给 <code>callback</code> 参数现在会抛出 <code>ERR_INVALID_ARG_TYPE</code> 而不是 <code>ERR_INVALID_CALLBACK</code>。</td></tr><tr><td>v7.2.0</td><td>此方法现在支持传递 <code>options</code>，特别是 <code>options.ttl</code>。</td></tr><tr><td>v0.1.16</td><td>添加于: v0.1.16</td></tr></tbody></table></div><ul><li><p><code>hostname</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> 要解析的主机名。</p></li><li><p><code>options</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noreferrer">&lt;Object&gt;</a></p><ul><li><code>ttl</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" target="_blank" rel="noreferrer">&lt;boolean&gt;</a> 检索每个记录的生存时间 (TTL) 值。 当 <code>true</code> 时，回调接收一个 <code>{ address: &#39;0:1:2:3:4:5:6:7&#39;, ttl: 60 }</code> 对象数组，而不是一个字符串数组，其中 TTL 以秒为单位表示。</li></ul></li><li><p><code>callback</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function" target="_blank" rel="noreferrer">&lt;Function&gt;</a></p><ul><li><code>err</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error" target="_blank" rel="noreferrer">&lt;Error&gt;</a></li><li><code>addresses</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string[]&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noreferrer">&lt;Object[]&gt;</a></li></ul></li></ul><p>使用 DNS 协议解析 <code>hostname</code> 的 IPv6 地址（<code>AAAA</code> 记录）。 传递给 <code>callback</code> 函数的 <code>addresses</code> 参数将包含一个 IPv6 地址数组。</p><h2 id="dnsresolveanyhostname-callback" tabindex="-1"><code>dns.resolveAny(hostname, callback)</code> <a class="header-anchor" href="#dnsresolveanyhostname-callback" aria-label="Permalink to “dns.resolveAny(hostname, callback)”">​</a></h2><div class="info custom-block"><p class="custom-block-title">[历史]</p><table tabindex="0"><thead><tr><th>版本</th><th>变更</th></tr></thead><tbody><tr><td>v18.0.0</td><td>将无效的回调传递给 <code>callback</code> 参数现在会抛出 <code>ERR_INVALID_ARG_TYPE</code> 而不是 <code>ERR_INVALID_CALLBACK</code>。</td></tr></tbody></table></div><ul><li><code>hostname</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a></li><li><code>callback</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function" target="_blank" rel="noreferrer">&lt;Function&gt;</a><ul><li><code>err</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error" target="_blank" rel="noreferrer">&lt;Error&gt;</a></li><li><code>ret</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noreferrer">&lt;Object[]&gt;</a></li></ul></li></ul><p>使用 DNS 协议解析所有记录（也称为 <code>ANY</code> 或 <code>*</code> 查询）。 传递给 <code>callback</code> 函数的 <code>ret</code> 参数将是一个包含各种类型记录的数组。 每个对象都有一个 <code>type</code> 属性，指示当前记录的类型。 并且根据 <code>type</code>，对象上将存在其他属性：</p><table tabindex="0"><thead><tr><th>类型</th><th>属性</th></tr></thead><tbody><tr><td><code>&#39;A&#39;</code></td><td><code>address</code> / <code>ttl</code></td></tr><tr><td><code>&#39;AAAA&#39;</code></td><td><code>address</code> / <code>ttl</code></td></tr><tr><td><code>&#39;CNAME&#39;</code></td><td><code>value</code></td></tr><tr><td><code>&#39;MX&#39;</code></td><td>请参阅 <a href="/zh/nodejs/api/dns#dnsresolvemxhostname-callback"><code>dns.resolveMx()</code></a></td></tr><tr><td><code>&#39;NAPTR&#39;</code></td><td>请参阅 <a href="/zh/nodejs/api/dns#dnsresolvenaptrhostname-callback"><code>dns.resolveNaptr()</code></a></td></tr><tr><td><code>&#39;NS&#39;</code></td><td><code>value</code></td></tr><tr><td><code>&#39;PTR&#39;</code></td><td><code>value</code></td></tr><tr><td><code>&#39;SOA&#39;</code></td><td>请参阅 <a href="/zh/nodejs/api/dns#dnsresolvesoahostname-callback"><code>dns.resolveSoa()</code></a></td></tr><tr><td><code>&#39;SRV&#39;</code></td><td>请参阅 <a href="/zh/nodejs/api/dns#dnsresolvesrvhostname-callback"><code>dns.resolveSrv()</code></a></td></tr><tr><td><code>&#39;TXT&#39;</code></td><td>此类型的记录包含一个名为 <code>entries</code> 的数组属性，该属性引用 <a href="/zh/nodejs/api/dns#dnsresolvetxthostname-callback"><code>dns.resolveTxt()</code></a>，例如 <code>{ entries: [&#39;...&#39;], type: &#39;TXT&#39; }</code></td></tr></tbody></table><p>以下是传递给回调的 <code>ret</code> 对象的示例：</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[ { type: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;A&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, address: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;127.0.0.1&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, ttl: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">299</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  { type: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;CNAME&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, value: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;example.com&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  { type: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;MX&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, exchange: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;alt4.aspmx.l.example.com&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, priority: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">50</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  { type: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;NS&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, value: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;ns1.example.com&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  { type: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;TXT&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, entries: [ </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;v=spf1 include:_spf.example.com ~all&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ] },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  { type: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;SOA&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    nsname: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;ns1.example.com&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    hostmaster: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;admin.example.com&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    serial: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">156696742</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    refresh: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">900</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    retry: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">900</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    expire: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1800</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    minttl: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">60</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> } ]</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>DNS 服务器运营商可以选择不响应 <code>ANY</code> 查询。 最好调用诸如 <a href="/zh/nodejs/api/dns#dnsresolve4hostname-options-callback"><code>dns.resolve4()</code></a>、<a href="/zh/nodejs/api/dns#dnsresolvemxhostname-callback"><code>dns.resolveMx()</code></a> 等单独的方法。 有关更多详细信息，请参见 <a href="https://tools.ietf.org/html/rfc8482" target="_blank" rel="noreferrer">RFC 8482</a>。</p><h2 id="dnsresolvecnamehostname-callback" tabindex="-1"><code>dns.resolveCname(hostname, callback)</code> <a class="header-anchor" href="#dnsresolvecnamehostname-callback" aria-label="Permalink to “dns.resolveCname(hostname, callback)”">​</a></h2><div class="info custom-block"><p class="custom-block-title">[历史记录]</p><table tabindex="0"><thead><tr><th>版本</th><th>变更</th></tr></thead><tbody><tr><td>v18.0.0</td><td>现在，将无效的回调传递给 <code>callback</code> 参数将抛出 <code>ERR_INVALID_ARG_TYPE</code> 而不是 <code>ERR_INVALID_CALLBACK</code>。</td></tr><tr><td>v0.3.2</td><td>添加于: v0.3.2</td></tr></tbody></table></div><ul><li><code>hostname</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a></li><li><code>callback</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function" target="_blank" rel="noreferrer">&lt;Function&gt;</a><ul><li><code>err</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error" target="_blank" rel="noreferrer">&lt;Error&gt;</a></li><li><code>addresses</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string[]&gt;</a></li></ul></li></ul><p>使用 DNS 协议来解析 <code>hostname</code> 的 <code>CNAME</code> 记录。 传递给 <code>callback</code> 函数的 <code>addresses</code> 参数将包含可用于 <code>hostname</code> 的规范名称记录数组（例如 <code>[&#39;bar.example.com&#39;]</code>）。</p><h2 id="dnsresolvecaahostname-callback" tabindex="-1"><code>dns.resolveCaa(hostname, callback)</code> <a class="header-anchor" href="#dnsresolvecaahostname-callback" aria-label="Permalink to “dns.resolveCaa(hostname, callback)”">​</a></h2><div class="info custom-block"><p class="custom-block-title">[历史记录]</p><table tabindex="0"><thead><tr><th>版本</th><th>变更</th></tr></thead><tbody><tr><td>v18.0.0</td><td>现在，将无效的回调传递给 <code>callback</code> 参数将抛出 <code>ERR_INVALID_ARG_TYPE</code> 而不是 <code>ERR_INVALID_CALLBACK</code>。</td></tr><tr><td>v15.0.0, v14.17.0</td><td>添加于: v15.0.0, v14.17.0</td></tr></tbody></table></div><ul><li><code>hostname</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a></li><li><code>callback</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function" target="_blank" rel="noreferrer">&lt;Function&gt;</a><ul><li><code>err</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error" target="_blank" rel="noreferrer">&lt;Error&gt;</a></li><li><code>records</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noreferrer">&lt;Object[]&gt;</a></li></ul></li></ul><p>使用 DNS 协议来解析 <code>hostname</code> 的 <code>CAA</code> 记录。 传递给 <code>callback</code> 函数的 <code>addresses</code> 参数将包含可用于 <code>hostname</code> 的证书颁发机构授权记录数组 (例如 <code>[{critical: 0, iodef: &#39;mailto:pki@example.com&#39;}, {critical: 128, issue: &#39;pki.example.com&#39;}]</code>)。</p><h2 id="dnsresolvemxhostname-callback" tabindex="-1"><code>dns.resolveMx(hostname, callback)</code> <a class="header-anchor" href="#dnsresolvemxhostname-callback" aria-label="Permalink to “dns.resolveMx(hostname, callback)”">​</a></h2><div class="info custom-block"><p class="custom-block-title">[历史记录]</p><table tabindex="0"><thead><tr><th>版本</th><th>变更</th></tr></thead><tbody><tr><td>v18.0.0</td><td>将无效的回调传递给 <code>callback</code> 参数现在会抛出 <code>ERR_INVALID_ARG_TYPE</code> 而不是 <code>ERR_INVALID_CALLBACK</code>。</td></tr><tr><td>v0.1.27</td><td>添加于: v0.1.27</td></tr></tbody></table></div><ul><li><code>hostname</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a></li><li><code>callback</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function" target="_blank" rel="noreferrer">&lt;Function&gt;</a><ul><li><code>err</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error" target="_blank" rel="noreferrer">&lt;Error&gt;</a></li><li><code>addresses</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noreferrer">&lt;Object[]&gt;</a></li></ul></li></ul><p>使用 DNS 协议解析 <code>hostname</code> 的邮件交换记录（<code>MX</code> 记录）。 传递给 <code>callback</code> 函数的 <code>addresses</code> 参数将包含一个对象数组，其中包含 <code>priority</code> 和 <code>exchange</code> 属性（例如 <code>[{priority: 10, exchange: &#39;mx.example.com&#39;}, ...]</code>）。</p><h2 id="dnsresolvenaptrhostname-callback" tabindex="-1"><code>dns.resolveNaptr(hostname, callback)</code> <a class="header-anchor" href="#dnsresolvenaptrhostname-callback" aria-label="Permalink to “dns.resolveNaptr(hostname, callback)”">​</a></h2><div class="info custom-block"><p class="custom-block-title">[历史记录]</p><table tabindex="0"><thead><tr><th>版本</th><th>变更</th></tr></thead><tbody><tr><td>v18.0.0</td><td>将无效的回调传递给 <code>callback</code> 参数现在会抛出 <code>ERR_INVALID_ARG_TYPE</code> 而不是 <code>ERR_INVALID_CALLBACK</code>。</td></tr><tr><td>v0.9.12</td><td>添加于: v0.9.12</td></tr></tbody></table></div><ul><li><code>hostname</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a></li><li><code>callback</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function" target="_blank" rel="noreferrer">&lt;Function&gt;</a><ul><li><code>err</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error" target="_blank" rel="noreferrer">&lt;Error&gt;</a></li><li><code>addresses</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noreferrer">&lt;Object[]&gt;</a></li></ul></li></ul><p>使用 DNS 协议解析 <code>hostname</code> 的基于正则表达式的记录（<code>NAPTR</code> 记录）。 传递给 <code>callback</code> 函数的 <code>addresses</code> 参数将包含一个具有以下属性的对象数组：</p><ul><li><code>flags</code></li><li><code>service</code></li><li><code>regexp</code></li><li><code>replacement</code></li><li><code>order</code></li><li><code>preference</code></li></ul><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  flags</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;s&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  service</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;SIP+D2U&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  regexp</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  replacement</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;_sip._udp.example.com&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  order</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">30</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  preference</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">100</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h2 id="dnsresolvenshostname-callback" tabindex="-1"><code>dns.resolveNs(hostname, callback)</code> <a class="header-anchor" href="#dnsresolvenshostname-callback" aria-label="Permalink to “dns.resolveNs(hostname, callback)”">​</a></h2><div class="info custom-block"><p class="custom-block-title">[历史记录]</p><table tabindex="0"><thead><tr><th>版本</th><th>变更</th></tr></thead><tbody><tr><td>v18.0.0</td><td>如果传递给 <code>callback</code> 参数的不是有效的回调函数，现在会抛出 <code>ERR_INVALID_ARG_TYPE</code> 错误，而不是 <code>ERR_INVALID_CALLBACK</code>。</td></tr><tr><td>v0.1.90</td><td>添加于: v0.1.90</td></tr></tbody></table></div><ul><li><code>hostname</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a></li><li><code>callback</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function" target="_blank" rel="noreferrer">&lt;Function&gt;</a><ul><li><code>err</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error" target="_blank" rel="noreferrer">&lt;Error&gt;</a></li><li><code>addresses</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string[]&gt;</a></li></ul></li></ul><p>使用 DNS 协议来解析 <code>hostname</code> 的域名服务器记录（<code>NS</code> 记录）。 传递给 <code>callback</code> 函数的 <code>addresses</code> 参数将包含一个可用于 <code>hostname</code> 的域名服务器记录数组（例如 <code>[&#39;ns1.example.com&#39;, &#39;ns2.example.com&#39;]</code>）。</p><h2 id="dnsresolveptrhostname-callback" tabindex="-1"><code>dns.resolvePtr(hostname, callback)</code> <a class="header-anchor" href="#dnsresolveptrhostname-callback" aria-label="Permalink to “dns.resolvePtr(hostname, callback)”">​</a></h2><div class="info custom-block"><p class="custom-block-title">[历史记录]</p><table tabindex="0"><thead><tr><th>版本</th><th>变更</th></tr></thead><tbody><tr><td>v18.0.0</td><td>如果传递给 <code>callback</code> 参数的不是有效的回调函数，现在会抛出 <code>ERR_INVALID_ARG_TYPE</code> 错误，而不是 <code>ERR_INVALID_CALLBACK</code>。</td></tr><tr><td>v6.0.0</td><td>添加于: v6.0.0</td></tr></tbody></table></div><ul><li><code>hostname</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a></li><li><code>callback</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function" target="_blank" rel="noreferrer">&lt;Function&gt;</a><ul><li><code>err</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error" target="_blank" rel="noreferrer">&lt;Error&gt;</a></li><li><code>addresses</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string[]&gt;</a></li></ul></li></ul><p>使用 DNS 协议来解析 <code>hostname</code> 的指针记录（<code>PTR</code> 记录）。 传递给 <code>callback</code> 函数的 <code>addresses</code> 参数将是一个包含回复记录的字符串数组。</p><h2 id="dnsresolvesoahostname-callback" tabindex="-1"><code>dns.resolveSoa(hostname, callback)</code> <a class="header-anchor" href="#dnsresolvesoahostname-callback" aria-label="Permalink to “dns.resolveSoa(hostname, callback)”">​</a></h2><div class="info custom-block"><p class="custom-block-title">[历史记录]</p><table tabindex="0"><thead><tr><th>版本</th><th>变更</th></tr></thead><tbody><tr><td>v18.0.0</td><td>如果传递给 <code>callback</code> 参数的不是有效的回调函数，现在会抛出 <code>ERR_INVALID_ARG_TYPE</code> 错误，而不是 <code>ERR_INVALID_CALLBACK</code>。</td></tr><tr><td>v0.11.10</td><td>添加于: v0.11.10</td></tr></tbody></table></div><ul><li><code>hostname</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a></li><li><code>callback</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function" target="_blank" rel="noreferrer">&lt;Function&gt;</a><ul><li><code>err</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error" target="_blank" rel="noreferrer">&lt;Error&gt;</a></li><li><code>address</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noreferrer">&lt;Object&gt;</a></li></ul></li></ul><p>使用 DNS 协议来解析 <code>hostname</code> 的起始授权记录（<code>SOA</code> 记录）。 传递给 <code>callback</code> 函数的 <code>address</code> 参数将是一个包含以下属性的对象：</p><ul><li><code>nsname</code></li><li><code>hostmaster</code></li><li><code>serial</code></li><li><code>refresh</code></li><li><code>retry</code></li><li><code>expire</code></li><li><code>minttl</code></li></ul><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  nsname</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;ns.example.com&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  hostmaster</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;root.example.com&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  serial</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2013101809</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  refresh</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">10000</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  retry</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2400</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  expire</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">604800</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  minttl</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">3600</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h2 id="dnsresolvesrvhostname-callback" tabindex="-1"><code>dns.resolveSrv(hostname, callback)</code> <a class="header-anchor" href="#dnsresolvesrvhostname-callback" aria-label="Permalink to “dns.resolveSrv(hostname, callback)”">​</a></h2><div class="info custom-block"><p class="custom-block-title">[历史]</p><table tabindex="0"><thead><tr><th>版本</th><th>变更</th></tr></thead><tbody><tr><td>v18.0.0</td><td>现在，将无效的回调传递给 <code>callback</code> 参数将抛出 <code>ERR_INVALID_ARG_TYPE</code> 而不是 <code>ERR_INVALID_CALLBACK</code>。</td></tr><tr><td>v0.1.27</td><td>添加于: v0.1.27</td></tr></tbody></table></div><ul><li><code>hostname</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a></li><li><code>callback</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function" target="_blank" rel="noreferrer">&lt;Function&gt;</a><ul><li><code>err</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error" target="_blank" rel="noreferrer">&lt;Error&gt;</a></li><li><code>addresses</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noreferrer">&lt;Object[]&gt;</a></li></ul></li></ul><p>使用 DNS 协议来解析 <code>hostname</code> 的服务记录（<code>SRV</code> 记录）。 传递给 <code>callback</code> 函数的 <code>addresses</code> 参数将是一个对象数组，具有以下属性：</p><ul><li><code>priority</code></li><li><code>weight</code></li><li><code>port</code></li><li><code>name</code></li></ul><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  priority</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">10</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  weight</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">5</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  port</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">21223</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;service.example.com&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h2 id="dnsresolvetxthostname-callback" tabindex="-1"><code>dns.resolveTxt(hostname, callback)</code> <a class="header-anchor" href="#dnsresolvetxthostname-callback" aria-label="Permalink to “dns.resolveTxt(hostname, callback)”">​</a></h2><div class="info custom-block"><p class="custom-block-title">[历史]</p><table tabindex="0"><thead><tr><th>版本</th><th>变更</th></tr></thead><tbody><tr><td>v18.0.0</td><td>现在，将无效的回调传递给 <code>callback</code> 参数将抛出 <code>ERR_INVALID_ARG_TYPE</code> 而不是 <code>ERR_INVALID_CALLBACK</code>。</td></tr><tr><td>v0.1.27</td><td>添加于: v0.1.27</td></tr></tbody></table></div><ul><li><code>hostname</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a></li><li><code>callback</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function" target="_blank" rel="noreferrer">&lt;Function&gt;</a><ul><li><code>err</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error" target="_blank" rel="noreferrer">&lt;Error&gt;</a></li><li><code>records</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string[][]&gt;</a></li></ul></li></ul><p>使用 DNS 协议来解析 <code>hostname</code> 的文本查询（<code>TXT</code> 记录）。 传递给 <code>callback</code> 函数的 <code>records</code> 参数是 <code>hostname</code> 可用的文本记录的二维数组（例如 <code>[ [&#39;v=spf1 ip4:0.0.0.0 &#39;, &#39;~all&#39; ] ]</code>）。 每个子数组包含一个记录的 TXT 块。 根据用例，这些可以连接在一起或单独处理。</p><h2 id="dnsreverseip-callback" tabindex="-1"><code>dns.reverse(ip, callback)</code> <a class="header-anchor" href="#dnsreverseip-callback" aria-label="Permalink to “dns.reverse(ip, callback)”">​</a></h2><p><strong>新增于: v0.1.16</strong></p><ul><li><code>ip</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a></li><li><code>callback</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function" target="_blank" rel="noreferrer">&lt;Function&gt;</a><ul><li><code>err</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error" target="_blank" rel="noreferrer">&lt;Error&gt;</a></li><li><code>hostnames</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string[]&gt;</a></li></ul></li></ul><p>执行反向 DNS 查询，将 IPv4 或 IPv6 地址解析为主机名数组。</p><p>如果出错，<code>err</code> 是一个 <a href="/zh/nodejs/api/errors#class-error"><code>Error</code></a> 对象，其中 <code>err.code</code> 是 <a href="/zh/nodejs/api/dns#error-codes">DNS 错误代码</a> 之一。</p><h2 id="dnssetdefaultresultorderorder" tabindex="-1"><code>dns.setDefaultResultOrder(order)</code> <a class="header-anchor" href="#dnssetdefaultresultorderorder" aria-label="Permalink to “dns.setDefaultResultOrder(order)”">​</a></h2><div class="info custom-block"><p class="custom-block-title">[历史]</p><table tabindex="0"><thead><tr><th>版本</th><th>更改</th></tr></thead><tbody><tr><td>v22.1.0, v20.13.0</td><td>现在支持 <code>ipv6first</code> 值。</td></tr><tr><td>v17.0.0</td><td>将默认值更改为 <code>verbatim</code>。</td></tr><tr><td>v16.4.0, v14.18.0</td><td>新增于: v16.4.0, v14.18.0</td></tr></tbody></table></div><ul><li><code>order</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> 必须是 <code>&#39;ipv4first&#39;</code>、<code>&#39;ipv6first&#39;</code> 或 <code>&#39;verbatim&#39;</code>。</li></ul><p>设置 <a href="/zh/nodejs/api/dns#dnslookuphostname-options-callback"><code>dns.lookup()</code></a> 和 <a href="/zh/nodejs/api/dns#dnspromiseslookuphostname-options"><code>dnsPromises.lookup()</code></a> 中 <code>order</code> 的默认值。 该值可以是：</p><ul><li><code>ipv4first</code>：将默认 <code>order</code> 设置为 <code>ipv4first</code>。</li><li><code>ipv6first</code>：将默认 <code>order</code> 设置为 <code>ipv6first</code>。</li><li><code>verbatim</code>：将默认 <code>order</code> 设置为 <code>verbatim</code>。</li></ul><p>默认值为 <code>verbatim</code>，并且 <a href="/zh/nodejs/api/dns#dnssetdefaultresultorderorder"><code>dns.setDefaultResultOrder()</code></a> 的优先级高于 <a href="/zh/nodejs/api/cli#dns-result-orderorder"><code>--dns-result-order</code></a>。 当使用 <a href="/zh/nodejs/api/worker_threads">工作线程</a> 时，来自主线程的 <a href="/zh/nodejs/api/dns#dnssetdefaultresultorderorder"><code>dns.setDefaultResultOrder()</code></a> 不会影响工作线程中的默认 dns 顺序。</p><h2 id="dnsgetdefaultresultorder" tabindex="-1"><code>dns.getDefaultResultOrder()</code> <a class="header-anchor" href="#dnsgetdefaultresultorder" aria-label="Permalink to “dns.getDefaultResultOrder()”">​</a></h2><div class="info custom-block"><p class="custom-block-title">[历史]</p><table tabindex="0"><thead><tr><th>版本</th><th>更改</th></tr></thead><tbody><tr><td>v22.1.0, v20.13.0</td><td>现在支持 <code>ipv6first</code> 值。</td></tr><tr><td>v20.1.0, v18.17.0</td><td>新增于: v20.1.0, v18.17.0</td></tr></tbody></table></div><p>获取 <a href="/zh/nodejs/api/dns#dnslookuphostname-options-callback"><code>dns.lookup()</code></a> 和 <a href="/zh/nodejs/api/dns#dnspromiseslookuphostname-options"><code>dnsPromises.lookup()</code></a> 中 <code>order</code> 的默认值。 该值可以是：</p><ul><li><code>ipv4first</code>：对于默认设置为 <code>ipv4first</code> 的 <code>order</code>。</li><li><code>ipv6first</code>：对于默认设置为 <code>ipv6first</code> 的 <code>order</code>。</li><li><code>verbatim</code>：对于默认设置为 <code>verbatim</code> 的 <code>order</code>。</li></ul><h2 id="dnssetserversservers" tabindex="-1"><code>dns.setServers(servers)</code> <a class="header-anchor" href="#dnssetserversservers" aria-label="Permalink to “dns.setServers(servers)”">​</a></h2><p><strong>添加于: v0.11.3</strong></p><ul><li><code>servers</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string[]&gt;</a> <a href="https://tools.ietf.org/html/rfc5952#section-6" target="_blank" rel="noreferrer">RFC 5952</a> 格式的地址数组</li></ul><p>设置执行 DNS 解析时要使用的服务器的 IP 地址和端口。 <code>servers</code> 参数是 <a href="https://tools.ietf.org/html/rfc5952#section-6" target="_blank" rel="noreferrer">RFC 5952</a> 格式的地址数组。 如果端口是 IANA 默认 DNS 端口 (53)，则可以省略。</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">dns.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setServers</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">([</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  &#39;8.8.8.8&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  &#39;[2001:4860:4860::8888]&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  &#39;8.8.8.8:1053&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  &#39;[2001:4860:4860::8888]:1053&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>如果提供了无效的地址，则会抛出错误。</p><p>在 DNS 查询正在进行时，不能调用 <code>dns.setServers()</code> 方法。</p><p><a href="/zh/nodejs/api/dns#dnssetserversservers"><code>dns.setServers()</code></a> 方法仅影响 <a href="/zh/nodejs/api/dns#dnsresolvehostname-rrtype-callback"><code>dns.resolve()</code></a>， <code>dns.resolve*()</code> 和 <a href="/zh/nodejs/api/dns#dnsreverseip-callback"><code>dns.reverse()</code></a> (特别 <em>不</em> 包括 <a href="/zh/nodejs/api/dns#dnslookuphostname-options-callback"><code>dns.lookup()</code></a>)。</p><p>此方法的工作方式与 <a href="https://man7.org/linux/man-pages/man5/resolv.conf.5" target="_blank" rel="noreferrer">resolve.conf</a> 非常相似。 也就是说，如果尝试使用提供的第一个服务器进行解析导致 <code>NOTFOUND</code> 错误，则 <code>resolve()</code> 方法将<em>不会</em>尝试使用提供的后续服务器进行解析。 仅当较早的服务器超时或导致其他错误时，才会使用备用 DNS 服务器。</p><h2 id="dns-promises-api" tabindex="-1">DNS promises API <a class="header-anchor" href="#dns-promises-api" aria-label="Permalink to “DNS promises API”">​</a></h2><div class="info custom-block"><p class="custom-block-title">[历史]</p><table tabindex="0"><thead><tr><th>版本</th><th>更改</th></tr></thead><tbody><tr><td>v15.0.0</td><td>作为 <code>require(&#39;dns/promises&#39;)</code> 暴露。</td></tr><tr><td>v11.14.0, v10.17.0</td><td>此 API 不再是实验性的。</td></tr><tr><td>v10.6.0</td><td>添加于: v10.6.0</td></tr></tbody></table></div><p><code>dns.promises</code> API 提供了一组替代的异步 DNS 方法，这些方法返回 <code>Promise</code> 对象而不是使用回调。 该 API 可通过 <code>require(&#39;node:dns&#39;).promises</code> 或 <code>require(&#39;node:dns/promises&#39;)</code> 访问。</p><h3 id="class-dnspromisesresolver" tabindex="-1">类: <code>dnsPromises.Resolver</code> <a class="header-anchor" href="#class-dnspromisesresolver" aria-label="Permalink to “类: dnsPromises.Resolver”">​</a></h3><p><strong>添加于: v10.6.0</strong></p><p>用于 DNS 请求的独立解析器。</p><p>创建新的解析器使用默认的服务器设置。 使用 <a href="/zh/nodejs/api/dns#dnspromisessetserversservers"><code>resolver.setServers()</code></a> 设置用于解析器的服务器不会影响其他解析器：</p><div class="vp-code-group"><div class="tabs"><input type="radio" name="group-2020" id="tab-2021" checked><label data-title="ESM" for="tab-2021">ESM</label><input type="radio" name="group-2020" id="tab-2022"><label data-title="CJS" for="tab-2022">CJS</label></div><div class="blocks"><div class="language-js active line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { Resolver } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;node:dns/promises&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> resolver</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Resolver</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">resolver.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setServers</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">([</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;4.4.4.4&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 此请求将使用 4.4.4.4 上的服务器，独立于全局设置。</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> addresses</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> resolver.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">resolve4</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;example.org&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Resolver</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;node:dns&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">).promises;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> resolver</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Resolver</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">resolver.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setServers</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">([</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;4.4.4.4&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 此请求将使用 4.4.4.4 上的服务器，独立于全局设置。</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">resolver.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">resolve4</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;example.org&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">then</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">addresses</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // ...</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 或者，可以使用 async-await 风格编写相同的代码。</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">async</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> addresses</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> resolver.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">resolve4</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;example.org&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})();</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div></div></div><p>以下来自 <code>dnsPromises</code> API 的方法可用：</p><ul><li><a href="/zh/nodejs/api/dns#dnspromisesgetservers"><code>resolver.getServers()</code></a></li><li><a href="/zh/nodejs/api/dns#dnspromisesresolvehostname-rrtype"><code>resolver.resolve()</code></a></li><li><a href="/zh/nodejs/api/dns#dnspromisesresolve4hostname-options"><code>resolver.resolve4()</code></a></li><li><a href="/zh/nodejs/api/dns#dnspromisesresolve6hostname-options"><code>resolver.resolve6()</code></a></li><li><a href="/zh/nodejs/api/dns#dnspromisesresolveanyhostname"><code>resolver.resolveAny()</code></a></li><li><a href="/zh/nodejs/api/dns#dnspromisesresolvecaahostname"><code>resolver.resolveCaa()</code></a></li><li><a href="/zh/nodejs/api/dns#dnspromisesresolvecnamehostname"><code>resolver.resolveCname()</code></a></li><li><a href="/zh/nodejs/api/dns#dnspromisesresolvemxhostname"><code>resolver.resolveMx()</code></a></li><li><a href="/zh/nodejs/api/dns#dnspromisesresolvenaptrhostname"><code>resolver.resolveNaptr()</code></a></li><li><a href="/zh/nodejs/api/dns#dnspromisesresolvenshostname"><code>resolver.resolveNs()</code></a></li><li><a href="/zh/nodejs/api/dns#dnspromisesresolveptrhostname"><code>resolver.resolvePtr()</code></a></li><li><a href="/zh/nodejs/api/dns#dnspromisesresolvesoahostname"><code>resolver.resolveSoa()</code></a></li><li><a href="/zh/nodejs/api/dns#dnspromisesresolvesrvhostname"><code>resolver.resolveSrv()</code></a></li><li><a href="/zh/nodejs/api/dns#dnspromisesresolvetxthostname"><code>resolver.resolveTxt()</code></a></li><li><a href="/zh/nodejs/api/dns#dnspromisesreverseip"><code>resolver.reverse()</code></a></li><li><a href="/zh/nodejs/api/dns#dnspromisessetserversservers"><code>resolver.setServers()</code></a></li></ul><h3 id="resolvercancel_1" tabindex="-1"><code>resolver.cancel()</code> <a class="header-anchor" href="#resolvercancel_1" aria-label="Permalink to “resolver.cancel()”">​</a></h3><p><strong>添加于: v15.3.0, v14.17.0</strong></p><p>取消此解析器发出的所有未完成的 DNS 查询。 相应的 Promise 将因代码为 <code>ECANCELLED</code> 的错误而被拒绝。</p><h3 id="dnspromisesgetservers" tabindex="-1"><code>dnsPromises.getServers()</code> <a class="header-anchor" href="#dnspromisesgetservers" aria-label="Permalink to “dnsPromises.getServers()”">​</a></h3><p><strong>添加于: v10.6.0</strong></p><ul><li>返回: <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string[]&gt;</a></li></ul><p>返回当前为 DNS 解析配置的 IP 地址字符串数组，格式符合 <a href="https://tools.ietf.org/html/rfc5952#section-6" target="_blank" rel="noreferrer">RFC 5952</a>。 如果使用自定义端口，则字符串将包含端口部分。</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  &#39;8.8.8.8&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  &#39;2001:4860:4860::8888&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  &#39;8.8.8.8:1053&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  &#39;[2001:4860:4860::8888]:1053&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="dnspromiseslookuphostname-options" tabindex="-1"><code>dnsPromises.lookup(hostname[, options])</code> <a class="header-anchor" href="#dnspromiseslookuphostname-options" aria-label="Permalink to “dnsPromises.lookup(hostname[, options])”">​</a></h3><div class="info custom-block"><p class="custom-block-title">[历史]</p><table tabindex="0"><thead><tr><th>版本</th><th>变更</th></tr></thead><tbody><tr><td>v22.1.0, v20.13.0</td><td><code>verbatim</code> 选项现在已弃用，改用新的 <code>order</code> 选项。</td></tr><tr><td>v10.6.0</td><td>添加于: v10.6.0</td></tr></tbody></table></div><ul><li><code>hostname</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a></li><li><code>options</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;integer&gt;</a> | <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noreferrer">&lt;Object&gt;</a><ul><li><code>family</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;integer&gt;</a> 记录族。 必须为 <code>4</code>、<code>6</code> 或 <code>0</code>。 值 <code>0</code> 表示返回 IPv4 或 IPv6 地址。 如果值 <code>0</code> 与 <code>{ all: true }</code> (见下文) 一起使用，则返回 IPv4 和 IPv6 地址之一或两者，具体取决于系统的 DNS 解析器。 <strong>默认:</strong> <code>0</code>。</li><li><code>hints</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;number&gt;</a> 一个或多个<a href="/zh/nodejs/api/dns#supported-getaddrinfo-flags">支持的 <code>getaddrinfo</code> 标志</a>。 可以通过按位 <code>OR</code> 运算它们的值来传递多个标志。</li><li><code>all</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" target="_blank" rel="noreferrer">&lt;boolean&gt;</a> 当为 <code>true</code> 时，<code>Promise</code> 会解析为数组中的所有地址。 否则，返回单个地址。 <strong>默认:</strong> <code>false</code>。</li><li><code>order</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> 当为 <code>verbatim</code> 时，<code>Promise</code> 会解析为 DNS 解析器返回顺序的 IPv4 和 IPv6 地址。 当为 <code>ipv4first</code> 时，IPv4 地址位于 IPv6 地址之前。 当为 <code>ipv6first</code> 时，IPv6 地址位于 IPv4 地址之前。 <strong>默认:</strong> <code>verbatim</code> (不重新排序地址)。 默认值可以使用 <a href="/zh/nodejs/api/dns#dnssetdefaultresultorderorder"><code>dns.setDefaultResultOrder()</code></a> 或 <a href="/zh/nodejs/api/cli#dns-result-orderorder"><code>--dns-result-order</code></a> 配置。 新代码应使用 <code>{ order: &#39;verbatim&#39; }</code>。</li><li><code>verbatim</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" target="_blank" rel="noreferrer">&lt;boolean&gt;</a> 当为 <code>true</code> 时，<code>Promise</code> 会解析为 DNS 解析器返回顺序的 IPv4 和 IPv6 地址。 当为 <code>false</code> 时，IPv4 地址位于 IPv6 地址之前。 此选项将被弃用，改用 <code>order</code>。 如果两者都指定，则 <code>order</code> 具有更高的优先级。 新代码应仅使用 <code>order</code>。 <strong>默认:</strong> 当前为 <code>false</code> (地址已重新排序)，但预计在不久的将来会发生变化。 默认值可以使用 <a href="/zh/nodejs/api/dns#dnssetdefaultresultorderorder"><code>dns.setDefaultResultOrder()</code></a> 或 <a href="/zh/nodejs/api/cli#dns-result-orderorder"><code>--dns-result-order</code></a> 配置。</li></ul></li></ul><p>将主机名 (例如 <code>&#39;nodejs.org&#39;</code>) 解析为找到的第一个 A (IPv4) 或 AAAA (IPv6) 记录。 所有 <code>option</code> 属性都是可选的。 如果 <code>options</code> 是一个整数，那么它必须是 <code>4</code> 或 <code>6</code> – 如果未提供 <code>options</code>，则如果找到，则返回 IPv4 或 IPv6 地址，或两者都返回。</p><p>当 <code>all</code> 选项设置为 <code>true</code> 时，<code>Promise</code> 会解析为 <code>addresses</code>，它是一个具有属性 <code>address</code> 和 <code>family</code> 的对象数组。</p><p>出错时，<code>Promise</code> 会被拒绝，并返回一个 <a href="/zh/nodejs/api/errors#class-error"><code>Error</code></a> 对象，其中 <code>err.code</code> 是错误代码。 请记住，<code>err.code</code> 将设置为 <code>&#39;ENOTFOUND&#39;</code>，不仅当主机名不存在时，而且当查找因其他方式失败时，例如没有可用的文件描述符。</p><p><a href="/zh/nodejs/api/dns#dnspromiseslookuphostname-options"><code>dnsPromises.lookup()</code></a> 不一定与 DNS 协议有任何关系。 该实现使用操作系统工具，可以将名称与地址关联起来，反之亦然。 此实现可能对任何 Node.js 程序的行为产生微妙但重要的影响。 在使用 <code>dnsPromises.lookup()</code> 之前，请花一些时间查阅<a href="/zh/nodejs/api/dns#implementation-considerations">实现注意事项部分</a>。</p><p>用法示例：</p><div class="vp-code-group"><div class="tabs"><input type="radio" name="group-2224" id="tab-2225" checked><label data-title="ESM" for="tab-2225">ESM</label><input type="radio" name="group-2224" id="tab-2226"><label data-title="CJS" for="tab-2226">CJS</label></div><div class="blocks"><div class="language-js active line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> dns </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;node:dns&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> dnsPromises</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> dns.promises;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> options</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  family: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">6</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  hints: dns.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">ADDRCONFIG</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> dns.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">V4MAPPED</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> dnsPromises.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">lookup</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;example.org&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, options).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">then</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">result</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;address: %j family: IPv%s&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, result.address, result.family);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // address: &quot;2606:2800:21f:cb07:6820:80da:af6b:8b2c&quot; family: IPv6</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 当 options.all 为 true 时，结果将是一个数组。</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">options.all </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> dnsPromises.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">lookup</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;example.org&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, options).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">then</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">result</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;addresses: %j&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, result);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // addresses: [{&quot;address&quot;:&quot;2606:2800:21f:cb07:6820:80da:af6b:8b2c&quot;,&quot;family&quot;:6}]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> dns</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;node:dns&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> dnsPromises</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> dns.promises;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> options</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  family: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">6</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  hints: dns.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">ADDRCONFIG</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> dns.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">V4MAPPED</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">dnsPromises.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">lookup</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;example.org&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, options).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">then</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">result</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;address: %j family: IPv%s&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, result.address, result.family);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // address: &quot;2606:2800:21f:cb07:6820:80da:af6b:8b2c&quot; family: IPv6</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 当 options.all 为 true 时，结果将是一个数组。</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">options.all </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">dnsPromises.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">lookup</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;example.org&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, options).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">then</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">result</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;addresses: %j&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, result);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // addresses: [{&quot;address&quot;:&quot;2606:2800:21f:cb07:6820:80da:af6b:8b2c&quot;,&quot;family&quot;:6}]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div></div></div><h3 id="dnspromiseslookupserviceaddress-port" tabindex="-1"><code>dnsPromises.lookupService(address, port)</code> <a class="header-anchor" href="#dnspromiseslookupserviceaddress-port" aria-label="Permalink to “dnsPromises.lookupService(address, port)”">​</a></h3><p><strong>新增于: v10.6.0</strong></p><ul><li><code>address</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a></li><li><code>port</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Number_type" target="_blank" rel="noreferrer">&lt;number&gt;</a></li></ul><p>使用操作系统底层的 <code>getnameinfo</code> 实现，将给定的 <code>address</code> 和 <code>port</code> 解析为主机名和服务。</p><p>如果 <code>address</code> 不是有效的 IP 地址，则会抛出 <code>TypeError</code>。 <code>port</code> 将被强制转换为数字。 如果它不是合法的端口，则会抛出 <code>TypeError</code>。</p><p>如果发生错误，则 <code>Promise</code> 会被拒绝，并返回一个 <a href="/zh/nodejs/api/errors#class-error"><code>Error</code></a> 对象，其中 <code>err.code</code> 是错误代码。</p><div class="vp-code-group"><div class="tabs"><input type="radio" name="group-2255" id="tab-2256" checked><label data-title="ESM" for="tab-2256">ESM</label><input type="radio" name="group-2255" id="tab-2257"><label data-title="CJS" for="tab-2257">CJS</label></div><div class="blocks"><div class="language-js active line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> dnsPromises </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;node:dns/promises&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> result</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> dnsPromises.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">lookupService</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;127.0.0.1&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">22</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(result.hostname, result.service); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Prints: localhost ssh</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> dnsPromises</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> require</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;node:dns&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">).promises;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">dnsPromises.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">lookupService</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;127.0.0.1&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">22</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">then</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">((</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">result</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(result.hostname, result.service);</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // Prints: localhost ssh</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></div></div><h3 id="dnspromisesresolvehostname-rrtype" tabindex="-1"><code>dnsPromises.resolve(hostname[, rrtype])</code> <a class="header-anchor" href="#dnspromisesresolvehostname-rrtype" aria-label="Permalink to “dnsPromises.resolve(hostname[, rrtype])”">​</a></h3><p><strong>新增于: v10.6.0</strong></p><ul><li><code>hostname</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> 要解析的主机名。</li><li><code>rrtype</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> 资源记录类型。 <strong>默认:</strong> <code>&#39;A&#39;</code>。</li></ul><p>使用 DNS 协议将主机名（例如 <code>&#39;nodejs.org&#39;</code>）解析为资源记录数组。 成功时，<code>Promise</code> 将解析为一个资源记录数组。 单个结果的类型和结构根据 <code>rrtype</code> 而有所不同：</p><table tabindex="0"><thead><tr><th><code>rrtype</code></th><th><code>records</code> 包含</th><th>结果类型</th><th>简写方法</th></tr></thead><tbody><tr><td><code>&#39;A&#39;</code></td><td>IPv4 地址 (默认)</td><td><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a></td><td><a href="/zh/nodejs/api/dns#dnspromisesresolve4hostname-options"><code>dnsPromises.resolve4()</code></a></td></tr><tr><td><code>&#39;AAAA&#39;</code></td><td>IPv6 地址</td><td><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a></td><td><a href="/zh/nodejs/api/dns#dnspromisesresolve6hostname-options"><code>dnsPromises.resolve6()</code></a></td></tr><tr><td><code>&#39;ANY&#39;</code></td><td>任何记录</td><td><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noreferrer">&lt;Object&gt;</a></td><td><a href="/zh/nodejs/api/dns#dnspromisesresolveanyhostname"><code>dnsPromises.resolveAny()</code></a></td></tr><tr><td><code>&#39;CAA&#39;</code></td><td>CA 授权记录</td><td><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noreferrer">&lt;Object&gt;</a></td><td><a href="/zh/nodejs/api/dns#dnspromisesresolvecaahostname"><code>dnsPromises.resolveCaa()</code></a></td></tr><tr><td><code>&#39;CNAME&#39;</code></td><td>规范名称记录</td><td><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a></td><td><a href="/zh/nodejs/api/dns#dnspromisesresolvecnamehostname"><code>dnsPromises.resolveCname()</code></a></td></tr><tr><td><code>&#39;MX&#39;</code></td><td>邮件交换记录</td><td><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noreferrer">&lt;Object&gt;</a></td><td><a href="/zh/nodejs/api/dns#dnspromisesresolvemxhostname"><code>dnsPromises.resolveMx()</code></a></td></tr><tr><td><code>&#39;NAPTR&#39;</code></td><td>名称权威指针记录</td><td><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noreferrer">&lt;Object&gt;</a></td><td><a href="/zh/nodejs/api/dns#dnspromisesresolvenaptrhostname"><code>dnsPromises.resolveNaptr()</code></a></td></tr><tr><td><code>&#39;NS&#39;</code></td><td>名称服务器记录</td><td><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a></td><td><a href="/zh/nodejs/api/dns#dnspromisesresolvenshostname"><code>dnsPromises.resolveNs()</code></a></td></tr><tr><td><code>&#39;PTR&#39;</code></td><td>指针记录</td><td><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a></td><td><a href="/zh/nodejs/api/dns#dnspromisesresolveptrhostname"><code>dnsPromises.resolvePtr()</code></a></td></tr><tr><td><code>&#39;SOA&#39;</code></td><td>授权起始记录</td><td><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noreferrer">&lt;Object&gt;</a></td><td><a href="/zh/nodejs/api/dns#dnspromisesresolvesoahostname"><code>dnsPromises.resolveSoa()</code></a></td></tr><tr><td><code>&#39;SRV&#39;</code></td><td>服务记录</td><td><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noreferrer">&lt;Object&gt;</a></td><td><a href="/zh/nodejs/api/dns#dnspromisesresolvesrvhostname"><code>dnsPromises.resolveSrv()</code></a></td></tr><tr><td><code>&#39;TXT&#39;</code></td><td>文本记录</td><td><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string[]&gt;</a></td><td><a href="/zh/nodejs/api/dns#dnspromisesresolvetxthostname"><code>dnsPromises.resolveTxt()</code></a></td></tr></tbody></table><p>如果发生错误，则 <code>Promise</code> 会被拒绝，并返回一个 <a href="/zh/nodejs/api/errors#class-error"><code>Error</code></a> 对象，其中 <code>err.code</code> 是 <a href="/zh/nodejs/api/dns#error-codes">DNS 错误代码</a> 之一。</p><h3 id="dnspromisesresolve4hostname-options" tabindex="-1"><code>dnsPromises.resolve4(hostname[, options])</code> <a class="header-anchor" href="#dnspromisesresolve4hostname-options" aria-label="Permalink to “dnsPromises.resolve4(hostname[, options])”">​</a></h3><p><strong>加入于: v10.6.0</strong></p><ul><li><code>hostname</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> 要解析的主机名。</li><li><code>options</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noreferrer">&lt;Object&gt;</a><ul><li><code>ttl</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" target="_blank" rel="noreferrer">&lt;boolean&gt;</a> 检索每个记录的生存时间 (TTL) 值。 当 <code>true</code> 时，<code>Promise</code> 会解析为一个 <code>{ address: &#39;1.2.3.4&#39;, ttl: 60 }</code> 对象数组，而不是一个字符串数组，TTL 以秒为单位表示。</li></ul></li></ul><p>使用 DNS 协议解析 <code>hostname</code> 的 IPv4 地址（<code>A</code> 记录）。 成功后，<code>Promise</code> 会解析为一个 IPv4 地址数组（例如 <code>[&#39;74.125.79.104&#39;, &#39;74.125.79.105&#39;, &#39;74.125.79.106&#39;]</code>）。</p><h3 id="dnspromisesresolve6hostname-options" tabindex="-1"><code>dnsPromises.resolve6(hostname[, options])</code> <a class="header-anchor" href="#dnspromisesresolve6hostname-options" aria-label="Permalink to “dnsPromises.resolve6(hostname[, options])”">​</a></h3><p><strong>加入于: v10.6.0</strong></p><ul><li><code>hostname</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> 要解析的主机名。</li><li><code>options</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_blank" rel="noreferrer">&lt;Object&gt;</a><ul><li><code>ttl</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#Boolean_type" target="_blank" rel="noreferrer">&lt;boolean&gt;</a> 检索每个记录的生存时间 (TTL) 值。 当 <code>true</code> 时，<code>Promise</code> 会解析为一个 <code>{ address: &#39;0:1:2:3:4:5:6:7&#39;, ttl: 60 }</code> 对象数组，而不是一个字符串数组，TTL 以秒为单位表示。</li></ul></li></ul><p>使用 DNS 协议解析 <code>hostname</code> 的 IPv6 地址（<code>AAAA</code> 记录）。 成功后，<code>Promise</code> 会解析为一个 IPv6 地址数组。</p><h3 id="dnspromisesresolveanyhostname" tabindex="-1"><code>dnsPromises.resolveAny(hostname)</code> <a class="header-anchor" href="#dnspromisesresolveanyhostname" aria-label="Permalink to “dnsPromises.resolveAny(hostname)”">​</a></h3><p><strong>加入于: v10.6.0</strong></p><ul><li><code>hostname</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a></li></ul><p>使用 DNS 协议解析所有记录（也称为 <code>ANY</code> 或 <code>*</code> 查询）。 成功后，<code>Promise</code> 会解析为一个包含各种类型记录的数组。 每个对象都有一个 <code>type</code> 属性，指示当前记录的类型。 并且根据 <code>type</code>，对象上会出现其他属性：</p><table tabindex="0"><thead><tr><th>类型</th><th>属性</th></tr></thead><tbody><tr><td><code>&#39;A&#39;</code></td><td><code>address</code> / <code>ttl</code></td></tr><tr><td><code>&#39;AAAA&#39;</code></td><td><code>address</code> / <code>ttl</code></td></tr><tr><td><code>&#39;CNAME&#39;</code></td><td><code>value</code></td></tr><tr><td><code>&#39;MX&#39;</code></td><td>参考 <a href="/zh/nodejs/api/dns#dnspromisesresolvemxhostname"><code>dnsPromises.resolveMx()</code></a></td></tr><tr><td><code>&#39;NAPTR&#39;</code></td><td>参考 <a href="/zh/nodejs/api/dns#dnspromisesresolvenaptrhostname"><code>dnsPromises.resolveNaptr()</code></a></td></tr><tr><td><code>&#39;NS&#39;</code></td><td><code>value</code></td></tr><tr><td><code>&#39;PTR&#39;</code></td><td><code>value</code></td></tr><tr><td><code>&#39;SOA&#39;</code></td><td>参考 <a href="/zh/nodejs/api/dns#dnspromisesresolvesoahostname"><code>dnsPromises.resolveSoa()</code></a></td></tr><tr><td><code>&#39;SRV&#39;</code></td><td>参考 <a href="/zh/nodejs/api/dns#dnspromisesresolvesrvhostname"><code>dnsPromises.resolveSrv()</code></a></td></tr><tr><td><code>&#39;TXT&#39;</code></td><td>这种类型的记录包含一个名为 <code>entries</code> 的数组属性，该属性指向 <a href="/zh/nodejs/api/dns#dnspromisesresolvetxthostname"><code>dnsPromises.resolveTxt()</code></a>，例如 <code>{ entries: [&#39;...&#39;], type: &#39;TXT&#39; }</code></td></tr><tr><td>这是一个结果对象的示例：</td><td></td></tr></tbody></table><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[ { type: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;A&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, address: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;127.0.0.1&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, ttl: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">299</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  { type: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;CNAME&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, value: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;example.com&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  { type: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;MX&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, exchange: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;alt4.aspmx.l.example.com&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, priority: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">50</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  { type: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;NS&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, value: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;ns1.example.com&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  { type: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;TXT&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, entries: [ </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;v=spf1 include:_spf.example.com ~all&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ] },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  { type: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;SOA&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    nsname: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;ns1.example.com&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    hostmaster: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;admin.example.com&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    serial: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">156696742</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    refresh: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">900</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    retry: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">900</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    expire: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1800</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    minttl: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">60</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> } ]</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h3 id="dnspromisesresolvecaahostname" tabindex="-1"><code>dnsPromises.resolveCaa(hostname)</code> <a class="header-anchor" href="#dnspromisesresolvecaahostname" aria-label="Permalink to “dnsPromises.resolveCaa(hostname)”">​</a></h3><p><strong>加入于: v15.0.0, v14.17.0</strong></p><ul><li><code>hostname</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a></li></ul><p>使用 DNS 协议解析 <code>hostname</code> 的 <code>CAA</code> 记录。 成功时，<code>Promise</code> 会被解析为一个对象数组，其中包含可用于 <code>hostname</code> 的可用证书颁发机构授权记录（例如 <code>[{critical: 0, iodef: &#39;mailto:pki@example.com&#39;},{critical: 128, issue: &#39;pki.example.com&#39;}]</code>）。</p><h3 id="dnspromisesresolvecnamehostname" tabindex="-1"><code>dnsPromises.resolveCname(hostname)</code> <a class="header-anchor" href="#dnspromisesresolvecnamehostname" aria-label="Permalink to “dnsPromises.resolveCname(hostname)”">​</a></h3><p><strong>加入于: v10.6.0</strong></p><ul><li><code>hostname</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a></li></ul><p>使用 DNS 协议解析 <code>hostname</code> 的 <code>CNAME</code> 记录。 成功时，<code>Promise</code> 会被解析为一个可用于 <code>hostname</code> 的规范名称记录数组（例如 <code>[&#39;bar.example.com&#39;]</code>）。</p><h3 id="dnspromisesresolvemxhostname" tabindex="-1"><code>dnsPromises.resolveMx(hostname)</code> <a class="header-anchor" href="#dnspromisesresolvemxhostname" aria-label="Permalink to “dnsPromises.resolveMx(hostname)”">​</a></h3><p><strong>加入于: v10.6.0</strong></p><ul><li><code>hostname</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a></li></ul><p>使用 DNS 协议解析 <code>hostname</code> 的邮件交换记录（<code>MX</code> 记录）。 成功时，<code>Promise</code> 会被解析为一个对象数组，其中包含 <code>priority</code> 和 <code>exchange</code> 属性（例如 <code>[{priority: 10, exchange: &#39;mx.example.com&#39;}, ...]</code>）。</p><h3 id="dnspromisesresolvenaptrhostname" tabindex="-1"><code>dnsPromises.resolveNaptr(hostname)</code> <a class="header-anchor" href="#dnspromisesresolvenaptrhostname" aria-label="Permalink to “dnsPromises.resolveNaptr(hostname)”">​</a></h3><p><strong>加入于: v10.6.0</strong></p><ul><li><code>hostname</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a></li></ul><p>使用 DNS 协议解析 <code>hostname</code> 的基于正则表达式的记录（<code>NAPTR</code> 记录）。 成功时，<code>Promise</code> 会被解析为一个具有以下属性的对象数组：</p><ul><li><code>flags</code></li><li><code>service</code></li><li><code>regexp</code></li><li><code>replacement</code></li><li><code>order</code></li><li><code>preference</code></li></ul><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  flags</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;s&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  service</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;SIP+D2U&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  regexp</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  replacement</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;_sip._udp.example.com&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  order</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">30</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  preference</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">100</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="dnspromisesresolvenshostname" tabindex="-1"><code>dnsPromises.resolveNs(hostname)</code> <a class="header-anchor" href="#dnspromisesresolvenshostname" aria-label="Permalink to “dnsPromises.resolveNs(hostname)”">​</a></h3><p><strong>加入于: v10.6.0</strong></p><ul><li><code>hostname</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a></li></ul><p>使用 DNS 协议解析 <code>hostname</code> 的域名服务器记录（<code>NS</code> 记录）。 成功时，<code>Promise</code> 会被解析为一个可用于 <code>hostname</code> 的域名服务器记录数组（例如 <code>[&#39;ns1.example.com&#39;, &#39;ns2.example.com&#39;]</code>）。</p><h3 id="dnspromisesresolveptrhostname" tabindex="-1"><code>dnsPromises.resolvePtr(hostname)</code> <a class="header-anchor" href="#dnspromisesresolveptrhostname" aria-label="Permalink to “dnsPromises.resolvePtr(hostname)”">​</a></h3><p><strong>加入于: v10.6.0</strong></p><ul><li><code>hostname</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a></li></ul><p>使用 DNS 协议解析 <code>hostname</code> 的指针记录（<code>PTR</code> 记录）。 成功时，<code>Promise</code> 将解析为一个包含回复记录的字符串数组。</p><h3 id="dnspromisesresolvesoahostname" tabindex="-1"><code>dnsPromises.resolveSoa(hostname)</code> <a class="header-anchor" href="#dnspromisesresolvesoahostname" aria-label="Permalink to “dnsPromises.resolveSoa(hostname)”">​</a></h3><p><strong>加入于: v10.6.0</strong></p><ul><li><code>hostname</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a></li></ul><p>使用 DNS 协议解析 <code>hostname</code> 的起始授权记录（<code>SOA</code> 记录）。 成功时，<code>Promise</code> 将解析为一个具有以下属性的对象：</p><ul><li><code>nsname</code></li><li><code>hostmaster</code></li><li><code>serial</code></li><li><code>refresh</code></li><li><code>retry</code></li><li><code>expire</code></li><li><code>minttl</code></li></ul><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  nsname</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;ns.example.com&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  hostmaster</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;root.example.com&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  serial</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2013101809</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  refresh</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">10000</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  retry</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2400</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  expire</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">604800</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  minttl</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">3600</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="dnspromisesresolvesrvhostname" tabindex="-1"><code>dnsPromises.resolveSrv(hostname)</code> <a class="header-anchor" href="#dnspromisesresolvesrvhostname" aria-label="Permalink to “dnsPromises.resolveSrv(hostname)”">​</a></h3><p><strong>加入于: v10.6.0</strong></p><ul><li><code>hostname</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a></li></ul><p>使用 DNS 协议解析 <code>hostname</code> 的服务记录（<code>SRV</code> 记录）。 成功时，<code>Promise</code> 将解析为一个具有以下属性的对象数组：</p><ul><li><code>priority</code></li><li><code>weight</code></li><li><code>port</code></li><li><code>name</code></li></ul><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  priority</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">10</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  weight</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">5</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  port</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">21223</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;service.example.com&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="dnspromisesresolvetxthostname" tabindex="-1"><code>dnsPromises.resolveTxt(hostname)</code> <a class="header-anchor" href="#dnspromisesresolvetxthostname" aria-label="Permalink to “dnsPromises.resolveTxt(hostname)”">​</a></h3><p><strong>加入于: v10.6.0</strong></p><ul><li><code>hostname</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a></li></ul><p>使用 DNS 协议解析 <code>hostname</code> 的文本查询（<code>TXT</code> 记录）。 成功时，<code>Promise</code> 将解析为一个 <code>hostname</code> 可用的文本记录的二维数组（例如 <code>[ [&#39;v=spf1 ip4:0.0.0.0 &#39;, &#39;~all&#39; ] ]</code>）。 每个子数组包含一个记录的 TXT 块。 根据用例，这些可以连接在一起或单独处理。</p><h3 id="dnspromisesreverseip" tabindex="-1"><code>dnsPromises.reverse(ip)</code> <a class="header-anchor" href="#dnspromisesreverseip" aria-label="Permalink to “dnsPromises.reverse(ip)”">​</a></h3><p><strong>新增于: v10.6.0</strong></p><ul><li><code>ip</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a></li></ul><p>执行反向 DNS 查询，将 IPv4 或 IPv6 地址解析为主机名数组。</p><p>如果发生错误，则 <code>Promise</code> 会被一个 <a href="/zh/nodejs/api/errors#class-error"><code>Error</code></a> 对象拒绝，其中 <code>err.code</code> 是 <a href="/zh/nodejs/api/dns#error-codes">DNS 错误代码</a> 之一。</p><h3 id="dnspromisessetdefaultresultorderorder" tabindex="-1"><code>dnsPromises.setDefaultResultOrder(order)</code> <a class="header-anchor" href="#dnspromisessetdefaultresultorderorder" aria-label="Permalink to “dnsPromises.setDefaultResultOrder(order)”">​</a></h3><div class="info custom-block"><p class="custom-block-title">[历史记录]</p><table tabindex="0"><thead><tr><th>版本</th><th>变更</th></tr></thead><tbody><tr><td>v22.1.0, v20.13.0</td><td>现在支持 <code>ipv6first</code> 值。</td></tr><tr><td>v17.0.0</td><td>更改默认值为 <code>verbatim</code>。</td></tr><tr><td>v16.4.0, v14.18.0</td><td>新增于: v16.4.0, v14.18.0</td></tr></tbody></table></div><ul><li><code>order</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string&gt;</a> 必须是 <code>&#39;ipv4first&#39;</code>、<code>&#39;ipv6first&#39;</code> 或 <code>&#39;verbatim&#39;</code>。</li></ul><p>设置 <a href="/zh/nodejs/api/dns#dnslookuphostname-options-callback"><code>dns.lookup()</code></a> 和 <a href="/zh/nodejs/api/dns#dnspromiseslookuphostname-options"><code>dnsPromises.lookup()</code></a> 中 <code>order</code> 的默认值。 该值可以是：</p><ul><li><code>ipv4first</code>: 设置默认 <code>order</code> 为 <code>ipv4first</code>。</li><li><code>ipv6first</code>: 设置默认 <code>order</code> 为 <code>ipv6first</code>。</li><li><code>verbatim</code>: 设置默认 <code>order</code> 为 <code>verbatim</code>。</li></ul><p>默认值为 <code>verbatim</code>，并且 <a href="/zh/nodejs/api/dns#dnspromisessetdefaultresultorderorder"><code>dnsPromises.setDefaultResultOrder()</code></a> 的优先级高于 <a href="/zh/nodejs/api/cli#dns-result-orderorder"><code>--dns-result-order</code></a>。 当使用 <a href="/zh/nodejs/api/worker_threads">工作线程</a> 时，主线程中的 <a href="/zh/nodejs/api/dns#dnspromisessetdefaultresultorderorder"><code>dnsPromises.setDefaultResultOrder()</code></a> 不会影响工作线程中的默认 dns 顺序。</p><h3 id="dnspromisesgetdefaultresultorder" tabindex="-1"><code>dnsPromises.getDefaultResultOrder()</code> <a class="header-anchor" href="#dnspromisesgetdefaultresultorder" aria-label="Permalink to “dnsPromises.getDefaultResultOrder()”">​</a></h3><p><strong>新增于: v20.1.0, v18.17.0</strong></p><p>获取 <code>dnsOrder</code> 的值。</p><h3 id="dnspromisessetserversservers" tabindex="-1"><code>dnsPromises.setServers(servers)</code> <a class="header-anchor" href="#dnspromisessetserversservers" aria-label="Permalink to “dnsPromises.setServers(servers)”">​</a></h3><p><strong>新增于: v10.6.0</strong></p><ul><li><code>servers</code> <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#String_type" target="_blank" rel="noreferrer">&lt;string[]&gt;</a> <a href="https://tools.ietf.org/html/rfc5952#section-6" target="_blank" rel="noreferrer">RFC 5952</a> 格式的地址数组</li></ul><p>设置在执行 DNS 解析时要使用的服务器的 IP 地址和端口。 <code>servers</code> 参数是一个 <a href="https://tools.ietf.org/html/rfc5952#section-6" target="_blank" rel="noreferrer">RFC 5952</a> 格式的地址数组。 如果端口是 IANA 默认 DNS 端口 (53)，则可以省略它。</p><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">dnsPromises.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setServers</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">([</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  &#39;8.8.8.8&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  &#39;[2001:4860:4860::8888]&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  &#39;8.8.8.8:1053&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  &#39;[2001:4860:4860::8888]:1053&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>如果提供了无效地址，将抛出错误。</p><p>在 DNS 查询正在进行时，不得调用 <code>dnsPromises.setServers()</code> 方法。</p><p>此方法的工作方式与 <a href="https://man7.org/linux/man-pages/man5/resolv.conf.5" target="_blank" rel="noreferrer">resolve.conf</a> 非常相似。 也就是说，如果尝试使用提供的第一个服务器解析导致 <code>NOTFOUND</code> 错误，则 <code>resolve()</code> 方法将<em>不会</em>尝试使用提供的后续服务器进行解析。 仅当较早的 DNS 服务器超时或导致其他错误时，才会使用备用 DNS 服务器。</p><h2 id="error-codes" tabindex="-1">错误代码 <a class="header-anchor" href="#error-codes" aria-label="Permalink to “错误代码”">​</a></h2><p>每个 DNS 查询都可能返回以下错误代码之一：</p><ul><li><code>dns.NODATA</code>: DNS 服务器返回了一个没有数据的应答。</li><li><code>dns.FORMERR</code>: DNS 服务器声称查询格式错误。</li><li><code>dns.SERVFAIL</code>: DNS 服务器返回了一般性故障。</li><li><code>dns.NOTFOUND</code>: 未找到域名。</li><li><code>dns.NOTIMP</code>: DNS 服务器未实现请求的操作。</li><li><code>dns.REFUSED</code>: DNS 服务器拒绝查询。</li><li><code>dns.BADQUERY</code>: DNS 查询格式错误。</li><li><code>dns.BADNAME</code>: 主机名格式错误。</li><li><code>dns.BADFAMILY</code>: 不支持的地址族。</li><li><code>dns.BADRESP</code>: DNS 回复格式错误。</li><li><code>dns.CONNREFUSED</code>: 无法连接 DNS 服务器。</li><li><code>dns.TIMEOUT</code>: 联系 DNS 服务器时超时。</li><li><code>dns.EOF</code>: 文件结束。</li><li><code>dns.FILE</code>: 读取文件时出错。</li><li><code>dns.NOMEM</code>: 内存不足。</li><li><code>dns.DESTRUCTION</code>: 通道正在被销毁。</li><li><code>dns.BADSTR</code>: 字符串格式错误。</li><li><code>dns.BADFLAGS</code>: 指定了非法标志。</li><li><code>dns.NONAME</code>: 给定的主机名不是数字。</li><li><code>dns.BADHINTS</code>: 指定了非法 hints 标志。</li><li><code>dns.NOTINITIALIZED</code>: c-ares 库尚未初始化。</li><li><code>dns.LOADIPHLPAPI</code>: 加载 <code>iphlpapi.dll</code> 时出错。</li><li><code>dns.ADDRGETNETWORKPARAMS</code>: 无法找到 <code>GetNetworkParams</code> 函数。</li><li><code>dns.CANCELLED</code>: DNS 查询已取消。</li></ul><p><code>dnsPromises</code> API 也导出了上述错误代码，例如 <code>dnsPromises.NODATA</code>。</p><h2 id="implementation-considerations" tabindex="-1">实现注意事项 <a class="header-anchor" href="#implementation-considerations" aria-label="Permalink to “实现注意事项”">​</a></h2><p>尽管 <a href="/zh/nodejs/api/dns#dnslookuphostname-options-callback"><code>dns.lookup()</code></a> 和各种 <code>dns.resolve*()/dns.reverse()</code> 函数的目标相同，即将网络名称与网络地址关联（或反之），但它们的行为却大相径庭。 这些差异可能会对 Node.js 程序的行为产生微妙但重要的影响。</p><h3 id="dnslookup" tabindex="-1"><code>dns.lookup()</code> <a class="header-anchor" href="#dnslookup" aria-label="Permalink to “dns.lookup()”">​</a></h3><p>在底层，<a href="/zh/nodejs/api/dns#dnslookuphostname-options-callback"><code>dns.lookup()</code></a> 使用与大多数其他程序相同的操作系统设施。 例如，<a href="/zh/nodejs/api/dns#dnslookuphostname-options-callback"><code>dns.lookup()</code></a> 几乎总是以与 <code>ping</code> 命令相同的方式解析给定的名称。 在大多数类 POSIX 操作系统上，可以通过更改 <a href="http://man7.org/linux/man-pages/man5/nsswitch.conf.5" target="_blank" rel="noreferrer"><code>nsswitch.conf(5)</code></a> 和/或 <a href="http://man7.org/linux/man-pages/man5/resolv.conf.5" target="_blank" rel="noreferrer"><code>resolv.conf(5)</code></a> 中的设置来修改 <a href="/zh/nodejs/api/dns#dnslookuphostname-options-callback"><code>dns.lookup()</code></a> 函数的行为，但更改这些文件将更改运行在同一操作系统上的所有其他程序的行为。</p><p>虽然从 JavaScript 的角度来看，调用 <code>dns.lookup()</code> 将是异步的，但它被实现为对 <a href="http://man7.org/linux/man-pages/man3/getaddrinfo.3" target="_blank" rel="noreferrer"><code>getaddrinfo(3)</code></a> 的同步调用，该调用在 libuv 的线程池上运行。 这可能会对某些应用程序产生令人惊讶的负面性能影响，请参阅 <a href="/zh/nodejs/api/cli#uv-threadpool-sizesize"><code>UV_THREADPOOL_SIZE</code></a> 文档以获取更多信息。</p><p>各种网络 API 将在内部调用 <code>dns.lookup()</code> 以解析主机名。 如果这是一个问题，请考虑使用 <code>dns.resolve()</code> 将主机名解析为地址，并使用该地址而不是主机名。 此外，某些网络 API（例如 <a href="/zh/nodejs/api/net#socketconnectoptions-connectlistener"><code>socket.connect()</code></a> 和 <a href="/zh/nodejs/api/dgram#dgramcreatesocketoptions-callback"><code>dgram.createSocket()</code></a>）允许替换默认解析器 <code>dns.lookup()</code>。</p><h3 id="dnsresolve-dnsresolve*-and-dnsreverse" tabindex="-1"><code>dns.resolve()</code>, <code>dns.resolve*()</code>, 和 <code>dns.reverse()</code> <a class="header-anchor" href="#dnsresolve-dnsresolve*-and-dnsreverse" aria-label="Permalink to “dns.resolve(), dns.resolve*(), 和 dns.reverse()”">​</a></h3><p>这些函数的实现方式与 <a href="/zh/nodejs/api/dns#dnslookuphostname-options-callback"><code>dns.lookup()</code></a> 截然不同。它们不使用 <a href="http://man7.org/linux/man-pages/man3/getaddrinfo.3" target="_blank" rel="noreferrer"><code>getaddrinfo(3)</code></a>，并且<em>总是</em>在网络上执行 DNS 查询。此网络通信始终以异步方式完成，并且不使用 libuv 的线程池。</p><p>因此，这些函数不会像 <a href="/zh/nodejs/api/dns#dnslookuphostname-options-callback"><code>dns.lookup()</code></a> 那样对 libuv 线程池上发生的其他处理产生相同的负面影响。</p><p>它们不使用与 <a href="/zh/nodejs/api/dns#dnslookuphostname-options-callback"><code>dns.lookup()</code></a> 相同的一组配置文件。例如，它们不使用来自 <code>/etc/hosts</code> 的配置。</p></div></div></main><footer class="VPDocFooter" data-v-d668f7cc data-v-1bcd8184><!--[--><!--]--><div class="edit-info" data-v-1bcd8184><!----><div class="last-updated" data-v-1bcd8184><p class="VPLastUpdated" data-v-1bcd8184 data-v-1bb0c8a8>最后更新于: <time datetime="2025-06-09T10:21:38.000Z" data-v-1bb0c8a8></time></p></div></div><nav class="prev-next" aria-labelledby="doc-footer-aria-label" data-v-1bcd8184><span class="visually-hidden" id="doc-footer-aria-label" data-v-1bcd8184>Pager</span><div class="pager" data-v-1bcd8184><a class="VPLink link pager-link prev" href="/zh/nodejs/api/dgram" data-v-1bcd8184><!--[--><span class="desc" data-v-1bcd8184>上一页</span><span class="title" data-v-1bcd8184>UDP/数据报套接字</span><!--]--></a></div><div class="pager" data-v-1bcd8184><a class="VPLink link pager-link next" href="/zh/nodejs/api/tty" data-v-1bcd8184><!--[--><span class="desc" data-v-1bcd8184>下一页</span><span class="title" data-v-1bcd8184>TTY</span><!--]--></a></div></nav></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><footer class="VPFooter has-sidebar" data-v-4539713c data-v-5b9946f5><div class="container" data-v-5b9946f5><p class="message" data-v-5b9946f5><a href="https://idoc.dev/zh/privacy">隐私协议</a></p><p class="copyright" data-v-5b9946f5>版权所有 © 2024-present <a href="https://idoc.dev/zh/">iDoc.dev</a></p></div></footer><!--[--><!--]--></div></div>
    
    
  </body>
</html>