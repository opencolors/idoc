<!DOCTYPE html>
<html lang="ru" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Лучшие практики работы с разными файловыми системами в Node.js | API &amp; Руководства &amp; Центр документации для разработчиков</title>
    <meta name="description" content="Узнайте, как работать с разными файловыми системами в Node.js, включая чувствительность к регистру, сохранение формы Юникода и разрешение временных меток.">
    <meta name="generator" content="VitePress v2.0.0-alpha.5">
    <link rel="preload stylesheet" href="/assets/style.BOW9Aqd_.css" as="style">
    <link rel="preload stylesheet" href="/vp-icons.css" as="style">
    <script type="module" src="/assets/chunks/metadata.f006ef31.js"></script>
    <script type="module" src="/assets/app.BOiumQCo.js"></script>
    <link rel="modulepreload" href="/assets/chunks/plugin-vue_export-helper.Bts1mPc7.js">
    <link rel="modulepreload" href="/assets/chunks/translation.CRvAmi0k.js">
    <link rel="modulepreload" href="/assets/chunks/VPLocalSearchBox.CpAM03QS.js">
    <link rel="modulepreload" href="/assets/ru_nodejs_guide_how-to-work-with-different-filesystems.md.B0e-bQ4F.lean.js">
    <link rel="icon" type="image/svg+xml" href="/logo.svg">
    <link rel="icon" type="image/png" href="/logo.png">
    <link rel="shortcut icon" href="/favicon.ico">
    <meta name="theme-color" content="#5f67ee">
    <meta property="og:type" content="website">
    <meta property="og:title" content="iDoc | API &amp; Guide for Developers">
    <meta property="og:site_name" content="iDoc">
    <meta property="og:image" content="https://idoc.dev/logo.svg">
    <meta property="og:url" content="https://idoc.dev/ru/nodejs/guide/how-to-work-with-different-filesystems">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="idoc.dev">
    <meta name="twitter:image" content="https://idoc.dev/logo.svg">
    <meta name="twitter:title" content="Лучшие практики работы с разными файловыми системами в Node.js | Node.js - iDoc.dev">
    <meta name="twitter:creator" content="neo@idoc.dev">
    <meta name="twitter:url" content="https://node.idoc.dev/">
    <meta name="twitter:description" content="Узнайте, как работать с разными файловыми системами в Node.js, включая чувствительность к регистру, сохранение формы Юникода и разрешение временных меток.">
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-X0C67TVVXR"></script>
    <script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-X0C67TVVXR");</script>
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3961359407117622" crossorigin="anonymous"></script>
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
    <meta name="og:title" content="Лучшие практики работы с разными файловыми системами в Node.js | Node.js - iDoc.dev">
    <meta name="og:description" content="Узнайте, как работать с разными файловыми системами в Node.js, включая чувствительность к регистру, сохранение формы Юникода и разрешение временных меток.">
    <link rel="canonical" href="https://idoc.dev/ru/nodejs/guide/how-to-work-with-different-filesystems">
    <link rel="canonical" href="https://idoc.dev/ru/nodejs/guide/how-to-work-with-different-filesystems">
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-4539713c><!--[--><!--]--><!--[--><span tabindex="-1" data-v-fcbfc0e0></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-fcbfc0e0>Skip to content</a><!--]--><!----><header class="VPNav" data-v-4539713c data-v-7ad780c2><div class="VPNavBar" data-v-7ad780c2 data-v-cb5e22fa><div class="wrapper" data-v-cb5e22fa><div class="container" data-v-cb5e22fa><div class="title" data-v-cb5e22fa><div class="VPNavBarTitle has-sidebar" data-v-cb5e22fa data-v-d4488dd0><a class="title" href="/ru/" data-v-d4488dd0><!--[--><!--]--><!--[--><img class="VPImage logo" src="/logo.svg" width="24" height="24" alt="iDoc.dev" data-v-ab19afbb><!--]--><span data-v-d4488dd0>iDoc</span><!--[--><!--]--></a></div></div><div class="content" data-v-cb5e22fa><div class="content-body" data-v-cb5e22fa><!--[--><!--]--><div class="VPNavBarSearch search" data-v-cb5e22fa><!--[--><!----><div id="local-search"><button type="button" class="DocSearch DocSearch-Button" aria-label="Искать в документах"><span class="DocSearch-Button-Container"><span class="vp-icon DocSearch-Search-Icon"></span><span class="DocSearch-Button-Placeholder">Искать в документах</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"></kbd><kbd class="DocSearch-Button-Key">K</kbd></span></button></div><!--]--></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-cb5e22fa data-v-020be4db><span id="main-nav-aria-label" class="visually-hidden" data-v-020be4db> Main Navigation </span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/ru/nodejs/api/synopsis" tabindex="0" data-v-020be4db data-v-815115f5><!--[--><span data-v-815115f5>API Справочник</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink active" href="/ru/nodejs/guide/what-is-nodejs" tabindex="0" data-v-020be4db data-v-815115f5><!--[--><span data-v-815115f5>Руководство</span><!--]--></a><!--]--><!--]--></nav><div class="VPFlyout VPNavBarTranslations translations" data-v-cb5e22fa data-v-acee064b data-v-9bb987dd><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="Языки" data-v-9bb987dd><span class="text" data-v-9bb987dd><span class="vpi-languages option-icon" data-v-9bb987dd></span><!----><span class="vpi-chevron-down text-icon" data-v-9bb987dd></span></span></button><div class="menu" data-v-9bb987dd><div class="VPMenu" data-v-9bb987dd data-v-2f78439e><!----><!--[--><!--[--><div class="items" data-v-acee064b><p class="title" data-v-acee064b>Русский</p><!--[--><div class="VPMenuLink" data-v-acee064b data-v-7eeeb2dc><a class="VPLink link" href="/nodejs/guide/how-to-work-with-different-filesystems" data-v-7eeeb2dc><!--[--><span data-v-7eeeb2dc>English</span><!--]--></a></div><div class="VPMenuLink" data-v-acee064b data-v-7eeeb2dc><a class="VPLink link" href="/zh/nodejs/guide/how-to-work-with-different-filesystems" data-v-7eeeb2dc><!--[--><span data-v-7eeeb2dc>简体中文</span><!--]--></a></div><div class="VPMenuLink" data-v-acee064b data-v-7eeeb2dc><a class="VPLink link" href="/es/nodejs/guide/how-to-work-with-different-filesystems" data-v-7eeeb2dc><!--[--><span data-v-7eeeb2dc>Español</span><!--]--></a></div><div class="VPMenuLink" data-v-acee064b data-v-7eeeb2dc><a class="VPLink link" href="/fr/nodejs/guide/how-to-work-with-different-filesystems" data-v-7eeeb2dc><!--[--><span data-v-7eeeb2dc>Français</span><!--]--></a></div><div class="VPMenuLink" data-v-acee064b data-v-7eeeb2dc><a class="VPLink link" href="/pt/nodejs/guide/how-to-work-with-different-filesystems" data-v-7eeeb2dc><!--[--><span data-v-7eeeb2dc>Português</span><!--]--></a></div><div class="VPMenuLink" data-v-acee064b data-v-7eeeb2dc><a class="VPLink link" href="/de/nodejs/guide/how-to-work-with-different-filesystems" data-v-7eeeb2dc><!--[--><span data-v-7eeeb2dc>Deutsch</span><!--]--></a></div><div class="VPMenuLink" data-v-acee064b data-v-7eeeb2dc><a class="VPLink link" href="/it/nodejs/guide/how-to-work-with-different-filesystems" data-v-7eeeb2dc><!--[--><span data-v-7eeeb2dc>Italiano</span><!--]--></a></div><div class="VPMenuLink" data-v-acee064b data-v-7eeeb2dc><a class="VPLink link" href="/ja/nodejs/guide/how-to-work-with-different-filesystems" data-v-7eeeb2dc><!--[--><span data-v-7eeeb2dc>日本語</span><!--]--></a></div><div class="VPMenuLink" data-v-acee064b data-v-7eeeb2dc><a class="VPLink link" href="/ko/nodejs/guide/how-to-work-with-different-filesystems" data-v-7eeeb2dc><!--[--><span data-v-7eeeb2dc>한국어</span><!--]--></a></div><div class="VPMenuLink" data-v-acee064b data-v-7eeeb2dc><a class="VPLink link" href="/ar/nodejs/guide/how-to-work-with-different-filesystems" data-v-7eeeb2dc><!--[--><span data-v-7eeeb2dc>العربية</span><!--]--></a></div><!--]--></div><!--]--><!--]--></div></div></div><div class="VPNavBarAppearance appearance" data-v-cb5e22fa data-v-3f90c1a5><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-3f90c1a5 data-v-be9742d9 data-v-b4ccac88><span class="check" data-v-b4ccac88><span class="icon" data-v-b4ccac88><!--[--><span class="vpi-sun sun" data-v-be9742d9></span><span class="vpi-moon moon" data-v-be9742d9></span><!--]--></span></span></button></div><!----><div class="VPFlyout VPNavBarExtra extra" data-v-cb5e22fa data-v-f953d92f data-v-9bb987dd><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-9bb987dd><span class="vpi-more-horizontal icon" data-v-9bb987dd></span></button><div class="menu" data-v-9bb987dd><div class="VPMenu" data-v-9bb987dd data-v-2f78439e><!----><!--[--><!--[--><div class="group translations" data-v-f953d92f><p class="trans-title" data-v-f953d92f>Русский</p><!--[--><div class="VPMenuLink" data-v-f953d92f data-v-7eeeb2dc><a class="VPLink link" href="/nodejs/guide/how-to-work-with-different-filesystems" data-v-7eeeb2dc><!--[--><span data-v-7eeeb2dc>English</span><!--]--></a></div><div class="VPMenuLink" data-v-f953d92f data-v-7eeeb2dc><a class="VPLink link" href="/zh/nodejs/guide/how-to-work-with-different-filesystems" data-v-7eeeb2dc><!--[--><span data-v-7eeeb2dc>简体中文</span><!--]--></a></div><div class="VPMenuLink" data-v-f953d92f data-v-7eeeb2dc><a class="VPLink link" href="/es/nodejs/guide/how-to-work-with-different-filesystems" data-v-7eeeb2dc><!--[--><span data-v-7eeeb2dc>Español</span><!--]--></a></div><div class="VPMenuLink" data-v-f953d92f data-v-7eeeb2dc><a class="VPLink link" href="/fr/nodejs/guide/how-to-work-with-different-filesystems" data-v-7eeeb2dc><!--[--><span data-v-7eeeb2dc>Français</span><!--]--></a></div><div class="VPMenuLink" data-v-f953d92f data-v-7eeeb2dc><a class="VPLink link" href="/pt/nodejs/guide/how-to-work-with-different-filesystems" data-v-7eeeb2dc><!--[--><span data-v-7eeeb2dc>Português</span><!--]--></a></div><div class="VPMenuLink" data-v-f953d92f data-v-7eeeb2dc><a class="VPLink link" href="/de/nodejs/guide/how-to-work-with-different-filesystems" data-v-7eeeb2dc><!--[--><span data-v-7eeeb2dc>Deutsch</span><!--]--></a></div><div class="VPMenuLink" data-v-f953d92f data-v-7eeeb2dc><a class="VPLink link" href="/it/nodejs/guide/how-to-work-with-different-filesystems" data-v-7eeeb2dc><!--[--><span data-v-7eeeb2dc>Italiano</span><!--]--></a></div><div class="VPMenuLink" data-v-f953d92f data-v-7eeeb2dc><a class="VPLink link" href="/ja/nodejs/guide/how-to-work-with-different-filesystems" data-v-7eeeb2dc><!--[--><span data-v-7eeeb2dc>日本語</span><!--]--></a></div><div class="VPMenuLink" data-v-f953d92f data-v-7eeeb2dc><a class="VPLink link" href="/ko/nodejs/guide/how-to-work-with-different-filesystems" data-v-7eeeb2dc><!--[--><span data-v-7eeeb2dc>한국어</span><!--]--></a></div><div class="VPMenuLink" data-v-f953d92f data-v-7eeeb2dc><a class="VPLink link" href="/ar/nodejs/guide/how-to-work-with-different-filesystems" data-v-7eeeb2dc><!--[--><span data-v-7eeeb2dc>العربية</span><!--]--></a></div><!--]--></div><div class="group" data-v-f953d92f><div class="item appearance" data-v-f953d92f><p class="label" data-v-f953d92f>Тема</p><div class="appearance-action" data-v-f953d92f><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-f953d92f data-v-be9742d9 data-v-b4ccac88><span class="check" data-v-b4ccac88><span class="icon" data-v-b4ccac88><!--[--><span class="vpi-sun sun" data-v-be9742d9></span><span class="vpi-moon moon" data-v-be9742d9></span><!--]--></span></span></button></div></div></div><!----><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-cb5e22fa data-v-6bee1efd><span class="container" data-v-6bee1efd><span class="top" data-v-6bee1efd></span><span class="middle" data-v-6bee1efd></span><span class="bottom" data-v-6bee1efd></span></span></button></div></div></div></div><div class="divider" data-v-cb5e22fa><div class="divider-line" data-v-cb5e22fa></div></div></div><!----></header><div class="VPLocalNav has-sidebar empty" data-v-4539713c data-v-6c0451ca><div class="container" data-v-6c0451ca><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-6c0451ca><span class="vpi-align-left menu-icon" data-v-6c0451ca></span><span class="menu-text" data-v-6c0451ca>Меню</span></button><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-6c0451ca data-v-92b7576c><button data-v-92b7576c>Вернуться наверх</button><!----></div></div></div><aside class="VPSidebar" data-v-4539713c data-v-606f96d3><div class="curtain" data-v-606f96d3></div><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-606f96d3><span class="visually-hidden" id="sidebar-aria-label" data-v-606f96d3> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="no-transition group" data-v-a84b7c21><section class="VPSidebarItem level-0 collapsible collapsed" data-v-a84b7c21 data-v-6b36a2fd><div class="item" role="button" tabindex="0" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><h2 class="text" data-v-6b36a2fd>Введение</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-6b36a2fd><span class="vpi-chevron-right caret-icon" data-v-6b36a2fd></span></div></div><div class="items" data-v-6b36a2fd><!--[--><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/ru/nodejs/guide/what-is-nodejs" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>Введение</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/ru/nodejs/guide/how-to-install-nodejs" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>Как установить Node.js</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/ru/nodejs/guide/javascript-for-nodejs" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>JavaScript в Node.js</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/ru/nodejs/guide/differences-between-node-and-browser" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>Различия между Node.js и браузером</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/ru/nodejs/guide/v8-engine" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>JavaScript V8 Engine</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/ru/nodejs/guide/npm-package-manager" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>Менеджер пакетов Npm</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/ru/nodejs/guide/ECMAScript-2015(ES6)-and-beyond" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>ECMAScript 2015 (ES6) и последующие версии</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/ru/nodejs/guide/the-difference-between-development-and-production" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>Node.js: различие между разработкой и продакшеном</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/ru/nodejs/guide/nodejs-with-typescript" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>Node.js с TypeScript</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/ru/nodejs/guide/nodejs-with-webassembly" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>Node.js с WebAssembly</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/ru/nodejs/guide/debugging-nodejs" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>Отладка в Node.js</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/ru/nodejs/guide/profiling-nodejs-applications" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>Профилирование приложений Node.js</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/ru/nodejs/guide/security-best-practices" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>Лучшие практики безопасности</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-a84b7c21><section class="VPSidebarItem level-0 collapsible collapsed" data-v-a84b7c21 data-v-6b36a2fd><div class="item" role="button" tabindex="0" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><h2 class="text" data-v-6b36a2fd>Асинхронная работа</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-6b36a2fd><span class="vpi-chevron-right caret-icon" data-v-6b36a2fd></span></div></div><div class="items" data-v-6b36a2fd><!--[--><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/ru/nodejs/guide/asynchronous-flow-control" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>Контроль асинхронного потока</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/ru/nodejs/guide/overview-of-blocking-vs-non-blocking" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>Обзор блокирующих и неблокирующих операций</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/ru/nodejs/guide/javascript-asynchronous-programming-and-callbacks" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>Асинхронное программирование на JavaScript и колбэки</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/ru/nodejs/guide/discover-javascript-timer" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>Обзор таймеров JavaScript</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/ru/nodejs/guide/nodejs-event-loop" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>Цикл событий в Node.js</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/ru/nodejs/guide/nodejs-event-emitter" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>Эмиттер событий в Node.js</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/ru/nodejs/guide/understanding-process-nexttick" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>Понимание process.nextTick()</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/ru/nodejs/guide/understanding-setimmediate" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>Понимание setImmediate()</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/ru/nodejs/guide/dont-block-the-event-loop" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>Не блокируйте цикл событий</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-a84b7c21><section class="VPSidebarItem level-0 collapsible collapsed has-active" data-v-a84b7c21 data-v-6b36a2fd><div class="item" role="button" tabindex="0" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><h2 class="text" data-v-6b36a2fd>Работа с файлами</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-6b36a2fd><span class="vpi-chevron-right caret-icon" data-v-6b36a2fd></span></div></div><div class="items" data-v-6b36a2fd><!--[--><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/ru/nodejs/guide/nodejs-file-stats" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>Статистика файлов в Node.js</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/ru/nodejs/guide/nodejs-file-path" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>Файловые пути в Node.js</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/ru/nodejs/guide/working-with-file-descriptors-in-nodejs" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>Работа с файловыми дескрипторами в Node.js</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/ru/nodejs/guide/reading-files-with-nodejs" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>Чтение файлов с помощью Node.js</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/ru/nodejs/guide/writing-files-with-nodejs" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>Запись файлов с помощью Node.js</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/ru/nodejs/guide/working-with-folders-in-nodejs" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>Работа с папками в Node.js</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/ru/nodejs/guide/how-to-work-with-different-filesystems" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>Работа с различными файловыми системами</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-a84b7c21><section class="VPSidebarItem level-0 collapsible collapsed" data-v-a84b7c21 data-v-6b36a2fd><div class="item" role="button" tabindex="0" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><h2 class="text" data-v-6b36a2fd>Командная строка</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-6b36a2fd><span class="vpi-chevron-right caret-icon" data-v-6b36a2fd></span></div></div><div class="items" data-v-6b36a2fd><!--[--><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/ru/nodejs/guide/run-nodejs-scripts-from-the-command-line" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>Выполнение скриптов Node.js из командной строки</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/ru/nodejs/guide/how-to-read-environment-variables-from-nodejs" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>Чтение переменных окружения в Node.js</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/ru/nodejs/guide/how-to-use-the-nodejs-repl" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>Использование REPL в Node.js</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/ru/nodejs/guide/output-to-the-command-line-using-nodejs" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>Вывод в командную строку с помощью Node.js</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/ru/nodejs/guide/accept-input-from-the-command-line-in-nodejs" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>Принятие ввода из командной строки в Node.js</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-a84b7c21><section class="VPSidebarItem level-0 collapsible collapsed" data-v-a84b7c21 data-v-6b36a2fd><div class="item" role="button" tabindex="0" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><h2 class="text" data-v-6b36a2fd>Модули</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-6b36a2fd><span class="vpi-chevron-right caret-icon" data-v-6b36a2fd></span></div></div><div class="items" data-v-6b36a2fd><!--[--><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/ru/nodejs/guide/how-to-publish-a-nodejs-package" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>Публикация пакета Node.js</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/ru/nodejs/guide/anatomy-of-an-http-transaction" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>Анатомия HTTP-транзакции</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/ru/nodejs/guide/abi-stability" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>Стабильность ABI</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/ru/nodejs/guide/backpressuring-in-streams" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>Обработка обратного давления в потоках</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-a84b7c21><section class="VPSidebarItem level-0 collapsible collapsed" data-v-a84b7c21 data-v-6b36a2fd><div class="item" role="button" tabindex="0" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><h2 class="text" data-v-6b36a2fd>Диагностика</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-6b36a2fd><span class="vpi-chevron-right caret-icon" data-v-6b36a2fd></span></div></div><div class="items" data-v-6b36a2fd><!--[--><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/ru/nodejs/guide/user-journey" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>Пользовательский опыт</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/ru/nodejs/guide/memory" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>Память</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/ru/nodejs/guide/live-debugging" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>Отладка в реальном времени</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/ru/nodejs/guide/poor-performance" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>Плохая производительность</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/ru/nodejs/guide/flame-graphs" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>Пламеграфы</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-a84b7c21><section class="VPSidebarItem level-0 collapsible collapsed" data-v-a84b7c21 data-v-6b36a2fd><div class="item" role="button" tabindex="0" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><h2 class="text" data-v-6b36a2fd>Тестовый раннер</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-6b36a2fd><span class="vpi-chevron-right caret-icon" data-v-6b36a2fd></span></div></div><div class="items" data-v-6b36a2fd><!--[--><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/ru/nodejs/guide/discovering-nodejs-test-runner" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>Изучение тестового раннера Node.js</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-6b36a2fd data-v-6b36a2fd><div class="item" data-v-6b36a2fd><div class="indicator" data-v-6b36a2fd></div><a class="VPLink link link" href="/ru/nodejs/guide/using-nodejs-test-runner" data-v-6b36a2fd><!--[--><p class="text" data-v-6b36a2fd>Использование тестового раннера Node.js</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-4539713c data-v-2652e39a><div class="VPDoc has-sidebar has-aside" data-v-2652e39a data-v-d668f7cc><!--[--><!--]--><div class="container" data-v-d668f7cc><div class="aside" data-v-d668f7cc><div class="aside-curtain" data-v-d668f7cc></div><div class="aside-container" data-v-d668f7cc><div class="aside-content" data-v-d668f7cc><div class="VPDocAside" data-v-d668f7cc data-v-cb998dce><!--[--><!--]--><!--[--><!--]--><nav aria-labelledby="doc-outline-aria-label" class="VPDocAsideOutline" data-v-cb998dce data-v-c8b19031><div class="content" data-v-c8b19031><div class="outline-marker" data-v-c8b19031></div><div aria-level="2" class="outline-title" id="doc-outline-aria-label" role="heading" data-v-c8b19031>Навигация по странице</div><ul class="VPDocOutlineItem root" data-v-c8b19031 data-v-b7d7ef80><!--[--><!--]--></ul></div></nav><!--[--><!--]--><div class="spacer" data-v-cb998dce></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-d668f7cc><div class="content-container" data-v-d668f7cc><!--[--><!--]--><main class="main" data-v-d668f7cc><div style="position:relative;" class="vp-doc _ru_nodejs_guide_how-to-work-with-different-filesystems" data-v-d668f7cc><div><h1 id="как-работать-с-различными-фаиловыми-системами" tabindex="-1">Как работать с различными файловыми системами <a class="header-anchor" href="#как-работать-с-различными-фаиловыми-системами" aria-label="Permalink to “Как работать с различными файловыми системами”">​</a></h1><p>Node.js предоставляет множество возможностей для работы с файловыми системами. Но не все файловые системы одинаковы. Ниже приведены предлагаемые передовые методы, которые помогут вам сделать ваш код простым и безопасным при работе с различными файловыми системами.</p><h2 id="поведение-фаиловои-системы" tabindex="-1">Поведение файловой системы <a class="header-anchor" href="#поведение-фаиловои-системы" aria-label="Permalink to “Поведение файловой системы”">​</a></h2><p>Прежде чем вы сможете работать с файловой системой, вам нужно знать, как она себя ведет. Различные файловые системы ведут себя по-разному и имеют больше или меньше функций, чем другие: чувствительность к регистру, нечувствительность к регистру, сохранение регистра, сохранение формы Unicode, разрешение меток времени, расширенные атрибуты, inodes, разрешения Unix, альтернативные потоки данных и т. д.</p><p>Будьте осторожны, делая выводы о поведении файловой системы из <code>process.platform</code>. Например, не предполагайте, что поскольку ваша программа работает на Darwin, вы работаете с файловой системой, нечувствительной к регистру (HFS+), поскольку пользователь может использовать файловую систему, чувствительную к регистру (HFSX). Точно так же не предполагайте, что поскольку ваша программа работает на Linux, вы работаете с файловой системой, которая поддерживает разрешения Unix и inodes, поскольку вы можете находиться на определенном внешнем диске, USB-накопителе или сетевом диске, который этого не делает.</p><p>Операционная система может затруднить определение поведения файловой системы, но не все потеряно. Вместо того чтобы вести список каждой известной файловой системы и поведения (который всегда будет неполным), вы можете исследовать файловую систему, чтобы увидеть, как она себя ведет на самом деле. Наличия или отсутствия определенных функций, которые легко проверить, часто достаточно, чтобы сделать вывод о поведении других функций, которые труднее проверить.</p><p>Помните, что у некоторых пользователей могут быть разные файловые системы, подключенные по различным путям в рабочем дереве.</p><h2 id="избегаите-подхода-наименьшего-общего-знаменателя" tabindex="-1">Избегайте подхода наименьшего общего знаменателя <a class="header-anchor" href="#избегаите-подхода-наименьшего-общего-знаменателя" aria-label="Permalink to “Избегайте подхода наименьшего общего знаменателя”">​</a></h2><p>У вас может возникнуть соблазн заставить вашу программу вести себя как файловая система с наименьшим общим знаменателем, нормализуя все имена файлов к верхнему регистру, нормализуя все имена файлов к форме NFC Unicode и нормализуя все метки времени файлов, скажем, до разрешения в 1 секунду. Это был бы подход наименьшего общего знаменателя.</p><p>Не делайте этого. Вы сможете безопасно взаимодействовать только с файловой системой, которая имеет точно такие же характеристики наименьшего общего знаменателя во всех отношениях. Вы не сможете работать с более продвинутыми файловыми системами так, как ожидают пользователи, и столкнетесь с конфликтами имен файлов или меток времени. Вы, скорее всего, потеряете и повредите пользовательские данные в результате серии сложных зависимых событий и создадите ошибки, которые будет трудно, если не невозможно, решить.</p><p>Что произойдет, если вам позже потребуется поддержка файловой системы, которая имеет разрешение метки времени только 2 секунды или 24 часа? Что произойдет, когда стандарт Unicode продвинется вперед, включив немного другой алгоритм нормализации (как это уже было в прошлом)?</p><p>Подход наименьшего общего знаменателя будет склонен к попытке создать переносимую программу, используя только «переносимые» системные вызовы. Это приводит к программам, которые являются дырявыми и на самом деле не переносимыми.</p><h2 id="применение-подхода-расширенного-набора-функции" tabindex="-1">Применение подхода расширенного набора функций <a class="header-anchor" href="#применение-подхода-расширенного-набора-функции" aria-label="Permalink to “Применение подхода расширенного набора функций”">​</a></h2><p>Чтобы максимально эффективно использовать каждую поддерживаемую платформу, применяйте подход расширенного набора функций. Например, портативная программа резервного копирования должна правильно синхронизировать <code>btimes</code> (время создания файла или папки) между системами Windows и не должна уничтожать или изменять <code>btimes</code>, даже если <code>btimes</code> не поддерживаются в системах Linux. Та же портативная программа резервного копирования должна правильно синхронизировать разрешения Unix между системами Linux и не должна уничтожать или изменять разрешения Unix, даже если разрешения Unix не поддерживаются в системах Windows.</p><p>Обрабатывайте разные файловые системы, заставляя вашу программу вести себя как более продвинутая файловая система. Поддерживайте расширенный набор всех возможных функций: чувствительность к регистру, сохранение регистра, чувствительность к форме Unicode, сохранение формы Unicode, разрешения Unix, наносекундные временные метки высокого разрешения, расширенные атрибуты и т.д.</p><p>Как только в вашей программе появляется сохранение регистра, вы всегда можете реализовать нечувствительность к регистру, если вам нужно взаимодействовать с файловой системой, нечувствительной к регистру. Но если вы откажетесь от сохранения регистра в своей программе, вы не сможете безопасно взаимодействовать с файловой системой, сохраняющей регистр. То же самое верно для сохранения формы Unicode и сохранения разрешения временных меток.</p><p>Если файловая система предоставляет вам имя файла в смеси строчных и прописных букв, то сохраняйте имя файла в точности в том регистре, в котором оно было дано. Если файловая система предоставляет вам имя файла в смешанной форме Unicode или NFC или NFD (или NFKC или NFKD), то сохраняйте имя файла в точности в данной последовательности байтов. Если файловая система предоставляет вам временную метку в миллисекундном разрешении, то сохраняйте временную метку в миллисекундном разрешении.</p><p>При работе с менее совершенной файловой системой вы всегда можете выполнить соответствующую понижающую дискретизацию, используя функции сравнения, требуемые поведением файловой системы, на которой работает ваша программа. Если вы знаете, что файловая система не поддерживает разрешения Unix, то не следует ожидать чтения тех же разрешений Unix, которые вы записываете. Если вы знаете, что файловая система не сохраняет регистр, то вы должны быть готовы увидеть <code>ABC</code> в листинге каталога, когда ваша программа создает <code>abc</code>. Но если вы знаете, что файловая система сохраняет регистр, то вы должны рассматривать <code>ABC</code> как имя файла, отличное от <code>abc</code>, при обнаружении переименований файлов или если файловая система чувствительна к регистру.</p><h2 id="сохранение-регистра" tabindex="-1">Сохранение регистра <a class="header-anchor" href="#сохранение-регистра" aria-label="Permalink to “Сохранение регистра”">​</a></h2><p>Вы можете создать каталог с именем <code>test /abc</code> и удивиться, увидев, что иногда <code>fs.readdir(&#39;test&#39;)</code> возвращает <code>[&#39;ABC&#39;]</code>. Это не ошибка в Node. Node возвращает имя файла в том виде, в котором оно хранится в файловой системе, и не все файловые системы поддерживают сохранение регистра. Некоторые файловые системы преобразуют все имена файлов в верхний (или нижний) регистр.</p><h2 id="сохранение-формы-unicode" tabindex="-1">Сохранение формы Unicode <a class="header-anchor" href="#сохранение-формы-unicode" aria-label="Permalink to “Сохранение формы Unicode”">​</a></h2><p>Сохранение регистра и сохранение формы Unicode — схожие концепции. Чтобы понять, почему следует сохранять форму Unicode, убедитесь, что вы сначала поняли, почему следует сохранять регистр. Сохранение формы Unicode так же просто, если его правильно понять. Unicode может кодировать одни и те же символы, используя несколько разных последовательностей байтов. Несколько строк могут выглядеть одинаково, но иметь разные последовательности байтов. При работе со строками UTF-8 будьте осторожны, чтобы ваши ожидания соответствовали тому, как работает Unicode. Так же, как вы не ожидаете, что все символы UTF-8 будут кодироваться одним байтом, вы не должны ожидать, что несколько строк UTF-8, которые выглядят одинаково для человеческого глаза, будут иметь одинаковое байтовое представление. Это может быть ожиданием, которое вы можете иметь от ASCll, но не от UTF-8.</p><p>Вы можете создать каталог с именем <code>test/ café</code> (форма NFC Unicode с байтовой последовательностью <code>&lt;63 61 66 c3 a9&gt;</code> и <code>string.length ===5</code>) и удивиться, увидев, что иногда <code>fs.readdir(&#39;test&#39;)</code> возвращает <code>[&#39;café&#39;]</code> (форма NFD Unicode с байтовой последовательностью <code>&lt;63 61 66 65 cc 81&gt;</code> и <code>string.length ===6</code>). Это не ошибка в Node. Node.js возвращает имя файла в том виде, в котором оно хранится в файловой системе, и не все файловые системы поддерживают сохранение формы Unicode. HFS+, например, нормализует все имена файлов до формы, почти всегда совпадающей с формой NFD. Не ожидайте, что HFS+ будет вести себя так же, как NTFS или EXT 4, и наоборот. Не пытайтесь изменить данные навсегда посредством нормализации в качестве &quot;дырявой абстракции&quot;, чтобы скрыть различия Unicode между файловыми системами. Это создаст проблемы, не решив ни одной. Скорее, сохраняйте форму Unicode и используйте нормализацию только в качестве функции сравнения.</p><h2 id="нечувствительность-к-форме-unicode" tabindex="-1">Нечувствительность к форме Unicode <a class="header-anchor" href="#нечувствительность-к-форме-unicode" aria-label="Permalink to “Нечувствительность к форме Unicode”">​</a></h2><p>Нечувствительность к форме Unicode и сохранение формы Unicode — это два разных поведения файловой системы, которые часто ошибочно принимают одно за другое. Подобно тому, как нечувствительность к регистру иногда некорректно реализуется путем постоянной нормализации имен файлов к верхнему регистру при хранении и передаче имен файлов, так и нечувствительность к форме Unicode иногда некорректно реализуется путем постоянной нормализации имен файлов к определенной форме Unicode (NFD в случае HFS+) при хранении и передаче имен файлов. Можно и гораздо лучше реализовать нечувствительность к форме Unicode без ущерба для сохранения формы Unicode, используя нормализацию Unicode только для сравнения.</p><h2 id="сравнение-различных-форм-unicode" tabindex="-1">Сравнение различных форм Unicode <a class="header-anchor" href="#сравнение-различных-форм-unicode" aria-label="Permalink to “Сравнение различных форм Unicode”">​</a></h2><p>Node.js предоставляет <code>string.normalize (&#39;NFC&#39; / &#39;NFD&#39;)</code>, который вы можете использовать для нормализации строки UTF-8 либо в NFC, либо в NFD. Никогда не следует сохранять вывод этой функции, а использовать его только как часть функции сравнения, чтобы проверить, будут ли две строки UTF-8 выглядеть одинаково для пользователя. Вы можете использовать <code>string1.normalize(&#39;NFC&#39;)=== string2.normalize(&#39;NFC&#39;)</code> или <code>string1.normalize(&#39;NFD&#39;)=== string2.normalize(&#39;NFD&#39;)</code> в качестве вашей функции сравнения. Какую форму использовать, не имеет значения.</p><p>Нормализация происходит быстро, но вы можете использовать кеш в качестве входных данных для вашей функции сравнения, чтобы избежать многократной нормализации одной и той же строки. Если строка отсутствует в кеше, то нормализуйте ее и закешируйте. Будьте осторожны, не храните и не сохраняйте кеш, используйте его только как кеш.</p><p>Обратите внимание, что использование <code>normalize ()</code> требует, чтобы ваша версия Node.js включала ICU (в противном случае <code>normalize ()</code> просто вернет исходную строку). Если вы скачаете последнюю версию Node.js с веб-сайта, она будет включать ICU.</p><h2 id="разрешение-временных-меток" tabindex="-1">Разрешение временных меток <a class="header-anchor" href="#разрешение-временных-меток" aria-label="Permalink to “Разрешение временных меток”">​</a></h2><p>Вы можете установить mtime (время изменения) файла на 1444291759414 (разрешение в миллисекундах) и быть удивлены, увидев иногда, что <code>fs.stat</code> возвращает новое mtime как 1444291759000 (разрешение в 1 секунду) или 1444291758000 (разрешение в 2 секунды). Это не ошибка в Node. Node.js возвращает временную метку в том виде, в котором ее хранит файловая система, и не все файловые системы поддерживают разрешение временных меток в наносекундах, миллисекундах или 1 секунду. Некоторые файловые системы даже имеют очень грубое разрешение, в частности, для временной метки atime, например, 24 часа для некоторых файловых систем FAT.</p><h2 id="не-искажаите-имена-фаилов-и-метки-времени-посредством-нормализации" tabindex="-1">Не Искажайте Имена Файлов и Метки Времени посредством Нормализации <a class="header-anchor" href="#не-искажаите-имена-фаилов-и-метки-времени-посредством-нормализации" aria-label="Permalink to “Не Искажайте Имена Файлов и Метки Времени посредством Нормализации”">​</a></h2><p>Имена файлов и метки времени являются пользовательскими данными. Точно так же, как вы никогда не стали бы автоматически переписывать пользовательские данные файла, переводя данные в верхний регистр или нормализуя CRLF в окончания строк LF, так и вы никогда не должны изменять, вмешиваться или искажать имена файлов или метки времени посредством нормализации регистра / формы Unicode / метки времени. Нормализация должна использоваться только для сравнения, но никогда для изменения данных.</p><p>Нормализация - это фактически хеш-код с потерями. Вы можете использовать его для проверки определенных видов эквивалентности (например, выглядят ли несколько строк одинаково, даже если у них разные последовательности байтов), но вы никогда не сможете использовать его в качестве замены фактических данных. Ваша программа должна передавать данные имени файла и метки времени как есть.</p><p>Ваша программа может создавать новые данные в NFC (или в любой комбинации предпочитаемой ею формы Unicode), или с именем файла в нижнем или верхнем регистре, или с меткой времени с разрешением 2 секунды, но ваша программа не должна искажать существующие пользовательские данные, навязывая нормализацию регистра / формы Unicode / метки времени. Скорее, примите подход надмножества и сохраняйте регистр, форму Unicode и разрешение метки времени в своей программе. Таким образом, вы сможете безопасно взаимодействовать с файловыми системами, которые делают то же самое.</p><h2 id="используите-функции-сравнения-нормализации-правильно" tabindex="-1">Используйте Функции Сравнения Нормализации Правильно <a class="header-anchor" href="#используите-функции-сравнения-нормализации-правильно" aria-label="Permalink to “Используйте Функции Сравнения Нормализации Правильно”">​</a></h2><p>Убедитесь, что вы используете функции сравнения регистра / формы Unicode / метки времени правильно. Не используйте функцию сравнения имен файлов без учета регистра, если вы работаете в файловой системе с учетом регистра. Не используйте функцию сравнения без учета формы Unicode, если вы работаете в файловой системе, чувствительной к форме Unicode (например, NTFS и большинство файловых систем Linux, которые сохраняют как NFC, так и NFD или смешанные формы Unicode). Не сравнивайте метки времени с разрешением 2 секунды, если вы работаете в файловой системе с разрешением метки времени в наносекундах.</p><h2 id="будьте-готовы-к-незначительным-различиям-в-функциях-сравнения" tabindex="-1">Будьте Готовы к Незначительным Различиям в Функциях Сравнения <a class="header-anchor" href="#будьте-готовы-к-незначительным-различиям-в-функциях-сравнения" aria-label="Permalink to “Будьте Готовы к Незначительным Различиям в Функциях Сравнения”">​</a></h2><p>Будьте внимательны к тому, чтобы ваши функции сравнения соответствовали функциям файловой системы (или проверьте файловую систему, если это возможно, чтобы увидеть, как она на самом деле будет сравнивать). Например, нечувствительность к регистру сложнее, чем простое сравнение <code>toLowerCase()</code>. Фактически, <code>toUpperCase()</code> обычно лучше, чем <code>toLowerCase ()</code> (поскольку он по-разному обрабатывает определенные символы иностранных языков). Но еще лучше было бы проверить файловую систему, поскольку в каждой файловой системе есть своя собственная встроенная таблица сравнения регистров.</p><p>В качестве примера, Apple HFS+ нормализует имена файлов в форму NFD, но эта форма NFD на самом деле является более старой версией текущей формы NFD и иногда может немного отличаться от формы NFD последнего стандарта Unicode. Не ожидайте, что HFS+ NFD будет точно таким же, как Unicode NFD все время.</p></div></div></main><footer class="VPDocFooter" data-v-d668f7cc data-v-1bcd8184><!--[--><!--]--><!----><nav class="prev-next" aria-labelledby="doc-footer-aria-label" data-v-1bcd8184><span class="visually-hidden" id="doc-footer-aria-label" data-v-1bcd8184>Pager</span><div class="pager" data-v-1bcd8184><a class="VPLink link pager-link prev" href="/ru/nodejs/guide/working-with-folders-in-nodejs" data-v-1bcd8184><!--[--><span class="desc" data-v-1bcd8184>Предыдущая страница</span><span class="title" data-v-1bcd8184>Работа с папками в Node.js</span><!--]--></a></div><div class="pager" data-v-1bcd8184><a class="VPLink link pager-link next" href="/ru/nodejs/guide/run-nodejs-scripts-from-the-command-line" data-v-1bcd8184><!--[--><span class="desc" data-v-1bcd8184>Следующая страница</span><span class="title" data-v-1bcd8184>Выполнение скриптов Node.js из командной строки</span><!--]--></a></div></nav></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><footer class="VPFooter has-sidebar" data-v-4539713c data-v-5b9946f5><div class="container" data-v-5b9946f5><p class="message" data-v-5b9946f5><a href="https://idoc.dev/ru/privacy">Политика конфиденциальности</a></p><p class="copyright" data-v-5b9946f5>Все права защищены © 2024-настоящее время <a href="https://idoc.dev/ru/">iDoc.dev</a></p></div></footer><!--[--><!--]--></div></div>
    
    
  </body>
</html>